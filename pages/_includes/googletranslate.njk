<script type="text/javascript">
  {
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({
          pageLanguage: 'en',
          layout: google.translate.TranslateElement.InlineLayout.SIMPLE
         },
        'google_translate_element'
      );
    }

    function addGoogleTranslateCode() {
      const slug = '{{ page.fileSlug }}';
      const storagekey = 'google_translate_page_used';
  
      if (slug==='translate') sessionStorage.setItem(storagekey, new Date().getTime());
    
      if (sessionStorage.getItem(storagekey)) {
        const JS= document.createElement('script');
        JS.type='text/javascript';
        JS.defer='defer';
        JS.src='//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit';
        document.body.appendChild(JS);
      }
    }

    addGoogleTranslateCode();
  }({});
  </script>