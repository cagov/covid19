---
layout: "page.njk"
title: "Search"
meta: "Search the Covid19 website."
author: "State of California"
publishdate: "2020-03-23T22:00:00Z"
addtositemap: true
---
<style>
  .aside { 
		position: relative!important;
	}
	a.gs-title, a.gs-title b {
    font-size: 1.5rem!important;
    color: #003d9d!important;
    font-weight: 400;
	}
	.gs-bidi-start-align.gs-visibleUrl.gs-visibleUrl-long {
    display: none;
	}
	.gs-bidi-start-align.gs-snippet {
    font-size: 1rem;
	}
	#answersNow .accordion-title {
    font-size: 1.3rem;
    color: #003d9d;
	}
	.gsc-above-wrapper-area {
		display: none;
	}
	.gsc-control-cse {
    padding: 0;
	}
</style>

<h2>Search this website</h2>
<label id="SearchInput" for="q">Enter your search text</label>
<form action="/search/" class="form-inline">

  <input type="text" class="form-control col-md-6" id="q" name="q" aria-labelledby="SearchInput" autofocus />
	<button type="submit"  class="btn btn-primary">Search</button>	  
</form>

<div id="answersNow"></div>

<h4>Related pages on this website</h4>
<gcse:searchresults-only></gcse:searchresults-only>

<script>
	const cx = '003358532045999200914:uxxka6d3pge';
	const gcse = document.createElement('script');
	gcse.type = 'text/javascript';
	gcse.async = true;
	gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
	const s = document.getElementsByTagName('script');
	s[s.length - 1].parentNode.insertBefore(gcse, s[s.length - 1]);

	const urlParam = function (name) {
		var results = new RegExp('[\?&]' + name + '=([^&#]*)')
			.exec(window.location.search);

		return (results !== null) ? results[1] || 0 : false;
	}
	const urlq = urlParam('q')||'';
  const query = decodeURIComponent(urlq.replace(/\+/g,' '));
  document.querySelector('input[name=q]').value = query;
</script> 

<script>	
	const myWebSearchStartingCallback = (query) => {
		let currentHost = `${window.location.protocol}//${window.location.hostname}`;
		if(window.location.port !== '80') {
			currentHost += `:${window.location.port}`;
		}
		history.pushState(null,null,`${currentHost}${window.location.pathname}?q=${query}`);
		document.querySelector('#answersNow').innerHTML = "";
		fetch(`https://fa-go-alph-covidqna-001.azurewebsites.net/api/CovidAnswer?q=${query}&name=123`)
		.then(response => response.json())
		.then(data => {
			let answers = [...data[0].answers];
			if(answers[0].questions.length > 0) {
				let html = `<h4>Quick answers</h4>
					${answers.map(function(a) {
						if(a.questions.length > 0) {
							return `<cwds-accordion>
								<div class="card"><button class="card-header accordion-alpha" type="button" aria-expanded="false">
										<div class="accordion-title">${a.questions.join(' ')}</div>
									</button>
									<div class="card-container collapsed">
										<div class="card-body">
											<p>${a.answer}</p>
										</div>
									</div>
								</div>
							</cwds-accordion>`;
						} else {
							return '';
						}
				}).join('	')}`
				document.querySelector('#answersNow').innerHTML = html;
				// send an event that we got quick answers	
				if(typeof(ga) !== 'undefined') {
					ga('send', 'event', 'search', 'got_quick_answers', query.toLowerCase());
				}
			} else {
				// send an event with or without answers
				if(typeof(ga) !== 'undefined') {
					ga('send', 'event', 'search', 'no_quick_answers', query.toLowerCase());
				}
			}
		});
	}
	myWebSearchStartingCallback(query)
</script> 