<!DOCTYPE html>
<html lang="zh-Hant" xml:lang="zh-Hant">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="所有加州民眾，不論其居住的地方、工作環境、社會支援或身份如何，都值得擁有健康的生活。您將在本頁面中了解以下內容： 加州正如何解決健康公平問題 本州多元化社區的差異概況 加州公平地重新開放計劃 查看有關您所在縣內的社區受影響程度的數據 了解其他因素 […]">
    <meta name="author" content="State of California">
     
  <title>加州致力於實現健康公平 - Coronavirus COVID-19 Response</title>


    <!-- Collect errors -->
    <script>addEventListener('error', window.__e=function f(e){f.q=f.q||[];f.q.push(e)});</script>

    <meta content="加州致力於實現健康公平" property="og:title">
    <meta content="所有加州民眾，不論其居住的地方、工作環境、社會支援或身份如何，都值得擁有健康的生活。您將在本頁面中了解以下內容： 加州正如何解決健康公平問題 本州多元化社區的差異概況 加州公平地重新開放計劃 查看有關您所在縣內的社區受影響程度的數據 了解其他因素 […]" property="og:description">
    <meta name="twitter:card" content="summary_large_image">

    <link rel="preconnect" href="https://www.google-analytics.com/">
    <link href="https://covid19.ca.gov/zh-hant/equity/" rel="canonical">

    <link rel="manifest" href="/img/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="img/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <link rel="alternate" hreflang="en" href="https://covid19.ca.gov/equity/"><link rel="alternate" hreflang="es" href="https://covid19.ca.gov/es/equity/"><link rel="alternate" hreflang="tl" href="https://covid19.ca.gov/tl/equity/"><link rel="alternate" hreflang="ar" href="https://covid19.ca.gov/ar/equity/"><link rel="alternate" hreflang="ko" href="https://covid19.ca.gov/ko/equity/"><link rel="alternate" hreflang="vi" href="https://covid19.ca.gov/vi/equity/"><link rel="alternate" hreflang="zh-Hans" href="https://covid19.ca.gov/zh-hans/equity/">

    <!-- Favicons -->
<link rel="apple-touch-icon" sizes="180x180" href="/img/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/img/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/img/icons/favicon-16x16.png">
<link rel="manifest" href="/img/icons/site.webmanifest">
<link rel="mask-icon" href="/img/icons/safari-pinned-tab.svg" color="#1f2574">
<meta name="msapplication-TileColor" content="#1f2574">

    
  <meta name="keywords" content="covid19, coronavirus, covid19, covid-19, california">
  
    <meta content="https://covid19.ca.gov/img/awareness/CAForAll_COVID_EndCards_v4_English.jpg" property="og:image">
  
  <meta property="og:url" content="https://covid19.ca.gov/zh-hant/equity/">


    
	
  
    <style>
      /*!
 * Bootstrap v4.3.1 (https://getbootstrap.com/)
 * Copyright 2011-2019 The Bootstrap Authors
 * Copyright 2011-2019 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */:root{--blue:#0d6efd;--indigo:#6610f2;--purple:#6f42c1;--pink:#d63384;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#0d6efd;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,:after,:before{box-sizing:border-box}body{-webkit-tap-highlight-color:rgba(0,0,0,0);background-color:#fff;color:#212529;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-size:1rem;font-weight:400;line-height:1.5;margin:0;-webkit-text-size-adjust:100%}[tabindex="-1"]:focus:not(:focus-visible){outline:0!important}hr{background-color:currentColor;border:0;color:inherit;margin:1rem 0;opacity:.25}hr:not([size]){height:1px}.h1,.h2,.h3,.h4,.h5,h1,h2,h3,h4,h5{font-weight:500;line-height:1.2;margin-bottom:.5rem;margin-top:0}.h1,h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){.h1,h1{font-size:2.5rem}}.h2,h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){.h2,h2{font-size:2rem}}.h3,h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){.h3,h3{font-size:1.75rem}}.h4,h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){.h4,h4{font-size:1.5rem}}.h5,h5{font-size:1.25rem}p{margin-top:0}address,p{margin-bottom:1rem}address{line-height:inherit}ol,ul{margin-bottom:1rem;margin-top:0;padding-left:2rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}.small,small{font-size:.875em}sup{font-size:.75em}a{color:#0d6efd}a:hover{color:#024dbc;text-decoration:underline}a:not([href]),a:not([href]):hover{color:inherit;text-decoration:none}code{word-wrap:break-word;color:#d63384;font-family:SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:.875em}a>code{color:inherit}figure{margin:0 0 1rem}img,svg{vertical-align:middle}svg{overflow:hidden}table{border-collapse:collapse}caption{caption-side:bottom;color:#6c757d;padding-bottom:.5rem;padding-top:.5rem;text-align:left}th{text-align:inherit}label{display:inline-block;margin-bottom:.5rem}button{border-radius:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}button,input,select,textarea{font-size:inherit;line-height:inherit}select{word-wrap:normal}[list]::-webkit-calendar-picker-indicator{display:none}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}input[type=date],input[type=month],input[type=time]{-webkit-appearance:textfield}textarea{resize:vertical}legend{float:left;font-size:calc(1.275rem + .3vw);line-height:inherit;margin-bottom:.5rem;width:100%}@media (min-width:1200px){legend{font-size:1.5rem}}.mark,mark{background-color:#fcf8e3;padding:.2em}output{display:inline-block}template{display:none}[hidden]{display:none!important}.lead{font-size:1.25rem;font-weight:300}.display-4{font-size:calc(1.475rem + 2.7vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-4{font-size:3.5rem}}.blockquote{font-size:1.25rem;margin-bottom:1rem}.img-fluid{height:auto;max-width:100%}.figure{display:inline-block}.container,.container-fluid{margin-left:auto;margin-right:auto;padding-left:15px;padding-right:15px;width:100%}@media (min-width:576px){.container{max-width:540px}}@media (min-width:768px){.container{max-width:720px}}@media (min-width:992px){.container{max-width:960px}}@media (min-width:1200px){.container{max-width:1140px}}.row{display:flex;flex-wrap:wrap;margin-left:-15px;margin-right:-15px}.col,.col-10,.col-lg-6,.col-lg-8,.col-lg-9,.col-lg-10,.col-lg-12,.col-md-3,.col-md-4,.col-md-6,.col-md-8,.col-md-9,.col-md-10,.col-md-12,.col-md-auto,.col-sm,.col-sm-1,.col-sm-3,.col-sm-12{padding-left:15px;padding-right:15px;position:relative;width:100%}.col{flex-basis:0;flex-grow:1;max-width:100%}.col-10{flex:0 0 83.333333%;max-width:83.333333%}@media (min-width:576px){.col-sm{flex-basis:0;flex-grow:1;max-width:100%}.col-sm-1{flex:0 0 8.333333%;max-width:8.333333%}.col-sm-3{flex:0 0 25%;max-width:25%}.col-sm-12{flex:0 0 100%;max-width:100%}}@media (min-width:768px){.col-md-auto{flex:0 0 auto;max-width:100%;width:auto}.col-md-3{flex:0 0 25%;max-width:25%}.col-md-4{flex:0 0 33.333333%;max-width:33.333333%}.col-md-6{flex:0 0 50%;max-width:50%}.col-md-8{flex:0 0 66.666667%;max-width:66.666667%}.col-md-9{flex:0 0 75%;max-width:75%}.col-md-10{flex:0 0 83.333333%;max-width:83.333333%}.col-md-12{flex:0 0 100%;max-width:100%}}@media (min-width:992px){.col-lg-6{flex:0 0 50%;max-width:50%}.col-lg-8{flex:0 0 66.666667%;max-width:66.666667%}.col-lg-9{flex:0 0 75%;max-width:75%}.col-lg-10{flex:0 0 83.333333%;max-width:83.333333%}.col-lg-12{flex:0 0 100%;max-width:100%}}.table{color:#212529;margin-bottom:1rem;vertical-align:top;width:100%}.table td,.table th{border-bottom:1px solid #dee2e6;padding:.5rem}.table tbody{vertical-align:inherit}.table thead th{border-bottom-color:#495057;vertical-align:bottom}.table tbody+tbody{border-top:2px solid #dee2e6}.form-control{background-clip:padding-box;background-color:#fff;border:1px solid #ced4da;border-radius:.25rem;color:#495057;display:block;font-size:1rem;font-weight:400;line-height:1.5;min-height:calc(1.5em + .75rem + 2px);padding:.375rem .75rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;width:100%}@media (prefers-reduced-motion:reduce){.form-control{transition:none}}.form-control::-ms-expand{background-color:transparent;border:0}.form-control:focus{background-color:#fff;border-color:#8bbafe;box-shadow:0 0 0 .2rem rgba(13,110,253,.25);color:#495057}.form-control::-webkit-input-placeholder{color:#6c757d;opacity:1}.form-control::-moz-placeholder{color:#6c757d;opacity:1}.form-control:-ms-input-placeholder{color:#6c757d;opacity:1}.form-control::-ms-input-placeholder{color:#6c757d;opacity:1}.form-control::placeholder{color:#6c757d;opacity:1}.form-control:disabled{background-color:#e9ecef;opacity:1}.form-control-lg{border-radius:.3rem;font-size:16px;min-height:calc(1.5em + 1rem + 2px);padding:.5rem 1rem}.form-row{display:flex;flex-wrap:wrap;margin-left:-5px;margin-right:-5px}.form-row>.col,.form-row>[class*=col-]{padding-left:5px;padding-right:5px}.form-inline{align-items:center;display:flex;flex-flow:row wrap}@media (min-width:576px){.form-inline label{align-items:center;display:flex;justify-content:center;margin-bottom:0}.form-inline .form-control{display:inline-block;vertical-align:middle;width:auto}}.invalid-feedback{color:#dc3545;display:none;font-size:.875em;margin-top:.25rem;width:100%}.is-invalid~.invalid-feedback{display:block}.form-control.is-invalid{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545'%3E%3Ccircle cx='6' cy='6' r='4.5'/%3E%3Cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3E%3Ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3E%3C/svg%3E");background-position:right calc(.375em + .1875rem) center;background-repeat:no-repeat;background-size:calc(.75em + .375rem) calc(.75em + .375rem);border-color:#dc3545;padding-right:calc(1.5em + .75rem)}.form-control.is-invalid:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}textarea.form-control.is-invalid{background-position:top calc(.375em + .1875rem) right calc(.375em + .1875rem);padding-right:calc(1.5em + .75rem)}.btn{background-color:transparent;border:1px solid transparent;border-radius:.25rem;color:#212529;cursor:pointer;display:inline-block;font-size:1rem;font-weight:400;line-height:1.5;padding:.375rem .75rem;text-align:center;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle}@media (prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn.focus,.btn:focus{box-shadow:0 0 0 .2rem rgba(13,110,253,.25);outline:0}.btn.disabled,.btn:disabled{opacity:.65}a.btn.disabled{pointer-events:none}.btn-primary{background-color:#0d6efd;border-color:#0d6efd}.btn-primary.focus,.btn-primary:focus,.btn-primary:hover{background-color:#025ce2;border-color:#0257d5}.btn-primary.focus,.btn-primary:focus{box-shadow:0 0 0 .2rem rgba(49,132,253,.5);color:#fff}.btn-primary.disabled,.btn-primary:disabled{background-color:#0d6efd;border-color:#0d6efd}.btn-primary:not(:disabled):not(.disabled).active,.btn-primary:not(:disabled):not(.disabled):active,.show>.btn-primary.dropdown-toggle{background-color:#0257d5;border-color:#0252c9;color:#fff}.btn-primary:not(:disabled):not(.disabled).active:focus,.btn-primary:not(:disabled):not(.disabled):active:focus,.show>.btn-primary.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(49,132,253,.5)}.btn-link{color:#0d6efd;font-weight:400;text-decoration:none}.btn-link:hover{color:#024dbc;text-decoration:underline}.btn-link.focus,.btn-link:focus{box-shadow:none;text-decoration:underline}.btn-link.disabled,.btn-link:disabled{color:#6c757d;pointer-events:none}.collapse:not(.show){display:none}.dropdown{position:relative}.dropdown-toggle{white-space:nowrap}.dropdown-toggle:after{border-bottom:0;border-left:.3em solid transparent;border-right:.3em solid transparent;border-top:.3em solid;content:"";margin-left:.255em;vertical-align:.255em}.dropdown-toggle:empty:after{margin-left:0}.dropdown-menu{background-clip:padding-box;background-color:#fff;border:1px solid rgba(0,0,0,.15);border-radius:.25rem;color:#212529;display:none;font-size:1rem;left:0;list-style:none;margin:.125rem 0 0;min-width:10rem;padding:.5rem 0;position:absolute;text-align:left;top:100%;z-index:1000}.dropdown-item{background-color:transparent;border:0;clear:both;color:#212529;display:block;font-weight:400;padding:.25rem 1.5rem;text-align:inherit;white-space:nowrap;width:100%}.dropdown-item:focus,.dropdown-item:hover{background-color:#f8f9fa;color:#16181b;text-decoration:none}.dropdown-item.active,.dropdown-item:active{background-color:#0d6efd;color:#fff;text-decoration:none}.dropdown-item.disabled,.dropdown-item:disabled{background-color:transparent;color:#6c757d;pointer-events:none}.dropdown-menu.show{display:block}.nav{display:flex;flex-wrap:wrap;list-style:none;margin-bottom:0;padding-left:0}.navbar-toggler{background-color:transparent;border:1px solid transparent;border-radius:.25rem;font-size:1.25rem;line-height:1;padding:.25rem .75rem}.navbar-toggler:focus,.navbar-toggler:hover{text-decoration:none}.card{border:1px solid rgba(0,0,0,.125)}.card>hr{margin-left:0;margin-right:0}.card-body{flex:1 1 auto;min-height:1px;padding:1.25rem}.card-title{margin-bottom:.75rem}.card-text:last-child{margin-bottom:0}.card-header{background-color:rgba(0,0,0,.03);border-bottom:1px solid rgba(0,0,0,.125);padding:.75rem 1.25rem}.card-header:first-child{border-radius:calc(.25rem - 1px) calc(.25rem - 1px) 0 0}.accordion>.card{overflow:hidden}.accordion>.card:not(:last-of-type){border-bottom:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.accordion>.card:not(:first-of-type){border-top-left-radius:0;border-top-right-radius:0}.accordion>.card>.card-header{border-radius:0;margin-bottom:-1px}.badge{border-radius:.25rem;color:#fff;display:inline-block;font-size:.75em;font-weight:700;line-height:1;padding:.25em .5em;text-align:center;vertical-align:baseline;white-space:nowrap}.badge:empty{display:none}.btn .badge{position:relative;top:-1px}.alert{border:1px solid transparent;border-radius:.25rem;margin-bottom:1rem;padding:.75rem 1.25rem;position:relative}@keyframes progress-bar-stripes{0%{background-position-x:1rem}}.progress{background-color:#e9ecef;border-radius:.25rem;display:flex;font-size:.75rem;height:1rem;overflow:hidden}.list-group-item-action{color:#495057;text-align:inherit;width:100%}.list-group-item-action:focus,.list-group-item-action:hover{background-color:#f8f9fa;color:#495057;text-decoration:none;z-index:1}.list-group-item-action:active{background-color:#e9ecef;color:#212529}.list-group-item{background-color:#fff;border:1px solid rgba(0,0,0,.125);display:block;margin-bottom:0;padding:.75rem 1.25rem;position:relative}.list-group-item:first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem}.list-group-item:last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.list-group-item.disabled,.list-group-item:disabled{background-color:#fff;color:#6c757d;pointer-events:none}.list-group-item.active{background-color:#0d6efd;border-color:#0d6efd;color:#fff;z-index:2}.list-group-item+.list-group-item{border-top-width:0}.list-group-item+.list-group-item.active{border-top-width:1px;margin-top:-1px}.list-group-flush .list-group-item{border-left-width:0;border-radius:0;border-right-width:0}.list-group-flush .list-group-item:first-child{border-top-width:0}.list-group-flush:last-child .list-group-item:last-child{border-bottom-width:0}.close{color:#000;font-size:calc(1.275rem + .3vw);font-weight:700;line-height:1;opacity:.5;text-shadow:0 1px 0 #fff}@media (min-width:1200px){.close{font-size:1.5rem}}.close:hover{color:#000;text-decoration:none}.close:not(:disabled):not(.disabled):focus,.close:not(:disabled):not(.disabled):hover{opacity:.75}button.close{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:0;padding:0}a.close.disabled{pointer-events:none}.tooltip{word-wrap:break-word;display:block;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-size:.875rem;font-style:normal;font-weight:400;letter-spacing:normal;line-break:auto;line-height:1.5;margin:0;opacity:0;position:absolute;text-align:left;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;white-space:normal;word-break:normal;word-spacing:normal;z-index:1070}.tooltip.show{opacity:.9}@-webkit-keyframes spinner-border{to{transform:rotate(1turn)}}@keyframes spinner-border{to{transform:rotate(1turn)}}@keyframes spinner-grow{0%{transform:scale(0)}50%{opacity:1}}.sr-only{clip:rect(0,0,0,0)!important;border:0!important;height:1px!important;margin:-1px!important;overflow:hidden!important;padding:0!important;position:absolute!important;white-space:nowrap!important;width:1px!important}.d-block{display:block!important}.d-flex{display:flex!important}.border{border:1px solid #dee2e6!important}.border-0{border:0!important}.border-bottom{border-bottom:1px solid #dee2e6!important}.w-100{width:100%!important}.h-100{height:100%!important}.flex-column{flex-direction:column!important}.justify-content-start{justify-content:flex-start!important}.justify-content-center{justify-content:center!important}.order-1{order:1!important}.order-last{order:6!important}.m-0{margin:0!important}.mx-auto{margin-left:auto!important;margin-right:auto!important}.my-0{margin-bottom:0!important;margin-top:0!important}.my-2{margin-bottom:.5rem!important;margin-top:.5rem!important}.my-3{margin-bottom:1rem!important;margin-top:1rem!important}.my-4{margin-bottom:1.5rem!important;margin-top:1.5rem!important}.mt-1{margin-top:.25rem!important}.mt-2{margin-top:.5rem!important}.mt-3{margin-top:1rem!important}.mt-4{margin-top:1.5rem!important}.mt-minus-4{margin-top:-1.5rem!important}.mt-5{margin-top:3rem!important}.mt-auto{margin-top:auto!important}.mr-0{margin-right:0!important}.mr-1{margin-right:.25rem!important}.mr-2{margin-right:.5rem!important}.mr-3{margin-right:1rem!important}.mb-1{margin-bottom:.25rem!important}.mb-2{margin-bottom:.5rem!important}.mb-3{margin-bottom:1rem!important}.mb-4{margin-bottom:1.5rem!important}.mb-5{margin-bottom:3rem!important}.ml-0{margin-left:0!important}.ml-1{margin-left:.25rem!important}.ml-3{margin-left:1rem!important}.mt-n3{margin-top:-1rem!important}.mb-n3{margin-bottom:-1rem!important}.p-4{padding:1.5rem!important}.px-0{padding-left:0!important;padding-right:0!important}.px-2{padding-left:.5rem!important;padding-right:.5rem!important}.px-3{padding-left:1rem!important;padding-right:1rem!important}.px-4{padding-left:1.5rem!important;padding-right:1.5rem!important}.py-0{padding-bottom:0!important;padding-top:0!important}.py-2{padding-bottom:.5rem!important;padding-top:.5rem!important}.py-3{padding-bottom:1rem!important;padding-top:1rem!important}.py-4{padding-bottom:1.5rem!important;padding-top:1.5rem!important}.py-5{padding-bottom:3rem!important;padding-top:3rem!important}.pt-2{padding-top:.5rem!important}.pt-3{padding-top:1rem!important}.pt-4{padding-top:1.5rem!important}.pt-5{padding-top:3rem!important}.pt-6{padding-top:3.5rem!important}.pr-0{padding-right:0!important}.pb-0{padding-bottom:0!important}.pb-1{padding-bottom:.25rem!important}.pb-2{padding-bottom:.5rem!important}.pb-3{padding-bottom:1rem!important}.pb-4{padding-bottom:1.5rem!important}.pb-5{padding-bottom:3rem!important}.pl-0{padding-left:0!important}.pl-2{padding-left:.5rem!important}.font-weight-bold{font-weight:700!important}.text-uppercase{text-transform:uppercase!important}.text-left{text-align:left!important}.text-right{text-align:right!important}.text-center{text-align:center!important}.text-primary{color:#0d6efd!important}.text-success{color:#28a745!important}.text-danger{color:#dc3545!important}.text-white{color:#fff!important}.text-muted{color:#6c757d!important}.bg-light{background-color:#f8f9fa!important}.bg-white{background-color:#fff!important}.rounded{border-radius:.25rem!important}.rounded-0{border-radius:0!important}.visible{visibility:visible!important}@media (min-width:576px){.mx-sm-3{margin-left:1rem!important;margin-right:1rem!important}}@media (min-width:768px){.flex-md-row{flex-direction:row!important}.justify-content-md-center{justify-content:center!important}.order-md-1{order:1!important}.order-md-last{order:6!important}.pt-md-0{padding-top:0!important}}@media (min-width:992px){.pr-lg-5{padding-right:3rem!important}.pl-lg-5{padding-left:3rem!important}}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:600;src:local("Montserrat Medium"),local("Montserrat-Medium"),url(https://fonts.gstatic.com/s/montserrat/v14/JTURjIg1_i6t8kCHKm45_dJE3gnD_vx3rCs.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:700;src:local("Montserrat Bold"),local("Montserrat-Bold"),url(https://fonts.gstatic.com/s/montserrat/v14/JTURjIg1_i6t8kCHKm45_dJE3gnD_vx3rCs.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:900;src:local("Montserrat Black"),local("Montserrat-Black"),url(https://fonts.gstatic.com/s/montserrat/v14/JTURjIg1_i6t8kCHKm45_epG3gnD_vx3rCs.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-display:swap;font-family:Roboto;font-style:normal;font-weight:300;src:local("Roboto Light"),local("Roboto-Light"),url(https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmSU5fBBc4AMP6lQ.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-display:swap;font-family:Roboto;font-style:normal;font-weight:500;src:local("Roboto Medium"),local("Roboto-Medium"),url(https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmEU9fBBc4AMP6lQ.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-display:swap;font-family:Roboto;font-style:normal;font-weight:700;src:local("Roboto Bold"),local("Roboto-Bold"),url(https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmWUlfBBc4AMP6lQ.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}.awesomplete [hidden]{display:none}.awesomplete .visually-hidden{clip:rect(0,0,0,0);position:absolute}.awesomplete{display:inline-block}.awesomplete>input{display:block}.awesomplete>ul{background:#fff;box-sizing:border-box;left:0;list-style:none;margin:0;min-width:100%;padding:0;position:absolute;z-index:1}.awesomplete>ul:empty{display:none}.awesomplete>ul{background:hsla(0,0%,100%,.9);background:linear-gradient(to bottom right,#fff,hsla(0,0%,100%,.8));border:1px solid rgba(0,0,0,.3);border-radius:.3em;box-shadow:.05em .2em .6em rgba(0,0,0,.2);margin:.2em 0 0;text-shadow:none}@supports (transform:scale(0)){.awesomplete>ul{transform-origin:1.43em -.43em;transition:.3s cubic-bezier(.4,.2,.5,1.4)}.awesomplete>ul:empty,.awesomplete>ul[hidden]{display:block;opacity:0;transform:scale(0);transition-timing-function:ease}}.awesomplete>ul:before{background:#fff;border:inherit;border-bottom:0;border-right:0;content:"";height:0;left:1em;padding:.4em;position:absolute;top:-.43em;-webkit-transform:rotate(45deg);transform:rotate(45deg);width:0}.awesomplete>ul>li{cursor:pointer;padding:.2em .5em;position:relative}.awesomplete>ul>li:hover{background:#b8d3e0;color:#000}.awesomplete>ul>li[aria-selected=true]{background:#3d6d8f;color:#fff}.awesomplete mark{background:#eaff00}.awesomplete li:hover mark{background:#b5d100}.awesomplete li[aria-selected=true] mark{background:#3d6b00;color:inherit}.featured-content .news-wrap,.header-wrap,.learn-more-links .faq-twitter-wrap,faq-section .faq-twitter-wrap,footer-section .footer-section-grid,hero-stats .hero-wrap,learn-more-section .faq-twitter-wrap,news-section .news-wrap,video-section .video-wrap{margin:0 auto;max-width:81.25rem;position:relative;width:100%}.featured-content .news,.learn-more-links .faq-twitter,faq-section .faq-twitter,footer-section .footer-section,learn-more-section .faq-twitter,news-section .news,video-section .video{padding:2.5rem 1.5rem}@media (min-width:48rem){.featured-content .news,.learn-more-links .faq-twitter,faq-section .faq-twitter,footer-section .footer-section,learn-more-section .faq-twitter,news-section .news,video-section .video{padding:4rem 2rem}}@media (min-width:81.25rem){.featured-content .news,.learn-more-links .faq-twitter,faq-section .faq-twitter,footer-section .footer-section,learn-more-section .faq-twitter,news-section .news,video-section .video{padding:5rem 2rem}}@media (min-width:100rem){.featured-content .news,.learn-more-links .faq-twitter,faq-section .faq-twitter,footer-section .footer-section,learn-more-section .faq-twitter,news-section .news,video-section .video{padding:8rem 2rem}}@media (min-width:112.5rem){.featured-content .news,.learn-more-links .faq-twitter,faq-section .faq-twitter,footer-section .footer-section,learn-more-section .faq-twitter,news-section .news,video-section .video{padding:10rem 2rem}}hero-stats .hero-headline{font-family:Montserrat,sans-serif;font-size:2rem}@media (min-width:48rem){hero-stats .hero-headline{font-size:2.2rem}}@media (min-width:81.25rem){hero-stats .hero-headline{font-size:2.5rem}}@media (min-width:100rem){hero-stats .hero-headline{font-size:2.8rem}}@media (min-width:112.5rem){hero-stats .hero-headline{font-size:3.2rem}}footer-section .footer-section-hotline-number{font-family:Montserrat,sans-serif;font-size:1.5rem;line-height:1.1}@media (min-width:48rem){footer-section .footer-section-hotline-number{font-size:1.8rem}}@media (min-width:81.25rem){footer-section .footer-section-hotline-number{font-size:2.1rem}}@media (min-width:100rem){footer-section .footer-section-hotline-number{font-size:2.4rem}}@media (min-width:112.5rem){footer-section .footer-section-hotline-number{font-size:2.7rem}}.header-logo-text-url,footer-section .footer-section-hotline-label{font-family:Montserrat,sans-serif;font-size:1.25rem}@media (min-width:48rem){.header-logo-text-url,footer-section .footer-section-hotline-label{font-size:1.35rem}}@media (min-width:81.25rem){.header-logo-text-url,footer-section .footer-section-hotline-label{font-size:1.45rem}}@media (min-width:100rem){.header-logo-text-url,footer-section .footer-section-hotline-label{font-size:1.55rem}}@media (min-width:112.5rem){.header-logo-text-url,footer-section .footer-section-hotline-label{font-size:1.7rem}}.featured-content .news-item-headline,.learn-more-links .faq-item-headline,news-section .news-item-headline{font-family:Montserrat,sans-serif;font-size:1rem}@media (min-width:48rem){.featured-content .news-item-headline,.learn-more-links .faq-item-headline,news-section .news-item-headline{font-size:1.1rem}}@media (min-width:81.25rem){.featured-content .news-item-headline,.learn-more-links .faq-item-headline,news-section .news-item-headline{font-size:1.2rem}}@media (min-width:100rem){.featured-content .news-item-headline,.learn-more-links .faq-item-headline,news-section .news-item-headline{font-size:1.3rem}}@media (min-width:112.5rem){.featured-content .news-item-headline,.learn-more-links .faq-item-headline,news-section .news-item-headline{font-size:1.4rem}}footer-section .footer-section-nav-link{font-family:Montserrat,sans-serif;font-size:1rem}@media (min-width:48rem){footer-section .footer-section-nav-link{font-size:1.1rem}}@media (min-width:81.25rem){footer-section .footer-section-nav-link{font-size:1.15rem}}@media (min-width:100rem){footer-section .footer-section-nav-link{font-size:1.2rem}}@media (min-width:112.5rem){footer-section .footer-section-nav-link{font-size:1.25rem}}.header-logo-text-title{font-family:Montserrat,sans-serif;font-size:.9rem}@media (min-width:48rem){.header-logo-text-title{font-size:1rem}}@media (min-width:81.25rem){.header-logo-text-title{font-size:.95rem}}@media (min-width:100rem){.header-logo-text-title{font-size:1rem}}@media (min-width:112.5rem){.header-logo-text-title{font-size:1.1rem}}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}button,input[type=email],input[type=number],input[type=submit],input[type=tel],input[type=text],input[type=url],textarea{-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:0}#content[tabindex="-1"]:focus{outline:0}address{font-style:normal}html{line-height:1.15;-webkit-text-size-adjust:100%}body,figure,h1,h2,h3,h4,h5,ol,p,ul{margin:0}button,input[type=button i],input[type=file i]::-webkit-file-upload-button,input[type=reset i],input[type=submit i]{padding:0}main{display:block}b,strong{font-weight:700}code{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sup{font-size:75%;line-height:0;position:relative;top:-.5em;vertical-align:baseline}img{border-style:none}button,input,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:2px solid #ffcf44}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}[hidden]{display:none}body{color:#000;font-family:Roboto,sans-serif;font-size:1.2rem;font-weight:500}html{scroll-behavior:smooth}.h1,.h2,.h3,.h4,.h5,h1,h2,h3,h4,h5{color:#000;font-family:Montserrat,sans-serif;font-weight:700}.h1,h1{font-size:2.3rem;margin-bottom:2.18rem;margin-top:3.45rem}.h1{color:#1f2574}.h2,h2{font-size:2rem;margin-bottom:2rem;margin-top:3rem}.h3,h3{font-size:1.5rem;margin-bottom:1.1875rem;margin-top:2.25rem}.h3,.h4,h3,h4{font-family:Roboto,sans-serif!important}.h4,h4{font-size:1.4rem;margin-bottom:1.15rem;margin-top:2rem}.h5,h5{font-size:.8rem}img{height:auto;max-width:100%}sup{font-family:Roboto,sans-serif;font-size:normal!important;font-weight:300}hr{border-top:1px solid #f0f0f0;margin:3rem 0}p,ul{margin-bottom:1.2rem}.list-group-item,li,p{font-size:auto!important}.bg-darkblue,.bg-purple{background-color:#1f2574!important;background:#1f2574!important}.bg-blue{background-color:#003d9d!important;background:#003d9d!important}.bg-lightblue{background-color:#f2f5fc!important}.color-primary,.color-purple{color:#1f2574!important}.bg-blue{color:#003d9d!important}.color-yellow{color:#ffcf44!important}.color-orange{color:#ff8000!important}.color-white{color:#fff!important}.color-secondary,.color-secondary-hover:focus,.color-secondary-hover:hover{color:#92c5de!important}.bullet-orange li{list-style:none;margin-bottom:.7rem;position:relative}.bullet-orange li:before{background:#ff8000;border-radius:50%;content:"";display:inline-block;height:1rem;left:-30px;margin-right:.5rem;position:absolute;top:7px;width:1rem}.fill-orange{fill:#ff8000!important}.list-group-flush a,a,a:hover,a:visited{color:#004abc}a,a:visited{text-decoration:underline}.action-link,a:hover{text-decoration:none}.action-link{background:#92c5de;color:#004abc;display:inline-block;font-size:1.2rem;line-height:2rem;margin-bottom:1rem;margin-top:1rem;padding:.5rem}.interior-page a.action-link{text-decoration:none}.action-link,.action-link:after{background-position-x:.4rem;background-position-y:center;background-repeat:no-repeat;background-size:1rem}.action-link:hover{background-color:#003d9d;color:#fff!important}th{font-family:Montserrat,sans-serif;font-weight:700}.table{color:#000;margin-bottom:2rem}.table thead th{background:#f0f0f0}.card .table thead th{background:transparent}.grid-layout-hd{grid-gap:1px;grid-row-gap:1px;display:grid;grid-template-columns:1fr 1fr 1fr 1fr;padding:0}.grid-main{-ms-grid-column-span:4;grid-column:1/5;-ms-grid-column:1}.grid-main,.grid-single{background-color:#fff;margin:0;padding:20px;text-align:center}.grid-main{padding:20px 0 0}@media (max-width:900px){.grid-layout-hd{grid-template-columns:1fr;width:500px}.grid-main{grid-column:1/1}}.bold,strong{font-family:Roboto,sans-serif;font-weight:700}a.list-group-item{padding:20px}a.list-group-item-action{color:#000;text-decoration:none}.list-group-item-action{color:#000}a.list-group-item.list-group-item-action{border-bottom:solid;border-bottom-left-radius:0;border-bottom-right-radius:0;border-top:1px solid rgba(0,0,0,.125);color:#004abc;font-size:1.25rem;margin:9px}a.list-group-item.list-group-item-action.guide{border:1px solid rgba(0,0,0,.125);border-radius:0;border-top:0 solid rgba(0,0,0,.125);color:#000;margin:0}.list-group-item.list-group-item-action.guide.active{background:linear-gradient(60deg,#1f2574,#003d9d 70%)}a.list-group-item.list-group-item-action.guide:first-child{border-top:1px solid rgba(0,0,0,.125);border-top-left-radius:.25rem;border-top-right-radius:.25rem}a.list-group-item.list-group-item-action.guide:last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.list-group-item:first-child{border-top-left-radius:0;border-top-right-radius:0}.list-group-item{border-color:#ccc}.list-group-item-action:focus,.list-group-item-action:hover{background-color:#f8f9fa;color:#000;text-decoration:none;z-index:1}.list-group-flush.list-group-item{font-family:Montserrat,sans-serif;font-weight:700}.alert{border:0}.alert-left{border-left:4px solid #ffcf44;margin-bottom:1.5rem;margin-left:1rem;margin-top:1.5rem}.card-header{background-color:#f0f0f0;border:none;margin-bottom:0;padding-right:12%}.card{word-wrap:break-word;background-clip:border-box;background-color:#fff;border:1px solid #f0f0f0;border-radius:.25rem;display:flex;flex-direction:column;min-width:0;position:relative}.card-body{padding:.75rem 1.25rem}.card .btn-link{background-color:transparent;color:#000;font-family:Roboto,sans-serif;font-weight:500}.card .btn-link,.card p{font-size:1.125rem}.wrimagecard{background:#fff;border:1px solid #f0f0f0;border-radius:4px;margin-bottom:1.5rem;margin-top:0;position:relative;text-align:left;transition:all .3s ease}.wrimagecard-topimage_header{background:#f0f0f0;padding:10% 20px 20px}.wrimagecard-topimage a{border-bottom:none;color:#000;display:block;height:100%;text-decoration:none;transition:color .3s ease;width:100%}.jumbotron{background:#f0f0f0;border-bottom:0;margin-bottom:2%;padding-bottom:1.2%;padding-top:2%}.jumbotron h1{font-size:2.3rem;margin-bottom:1.2rem;margin-top:0}.jumbotron,.jumbotron .lead,.jumbotron h1{color:#fff}.jumbotron.alpha{background:#1f2574;background:linear-gradient(60deg,#1f2574,#003d9d 70%);color:#fff}.jumbotron img{height:auto;max-width:75px;padding:10px 0;width:100%}.official{background:#f0f0f0;padding:3px 0}.official a,.official a:hover,.official a:visited{color:#000}.official p{background-image:url(https://www.alpha.ca.gov/img/ca-flag.png);background-position:5px 50%;background-repeat:no-repeat;background-size:contain;margin:0;padding:0 0 0 65px}.official img{margin-right:10px;max-width:40px}.footer{background-color:#fff;border-top:1px solid #f0f0f0;padding-bottom:40px;padding-top:50px}.footer,.footer a,.footer a:hover,.footer a:visited{color:#000}.feedback{margin-top:3rem}.form-control:focus{box-shadow:0 0 0 .2rem #0257d5;color:#000;outline:0}form{padding-bottom:2rem}.form-control,form.form-inline input[type=text],label{margin-right:.5rem}label{padding-bottom:.75rem}.btn{font-family:Roboto,sans-serif;font-weight:500}.footer,.official{font-size:1rem}.summary-box{height:90%}.list-group-item-action:focus{box-shadow:0 0 0 .2rem #fff;outline:2px solid #ffcf44}.wp-block-separator{border-top:1px solid #000;margin-bottom:5rem;margin-left:calc(50% - 50vw);margin-top:5rem;width:100vw}.display-4{font-family:Montserrat,sans-serif;font-weight:700}.card{margin-bottom:20px}.card-set .card{float:left;min-width:200px}.card-set{grid-gap:20px}figure{margin-bottom:10px}li .action-link:focus-within{outline:2px solid #ffcf44}.bg-light{padding:.75rem}.d-none{display:none}.aside{padding-bottom:1rem}.aside,.more{padding-top:1rem}.more{border-top:2px solid #ccc;font-family:Roboto,sans-serif;font-size:1.5rem;font-weight:700;margin-top:3rem}.awesomplete{display:contents;margin-right:.5rem;position:relative}.form-control{border:1px solid #000;border-radius:0}.tooltip-container{display:inline-block;position:relative}.list-group-item-action.list-group-item.active{background-color:#1f2574;border-color:#000;color:#fff}label{margin-bottom:auto;vertical-align:middle}button#dropdown-menu-button{background:#1f2574;border:1px solid #f0f0f0;color:#fff}button#dropdown-menu-button:focus,button#dropdown-menu-button:hover{background-color:#003d9d;border-color:#003d9d}button#dropdown-menu-button:focus{box-shadow:none;outline:2px solid #fff}.card-header{padding:.75rem}.card-body{padding:.55rem .45rem .55rem .75rem}@media (min-width:768px){.official p{padding:3px 0 3px 60px}}@media (max-width:767.98px){.container-fluid.jumbotron{padding-left:0}.container-fluid.jumbotron.alpha{padding-left:15px}.card-body{padding:5px}.form-control{margin-bottom:1rem}}.mb-0{margin-bottom:0!important}.mt-0{margin-top:0!important}.underline{text-decoration:underline!important}.no-underline{text-decoration:none!important}.rounded-50{border-radius:50px!important}.font-size-1-5em{font-size:1.5rem!important}.font-size-1-2em{font-size:1.2rem!important}.font-size-1em{font-size:1rem!important}.line-height-1-2{line-height:1.2em}.line-height-1-5{line-height:1.5em}body.interior-page figure,body.interior-page ol,body.interior-page ul{margin-bottom:1rem}a{background-color:transparent}font{pointer-events:none}.bg-transparent{background-color:transparent!important}.small-text,.text-sm{font-size:.95rem!important}.text-small{font-size:.85rem!important}ul.small-text{line-height:1.5rem}.caption{font-size:.95rem!important;line-height:1.5;margin-bottom:.95rem}.text-xs{font-size:.75rem!important}.text-black{color:#000!important}.bg-purple-alert{background-color:#e6d5e1!important}.bg-red-alert{background-color:#f3d8dd!important}.bg-orange-alert{background-color:#f7e4d9!important}.bg-yellow-alert{background-color:#faf1d7!important}.bg-purple-btn{background-color:#802f67!important}.bg-red-btn{background-color:#c43d53!important}.bg-orange-btn{background-color:#d97641!important}.bg-yellow-btn{background-color:#e6b735!important}.p-rel{position:relative!important}.px-6px{padding-left:6px!important;padding-right:6px!important}.px-10px{padding-left:10px!important;padding-right:10px!important}.ptop-12px{padding-top:12px!important}.pos-rel{position:relative}.bd-lightblue{border:2px solid #f2f5fc!important}.bd-top-darkblue{border-top:1px solid #1f2574}.bd-rounded-10{border-radius:10px}.has-text-align-center{text-align:center!important}.text-300{font-weight:300!important}.text-700{font-weight:700!important}@media (max-width:767.98px){.text-300{font-weight:300!important}}.emphasized{font-size:1.45rem!important;margin-bottom:1.45rem;margin-top:2.18rem}.highlight{background-color:#fff;border-bottom:8px solid #ff8000;box-shadow:0 0 5px 2px rgba(0,0,0,.14);padding:32px 40px 40px}.link-icon{font-size:.85rem;padding-left:2px;text-decoration:none}.link-icon,.pdf-link-icon{display:inline-block;position:relative;top:-3px}.pdf-link-icon{font-family:Roboto,sans-serif;font-size:.6rem;font-weight:400;left:1px;line-height:.9rem;outline:1px solid;outline-offset:-2px;padding:1px 4px 0}.no-underline-icon{display:inline-block;text-decoration:none}.toc{font-size:1.2rem;font-weight:700;list-style:none;padding-left:7px}.toc li{color:#1f2574;line-height:1.5rem;margin-bottom:.6rem;margin-top:.4rem;padding-left:10px;text-indent:-1.3rem}.toc li:before{content:"\35";font-family:CaGov;font-size:1.5rem;position:relative;right:4px;top:3px}.toc li a:hover{text-decoration:none}.sr-only{height:unset!important;text-indent:-10000px;width:unset!important}.list-should{line-height:1.5;list-style:none;margin:12px 0 10px;padding:0}.list-should li{border-bottom:1px solid #000;margin:0;padding:1rem .5rem 1rem 2.5rem}.list-should li:first-child{border-top:1px solid #000}.list-should li:before{color:#1f2574;content:"\4e";display:inline-block;font-family:CaGov;font-size:1.5rem;height:1rem;margin-left:-2.5rem;position:relative;top:-3px;vertical-align:sub;width:2.5rem}.list-can{line-height:1.5;list-style:none;margin:12px 0 10px;padding:0}.list-can li{border-bottom:1px solid #000;margin:0;padding:1rem .5rem 1rem 2.5rem}.list-can li:first-child{border-top:1px solid #000}.list-can li:before{color:#1f2574;content:"\e94e";display:inline-block;font-family:CaGov;font-size:1.5rem;height:1rem;margin-left:-2.5rem;position:relative;top:-3px;vertical-align:sub;width:2.5rem}.blue-highlight{background-color:#1f2574;color:#fff!important;padding:2.5rem}.jumbotron{background-color:#1f2574;color:#fff;text-align:center}h1{color:#1f2574}.jumbotron .lead,.jumbotron h1,.jumbotron h2,.jumbotron h3,.jumbotron p{color:#fff}a.btn{background:#1f2574}a.btn:hover{border-color:#003d9d}.bold{font-family:Roboto,sans-serif;font-weight:700}a.list-group-item.list-group-item-action{border-left:0;border-radius:.25rem;border-radius:0;border-right:0;border-top:0}a.list-group-item{padding:15px}ol,ul{line-height:2rem}.text-primary{color:#1f2574!important}.text-white a{color:#fff}.text-primary a,.text-white a.action-link{color:#1f2574}.wrimagecard.wrimagecard-topimage a:focus{outline:2px solid #003d9d}.wrimagecard-topimage_header{min-height:15rem}a.list-group-item.list-group-item-action{color:#1f2574}.translate{margin-top:.3rem}a.dropdown-item{font-size:1.1rem}.show{float:none!important;text-decoration:none!important}.list-group-item.list-group-item-action.guide.active{background:#1f2574;border-color:#1f2574;color:#fff}.list-group-item.list-group-item-action ul li a{text-decoration:none}a.list-group-item.list-group-item-action.guide{color:#1f2574}a.list-group-item.list-group-item-action{border-bottom:1px solid}.text-sm{font-size:.9rem!important}a.list-group-item.list-group-item-action{padding-left:35px;padding-right:0;text-indent:-25px}.jumbotron img{max-width:130px}.jumbotron a:focus{outline:2px solid #fff}a .wrimagecard-topimage_header h3{color:#1f2574;font-size:1.5rem;text-decoration:underline}a:hover .wrimagecard-topimage_header h3{font-size:1.5rem;text-decoration:none}.bg-light{background-color:#f1f1f1}.bg-secondary-covid{background-color:#f2f5fc}a,a:hover,a:visited{color:#1f2574}.wrimagecard p{color:#000}.list-group-flush .list-group-item{padding-left:27px;text-indent:-24px}.footer a,.footer a:hover,.footer a:visited{color:#000}.footer a:focus,a:focus,ol a:focus,p a:focus,ul a:focus{outline:2px solid #ffcf44}.action-link,a .card-title{color:#1f2574}.action-link{border-radius:50px;padding:.5rem 1.5rem}.card-header-multi{display:flex;justify-content:space-between;padding-right:2%}.card-text a:hover{background-image:none}.action-link.mr-30{margin-right:30px}button:focus,input:focus{outline:2px solid #ffcf44}.accordion-title{padding-bottom:0!important}.accordion-title,.aside{padding-top:0!important}.form-inline.form-inline-left label{justify-content:left}a.list-group-item.list-group-item-action{font-size:1.15rem}.aside{padding-bottom:0!important}.wrimagecard-topimage_header{min-height:14.5rem}.accordion-title{padding-left:0!important}a.card,a:visited.card{text-decoration:none!important}.text-larger{font-size:1.4rem!important}@media (max-width:767.98px){.jumbotron h1{font-size:2rem}body{font-size:1rem}.jumbotron img{display:none}.wrimagecard-topimage_header.text-center{min-height:auto!important}cagov-accordion .card .card-container .card-body{padding:0!important}.aside{padding-bottom:0!important}cagov-accordion a.list-group-item.list-group-item-action.guide:last-child{border-radius:0!important}.card-body{padding:.75rem 1.25rem}.text-center-mobile{text-align:center!important}}@media (min-width:768px){.no-webp .jumbo-img{background-image:linear-gradient(180deg,#1f2574 0,rgba(31,37,116,0) 20%),url(/img/hero.jpg)}}@media only screen and (min-width:992px){.aside{height:fit-content;position:sticky;top:2rem;z-index:2}}@media (min-width:1200px){.h4,h4{font-size:1.3rem}.h3,h3{font-size:1.5rem}}.jumbotron+.container{padding-bottom:2.5rem;padding-top:1.5rem}@media (max-width:64rem){.jumbotron.jumbo-img .container{padding-bottom:1.5rem;padding-top:1.5rem}}@media (min-width:48rem){.jumbotron.jumbo-img .container{padding-bottom:1.5rem;padding-top:2rem}}.jumbotron.jumbo-img{text-align:center}.col-lg-10.mx-auto h2{color:#1f2574;text-align:center}@font-face{font-display:swap;font-family:CaGov;font-style:normal;font-weight:400;src:url(/fonts/CaGov.woff2) format("woff2"),url(/fonts/CaGov.woff) format("woff")}[class*=" ca-gov-icon-"],[class^=ca-gov-icon-]{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:CaGov!important;font-style:normal;font-variant:normal;font-weight:400;text-transform:none}.ca-gov-icon-agriculture:before{content:"\e973"}.ca-gov-icon-amusement:before{content:"\e9ab"}.ca-gov-icon-building:before{content:"\e0fd"}.ca-gov-icon-campfire:before{content:"\e96a"}.ca-gov-icon-car-alt:before{content:"\e9b5"}.ca-gov-icon-check-list:before{content:"\e651"}.ca-gov-icon-check-mark:before{content:"\4e"}.ca-gov-icon-close-line:before{content:"\51"}.ca-gov-icon-close-mark:before{content:"\4d"}.ca-gov-icon-compass:before{content:"\e633"}.ca-gov-icon-cubes:before{content:"\e999"}.ca-gov-icon-digging:before{content:"\e989"}.ca-gov-icon-electricity-hazard:before{content:"\e95c"}.ca-gov-icon-entertainment:before{content:"\e9bb"}.ca-gov-icon-external-link:before{content:"\e9ed"}.ca-gov-icon-family-alt:before{content:"\e9bd"}.ca-gov-icon-fastfood:before{content:"\e9be"}.ca-gov-icon-fitness:before{content:"\e9c0"}.ca-gov-icon-flowchart:before{content:"\e0df"}.ca-gov-icon-hair:before{content:"\e9c2"}.ca-gov-icon-hand-heart:before{content:"\e99a"}.ca-gov-icon-house:before{content:"\e64c"}.ca-gov-icon-institute:before{content:"\e93b"}.ca-gov-icon-map:before{content:"\e083"}.ca-gov-icon-mobile:before{content:"\e944"}.ca-gov-icon-museum:before{content:"\e9c5"}.ca-gov-icon-nail-polish:before{content:"\e9f1"}.ca-gov-icon-payment-card:before{content:"\e645"}.ca-gov-icon-rail:before{content:"\e9cb"}.ca-gov-icon-read-book:before{content:"\e655"}.ca-gov-icon-reader:before{content:"\e985"}.ca-gov-icon-restaurant:before{content:"\e9cc"}.ca-gov-icon-road:before{content:"\e9cd"}.ca-gov-icon-science:before{content:"\e00a"}.ca-gov-icon-ship:before{content:"\e9d1"}.ca-gov-icon-shopping-cart:before{content:"\e635"}.ca-gov-icon-soccer:before{content:"\e9f4"}.ca-gov-icon-stay-home:before{content:"\e9a4"}.ca-gov-icon-teleworking:before{content:"\e9a5"}.ca-gov-icon-tent:before{content:"\e969"}.ca-gov-icon-testing-alt:before{content:"\e9a7"}.ca-gov-icon-truck-delivery:before{content:"\e627"}.ca-gov-icon-user-desk:before{content:"\ea0d"}.ca-gov-icon-users:before{content:"\e950"}.ca-gov-icon-video-camera:before{content:"\e636"}.ca-gov-icon-warning-circle:before{content:"\e967"}.ca-gov-icon-warning-triangle:before{content:"\e063"}.ca-gov-icon-zoo:before{content:"\e9db"}cwds-step-list{display:block;padding-top:5px}cwds-step-list li .details{height:0;overflow:hidden;transition:height .3s}.hide,.show{color:#004abc;float:right;font-size:15px;text-decoration:underline}.show-all{float:right;font-size:1rem;margin-top:-1.6rem;padding-right:.5rem;text-align:right}cwds-step-list li .hide,cwds-step-list li.list-group-item.list-open>div>span.hide,cwds-step-list li.list-open .show{display:none}cwds-step-list li.list-open .hide{display:block}cwds-step-list button.step-description{background:transparent;border:none;padding-left:45px;text-indent:-45px}.list-group-item-action:active :hover,.list-group-item-action:hover{color:#000}.list-group-item.active{background-color:#e5e8e4;background-color:#efefef;border-color:#e5e8e4;border-color:#efefef;color:#000}.list-group-item.active>a{color:#073984}cwds-step-list li.list-group-item:focus-within{background:rgba(215,230,252,.2);outline:2px solid #0257d5;z-index:2}.cwds-step-list{margin-bottom:3rem}cwds-step-list li .details[data-collapsed=true]{visibility:hidden}cwds-step-list ul{margin-left:-.5rem}@supports (-ms-ime-align:auto){.step-description:focus,button.card-header:focus{outline:2px solid #0257d5;z-index:2}}@media (max-width:767.98px){cwds-step-list{display:block;padding-top:30px}}.video-thumb-link{display:block}.video-thumb-link:focus{outline:2px solid #ffcf44}.video-thumb-photo{background:#003d9d;margin:0;overflow:hidden;position:relative}.video-thumb-photo-img{width:100%}.video-thumb-play-button{background:hsla(0,0%,100%,.5);border:4px solid #ff8000;border-radius:50%;height:5rem;left:50%;margin:0 auto 1rem;padding:.9rem .5rem .5rem 1.2rem;position:absolute;top:50%;transform:translateX(-50%) translateY(-50%);transition:border-color .3s;width:5rem;z-index:250}.video-thumb-play-button-icon{fill:#ff8000;left:.2rem;max-height:4rem;position:relative;width:100%}.video-thumb-play-button:hover{border-color:#003d9d}.video-thumb-play-button:hover .video-thumb-play-button-icon{fill:#003d9d}.video-thumb-play-button:focus{outline:2px solid #ffcf44}.video-modal{height:100%;left:0;overflow:auto;position:fixed;text-align:center;top:0;width:100%;z-index:100001}.video-modal-content{background:#003d9d;box-shadow:0 .5rem 1.5rem 0 rgba(0,0,0,.3);display:block;left:50%;max-width:1200px;position:absolute;top:50%;transform:scale(.9) translateX(-50%) translateY(-50%);transition:all .3s ease-in-out;transition-delay:.2s;width:80%}.video-modal-player{background:#000;padding-left:5rem;padding-right:5rem;padding-top:56.25%;position:relative;z-index:100}.video-modal-player embed,.video-modal-player iframe,.video-modal-player object{height:100%;left:0;position:absolute;top:0;width:100%}.video-modal-close{background:#ecca00;border:none;border-radius:50%;color:#fff;cursor:pointer;display:block;height:3em;padding:.75em;position:absolute;right:0;top:50%;transform:translateX(50%) translateY(-50%);transition:all .3s ease-in-out;width:3em;z-index:1000}@media (min-height:700px){.video-modal-close{top:0}}.video-modal-close-svg{fill:#fff;max-height:3rem;width:1.5em}.video-modal-close:hover{background:#ff8000}.popup_background{background:#1f2574;bottom:0;height:100%;left:0;opacity:0;position:fixed;right:0;top:0;visibility:hidden;width:100%;z-index:1}.popup_visible{overflow:hidden}.popup_visible .video-modal{opacity:1;visibility:visible;z-index:100000000}.popup_visible .video-modal-content{opacity:1;transform:scale(1) translateX(-50%) translateY(-50%);visibility:visible}.popup_visible .popup_background{opacity:1;visibility:visible;z-index:100000}.cwdsarrow-arrow,.cwdsarrow-circle{-webkit-backface-visibility:hidden;backface-visibility:hidden;position:absolute;transition:1.2s cubic-bezier(.15,.92,.14,.95)}.cwdsarrow-circle{border-radius:100%;border-style:solid;bottom:0;height:100%;left:0;overflow:hidden;right:0;top:0;width:100%}.cwdsarrow-arrow{left:50%;top:50%;transform:translate(-50%,-50%)}.cwdsarrow-arrow:last-of-type{transform:translate(-275%,-50%)}.cwdsarrow-arrow-wrapper{bottom:0;height:100%;left:0;overflow:hidden;position:absolute;right:0;top:0;width:100%}.cwdsarrow-arrow-svg{display:block;position:relative;width:100%}.cwdsarrow-arrow-svg-art{bottom:0;display:block;height:100%;left:0;position:absolute;right:0;top:0;width:100%}.cwdsarrow{align-items:center;display:flex;justify-content:center;margin-left:auto;position:relative;z-index:100}.cwdsarrow-parent:focus .cwdsarrow-circle,.cwdsarrow-parent:hover .cwdsarrow-circle{transform:scale(1.2)}.cwdsarrow-parent:focus .cwdsarrow-arrow,.cwdsarrow-parent:hover .cwdsarrow-arrow{transform:translate(275%,-50%)}.cwdsarrow-parent:focus .cwdsarrow-arrow:last-of-type,.cwdsarrow-parent:hover .cwdsarrow-arrow:last-of-type{transform:translate(-50%,-50%)}.cwdsarrow-size-sm .cwdsarrow-arrow{height:1rem;min-width:16px;width:16px}@media (min-width:112.5rem){.cwdsarrow-size-sm .cwdsarrow-arrow{min-width:.75vw;width:.75vw}}.cwdsarrow-size-sm .cwdsarrow-circle{border-width:1px}.cwdsarrow-size-sm .cwdsarrow-arrow-svg{height:1rem}.cwdsarrow-size-sm.cwdsarrow{height:40px;min-height:40px;min-width:40px;width:40px}@media (min-width:48rem){.cwdsarrow-size-sm.cwdsarrow{height:30px;min-height:30px;min-width:30px;width:30px}}@media (min-width:81.25rem){.cwdsarrow-size-sm.cwdsarrow{height:35px;min-height:35px;min-width:35px;width:35px}}@media (min-width:112.5rem){.cwdsarrow-size-sm.cwdsarrow{height:40px;min-height:40px;min-width:40px;width:40px}}.cwdsarrow-idle-orange .cwdsarrow-circle{border-color:#ff8000}.cwdsarrow-idle-orange.cwdsarrow{color:#ff8000}.cwdsarrow-parent:focus .cwdsarrow-focus-darkblue.cwdsarrow{color:#1f2574!important}.cwdsarrow-parent:focus .cwdsarrow-focus-darkblue .cwdsarrow-circle{background:#c7e1ef!important;border-color:#1f2574!important}.cwdsarrow-parent:hover .cwdsarrow-hover-darkblue.cwdsarrow{color:#1f2574}.cwdsarrow-parent:hover .cwdsarrow-hover-darkblue .cwdsarrow-circle{background:#fff;border-color:#1f2574}.header-language-arrow{fill:#ff8000;margin-left:.5rem;margin-left:.25rem;max-height:1rem;transition:all .6s cubic-bezier(.5,1.65,.4,.8);width:.75rem}button[aria-expanded=true] .header-language-arrow{transform:rotate(180deg)}.social{display:inline-block;vertical-align:middle}.social-link{background:#ff8000;border-radius:50%;display:inline-block;height:3rem;margin:0 .25rem;padding:.5rem .7rem;transition:fill .5s cubic-bezier(.5,1.65,.4,.8),transform .5s cubic-bezier(.5,1.65,.4,.8);width:3rem}.social-link:hover{background:#92c5de;transform:scale(1.1)}.social-link:hover .social-icon{fill:#1f2574}.social-link:focus,.social-link:focus-within{background:#fff!important;box-shadow:0 0 0 2px #ecca00}.social-link:focus-within .social-icon,.social-link:focus .social-icon{fill:#1f2574!important}.social-icon{fill:#fff;height:100%;transition:fill .5s cubic-bezier(.5,1.65,.4,.8);width:100%}.button{color:#003d9d;cursor:pointer;display:inline-flex;justify-content:center;margin:1rem 0 0;padding:.15rem;text-decoration:none}@media (min-width:48em){.button{margin:1.25rem 0 0}}@media (min-width:81.25em){.button{margin:1.75rem 0 0}}cagov-navoverlay{order:3}cagov-navoverlay .menu-trigger{background:#ff8000;border:0;box-shadow:0 .5rem 1rem 0 rgba(0,0,0,.2),0 0 0 0 #ff8000;cursor:pointer;display:inline-block;font-family:Montserrat,sans-serif;margin-left:1em;padding:.5em 1em;position:relative;right:0;top:-2px;transform-origin:top left;transform-origin:center center;transition:all .5s cubic-bezier(.57,.2,.21,.89)}cagov-navoverlay .menu-trigger .is-fixed{position:fixed}@media (max-width:64rem){cagov-navoverlay .menu-trigger{z-index:2000}}@media (min-width:48rem){cagov-navoverlay .menu-trigger{z-index:2000}}cagov-navoverlay .menu-trigger-label{color:#1f2574}cagov-navoverlay .menu-trigger:hover{background:#ffcf44;box-shadow:0 .5rem 1.5rem 0 rgba(0,0,0,.3)}cagov-navoverlay .menu-trigger:hover .hamburger-inner,cagov-navoverlay .menu-trigger:hover .hamburger-inner:after,cagov-navoverlay .menu-trigger:hover .hamburger-inner:before{background-color:#1f2574}cagov-navoverlay .menu-trigger:hover .hamburger-inner:after,cagov-navoverlay .menu-trigger:hover .hamburger-inner:before{width:13px}cagov-navoverlay .menu-trigger:focus-wthin{background:#ffcf44;outline:2px solid #1f2574}cagov-navoverlay .menu-trigger:focus{background:#ffcf44;box-shadow:0 .5rem 1rem 0 rgba(0,0,0,.2),0 0 0 2px #1f2574;outline:0 solid #1f2574}@media (min-width:81.25rem){cagov-navoverlay .menu-trigger:focus{background:#ffcf44}}cagov-navoverlay .menu-trigger:focus .hamburger-inner,cagov-navoverlay .menu-trigger:focus .hamburger-inner:after,cagov-navoverlay .menu-trigger:focus .hamburger-inner:before{background-color:#1f2574}cagov-navoverlay .hamburger{cursor:pointer;display:inline-block;padding:.15rem;position:relative;transition-duration:.15s;transition-property:opacity;transition-timing-function:linear;transition:all .2s ease-in-out;vertical-align:middle;z-index:10000}cagov-navoverlay .hamburger-box{display:inline-block;height:20px;position:relative;width:20px}cagov-navoverlay .hamburger-inner{display:block;margin-top:-1px;top:50%;transition-duration:.22s;transition-timing-function:cubic-bezier(.55,.055,.675,.19);width:20px}cagov-navoverlay .hamburger-inner,cagov-navoverlay .hamburger-inner:after,cagov-navoverlay .hamburger-inner:before{background-color:#1f2574;border-radius:0;height:2px;position:absolute;transition-duration:.15s;transition-property:transform,width,background-color;transition-timing-function:ease}cagov-navoverlay .hamburger-inner:after,cagov-navoverlay .hamburger-inner:before{content:"";display:block;width:20px}cagov-navoverlay .hamburger-inner:before{top:-6px;transition:top .1s ease-in .25s,opacity .1s ease-in,width .1s ease-out .12s}cagov-navoverlay .hamburger-inner:after{bottom:-6px;transition:bottom .1s ease-in .25s,transform .22s cubic-bezier(.55,.055,.675,.19),width .1s ease-out .12s}cagov-navoverlay.display-menu .menu-trigger{box-shadow:none}cagov-navoverlay.display-menu .menu-trigger:focus,cagov-navoverlay.display-menu .menu-trigger:hover{background:#ffcf44}@media (max-width:64rem){cagov-navoverlay.display-menu .menu-trigger:focus,cagov-navoverlay.display-menu .menu-trigger:hover{background:#ffcf44}cagov-navoverlay.display-menu .menu-trigger:focus .hamburger-inner,cagov-navoverlay.display-menu .menu-trigger:focus .hamburger-inner:after,cagov-navoverlay.display-menu .menu-trigger:focus .hamburger-inner:before,cagov-navoverlay.display-menu .menu-trigger:hover .hamburger-inner,cagov-navoverlay.display-menu .menu-trigger:hover .hamburger-inner:after,cagov-navoverlay.display-menu .menu-trigger:hover .hamburger-inner:before{background-color:#1f2574;transition:all .5s cubic-bezier(.57,.2,.21,.89)}}@media (min-width:48rem){cagov-navoverlay.display-menu .menu-trigger{background:#ff8000}}cagov-navoverlay.display-menu .menu-trigger .hamburger-inner,cagov-navoverlay.display-menu .menu-trigger .hamburger-inner:after,cagov-navoverlay.display-menu .menu-trigger .hamburger-inner:before{background-color:#1f2574;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (min-width:48rem){cagov-navoverlay.display-menu .menu-trigger .hamburger-inner,cagov-navoverlay.display-menu .menu-trigger .hamburger-inner:after,cagov-navoverlay.display-menu .menu-trigger .hamburger-inner:before{background-color:#1f2574}}cagov-navoverlay.display-menu .menu-trigger:hover{background:#ff8000}@media (min-width:48rem){cagov-navoverlay.display-menu .menu-trigger:hover .hamburger-inner,cagov-navoverlay.display-menu .menu-trigger:hover .hamburger-inner:after,cagov-navoverlay.display-menu .menu-trigger:hover .hamburger-inner:before{background-color:#1f2574}}cagov-navoverlay.display-menu .hamburger-inner{transform:rotate(225deg);transition-delay:.12s;transition-timing-function:cubic-bezier(.215,.61,.355,1);width:12px}cagov-navoverlay.display-menu .hamburger-inner,cagov-navoverlay.display-menu .hamburger-inner:after,cagov-navoverlay.display-menu .hamburger-inner:before{background-color:#1f2574;width:20px!important}@media (min-width:48rem){cagov-navoverlay.display-menu .hamburger-inner,cagov-navoverlay.display-menu .hamburger-inner:after,cagov-navoverlay.display-menu .hamburger-inner:before{background-color:#1f2574}}cagov-navoverlay.display-menu .hamburger-inner:before{opacity:0;top:0;transition:top .1s ease-out,opacity .1s ease-out .12s}cagov-navoverlay.display-menu .hamburger-inner:after{bottom:0;transform:rotate(-90deg);transition:bottom .1s ease-out,transform .22s cubic-bezier(.215,.61,.355,1) .12s}.fixed cagov-navoverlay .menu-trigger{transition:all .5s cubic-bezier(.57,.2,.21,.89)}cagov-navoverlay a.expanded-menu-section-header-link{text-decoration:none}cagov-navoverlay .expanded-menu{background:#1f2574;box-shadow:-.5rem 0 1.2rem 0 rgba(0,0,0,.25);height:100%;overflow-y:scroll;position:fixed;right:0;top:0;transform:translateX(100%);transition:all .5s cubic-bezier(.57,.2,.21,.89);visibility:hidden;width:85vw;z-index:1000}@media (min-width:48rem){cagov-navoverlay .expanded-menu{background:#003d9d;height:100%;left:0;opacity:0;padding:1rem;position:fixed;top:0;transform:translateX(0);width:100%}}@media (min-width:81.25rem){cagov-navoverlay .expanded-menu{padding:2rem}}cagov-navoverlay .expanded-menu-grid{margin:0 auto}@media (min-width:48rem){cagov-navoverlay .expanded-menu-grid{align-content:flex-start;align-items:stretch;display:flex;flex-wrap:wrap;justify-content:space-between;left:50%;max-width:100%;position:absolute;top:50%;transform:translateX(-50%) translateY(-50%);width:81.25rem;width:64em}}cagov-navoverlay .expanded-menu-col{margin:0;text-align:left}@media (min-width:48rem){cagov-navoverlay .expanded-menu-col{opacity:0;padding:.5rem;transform:translateY(3rem);transition:all .5s cubic-bezier(.57,.2,.21,.89);width:25%}}cagov-navoverlay .expanded-menu-section{background:#003d9d;padding:1rem;text-align:left}@media (max-width:64rem){cagov-navoverlay .expanded-menu-section{border-bottom:1px solid #1f2574}}@media (min-width:48rem){cagov-navoverlay .expanded-menu-section{background:transparent;margin-bottom:1rem;padding:0}cagov-navoverlay .expanded-menu-section:last-of-type{margin-bottom:0}cagov-navoverlay .expanded-menu-section.mobile-only{display:none}}@media (max-width:64rem){cagov-navoverlay .expanded-menu-section.expanded .expanded-menu-dropdown{max-height:100rem}}@media (max-width:64rem) and (max-width:48rem){cagov-navoverlay .expanded-menu-section.expanded .expanded-menu-section-header-link{color:#fff}}cagov-navoverlay .expanded-menu-section.expanded .expanded-menu-section-header-arrow-svg{transform:rotate(180deg)}cagov-navoverlay .expanded-menu-section-header{color:#f2f5fc;display:block;position:relative}@media (min-width:48rem){cagov-navoverlay .expanded-menu-section-header{margin-bottom:0}}cagov-navoverlay .expanded-menu-section-header-link{background:transparent;border:none;border-radius:1.2rem;color:#ff8000;display:block;font-family:Roboto,sans-serif;font-size:1.2rem;font-weight:700;padding:.25rem 2rem .25rem 0;text-align:left;text-transform:none;transition:all .2s ease-in-out;width:100%}cagov-navoverlay .expanded-menu-section-header-link:hover{color:#fff}cagov-navoverlay .expanded-menu-section-header-link:active{background:transparent}cagov-navoverlay .expanded-menu-section-header-link.white{color:#fff}@media (min-width:48rem){cagov-navoverlay .expanded-menu-section-header-link{cursor:default;width:auto}cagov-navoverlay .expanded-menu-section-header-link:hover{color:#ff8000}}cagov-navoverlay .expanded-menu-section-header-arrow{display:block;height:1rem;position:absolute;right:.5rem;top:50%;transform:translateY(-50%);transition:all .5s cubic-bezier(.57,.2,.21,.89);width:1rem}@media (min-width:48rem){cagov-navoverlay .expanded-menu-section-header-arrow{display:none}}cagov-navoverlay .expanded-menu-section-header-arrow-svg{fill:#fff;display:block;transition:all .6s cubic-bezier(.5,1.65,.4,.8);width:100%}cagov-navoverlay .expanded-menu-dropdown{max-height:0;overflow:hidden;transition:max-height .5s cubic-bezier(.57,.2,.21,.89)}@media (min-width:48rem){cagov-navoverlay .expanded-menu-dropdown{display:block;max-height:none;padding:2px 0}}cagov-navoverlay .expanded-menu-dropdown-link{border-radius:1rem;color:#fff;display:table;font-family:Roboto,sans-serif;font-size:1.2rem;font-weight:400;margin:.15rem 0 .15rem 2px;padding:.5rem .25rem;transition:color .3s cubic-bezier(.57,.2,.21,.89)}cagov-navoverlay .expanded-menu-dropdown-link:first-child{margin-top:.7em}@media (min-width:48rem){cagov-navoverlay .expanded-menu-dropdown-link{line-height:1.3rem;margin:.85rem 0 0 2px;padding:0}}@media (min-width:81.25rem){cagov-navoverlay .expanded-menu-dropdown-link{line-height:1.3rem;padding:0}}cagov-navoverlay .expanded-menu-dropdown-link:active,cagov-navoverlay .expanded-menu-dropdown-link:hover{color:#fff}cagov-navoverlay .expanded-menu-dropdown-link:focus{box-shadow:0 0 0 2px #fff;color:#fff;padding-left:.5rem}cagov-navoverlay .expanded-menu-search{background:#1f2574;border-radius:2rem;display:none;margin-bottom:1rem;padding:0;transition:background .5s cubic-bezier(.57,.2,.21,.89);width:80%}@media (min-width:48rem){cagov-navoverlay .expanded-menu-search{display:block;margin-bottom:2rem;margin-left:auto;margin-top:7rem;padding:0 0 0 .75rem}}@media (min-width:81.25rem){cagov-navoverlay .expanded-menu-search{padding:.7rem .7rem .75rem 1.25rem}}cagov-navoverlay .expanded-menu-search.focused{animation-duration:1s;animation-iteration-count:3;animation-name:border-pulse;background:#fff;box-shadow:0 .5rem 1rem 0 rgba(0,0,0,.2),0 0 0 2px #ffcf44}cagov-navoverlay .expanded-menu-search.focused .expanded-menu-search-field.placeholder,cagov-navoverlay .expanded-menu-search.focused .expanded-menu-search-label{color:#1f2574}cagov-navoverlay .expanded-menu-search.focused .expanded-menu-search-field:-moz-placeholder,cagov-navoverlay .expanded-menu-search.focused .expanded-menu-search-field::-moz-placeholder{color:#1f2574}cagov-navoverlay .expanded-menu-search.focused .expanded-menu-search-field:-ms-input-placeholder{color:#1f2574}cagov-navoverlay .expanded-menu-search.focused .expanded-menu-search-field::-webkit-input-placeholder{color:#1f2574}cagov-navoverlay .expanded-menu-search.focused .expanded-menu-search-button-svg{fill:#1f2574}cagov-navoverlay .expanded-menu-search:hover{background:#fff}cagov-navoverlay .expanded-menu-search:hover .expanded-menu-search-field.placeholder,cagov-navoverlay .expanded-menu-search:hover .expanded-menu-search-label{color:#1f2574}cagov-navoverlay .expanded-menu-search:hover .expanded-menu-search-field:-moz-placeholder,cagov-navoverlay .expanded-menu-search:hover .expanded-menu-search-field::-moz-placeholder{color:#1f2574}cagov-navoverlay .expanded-menu-search:hover .expanded-menu-search-field:-ms-input-placeholder{color:#1f2574}cagov-navoverlay .expanded-menu-search:hover .expanded-menu-search-field::-webkit-input-placeholder{color:#1f2574}cagov-navoverlay .expanded-menu-search:hover .expanded-menu-search-button-svg{fill:#1f2574}cagov-navoverlay .expanded-menu-search-form{align-items:center;background:transparent;cursor:pointer;display:flex;padding:0;transition:all .5s cubic-bezier(.57,.2,.21,.89);width:100%}@media (min-width:48rem){cagov-navoverlay .expanded-menu-search-form{background:transparent}}cagov-navoverlay .expanded-menu-search-label{border-right:1px solid #1f2574;color:#ff8000;cursor:pointer;font-size:1.2rem;padding:.5rem .75rem .5rem 0;text-transform:uppercase;transition:color .5s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){cagov-navoverlay .expanded-menu-search-label{clip:rect(1px,1px,1px,1px);word-wrap:normal!important;height:1px;overflow:hidden;position:absolute!important;width:1px}cagov-navoverlay .expanded-menu-search-label:focus{clip:auto!important;background:#ff8000;color:#fff;display:inline-block;font-size:1rem;height:auto;left:0;line-height:normal;padding:.5rem;position:absolute;top:0;width:auto;z-index:100000}}cagov-navoverlay .expanded-menu-search-label:hover{color:#003d9d}cagov-navoverlay .expanded-menu-search-field{background:transparent;border:0;color:#fff;font-size:1.1rem;padding:.75rem .5rem .75rem 1rem;transition:all .5s cubic-bezier(.57,.2,.21,.89);width:100%}@media (min-width:48rem){cagov-navoverlay .expanded-menu-search-field{padding:.75rem .5rem .75rem .75}}cagov-navoverlay .expanded-menu-search-field.placeholder{color:#fff;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){cagov-navoverlay .expanded-menu-search-field.placeholder{color:#ff8000}}cagov-navoverlay .expanded-menu-search-field:-moz-placeholder{color:#fff;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){cagov-navoverlay .expanded-menu-search-field:-moz-placeholder{color:#ff8000}}cagov-navoverlay .expanded-menu-search-field::-moz-placeholder{color:#fff;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){cagov-navoverlay .expanded-menu-search-field::-moz-placeholder{color:#ff8000}}cagov-navoverlay .expanded-menu-search-field:-ms-input-placeholder{color:#fff;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){cagov-navoverlay .expanded-menu-search-field:-ms-input-placeholder{color:#ff8000}}cagov-navoverlay .expanded-menu-search-field::-webkit-input-placeholder{color:#fff;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){cagov-navoverlay .expanded-menu-search-field::-webkit-input-placeholder{color:#ff8000}}cagov-navoverlay .expanded-menu-search-field:hover,cagov-navoverlay .expanded-menu-search-field:hover.placeholder{color:#003d9d}cagov-navoverlay .expanded-menu-search-field:hover:-moz-placeholder,cagov-navoverlay .expanded-menu-search-field:hover::-moz-placeholder{color:#003d9d}cagov-navoverlay .expanded-menu-search-field:hover:-ms-input-placeholder{color:#003d9d}cagov-navoverlay .expanded-menu-search-field:hover::-webkit-input-placeholder{color:#003d9d}cagov-navoverlay .expanded-menu-search-field:focus,cagov-navoverlay .expanded-menu-search-field:focus.placeholder{color:#1f2574}cagov-navoverlay .expanded-menu-search-field:focus:-moz-placeholder,cagov-navoverlay .expanded-menu-search-field:focus::-moz-placeholder{color:#1f2574}cagov-navoverlay .expanded-menu-search-field:focus:-ms-input-placeholder{color:#1f2574}cagov-navoverlay .expanded-menu-search-field:focus::-webkit-input-placeholder{color:#1f2574}cagov-navoverlay .expanded-menu-search-button{background:transparent;border:0;border-radius:50%;cursor:pointer;height:2.5rem;margin-right:.15rem;padding:.6rem .5rem .5rem;transition:transform .5s cubic-bezier(.5,1.65,.4,.8);width:2.5rem}cagov-navoverlay .expanded-menu-search-button-svg{fill:#fff;max-height:2.5rem;transition:fill .3s cubic-bezier(.57,.2,.21,.89);width:100%}cagov-navoverlay .expanded-menu-search-button:hover .expanded-menu-search-button-svg{fill:#003d9d}cagov-navoverlay .expanded-menu-search-button:focus{background:#003d9d}cagov-navoverlay .expanded-menu-search-button:focus .expanded-menu-search-button-svg{fill:#fff}cagov-navoverlay .mobile-menu-close{background:rgba(0,0,0,.7);display:block;height:100%;left:0;opacity:0;position:fixed;top:0;transition:all .5s cubic-bezier(.57,.2,.21,.89);visibility:hidden;width:100%;z-index:999}cagov-navoverlay.display-menu{overflow:hidden}cagov-navoverlay.display-menu .expanded-menu{transform:translateX(0);visibility:visible}@media (min-width:48rem){cagov-navoverlay.display-menu .expanded-menu{height:100vh;opacity:1;visibility:visible;width:100vw}}cagov-navoverlay.display-menu .expanded-menu:focus{outline:none}@media (min-width:48rem){cagov-navoverlay.display-menu.reveal-items .expanded-menu-col,cagov-navoverlay.display-menu.reveal-items .expanded-menu-search{opacity:1;transform:translateY(0);transition:all .6s cubic-bezier(.5,1.65,.4,.8)}}cagov-navoverlay.display-menu .mobile-menu-close{opacity:.6;visibility:visible}cagov-accordion .card{border:none;border-radius:0!important;margin-bottom:0}cagov-accordion .card-container{display:block;overflow:hidden}cagov-accordion .card-container[aria-hidden=false]{border-bottom:1px solid #1f2574}cagov-accordion.prog-enhanced .card-container{height:0;transition:height .3s ease}cagov-accordion .collapsed{display:block;overflow:hidden;visibility:hidden}.card-header .button{color:#000}.accordion{margin-bottom:20px}.accordion-title{color:#1f2574;margin-bottom:0;margin-right:auto;padding:.5rem;text-align:left;width:90%}.accordion-title h2,.accordion-title h3,.accordion-title h4{color:#1f2574;font-family:Roboto,sans-serif;font-size:1.2rem!important;font-weight:700;margin-bottom:0!important;margin-top:0!important;padding:0!important;text-align:left!important}button.card-header{align-items:center;background-clip:border-box;background-color:#fff;border:1px solid #1f2574;border-left:none;border-radius:0!important;border-right:none;display:flex;justify-content:left;margin-top:-1px;padding:1rem .75rem}button.card-header:hover{background-color:#f2f5fc}button.card-header:focus{outline-offset:-2px}.prog-enhanced .accordion-alpha .plus-munus{align-self:flex-start;border:2px solid #ff8000;border-radius:50%;color:#ff8000;height:2.125rem;margin-left:1rem;overflow:hidden;padding:.02rem 0;transition:all .3s ease;width:2.125rem}.prog-enhanced .accordion-alpha .plus-munus cagov-plus .accordion-icon{display:block}.prog-enhanced .accordion-alpha .plus-munus cagov-minus .accordion-icon{display:none}.prog-enhanced.chart-drawer{font-size:.95rem}.prog-enhanced.chart-drawer .accordion-alpha .plus-munus{height:1.35rem;margin-left:0;margin-right:1rem;width:1.35rem}.chart-drawer button.card-header{border-bottom:none;border-top:none}.chart-drawer .card-container[aria-hidden=false]{border-bottom:none}.chart-drawer .card{border:1px solid #f2f5fc;padding:1px}.prog-enhanced .accordion-alpha-open{border-bottom-color:#fff!important}.prog-enhanced .accordion-alpha-open cagov-plus .accordion-icon{display:none!important}.prog-enhanced .accordion-alpha-open cagov-minus .accordion-icon{display:block!important}.dark-accordion-bg>.container.dark-accordion-first{margin-bottom:0;margin-top:3rem;padding-bottom:0;padding-top:3rem}.dark-accordion-bg>.container{margin-bottom:3rem;margin-top:3rem;padding-bottom:3rem;padding-top:3rem}.dark-accordion-sibling>.container{margin-bottom:0;margin-top:0;padding-bottom:0;padding-top:0}.dark-accordion-sibling+.dark-accordion-bg>.container{margin-bottom:3rem;margin-top:0;padding-bottom:3rem;padding-top:0}.dark-accordion-bg .card{background-color:#1f2574}.dark-accordion-bg .card .accordion-alpha{background-color:#1f2574;border-bottom:1px solid #4c5190;border-top:1px solid #4c5190}.dark-accordion-bg .card .accordion-alpha.accordion-alpha-open{border-bottom-color:#1f2574!important}.dark-accordion-bg .card .accordion-alpha:focus,.dark-accordion-bg .card .accordion-alpha:hover{background-color:#003d9d}.dark-accordion-bg .card .accordion-alpha .accordion-title,.dark-accordion-bg .card .accordion-alpha .accordion-title h2,.dark-accordion-bg .card .accordion-alpha .accordion-title h3,.dark-accordion-bg .card .accordion-alpha .accordion-title h4,.dark-accordion-bg .card .card-container{color:#fff}.dark-accordion-bg .card .card-container[aria-hidden=false]{border-bottom:1px solid #4c5190}.dark-accordion-bg .card .card-container h2,.dark-accordion-bg .card .card-container h3,.dark-accordion-bg .card .card-container h4,.dark-accordion-bg .card .card-container h5{color:#fff}.bg-darkblue .dark-accordion-bg>.container.dark-accordion-first{margin-bottom:0;margin-top:0;padding-bottom:0;padding-top:1rem}@media only screen and (max-width:767px){.accordion-alpha-open+.card-container{height:100%!important}}a.btn{background:#003d9d;border:50px;color:#fff;font-family:Roboto,sans-serif;font-size:1rem;font-weight:700;padding:.375rem .75rem;text-decoration:none}a.btn:hover{background-color:#003d9d;background:#003d9d;color:#fff}a.btn:visited{color:#fff}.btn-primary{background-color:#1f2574;background:#1f2574;border-color:#1f2574;color:#fff}.btn-primary:hover{background-color:#003d9d;border-color:#003d9d;color:#fff}button.step-description{font-family:Roboto,sans-serif;font-size:1.4rem;font-weight:700;margin-left:-10px;padding-left:0;text-align:left}button:focus{outline:none}.btn.focus,.btn:focus{background-color:#003d9d;border-color:#003d9d;box-shadow:none;color:#fff}.btn-lightbg{background-color:#92c5de;color:#1f2574}.btn-bigger{font-size:1.25rem;min-height:3rem}button.card-header.accordion-alpha:focus{outline:2px solid #ffcf44}.btn-primary.disabled,.btn-primary:disabled{background-color:#2d2d2d;border-color:#2d2d2d;color:#fff}.btn-matrix{background-color:transparent;border-radius:50px!important;display:inline-block;font-size:1rem;font-weight:500;line-height:1.5;padding-bottom:.375rem;padding-left:1.5rem!important;padding-right:1.5rem!important;padding-top:.375rem;text-align:center;text-transform:uppercase;vertical-align:middle}.btn-matrix.bg-purple-btn,.btn-matrix.bg-red-btn{color:#fff!important}.btn-matrix.bg-orange-btn,.btn-matrix.bg-yellow-btn{color:#000!important}button.clear:focus{outline:2px solid #ffcf44}.small-tab{background:#fff;border:1px solid #f2f5fc;color:#1f2574;font-size:.95rem;font-weight:700!important;padding:.5rem .75rem;text-decoration:underline}.small-tab:focus,.small-tab:hover{outline-offset:-2px;text-decoration:none}.small-tab:focus{outline:2px solid #ffcf44}.small-tab.active,.small-tab[aria-expanded=true]{color:#000;cursor:default;text-decoration:none}.small-tab.active:focus,.small-tab[aria-expanded=true]:focus{outline:2px solid #ffcf44}.large-tabs{background-color:#1f2574!important;border:1px solid #1f2574!important;display:flex!important;flex-direction:column;justify-content:center!important}@media (min-width:768px){.large-tabs{flex-direction:row}}.large-tabs .large-tab{background-color:#fff;border:none;color:#1f2574;display:inline-block;font-family:Montserrat;font-size:1.15rem;font-style:normal;font-weight:500;margin:0 1px 1px 0;padding:10px;text-align:center;text-decoration:none;width:100%}@media (min-width:768px){.large-tabs .large-tab{margin:0 1px 0 0;min-width:200px}}.large-tabs .large-tab:focus,.large-tabs .large-tab:hover{background-color:#f2f5fc}.large-tabs .large-tab:focus{outline:2px solid #ffcf44}.large-tabs .large-tab:last-child{margin-bottom:0;margin-right:0}.large-tabs .large-tab.active,.large-tabs .large-tab.toggle-active,.large-tabs .large-tab[aria-expanded=true]{background-color:#1f2574;color:#fff;cursor:default;pointer-events:none;text-decoration:none}.large-tabs .large-tab.active:focus,.large-tabs .large-tab.active:hover,.large-tabs .large-tab.toggle-active:focus,.large-tabs .large-tab.toggle-active:hover,.large-tabs .large-tab[aria-expanded=true]:focus,.large-tabs .large-tab[aria-expanded=true]:hover{background-color:#1f2574;pointer-events:none}.large-tabs .large-tab.active:focus,.large-tabs .large-tab.toggle-active:focus,.large-tabs .large-tab[aria-expanded=true]:focus{outline:2px solid #ffcf44}.link-arrow-label{margin-right:1em}.link-arrow-icon{border-radius:50%;height:2.75rem;overflow:hidden;padding:0;transition:all .3s ease;width:2.75rem}.link-arrow-icon-svg{height:100%;position:relative;right:28px;transition:all .3s ease;width:60px}.link-arrow-blue{align-items:center;color:#1f2574;display:flex;font-family:Montserrat,sans-serif;font-size:1.2rem;justify-content:center;text-decoration:none!important;text-transform:uppercase;transition:all .3s ease}.link-arrow-blue .link-arrow-icon{border:2px solid #1f2574}.link-arrow-blue .arrow1,.link-arrow-blue .arrow2{fill:#1f2574;transition:all .3s ease}.link-arrow-blue .pdf-link-icon{display:none}.link-arrow-blue:focus,.link-arrow-blue:hover{color:#003d9d}.link-arrow-blue:focus .link-arrow-icon,.link-arrow-blue:hover .link-arrow-icon{border-color:#003d9d}.link-arrow-blue:focus .link-arrow-icon .arrow1,.link-arrow-blue:focus .link-arrow-icon .arrow2,.link-arrow-blue:hover .link-arrow-icon .arrow1,.link-arrow-blue:hover .link-arrow-icon .arrow2{fill:#003d9d}.link-arrow-blue:focus .link-arrow-icon-svg,.link-arrow-blue:hover .link-arrow-icon-svg{right:-10px}.link-arrow-blue:focus{outline:2px solid #ffcf44!important}.link-arrow-white{align-items:center;color:#fff!important;display:flex;font-family:Montserrat,sans-serif;font-size:1.2rem;justify-content:center;text-decoration:none!important;text-transform:uppercase;transition:all .3s ease}.link-arrow-white .link-arrow-icon{border:2px solid #fff}.link-arrow-white .arrow1,.link-arrow-white .arrow2{fill:#fff;transition:all .3s ease}.link-arrow-white .pdf-link-icon{display:none}.link-arrow-white:focus,.link-arrow-white:hover{color:#ff8000!important}.link-arrow-white:focus .link-arrow-icon,.link-arrow-white:hover .link-arrow-icon{border-color:#ff8000}.link-arrow-white:focus .link-arrow-icon .arrow1,.link-arrow-white:focus .link-arrow-icon .arrow2,.link-arrow-white:hover .link-arrow-icon .arrow1,.link-arrow-white:hover .link-arrow-icon .arrow2{fill:#ff8000}.link-arrow-white:focus .link-arrow-icon-svg,.link-arrow-white:hover .link-arrow-icon-svg{right:-10px}.link-arrow-white:focus{outline:2px solid #ffcf44!important}.link-arrow-orange{align-items:center;color:#ff8000!important;display:flex;font-family:Montserrat,sans-serif;font-size:1.2rem;justify-content:center;text-decoration:none!important;text-transform:uppercase;transition:all .3s ease}.link-arrow-orange .link-arrow-icon{border:2px solid #ff8000}.link-arrow-orange .arrow1,.link-arrow-orange .arrow2{fill:#ff8000;transition:all .3s ease}.link-arrow-orange .pdf-link-icon{display:none}.link-arrow-orange:focus,.link-arrow-orange:hover{color:#92c5de!important}.link-arrow-orange:focus .link-arrow-icon,.link-arrow-orange:hover .link-arrow-icon{border-color:#92c5de}.link-arrow-orange:focus .link-arrow-icon .arrow1,.link-arrow-orange:focus .link-arrow-icon .arrow2,.link-arrow-orange:hover .link-arrow-icon .arrow1,.link-arrow-orange:hover .link-arrow-icon .arrow2{fill:#92c5de}.link-arrow-orange:focus .link-arrow-icon-svg,.link-arrow-orange:hover .link-arrow-icon-svg{right:-10px}.link-arrow-orange:focus{outline:2px solid #ffcf44!important}.button-blue{background-color:#1f2574;border:0 transparent;border-radius:50px;color:#fff!important;display:inline-block;font-family:Montserrat,sans-serif;font-size:1.2rem;font-weight:600;line-height:1.5;padding:.625rem 1.5rem;text-align:center;text-decoration:none!important;transition:all .3s ease;user-select:none;vertical-align:middle}.button-blue:focus,.button-blue:hover{background-color:#ff8000;color:#1f2574!important}.button-blue:focus{outline:2px solid #ffcf44!important}.button-lightblue{background-color:#92c5de;border:0 transparent;border-radius:50px;color:#1f2574!important;display:inline-block;font-family:Montserrat,sans-serif;font-size:1.2rem;font-weight:600;line-height:1.5;padding:.625rem 1.5rem;text-align:center;text-decoration:none!important;transition:all .3s ease;user-select:none;vertical-align:middle}.button-lightblue:focus,.button-lightblue:hover{background-color:#ff8000;color:#1f2574!important}.button-lightblue:focus{outline:2px solid #ffcf44!important}.button-lightestblue{background-color:#f2f5fc;border:0 transparent;border-radius:50px;color:#1f2574!important;display:inline-block;font-family:Montserrat,sans-serif;font-size:1.2rem;font-weight:600;line-height:1.5;padding:.625rem 1.5rem;text-align:center;text-decoration:none!important;transition:all .3s ease;user-select:none;vertical-align:middle}.button-lightestblue:focus,.button-lightestblue:hover{background-color:#ff8000;color:#1f2574!important}.button-lightestblue:focus{outline:2px solid #ffcf44!important}learn-more-section .faq-twitter{order:1;width:100%}@media (min-width:48rem){learn-more-section .faq-twitter{order:2}learn-more-section .faq-twitter-wrap{align-items:flex-start;display:flex}}learn-more-section .faq{text-align:left}@media (min-width:48rem){learn-more-section .faq{padding:0 2rem 0 0;width:50%}}learn-more-section .faq article:first-child .faq-item-link{border-top:1px solid #003d9d}faq-section .faq-twitter{background:#1f2574;order:1;width:100%}@media (min-width:48rem){faq-section .faq-twitter{order:2}faq-section .faq-twitter-wrap{align-items:center;display:flex}}faq-section .faq{text-align:left}@media (min-width:48rem){faq-section .faq{padding:0 2rem 0 0;width:50%}}.special-note{background:#f2f5fc;margin:0 auto;padding:1rem 1rem 1rem 3.5rem;position:relative}.special-note p{font-size:.95rem;margin-bottom:0}.special-note p:before{color:#003d9d;content:"\e072";font-family:CaGov!important;font-size:2rem;left:15px;position:absolute;top:10px}.arrow-links{padding-left:0}.arrow-links li{list-style:none}.arrow-links .link-arrow-label{margin-right:auto}.arrow-links .link-arrow-icon{border:2px solid;border-radius:50%;height:2.75rem;margin-left:1rem;overflow:hidden;padding:0;transition:all .3s ease;width:2.75rem}.arrow-links .link-arrow-icon-svg{height:100%;position:relative;right:28px;transition:all .3s ease;width:60px}.arrow-links article:first-child a.link-arrow-blue,.arrow-links li:first-child a.link-arrow-blue{border-top:1px solid #1f2574}.arrow-links .link-arrow-blue{border-bottom:1px solid #1f2574;color:#1f2574;display:flex;font-family:Roboto,sans-serif;font-size:1.5rem;font-weight:700;justify-content:left;line-height:1.2;padding:1rem .75rem;text-decoration:none!important;text-transform:none;transition:none}.arrow-links .link-arrow-blue .link-arrow-icon{border-color:#ff8000}.arrow-links .link-arrow-blue .arrow1,.arrow-links .link-arrow-blue .arrow2{fill:#ff8000;transition:all .3s ease}.arrow-links .link-arrow-blue:focus,.arrow-links .link-arrow-blue:hover{background:#f2f5fc;color:#003d9d}.arrow-links .link-arrow-blue:focus .link-arrow-icon,.arrow-links .link-arrow-blue:hover .link-arrow-icon{border-color:#ff8000}.arrow-links .link-arrow-blue:focus .link-arrow-icon .arrow1,.arrow-links .link-arrow-blue:focus .link-arrow-icon .arrow2,.arrow-links .link-arrow-blue:hover .link-arrow-icon .arrow1,.arrow-links .link-arrow-blue:hover .link-arrow-icon .arrow2{fill:#ff8000}.arrow-links .link-arrow-blue:focus .link-arrow-icon-svg,.arrow-links .link-arrow-blue:hover .link-arrow-icon-svg{right:-10px}.arrow-links .link-arrow-blue:focus{outline:2px solid #ffcf44!important}.arrow-links article:first-child a.link-arrow-white,.arrow-links li:first-child a.link-arrow-white{border-top:1px solid #4c5190}.arrow-links .link-arrow-white{border-bottom:1px solid #4c5190;color:#fff;display:flex;font-family:Roboto,sans-serif;font-size:1.5rem;font-weight:700;justify-content:left;line-height:1.2;padding:1rem .75rem;text-decoration:none!important;text-transform:none;transition:none}.arrow-links .link-arrow-white .link-arrow-icon{border-color:#ff8000}.arrow-links .link-arrow-white .arrow1,.arrow-links .link-arrow-white .arrow2{fill:#ff8000;transition:all .3s ease}.arrow-links .link-arrow-white:focus,.arrow-links .link-arrow-white:hover{background:#003d9d;color:#fff!important}.arrow-links .link-arrow-white:focus .link-arrow-icon,.arrow-links .link-arrow-white:hover .link-arrow-icon{border-color:#ff8000}.arrow-links .link-arrow-white:focus .link-arrow-icon .arrow1,.arrow-links .link-arrow-white:focus .link-arrow-icon .arrow2,.arrow-links .link-arrow-white:hover .link-arrow-icon .arrow1,.arrow-links .link-arrow-white:hover .link-arrow-icon .arrow2{fill:#ff8000}.arrow-links .link-arrow-white:focus .link-arrow-icon-svg,.arrow-links .link-arrow-white:hover .link-arrow-icon-svg{right:-10px}.arrow-links .link-arrow-white:focus{outline:2px solid #ffcf44!important}.btn-link{background:transparent;border:none;color:#1f2574;font-weight:300;text-decoration:underline}.btn-link:hover{text-decoration:none}.btn-link:focus{outline:2px solid #ffcf44}.action-link>span.ca-gov-icon-external-link,.btn-matrix>span.ca-gov-icon-external-link,.btn-primary>span.ca-gov-icon-external-link,.button-blue>span.ca-gov-icon-external-link,.button-lightblue>span.ca-gov-icon-external-link,.button-lightestblue>span.ca-gov-icon-external-link .btn>span.ca-gov-icon-external-link,.link-arrow-blue>span.ca-gov-icon-external-link,.link-arrow-orange>span.ca-gov-icon-external-link,.link-arrow-white>span.ca-gov-icon-external-link,.social-link>span.ca-gov-icon-external-link,.toc li a>span.ca-gov-icon-external-link,a span.pdf-link-icon~span.ca-gov-icon-external-link,img~span.ca-gov-icon-external-link{display:none}.box-shadow{box-shadow:0 .5rem 1.5rem 0 rgba(0,0,0,.3)}.logo-mark{width:100%}.logo-mark-orange{fill:#ff8000}.logo-mark-orange,.logo-mark-white{transition:fill .5s cubic-bezier(.57,.2,.21,.89)}.logo-mark-white{fill:#fff}.header{background:#1f2574;transition:box-shadow .4s cubic-bezier(.57,.2,.21,.89);width:100%;z-index:1000}.header.fixed-position{left:0;position:fixed;top:0}.header.relative-position{position:relative}.header.fixed{font-size:1rem}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.header.fixed .logo-mark{max-height:3.5rem}}.header-wrap{align-items:center;display:flex;flex-direction:row;flex-wrap:wrap;position:relative}@media (min-width:81.25rem){.header-wrap{flex-wrap:nowrap}}.header-logo{background:#003d9d;order:4;width:100%}@media (min-width:48rem){.header-logo{background:transparent;order:0;width:auto}}.header-logo-grid{align-items:center;display:flex;flex-direction:row;flex-wrap:nowrap}.header-logo-mark{background:#003d9d;box-shadow:0 .5rem 1rem 0 rgba(0,0,0,.2);display:block;overflow-y:hidden;padding:.5rem;transition:width .4s cubic-bezier(.57,.2,.21,.89),background .4s cubic-bezier(.57,.2,.21,.89);width:6rem}@media (min-width:48rem){.header-logo-mark{padding:.5rem .75rem}}.header-logo-text{padding-left:.75rem;text-align:left}.header-logo-text-url{color:#ff8000;display:block;text-transform:uppercase;transition:color .4s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){.header-logo-text-url{font-size:1.2rem}}.header-logo-text-title{color:#fff;display:block;transition:color .4s cubic-bezier(.57,.2,.21,.89);white-space:normal}@media (max-width:64rem){.header-logo-text-title{font-size:.9rem}}@media (min-width:48rem){.header-logo-text-title{font-size:.9rem;white-space:nowrap}}.header-logo:hover .header-logo-mark{background:#fff}.header-logo:hover .header-logo-text-url{color:#fff}.header-logo:hover .header-logo-text-title{color:#ff8000}.header-logo:hover .logo-mark-orange{fill:#1f2574}.header-logo:hover .logo-mark-white{fill:#ff8000}.header-logo:focus .header-logo{margin:0 0 0 64px}.header-logo:focus .header-logo-mark{background:#fff;box-shadow:0 0 0 4px #ffcf44,0 .5rem 1.5rem 0 rgba(0,0,0,.3)}.header-logo:focus .header-logo-text-url{color:#fff}.header-logo:focus .header-logo-text-title{color:#ff8000}.header-logo:focus .logo-mark-orange{fill:#1f2574}.header-logo:focus .logo-mark-white{fill:#ff8000}body.interior-page{font-weight:300}.interior-page a{text-decoration:underline}.interior-page .header{position:relative}.header-search{background:#003d9d;border-radius:2rem;margin:.5rem .5rem .5rem 1em;order:2;padding:0;transition:background .5s cubic-bezier(.57,.2,.21,.89);width:37%}@media (max-width:48rem){.header-search{width:34%}}@media (max-width:20.5rem){.header-search{width:25%}.header-search .header-search-field::placeholder{visibility:hidden}}@media (min-width:48rem){.header-search{margin:0 0 0 auto;order:0;padding:0 0 0 .25rem;width:12.5rem}}@media (min-width:64rem){.header-search{margin:.5rem .5rem .5rem auto;padding:.25rem .25rem .25rem .75rem;width:22rem}}@media (min-width:81.25rem){.header-search{margin:.5rem .5rem .5rem auto;padding:.5rem .5rem .5rem 1rem;width:25rem}}@keyframes border-pulse{0%{box-shadow:0 0 0 0 #ffcf44}50%{box-shadow:0 0 0 3px #ffcf44}to{box-shadow:0 0 0 0 #ffcf44}}.header-search.focused{animation-duration:1s;animation-iteration-count:3;animation-name:border-pulse;background:#fff;box-shadow:0 .5rem 1rem 0 rgba(0,0,0,.2),0 0 0 2px #ffcf44}.header-search.focused .header-search-label{color:#1f2574;margin-bottom:.5rem}.header-search.focused .header-search-field,.header-search.focused .header-search-field.placeholder{color:#1f2574}.header-search.focused .header-search-field:-ms-input-placeholder{color:#1f2574}.header-search.focused .header-search-field::-webkit-input-placeholder{color:#1f2574}.header-search.focused .header-search-field:-moz-placeholder,.header-search.focused .header-search-field::-moz-placeholder{color:#1f2574;opacity:1}.header-search.focused .header-search-button-svg{fill:#1f2574}.header-search:hover{background:#fff}.header-search:hover .header-search-field.placeholder,.header-search:hover .header-search-label{color:#1f2574}.header-search:hover .header-search-field:-ms-input-placeholder{color:#1f2574}.header-search:hover .header-search-field::-webkit-input-placeholder{color:#1f2574}.header-search:hover .header-search-field:-moz-placeholder,.header-search:hover .header-search-field::-moz-placeholder{color:#1f2574;opacity:1}.header-search:hover .header-search-button-svg{fill:#1f2574}.header-search-form{align-items:center;background:transparent;cursor:pointer;display:flex;padding:0;position:relative;transition:all .5s cubic-bezier(.57,.2,.21,.89);width:100%}@media (min-width:48rem){.header-search-form{background:transparent}}.header-search-label{border-right:1px solid #1f2574;color:#f2f5fc;cursor:pointer;font-size:95%;margin-bottom:.5rem;padding:0 .75rem 0 0;position:relative;text-transform:uppercase;top:4px;transition:color .5s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){.header-search-label{clip:rect(1px,1px,1px,1px);word-wrap:normal!important;height:1px;overflow:hidden;position:absolute!important;width:1px}.header-search-label:focus{clip:auto!important;background:#ff8000;color:#fff;display:inline-block;font-size:1rem;height:auto;left:0;line-height:normal;padding:.5rem;position:absolute;top:0;width:auto;z-index:100000}}.header-search-label:hover{color:#003d9d}.header-search-field{background:transparent;border:0;color:#fff;font-size:1rem;padding:.75rem 0 .75rem .75rem;transition:all .5s cubic-bezier(.57,.2,.21,.89);width:100%}@media (min-width:48rem){.header-search-field{padding:.75rem 0 .75rem .75rem;width:100%}}@media (min-width:64rem){.header-search-field{padding:.75rem .5rem .75rem .35rem;width:100%}}@media (min-width:81.25rem){.header-search-field{padding:.75rem .5rem .75rem .35rem;width:100%}}.header-search-field:-moz-placeholder,.header-search-field::-moz-placeholder{opacity:1}.header-search-field.placeholder{color:#fff;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){.header-search-field.placeholder{color:#ff8000}}.header-search-field:-moz-placeholder{color:#fff;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){.header-search-field:-moz-placeholder{color:#ff8000}}.header-search-field::-moz-placeholder{color:#fff;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){.header-search-field::-moz-placeholder{color:#ff8000}}.header-search-field:-ms-input-placeholder{color:#fff;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){.header-search-field:-ms-input-placeholder{color:#ff8000}}.header-search-field::-webkit-input-placeholder{color:#fff;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){.header-search-field::-webkit-input-placeholder{color:#ff8000}}.header-search-field:hover.placeholder{color:#003d9d!important}.header-search-field:hover:-ms-input-placeholder{color:#003d9d!important}.header-search-field:hover::-webkit-input-placeholder{color:#003d9d!important}.header-search-field:hover:-moz-placeholder,.header-search-field:hover::-moz-placeholder{color:#003d9d!important;opacity:1}.header-search-field:focus{outline:none}.header-search-field:focus.placeholder{color:#1f2574}.header-search-field:focus:-ms-input-placeholder{color:#1f2574}.header-search-field:focus::-webkit-input-placeholder{color:#1f2574}.header-search-field:focus:-moz-placeholder,.header-search-field:focus::-moz-placeholder{color:#1f2574;opacity:1}.header-search-button{background:transparent;border:0;border-radius:50%;cursor:pointer;flex:1 0 auto;height:2.25rem;margin-right:.15rem;padding:.5rem;position:absolute;right:4px;transition:transform .5s cubic-bezier(.5,1.65,.4,.8);width:2.25rem}.header-search-button-svg{fill:#fff;max-height:2.5rem;transition:fill .3s cubic-bezier(.57,.2,.21,.89);width:100%}.header-search-button:hover .header-search-button-svg{fill:#003d9d}.header-search-button:focus{background:#003d9d;outline:none}.header-search-button:focus .header-search-button-svg{fill:#fff}#header-search-site::-ms-clear,#header-search-site::-ms-reveal{display:none;height:0;width:0}#header-search-site::-webkit-search-cancel-button,#header-search-site::-webkit-search-decoration,#header-search-site::-webkit-search-results-button,#header-search-site::-webkit-search-results-decoration{display:none}header .dropdown{margin-right:auto}@media (min-width:48rem){header .dropdown{margin-right:0}}.translate{padding-right:30px;position:relative}.translate:after{display:none!important}button#dropdown-menu-button{padding:.5rem .3rem;transition-delay:0s;transition-duration:.3s;transition-property:all;transition-timing-function:ease;vertical-align:middle}@media (min-width:48rem){button#dropdown-menu-button{padding:.5rem 1rem}}button#dropdown-menu-button:hover{background-color:transparent;border-color:transparent;color:#ecca00}button#dropdown-menu-button:focus{background-color:#fff;border-color:#fff;color:#1f2574;outline:none}button#dropdown-menu-button[aria-expanded=false] .rotate{height:20px;position:absolute;right:2px;text-align:center;top:1px;transition:all .2s ease!important;width:20px}button#dropdown-menu-button[aria-expanded=true] .rotate{height:20px;position:absolute;right:-5px;text-align:center;top:6px;transform:rotate(90deg)!important;width:20px}.nav-scroll-spy{height:0}#dropdown-text{pointer-events:none}@media (max-width:768px){.hero-text{min-height:20vh}header{position:absolute}.navbar-toggler{padding:0}}.dropdown-toggle:after{speak:none;-webkit-font-smoothing:antialiased;border:0;content:"\33";display:inline-block;font-family:CaGov!important;font-size:larger;font-style:normal;font-variant:normal;font-weight:700;margin-left:0;vertical-align:0}.dropdown-menu{margin-left:20px}cagov-navoverlay .expanded-menu-search{margin-right:5em}cagov-navoverlay .expanded-menu-search-field:focus{color:#fff;outline:none}cagov-navoverlay .expanded-menu-search:hover .expanded-menu-search-field:focus{color:#1f2574;outline:none}.jumbo-img{background-color:#1d2574;background-image:linear-gradient(180deg,#1f2574 0,rgba(31,37,116,0) 20%),url(/img/hero.webp)}@media (min-width:48rem){.jumbo-img{background-position-x:50%;background-size:cover}}@media (min-width:64rem){.jumbo-img{background-position-x:50%;background-size:cover}}@media (min-width:81.25rem){.jumbo-img{background-position-x:50%;background-size:cover}}hero-stats{background-color:#1f2574}hero-stats .hero{color:#fff;position:relative;width:100%}@media (min-width:48rem){hero-stats .hero-padding-top{margin-top:65px}}@media (max-width:400px){hero-stats .hero-padding-top{margin-top:120px}}@media (max-device-width:640px){hero-stats .hero-padding-top{margin-top:120px}}@media (max-width:20.5rem){hero-stats .hero-padding-top{margin-top:135px}}@media (min-width:48rem){hero-stats .hero{align-content:center;align-items:flex-end;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:center}}hero-stats .hero-wrap{position:relative;z-index:500}@media (min-width:48rem){hero-stats .hero-wrap{align-content:flex-end;align-items:flex-start;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;padding:1rem 1rem 0}}@media (min-width:81.25rem){hero-stats .hero-wrap{padding:0}}@media (-ms-high-contrast:active),(-ms-high-contrast:none){hero-stats .hero-wrap{margin:0}}hero-stats .hero-text{align-items:flex-end;align-self:flex-end;display:flex;min-height:60vh;padding:1.5rem;text-align:left}@media (min-width:48rem){hero-stats .hero-text{align-self:center;display:flex;min-height:auto;width:50%}}@media (min-width:64rem){hero-stats .hero-text{margin-bottom:1rem;width:50%}}hero-stats .hero-text-align{height:100%;width:100%}@media (min-width:48rem){hero-stats .hero-text-align{height:auto}}hero-stats .hero-headline{color:#fff;font-weight:900;margin-bottom:.5rem;text-align:left}hero-stats .hero-subhead{color:#fff;font-weight:700}hero-stats .hero-photo{background:#0641a2;height:100%;left:0;position:absolute;top:0;width:100%;z-index:-1}hero-stats .hero-photo-pic{height:70vh;left:0;object-fit:cover;position:absolute;top:0;width:100%}@media (min-width:48rem){hero-stats .hero-photo-pic{height:100%;width:100%}}hero-stats .hero-photo-description{clip:rect(1px,1px,1px,1px);word-wrap:normal!important;height:1px;overflow:hidden;position:absolute!important;width:1px}hero-stats .hero-photo-description:focus{clip:auto!important;background:#ff8000;color:#fff;display:inline-block;font-size:1rem;height:auto;left:0;line-height:normal;padding:.5rem;position:absolute;top:0;width:auto;z-index:100000}hero-stats .hero-photo-fade{background:linear-gradient(180deg,#1f2574 0,rgba(31,37,116,0));height:10rem;left:0;position:absolute;top:0;width:100%;z-index:100}hero-stats .hero-stats{align-self:flex-end;background:#1f2574;box-shadow:0 .5rem 1.5rem 0 rgba(0,0,0,.3);padding:1rem 2rem}@media (min-width:48rem){hero-stats .hero-stats{background:#1f2574;margin:3rem auto 2rem;padding:1rem 1.5rem;transition-delay:.9s;width:50%}}@media (min-width:64rem){hero-stats .hero-stats{margin:3.5rem auto 2rem;padding:1rem 1.5rem;width:50%}}@media (min-width:81.25rem){hero-stats .hero-stats{margin:5rem auto 2rem;padding:1rem 1.5rem}}hero-stats .hero-stats-footer{margin-top:1rem;text-align:center}hero-stats .hero-stats-footer-slink{color:#92c5de}hero-stats .hero-stats-footer-slink:hover{color:#ff8000}hero-stats .hero-stats-footer-link{color:#92c5de;display:inline-block;font-size:1.2rem;font-weight:300;margin-left:.5rem;margin-right:.5rem;padding:.65rem .75rem .5rem;text-decoration:none;transition:all .3s cubic-bezier(.57,.2,.21,.89)}@media (min-width:48rem){hero-stats .hero-stats-footer-link{white-space:nowrap}}@media (min-width:64rem){hero-stats .hero-stats-footer-link{padding:.65rem 0 .5rem;padding:.5rem 0}}hero-stats .hero-stats-footer-link:hover{color:#ff8000}hero-stats .hero-stats-footer-link:hover .chart-icon-path{fill:#ff8000}hero-stats .hero-alert{background:#fff;border-bottom:.5rem solid #ff8000;box-shadow:0 .5rem 1.5rem 0 rgba(0,0,0,.3);color:#000;text-align:left;width:100%}@media (min-width:48rem){hero-stats .hero-alert{align-content:center;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:center;position:relative;top:2rem;width:95%}}@media (min-width:81.25rem){hero-stats .hero-alert{width:95%}}hero-stats .hero-alert-align{padding:2rem;text-align:center}@media (min-width:48rem){hero-stats .hero-alert-align{align-items:center;display:flex;padding:1.5rem;text-align:left;width:60%}}@media (min-width:64rem){hero-stats .hero-alert-align{padding:2rem;width:66%}}@media (min-width:81.25rem){hero-stats .hero-alert-align{padding:2.5rem}}hero-stats .hero-alert-icon{fill:#1f2574;display:block;height:4rem;margin:0 auto 1rem;position:relative;width:4rem}@media (min-width:48rem){hero-stats .hero-alert-icon{align-self:flex-start;flex:1 0 auto;height:3rem;margin:0 1rem 0 0;top:.5rem;width:3rem}}hero-stats .hero-alert-social{background:#fff;padding:2rem;text-align:center}@media (min-width:48rem){hero-stats .hero-alert-social{align-items:flex-start;display:flex;padding:1.5rem;width:40%}}@media (min-width:64rem){hero-stats .hero-alert-social{padding:2.5rem;width:34%}}@media (min-width:81.25rem){hero-stats .hero-alert-social{padding:2.5rem 2rem}}hero-stats .hero-alert-social-align{width:100%}hero-stats .hero-alert-social .social-link{background:#1f2574}hero-stats .hero-alert-social .social-link:hover{background:#003d9d}hero-stats .hero-alert-social .social-link:hover .social-icon{fill:#fff}hero-stats .hero-alert-text p{font-weight:300}.jumbo-img{background-color:#1f2574;background-image:linear-gradient(180deg,#1f2574,rgba(31,37,116,0) 20%),url(/img/hero.jpg);background-position:center 10%;background-repeat:no-repeat;background-size:contain}@media (min-width:48rem){.jumbo-img{background-size:cover}}.chart-icon{width:25px}.chart-icon-path{fill:#92c5de;transition:all .3s cubic-bezier(.57,.2,.21,.89)}.chart-arrow svg{height:20px;width:20px}.chart-arrow-path{fill:#ff8000}@media (max-width:767.98px){.hero-wrap .px-10px{padding-left:15%!important;padding-right:15%!important}}video-section .video{background:#f0f0f0;order:2;width:100%}@media (min-width:48rem){video-section .video{background:#fff;order:1}video-section .video-wrap{padding-top:0}}@media (min-width:81.25rem){video-section .video-wrap{padding-top:0}}video-section .video-item{text-align:left}.featured-content .news,news-section .news{background:#fff;order:3;text-align:center;width:100%}@media (min-width:48rem){.featured-content .news,news-section .news{order:3}.featured-content .news-grid,news-section .news-grid{display:flex}}.featured-content .news-item,news-section .news-item{padding:1.25rem 0;text-align:left}.featured-content .news-item p,news-section .news-item p{font-weight:300}@media (min-width:48rem){.featured-content .news-item,news-section .news-item{padding:.75rem;width:33%}}@media (min-width:81.25rem){.featured-content .news-item,news-section .news-item{padding:1rem 1rem 0}}.featured-content .news-item-link,news-section .news-item-link{display:block;text-decoration:none}.featured-content .news-item-link:focus .news-item-headline,.featured-content .news-item-link:hover .news-item-headline,news-section .news-item-link:focus .news-item-headline,news-section .news-item-link:hover .news-item-headline{color:#003d9d}.featured-content .news-item-date,news-section .news-item-date{color:#000;display:block;font-size:.85rem;margin-bottom:.25rem;text-transform:uppercase}.featured-content .news-item-headline,news-section .news-item-headline{color:#003d9d;margin-bottom:.25rem;transition:color .3s cubic-bezier(.57,.2,.21,.89)}@media (min-width:48rem){.featured-content .news-item-headline,news-section .news-item-headline{overflow-wrap:break-word}}@media (min-width:81.25rem){.featured-content .news-item-headline,news-section .news-item-headline{overflow-wrap:normal}}.featured-content .featured-content-image,news-section .featured-content-image{border:1px solid;display:block;overflow:hidden}.featured-content .featured-content-image img,news-section .featured-content-image img{height:240px;object-fit:cover;width:100%}.featured-content .featured-content-image img.state-map,news-section .featured-content-image img.state-map{display:block;margin:0 auto;object-fit:contain;width:auto}pagerating-section .feedback-form{background:#003d9d;padding:2rem;text-align:center}@media (min-width:81.25rem){pagerating-section .feedback-form{padding:3rem}}pagerating-section .feedback-form-label{color:#fff;display:block;font-size:1.25rem;margin-bottom:.5rem;transition:color .3s cubic-bezier(.57,.2,.21,.89)}@media (min-width:81.25rem){pagerating-section .feedback-form-label{margin-bottom:0}}pagerating-section .feedback-form-add{padding-top:2rem}@media (min-width:48rem){pagerating-section .feedback-form-add{padding-top:0;text-align:left}}pagerating-section .feedback-form-add-grid{position:relative}@media (min-width:48rem){pagerating-section .feedback-form-add-grid{display:inline-flex}}pagerating-section .feedback-form-textarea{color:#1f2574;font-family:Roboto,sans-serif;padding:1rem;width:100%}pagerating-section .feedback-form-textarea:focus{box-shadow:0 0 0 2px #ff8000}pagerating-section .feedback-form-thanks{color:#fff;display:none}pagerating-section .feedback-form-error{display:none;font-weight:300;left:0;position:relative;text-align:left;top:100%}footer-section .footer-section{background:#1f2574;color:#fff;text-align:center}footer-section .footer-section-grid{display:flex;flex-wrap:wrap}@media (min-width:48rem){footer-section .footer-section-grid{flex-wrap:nowrap}}footer-section .footer-section-col{margin:0 auto;text-align:center;width:100%}@media (min-width:48rem){footer-section .footer-section-col{width:33.33%}}footer-section .footer-section-col-nav{order:2}@media (min-width:48rem){footer-section .footer-section-col-nav{order:0}}footer-section .footer-section-col-logo{margin-bottom:2rem;order:1}@media (min-width:48rem){footer-section .footer-section-col-logo{margin-bottom:0;order:0}}footer-section .footer-section-col-hotline{margin:1rem auto;order:3}@media (min-width:48rem){footer-section .footer-section-col-hotline{margin:0 auto;order:0}}footer-section .footer-section-nav{margin-bottom:1rem;text-align:center}@media (min-width:48rem){footer-section .footer-section-nav{margin-bottom:0;text-align:left}}footer-section .footer-section-nav-link{border-radius:1.5rem;color:#92c5de;display:table;margin:0 auto;padding:.5rem;transition:color .3s cubic-bezier(.57,.2,.21,.89)}@media (min-width:48rem){footer-section .footer-section-nav-link{margin-left:0}}footer-section .footer-section-nav-link:hover{color:#ff8000}footer-section .footer-section-nav-link:focus{box-shadow:0 0 0 2px #ffcf44;color:#ff8000}@media (min-width:48rem){footer-section .footer-section-hotline{text-align:right}}footer-section .footer-section-hotline-number{border-radius:2.5rem;color:#92c5de;display:inline-block;padding:.35rem 0;transition:all .3s cubic-bezier(.57,.2,.21,.89)}footer-section .footer-section-hotline-number:hover{color:#ff8000}footer-section .footer-section-hotline-number:focus{box-shadow:0 0 0 2px #ffcf44;padding:.35rem .5rem}footer-section .footer-section-hotline-hours{font-weight:300;margin-top:1rem}@media (min-width:48rem){footer-section .footer-section-hotline-hours{margin-top:.5rem}}footer-section .footer-section-logo{display:block;margin:0 auto;max-width:9rem;padding:1rem}@media (min-width:48rem){footer-section .footer-section-logo{max-width:12rem}}footer-section .footer-section-logo:hover .logo-mark-orange{fill:#fff}footer-section .footer-section-logo:hover .logo-mark-white{fill:#ff8000}footer-section .footer-section-logo:focus{box-shadow:0 0 0 2px #ffcf44}footer-section .footer-section-logo:focus .logo-mark-orange{fill:#fff}footer-section .footer-section-logo:focus .logo-mark-white{fill:#ff8000}footer-section .footer-section .social{margin:1.5rem auto}@media (min-width:48rem){footer-section .footer-section .social{margin:1rem 0}}@media (min-width:81.25rem){footer-section .footer-section .social{margin:-1.5rem 0 1.5rem}}footer-section .footer-section-utility{font-weight:300;margin-top:1rem}@media (min-width:48rem){footer-section .footer-section-utility{margin-top:2rem}}footer-section .footer-section-utility-nav{line-height:1.2}footer-section .footer-section-utility-nav-link{border-radius:1.5rem;color:#92c5de;display:inline-block;font-size:.85rem;line-height:1;margin:.25rem;padding:.25rem .4rem;transition:color .3s cubic-bezier(.57,.2,.21,.89);white-space:nowrap}@media (min-width:48rem){footer-section .footer-section-utility-nav-link{font-size:1rem;margin:.25rem}}footer-section .footer-section-utility-nav-link:hover{color:#ff8000}footer-section .footer-section-utility-nav-link:focus{box-shadow:0 0 0 1px #ffcf44;color:#ff8000}footer-section .footer-section-utility-official{display:block;font-size:.85rem;margin-top:1.5rem}@media (min-width:48rem){footer-section .footer-section-utility-official{font-size:1rem;margin-top:1rem}}footer-section .footer-section .ca-gov{margin-top:1.25rem;width:75px}footer-section .footer-section .ca-gov .logo-cagov svg .st0{stroke:#ff8002;fill:#ff8002;transition:fill .5s cubic-bezier(.57,.2,.21,.89);transition:stroke .5s cubic-bezier(.57,.2,.21,.89)}footer-section .footer-section .ca-gov .logo-cagov svg .st1{stroke:#fff;fill:#fff;transition:fill .5s cubic-bezier(.57,.2,.21,.89);transition:stroke .5s cubic-bezier(.57,.2,.21,.89)}footer-section .footer-section .ca-gov .logo-cagov:hover svg .st0{stroke:#fff;fill:#fff}footer-section .footer-section .ca-gov .logo-cagov:hover svg .st1{stroke:#ff8002;fill:#ff8002}footer-section .footer-section .logo-flanked{display:flex;flex-flow:column;justify-content:space-between;margin-top:0;padding-top:2rem}.safer-economy-page .jumbotron+.container{padding-top:0}.safer-economy-page .jumbotron{margin-bottom:0;padding-bottom:0}.safer-economy-page .matrix-holder cagov-accordion .accordion-title h4{font-weight:300}html[dir=rtl] .full-bleed{margin-left:auto;margin-right:calc(50% - 50vw);width:100vw}cagov-reopening .subtitle-color{color:#1f2574}cagov-reopening .reopening-activities{margin-top:20px}cagov-reopening .reopening-activities label{font-weight:700}cagov-reopening .reopening-activities #awesomplete_list_2{max-height:283px;overflow:scroll}cagov-reopening .form-row>[class*=col-]{padding-left:10px;padding-right:10px}cagov-reopening .reopening-form-group{padding-bottom:1.5rem}cagov-reopening .reopening-form-group label{display:block}@media (max-width:20.5rem){cagov-reopening .reopening-form-group{padding-bottom:3rem}}cagov-reopening .reopening-fields{background-color:#f3f5fc;margin:0 0 1.2%;padding:20px;text-align:center}@media (min-width:48rem){cagov-reopening .reopening-fields{padding:50px}}cagov-reopening .reopening-fields input{font-size:1.2rem}cagov-reopening .reopening-fields button[type=submit]{background-color:#003d9d;display:block;font-size:1.15rem;height:50px;margin:10px auto;padding:.5rem 1.3rem}cagov-reopening .visually-hidden{visibility:hidden}cagov-reopening .awesomplete ul{text-align:left}cagov-reopening .awesomplete ul li:hover mark,cagov-reopening .awesomplete ul li[aria-selected=true] mark{background:transparent}cagov-reopening .awesomplete li.separator{border-bottom:1px solid #979797;margin-bottom:10px;padding-bottom:10px}cagov-reopening .awesomplete mark{background:transparent;font-weight:700;padding:0}cagov-reopening .reopening-field-error{bottom:1rem;position:absolute}@media (min-width:48rem){cagov-reopening .reopening-field-error{bottom:0}}cagov-reopening .reopening-form-error{margin-top:-1rem}cagov-reopening .card-content{background:#fff;margin:0;padding:15px 0 30px}cagov-reopening .card-activity,cagov-reopening .card-county{padding:0 30px 30px}cagov-reopening .card-county{margin:5px 0 0}cagov-reopening .card-activity{background-color:#fff;padding:30px 30px 0;text-align:left}cagov-reopening .card-activity:not(:last-of-type) .card-activity-separator:after{border-bottom:1px solid;content:"";display:block;height:3px;margin:30px 0 0;width:100%}cagov-reopening .card-activity:last-of-type .card-activity-separator:after{border-bottom:none;margin:0}cagov-reopening .pill{border-radius:30px;color:#000;display:inline-block;font-weight:500;margin:10px 0 20px;padding:10px 25px;text-transform:uppercase}cagov-reopening .county-color-1,cagov-reopening .county-color-2,cagov-reopening .county-color-3,cagov-reopening .county-color-4{margin-bottom:20px;padding:20px 15px 25px}cagov-reopening .county-color-1{background-color:#faf1d7;border-bottom:8px solid #e6b735}cagov-reopening .county-color-1 .pill{background-color:#e6b735}cagov-reopening .county-color-2{background-color:#f7e4d9;border-bottom:8px solid #d97641}cagov-reopening .county-color-2 .pill{background-color:#d97641}cagov-reopening .county-color-3{background-color:#f3d8dd;border-bottom:8px solid #c43d53}cagov-reopening .county-color-3 .pill{background-color:#c43d53;color:#fff}cagov-reopening .county-color-4{background-color:#e6d5e1;border-bottom:8px solid #802f67}cagov-reopening .county-color-4 .pill{background-color:#802f67;color:#fff}cagov-reopening .btn-primary{text-transform:uppercase}cagov-reopening form{padding-bottom:2rem}.card-title .card-title{display:none}@media (min-width:48rem){.card-title .card-title{display:block}}.matrix-holder{margin-bottom:30px}.safer-economy-page main div.container-fluid:nth-of-type(1n) h1,.safer-economy-page main div.container-fluid:nth-of-type(1n) p{text-align:center}.safer-economy-page main div.container-fluid:nth-of-type(1n) .row{justify-content:center!important}.safer-economy-page main div.container:nth-of-type(2n) p{font-size:1.25rem}.safer-economy-page h2{text-align:center}button.clear{background-color:transparent;border:none;color:#1f2574;font-weight:300;position:absolute;right:20px;top:50px;transition:all .3s ease}button.clear span.ca-gov-icon-close-line{position:relative;transition:all .3s ease}button.clear:hover span.ca-gov-icon-close-line{display:inline-block;transform:scale(1.2)}.tableauPlaceholder{margin:0 auto}figure.table-gridded table{font-size:.95rem!important;line-height:1.4rem}figure.table-gridded table td{border-bottom:1px solid #f2f5fc;padding-bottom:20px;padding-right:40px;padding-top:20px}cagov-vaccinesurvey,cwds-survey{display:block;position:relative;z-index:998}cagov-vaccinesurvey .survey,cwds-survey .survey{background-color:#fff;border-bottom:.5rem solid #ff8000;margin:0 auto;padding:0 0 1rem;width:100%}cagov-vaccinesurvey .survey-content,cwds-survey .survey-content{text-align:center}cagov-vaccinesurvey .survey-content-prompt,cwds-survey .survey-content-prompt{font-size:1.25rem;font-weight:300;margin:1.5rem 0 .5rem}.autocomplete-inline input.form-control-lg{min-width:400px}.toggle-group-container.d3-charts{width:1000px}.toggle-group-container:not(.d3-charts){margin-bottom:50px;min-height:520px;position:relative;width:1000px}.toggle-group-container:not(.d3-charts) .toggle-group-element{left:0;position:absolute;top:0;width:100%}.toggle-group-container:not(.d3-charts).hospitals-group{min-height:550px}.tableauPlaceholder{margin-bottom:30px}.tableauPlaceholder+iframe,.tableauPlaceholder iframe{margin:0 auto}@media (max-width:760px){.toggle-group-container:not(.d3-charts){height:1500px;width:100%}.toggle-group-container:not(.d3-charts).cases-group{height:690px}.autocomplete-inline input.form-control-lg{min-width:auto;width:100%}.form-inline{justify-content:space-around}}.error-text{color:#c00;font-weight:700;margin-top:-30px}#clearCounty{top:12px}#clearCounty:focus{outline:2px solid #1f2574}@media (max-width:767.98px){.hero-wrap .px-10px,.row.justify-content-md-center .px-10px{padding-left:15%!important;padding-right:15%!important}}.filter-buttons--statedash{display:block;height:50px;padding-top:10px;width:94%;z-index:5}.filter-buttons--statedash .small-tab{width:50%}@media (min-width:767.98px){.chart.filter-button-space .chart-title{margin-bottom:50px}}.full-bleed{margin-left:calc(50% - 50vw);width:100vw}p.emphasized{font-size:1.45rem}.bg-darkblue a,.bg-darkblue a:focus{color:#92c5de;text-decoration:underline}.bg-darkblue a:hover{color:#92c5de;text-decoration:none}.bg-darkblue a:visited{color:#b797d8;text-decoration:underline}@media (max-width:900px){.awesomplete{display:inline-block}.form-inline{align-items:start;margin:0 auto}}.eq-data{color:#ff8000!important;font-weight:700!important}.bd-20{border:7px solid #f2f5fc;border-radius:20px!important}.eq-cases{margin-top:auto}.learn-more-links .faq-twitter{order:1;width:100%}@media (min-width:48rem){.learn-more-links .faq-twitter{order:2}.learn-more-links .faq-twitter-wrap{align-items:center;display:flex}}.learn-more-links .faq{text-align:left}@media (min-width:48rem){.learn-more-links .faq{padding:0 2rem 0 0;width:50%}.learn-more-links .faq .button{margin-left:.75rem}}.learn-more-links .faq cwds-arrow{margin-left:auto}.learn-more-links .faq-item-link{align-items:center;border-bottom:1px solid #1f2574;display:flex;padding:1.2rem .75rem;position:relative;transition:background .3s cubic-bezier(.57,.2,.21,.89);width:100%}.learn-more-links .faq-item-link:focus{background:#003d9d;box-shadow:0 0 0 2px #ffcf44}.learn-more-links .faq-item-headline{color:#1f2574;font-family:Roboto,sans-serif;margin-bottom:0!important;margin-right:1rem;padding-top:0;position:relative;z-index:100}.learn-more-links .faq-item:hover .faq-item-link{background:#f2f5fc}.learn-more-links .faq article:first-child .faq-item-link{border-top:1px solid #003d9d}.learn-more-links .cwdsarrow{margin-bottom:0!important}.chart-data-label{font-size:.95rem}.chart{display:block;margin:auto;position:relative;width:100%}.chart.d-none{display:none}.chart .svg-holder svg{width:100%}.chart .chart-title{border-bottom:1px solid;margin-bottom:1rem;padding-bottom:.3rem}.chart .chart-title:first-letter{text-transform:capitalize}.chart .special-note{background:#f2f5fc;margin:0 auto;padding:1rem 1rem 1rem 3.5rem;position:relative}.chart .special-note p{font-size:.95rem;margin-bottom:0!important}.chart .special-note p:before{color:#003d9d;content:"\e072";font-family:CaGov!important;font-size:2rem;left:15px;position:absolute;top:10px}.chart .more-than-labels{font-size:.75rem}.chart .change-from-month-labels{text-anchor:unset;font-size:.85rem}.chart .label{font-size:.95rem}.chart .bar-label{text-anchor:unset;font-size:.95rem;font-weight:700}.chart .bars.bars-unknown{font-size:.7rem;font-weight:100}.chart .chart-description{min-height:4rem}.chart .bar-chart-label.label{font-weight:100}.chart .legend-label,.chart .legend text,.chart .tick text,.chart text.y-label{font-size:.85rem}.chart .bars{text-anchor:unset}.chart .bars,.chart .xaxis-label{font-size:.95rem;font-weight:700}@media (max-width:768px){.chart .bar-chart-label.label{font-size:.75rem;font-weight:100}.chart .bar-label tspan{font-size:.75rem}.chart .bar-chart-label.label,.chart .bars,.chart .legend-label,.chart .tick text{font-size:.85rem}}.chart .tooltip-container{background:#fff;position:absolute;visibility:hidden;width:250px;z-index:10}.chart .chart-tooltip{border:none;box-shadow:0 0 5px 2px rgba(0,0,0,.14);font-size:.75rem;min-width:100px;padding:1rem 2rem;pointer-events:none}.chart .chart-overlaybox-container{background:#fff;position:absolute;visibility:hidden;width:250px;z-index:10}.chart .chart-overlaybox{border:1px solid #ccc;box-shadow:-12px 11px 5px -4px rgba(0,0,0,.4);min-width:100px;padding:10px;pointer-events:none}.chart .highlight-data{font-weight:700;padding-right:2px}.arrow-table .grid-layout{grid-gap:30px;grid-row-gap:15px;display:grid;grid-template-columns:1fr 1fr 1fr;padding:2%}@media (max-width:768px){.arrow-table .grid-layout{grid-template-columns:1fr}}.arrow-table .head{background-color:#003d9d;color:#fff;font-size:1.3rem;font-weight:700;height:60px;line-height:60px;position:relative;text-align:center}.arrow-table .cell{padding-top:20px}.arrow-table .arrow-right{border-left:30px solid #003d9d;right:-30px}.arrow-table .arrow-right,.arrow-table .arrow-right2{border-bottom:30px solid transparent;border-top:30px solid transparent;height:0;position:absolute;top:0;width:0}.arrow-table .arrow-right2{border-left:30px solid #fff;left:0}figure.tools table td:first-child,figure.tools table th:first-child{width:20%}figure.tools table td:nth-child(2),figure.tools table th:nth-child(2){width:15%}figure.tools table td:nth-child(3),figure.tools table th:nth-child(3){width:50%}figure.tools table td:nth-child(4),figure.tools table th:nth-child(4){width:15%}html:not([lang=en-US]) footer-section .social{margin:1.5rem auto}@media (min-width:48rem){html:not([lang=en-US]) footer-section .social{margin:1rem 0}}@media (min-width:81.25rem){html:not([lang=en-US]) footer-section .social{margin:1.5rem 0}}html[dir=rtl] .header-search-button{left:4px!important;right:unset!important}[lang=ar] a.list-group-item.list-group-item-action{padding-right:10px;text-indent:0}[lang=ar] label{margin-left:.5rem;margin-right:0}[lang=ar] header cagov-navoverlay .menu-trigger{margin-left:0;margin-right:1em}[lang=ar] header .header-logo-text{padding-left:0;padding-right:.75rem}[lang=ar] header .header-search{margin:.5rem 1rem .5rem .5rem}@media (min-width:48rem){[lang=ar] header .header-search{margin:0 auto 0 0;padding:0 .25rem 0 0}}@media (min-width:64rem){[lang=ar] header .header-search{margin:.5rem auto .5rem .5rem;padding:.25rem .75rem .25rem .25rem}}@media (min-width:81.25rem){[lang=ar] header .header-search{margin:.5rem auto .5rem .5rem;padding:.5rem 1rem .5rem .5rem}}[lang=ar] header .header-search-label{border-left:1px solid #1f2574;border-right:none;padding:0 0 0 .75rem}[lang=ar] header .header-search-field{padding:.75rem .75rem .75rem 0}@media (min-width:48rem){[lang=ar] header .header-search-field{padding:.75rem .75rem .75rem 0}}@media (min-width:64rem){[lang=ar] header .header-search-field{padding:.75rem .35rem .75rem .5rem}}@media (min-width:81.25rem){[lang=ar] header .header-search-field{padding:.75rem .35rem .75rem .5rem}}[lang=ar] hero-stats .hero-alert-icon{margin:0 0 0 1rem}[lang=ar] faq-section .faq-item-headline{margin-left:1rem;margin-right:0}[lang=ar] faq-section .faq cwds-arrow{margin-left:0;margin-right:auto}@media (min-width:48rem){[lang=ar] pagerating-section .feedback-form-grid-col:first-child{border-left:2px solid hsla(0,0%,100%,.25);border-right:none;padding-left:2rem;padding-right:0}[lang=ar] pagerating-section .feedback-form-grid-col:last-child{padding-left:0;padding-right:2rem}}
    </style>
  

  
      
    

    
    
    
  </head>
  <body class="interior-page">

    
    <header class="header fixed relative-position" role="banner">

  <div class="header-wrap">
    
    <a class="header-logo" href="/zh-hant/">
      <div class="header-logo-grid">
        <div class="header-logo-mark">
          <svg class="logo-mark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 140"><title>全民加州</title><g class="mark-ca"><path class="logo-mark-orange" d="M48.2,83l-13.2,28.6h25.2L48.2,83z M66.7,126.9H28.1l-6,13H0.2l48.7-99.8l44.6,99.8H72.1L66.7,126.9z"/><polygon class="logo-mark-orange" points="117,42.9 117,122.4 146.9,122.4 146.9,139.9 97.1,139.9 97.1,42.9"/><polygon class="logo-mark-orange" points="170.2,42.9 170.2,122.4 200,122.4 200,139.9 150.2,139.9 150.2,42.9"/></g>
          <g class="mark-all"><path class="logo-mark-white" d="M21,8.7c-2-2.2-4.3-3.3-7.1-3.3c-4.6,0-8.4,3.9-8.4,8.7c0,4.8,3.7,8.7,8.4,8.7c2.9,0,5.3-1.2,7.4-3.6l3.4,3.4 c-2.8,3.1-6.6,5.1-10.8,5.1C6.2,27.8,0,21.7,0,14.1C0,6.5,6.2,0.4,13.9,0.4c4.2,0,8.1,2,10.8,5.1L21,8.7z"/><path class="logo-mark-white" d="M37,11.8l-3.6,7.9h6.9L37,11.8z M42,23.9H31.4l-1.6,3.6h-6L37.1,0l12.3,27.5h-5.9L42,23.9z"/><polygon class="logo-mark-white" points="56.1,0.8 56.1,22.7 64.3,22.7 64.3,27.5 50.6,27.5 50.6,0.8"/><rect class="logo-mark-white" x="66" y="0.8" width="5.5" height="26.7"/><polygon class="logo-mark-orange" points="74.6,27.5 74.6,0.8 89.1,0.8 89.1,5.6 80.1,5.6 80.1,11.1 87.6,11.1 87.6,15.9 80.1,15.9 80.1,27.5"/><path class="logo-mark-orange" d="M95.1,14.1c0,4.8,3.7,8.7,8.4,8.7c4.6,0,8.4-3.9,8.4-8.7c0-4.8-3.8-8.7-8.4-8.7C98.8,5.4,95.1,9.3,95.1,14.1 M117.4,14.1c0,7.6-6.2,13.7-13.9,13.7c-7.7,0-13.9-6.1-13.9-13.7c0-7.6,6.2-13.7,13.9-13.7C111.2,0.4,117.4,6.5,117.4,14.1"/><path class="logo-mark-orange" d="M125.3,5.6v6.7h2.9c2.3,0,3.9-1.1,3.9-3.4c0-2.2-1.6-3.3-3.9-3.3H125.3z M125.3,16.8v10.6h-5.5V0.8h8.8 c4.9,0,9,3.1,9,8c0,3.1-1.7,5.7-4.2,7l5,11.6h-6L128,16.8H125.3z"/><polygon class="logo-mark-white" points="159.4,0.8 164.9,0.8 164.9,28.2 145.9,11.6 145.9,27.5 140.4,27.5 140.4,0 159.4,16.6"/><rect x="167.3" y="0.8" class="logo-mark-white" width="5.5" height="26.7"/><path class="logo-mark-white" d="M187.2,11.8l-3.6,7.9h6.9L187.2,11.8z M192.3,23.9h-10.6l-1.6,3.6h-6L187.4,0l12.3,27.5h-5.9L192.3,23.9z"/></g></svg>
        </div>
        <div class="header-logo-text">
          <div class="header-logo-text-url">COVID19.CA.GOV</div>
          <div class="header-logo-text-title">您的行動可拯救生命</div>
        </div>
      </div>
    </a>

    <div class="header-search" role="search">
      <form class="header-search-form" action="/zh-hant/search/">
        <label class="header-search-label" for="header-search-site">搜尋</label>
        <input name="q" id="header-search-site" class="header-search-field" type="search" data-placeholder-wide="站內搜尋" data-placeholder-mobile="搜尋">
        <button class="header-search-button" aria-label="Submit Search">
          <svg class="header-search-button-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title></title><path d="M13.8,8.5c0-3-2.4-5.4-5.4-5.4c-3,0-5.4,2.4-5.4,5.4s2.4,5.4,5.4,5.4C11.4,13.8,13.8,11.4,13.8,8.5z M20,18.5 c0,0.8-0.7,1.5-1.5,1.5c-0.4,0-0.8-0.2-1.1-0.5l-4.1-4.1c-1.4,1-3.1,1.5-4.8,1.5C3.8,16.9,0,13.1,0,8.5S3.8,0,8.5,0
            c4.7,0,8.5,3.8,8.5,8.5c0,1.7-0.5,3.4-1.5,4.8l4.1,4.1C19.8,17.7,20,18.1,20,18.5z"/></svg>
        </button>
      </form>
    </div>

    <div class="dropdown">
      <button
        class="translate dropdown-toggle border-0 rounded-50 ml-3"
        type="button"
        aria-expanded="false"
        aria-haspopup="true"
        data-toggle="dropdown"
        id="dropdown-menu-button"
      >
          <span id="dropdown-text" data-label-wide="選擇語言" data-label-mobile="語言"></span>
          <svg aria-hidden="true" class="header-language-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 19"><path d="M0.7,2.2l1.5-1.4C2.7,0.2,3.2,0,3.9,0s1.2,0.2,1.7,0.7L15,10l9.4-9.3c0.5-0.5,1-0.7,1.8-0.7
            c0.7,0,1.3,0.2,1.8,0.7l1.4,1.4C29.8,2.7,30,3.2,30,3.9s-0.2,1.3-0.7,1.8L16.7,18.2c-0.5,0.5-1.1,0.7-1.8,0.7s-1.3-0.2-1.8-0.7
            L0.7,5.7C0.2,5.2,0,4.6,0,3.9S0.2,2.7,0.7,2.2z"></path></svg>
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdown-menu-button">
          
            <a class="dropdown-item" rel="alternate" lang="en" hreflang="en" href="/equity/">English</a>
          
            <a class="dropdown-item" rel="alternate" lang="es" hreflang="es" href="/es/equity/">Español</a>
          
            <a class="dropdown-item" rel="alternate" lang="tl" hreflang="tl" href="/tl/equity/">Tagalog</a>
          
            <a class="dropdown-item" rel="alternate" lang="ar" hreflang="ar" href="/ar/equity/">العربية</a>
          
            <a class="dropdown-item" rel="alternate" lang="ko" hreflang="ko" href="/ko/equity/">한국어</a>
          
            <a class="dropdown-item" rel="alternate" lang="vi" hreflang="vi" href="/vi/equity/">Tiếng Việt</a>
          
            <a class="dropdown-item" rel="alternate" lang="zh-Hans" hreflang="zh-Hans" href="/zh-hans/equity/">简体中文</a>
          
          <a class="dropdown-item" href="/zh-hant/translate/">更多資訊……</a>
        </div>
      </div>
      <cagov-navoverlay 
        data-json="/menu--zh-Hant.json"
        data-search="/zh-hant/search/"
        data-label-home="主頁"
        data-label-menu="菜單"
        data-label-menu-close="關閉"
        data-label-search="搜尋"
        data-label-placeholder="您在查找什麼？"></cagov-navoverlay>
  </div>

</header>
<div class="nav-scroll-spy" aria-hidden="true"></div>

    <main id="main">
      
  <div class="container-fluid jumbotron inverse-hyperlink jumbo-img">
    <div class="container">
      <div class="row">
        <div class="col-lg-10 mx-auto">
          <h1>加州致力於實現健康公平</h1>
          
            <p class="small-text">最近更新&nbsp;2021年5月19日, 上午10:00</p>
          
        </div>
      </div>
    </div>
  </div><div class="container">
    <div class="row">
      <div class="col-lg-10 mx-auto">
        
<!-- -->    <p class="emphasized">所有加州民眾，不論其居住的地方、工作環境、社會支援或身份如何，都值得擁有健康的生活。 </p>



<p>您將在本頁面中了解以下內容： </p>



<ul class="toc"><li><strong><a href="#addressing-health-equity" data-type="internal" data-id="#addressing-health-equity">加州正如何解決健康公平問題</a></strong></li><li><strong><a href="#overview-of-disparities">本州多元化社區的差異概況</a></strong></li><li><strong><a href="#reopening-equitably">加州公平地重新開放計劃</a></strong></li><li><strong><a href="#community-impact">查看有關您所在縣內的社區受影響程度的數據</a></strong></li><li><strong><a href="#factors">了解其他因素如何增加COVID-19風險</a></strong></li></ul>



<h2 id="addressing-health-equity">加州正如何解決健康公平問題</h2>



<p>COVID-19凸顯出了現有的健康不公平問題。其中許多不公平問題是由於結構性種族主義導致的。其中一種形式便是醫療保健資源分配及獲取的不公平。</p>



<p>為努力建設全民加州 (California for All)，州府現正識別受影響最大的社區並引導資源，以解決COVID-19健康不公平問題。降低所有社區內的COVID-19風險有益於所有人，並且加州政府正努力將其納入重新開放計劃。</p>



<p>州公共衛生領導人無法獨自解決COVID-19健康不公平問題。為全民打造健康的加州，需要與各個級別的私營行業、地方政府及社區合作夥伴攜手合作。</p>



<div class="mt-5"></div>



<div class="bg-lightblue py-5 full-bleed"> 
    <div class="container py-2">
        
        
        <div class="row pb-4">
            <div class="col-lg-10 mx-auto">
            <h2 class="text-center color-purple" id="overview-of-disparities">本州多元化社區的差異十分嚴重</h2>
                <p>COVID-19對加州的低收入人士、拉丁裔、黑人、太平洋島民社區及必要工作者（例如醫療保健、雜貨店和清潔服務工作者）造成了嚴重影響。</p>
            </div>
        </div><!--END row-->               <div class="row">
            <div class="col-lg-10 mx-auto">
                <div class="container">                                <cagov-equity-highlight-stats>             <div class="row d-flex row-eq-height justify-content-md-center pb-4">
                <div class="col-md-3 bg-purple bd-20 py-3 text-center text-white d-flex flex-column">                   <!----> <!---->                                <div class="eq-text mb-3">拉丁裔的死亡率比全州高<span class="eq-data"><span class="death_rate_vs_statewide_percent_latino">21</span>%</span>                   </div>                                <!---->                                <div class="eq-cases">
                    <p class="text-xs">每100K人中的死亡數：</p>
                    <p class="text-xs mb-0"><strong><span class="death_rate_per_100K_latino">180</span></strong> 拉丁裔 <br> <strong><span class="death_rate_per_100K_statewide">148</span></strong> 所有族裔                     </p>
                  </div>
                </div>
            
                <div class="col-md-3 bg-purple bd-20 py-3 text-center text-white d-flex flex-column">                   <!----> <!---->                                <div class="eq-text mb-3">太平洋島民的患病率比全州高<span class="eq-data"><span class="case_rate_vs_statewide_percent_pacific_islanders">34</span>%</span>                   </div>                                <!---->                   <div class="eq-cases">
                    <p class="text-xs">每100K人中的病例數：</p>
                    <p class="text-xs mb-0"><strong><span class="cases_per_100K_pacific_islanders">11,995</span></strong> NHPI <br> <strong><span class="cases_per_100K_statewide">8,968</span></strong> 所有族裔                     </p>
                  </div>
                </div>
            
                <div class="col-md-3 bg-purple bd-20 py-3 text-center text-white d-flex flex-column">                   <!----> <!---->                                <div class="eq-text mb-3">黑人的死亡率比全州高<span class="eq-data"><span class="death_rate_vs_statewide_percent_black">8</span>%</span>                   </div>                                <!---->                   <div class="eq-cases">
                    <p class="text-xs">每100K人中的死亡數：</p>
                    <p class="text-xs mb-0"><strong><span class="death_rate_per_100K_black">160</span></strong> 黑人 <br> <strong><span class="death_rate_per_100K_statewide">148</span></strong> 所有族裔                     </p>
                  </div>
                </div>
            
                <div class="col-md-3 bg-purple bd-20 py-3 text-center text-white d-flex flex-column">                   <!----> <!---->                                <div class="eq-text mb-3">收入中位數少於$40K的社區的患病率比全州高<span class="eq-data"><span class="case_rate_vs_statewide_percent_low_income">37</span>%</span>                   </div>                                <!---->                                <div class="eq-cases">
                    <p class="text-xs">每100K人中的病例數：</p>
                    <p class="text-xs mb-0"><strong><span class="case_rate_per_100K_low_income">12,302</span></strong> 收入<$40K <br> <strong><span class="cases_per_100K_statewide">8,968</span></strong> 所有收入等級                     </p>
                  </div>
                </div>
              </div>           </cagov-equity-highlight-stats>                           </div><!--END cont-->             </div><!--END col-10-->         </div><!--END row-->                                    <div class="row pb-4">
            <div class="col-lg-10 mx-auto">
                <p class="chart-data-label">注：此數據自2020年1月呈報的首例COVID-19病例起開始累計。患病率是指每100K人中的COVID-19累計病例數。死亡率是指每100K人中的COVID-19累計死亡數。</p>
            </div>
        </div><!--END row-->        </div><!--END container--> </div><!--END LIGHT BLUE BG-->    <div class="bg-darkblue py-5 full-bleed">
  <div class="container py-2">
      <div class="row pb-4">
          <div class="col-lg-10 mx-auto color-white">
            <h2 class="text-center color-orange" id="reopening-equitably">公平地重新開放</h2>
            <p>加州政府為解決健康公平問題已採取許多措施。從在Central Valley採取有針對性的措施到確保疫情最嚴重社區能獲得疫苗，加州致力於將公平性加入到我們抗擊COVID-19疫情的工作中。</p> 
            <div class="full-bleed bg-darkblue dark-accordion-bg">
            <div class="container">
            <div class="row">
            <div class="col-lg-10 mx-auto">
            <cagov-accordion class="dark-accordion">
              <div class="card">
                <button class="card-header accordion-alpha" type="button" aria-expanded="false">
                  <div class="accordion-title">
            <h3 class=" js-qa-exclude" id="what-weve-done">已採取的措施</h3>
                  </div><div class="plus-munus"><cagov-plus></cagov-plus><cagov-minus></cagov-minus></div>
                </button>
                <div class="card-container" aria-hidden="true">
                  <div class="card-body">
            <p>加州政府已採取措施以開始解決健康公平問題。我們在Central Valley實行了一項綜合措施，以幫助受影響最嚴重的人士。</p>
<p>其中包括：</p>
<ul class=" bullet-orange">
              <li>部署支援團隊，聯合公共衛生、社會服務、食物與農業、住房與社區開發、老齡化服務及商業機構</li>
              <li>為多元化社區開發符合其文化及語言習慣的資訊及資源，包括拉丁裔、米斯特克人、旁遮普人和苗族社區</li>
              <li>為農業勞工分發個人防護裝備 (Personal Protection Equipment, PPE)</li>
              <li>透過技術援助及強制執行來提高商業合規性</li>
              <li>增加流動與快速檢測量</li>
              <li>解決費用障礙，為無保險人士及保額不足的人士提供檢測</li>
              <li>培訓擁有雙重文化背景的雙語接觸者追蹤員和病例調查員</li>
              <li>制定收穫季住房 (Housing for the Harvest) 計劃，幫助農場勞工進行自我隔離</li>
            </ul>
<p>實現疫苗公平是加州應對健康不公平的重要部分。我們認識到全加州百分之四十 (40％) 的COVID-19感染及死亡發生在加州處於健康地方指數 (Healthy Places Index, HPI) 最低四分位數的社區。由南加州公共衛生聯盟 (Public Health Alliance) 研發的<a class="external" href="https://healthyplacesindex.org/">健康地方指數</a>，能幫助我們將低收入、教育程度及醫療保健普及率等社區狀況視覺化。因此，我們會分配40％的疫苗給HPI第1個四分位數社區。</p>
<p>截至2021年4月6日，加州在疫苗公平基準下已接種高達4百萬劑疫苗。</p>

                  </div>
                </div>
              </div>
            </cagov-dark-accordion>
            </div>
            </div>
            </div>
            </div>
            
            



            




            <div class="full-bleed bg-darkblue dark-accordion-bg">
            <div class="container">
            <div class="row">
            <div class="col-lg-10 mx-auto">
            <cagov-accordion class="dark-accordion">
              <div class="card">
                <button class="card-header accordion-alpha" type="button" aria-expanded="false">
                  <div class="accordion-title">
            <h3 class=" js-qa-exclude" id="need-to-do">需採取的措施</h3>
                  </div><div class="plus-munus"><cagov-plus></cagov-plus><cagov-minus></cagov-minus></div>
                </button>
                <div class="card-container" aria-hidden="true">
                  <div class="card-body">
            <p>為確保打造全民加州 (California for All)，我們已將健康公平加入到更安全的經濟藍圖的等級中。如果加州為HPI第1個四分位數社區民眾接種的疫苗劑量能達到里程碑式的數量，該藍圖將更新以允許各等級有更高的患病率。如需詳細了解等級變化，請參閱CDPH的<a class="external" href="https://www.cdph.ca.gov/Programs/CID/DCDC/Pages/COVID-19/COVID19CountyMonitoringOverview.aspx">更安全的經濟藍圖的框架</a>。</p>
<p>此外，各縣必須在其重新開放經濟計劃中解決COVID-19健康不公平問題。州府官員每週會與地方衛生局協作，計算總體的縣患病率和檢測呈陽性率，以及縣內受影響最嚴重的社區的檢測呈陽性率（<a href="#learn-more">健康公平指標</a>）。</p>
<p>作為此廣泛措施的一部分，各縣必須：</p>
<ul class=" bullet-orange">
              <li>界定縣內受到嚴重影響的人士，以及計算COVID-19指標並針對這些人士作出應對（接觸者追蹤、隔離支援、工作者保護措施）</li>
              <li>說明其將如何使用州資金來支援受到嚴重影響的社區</li>
              <li>表明健康公平指標不會與縣整體檢測呈陽性率相差甚遠</li>
            </ul>

                  </div>
                </div>
              </div>
            </cagov-dark-accordion>
            </div>
            </div>
            </div>
            </div>
            
            


            
            
<div class="mt-3 text-center">  <a href="#learn-more" class="link-arrow-white">             <div class="link-arrow-label">了解更多您可以採取的措施</div><cagov-arrow> </cagov-arrow></a> </div>
          </div>
      </div>

  </div><!--END container--> </div>



<h2 class="mt-5" id="community-impact">查看您所在的縣內的社區如何受到影響</h2>    <cagov-county-search></cagov-county-search> <cagov-county-toggle-buttons></cagov-county-toggle-buttons>    <h3 class="text-center" id="race-and-ethnicity">COVID-19影響（按種族和族裔劃分）</h3>



<p>拉丁裔、黑人及太平洋島民社區受到了COVID-19的嚴重影響。雖然我們在解決這些社區內的差異方面小有成效，但必須做得更好。</p>    <!--SMALL TABS ARE THE BEST --> <cagov-chart-filter-buttons class="js-re-smalls">   <div class="d-flex justify-content-center"><button class="small-tab active" data-key="cases">病例數</button> <button class="small-tab" data-key="deaths">死亡數</button> <button class="small-tab" data-key="tests">檢測數</button>   </div> </cagov-chart-filter-buttons>  <div class="container">
  <div class="row">
      <div class="col">         <cagov-chart-re-pop class="chart d-none">           <ul>
            <li data-label="chartTitle--cases">病例數佔placeholderForDynamicLocation人口的百分比</li>
            <li data-label="chartTitle--deaths">死亡數佔placeholderForDynamicLocation人口的百分比</li>
            <li data-label="chartTitle--tests">檢測數佔placeholderForDynamicLocation人口的百分比</li>
            <li data-label="chartLegend1County--cases">佔縣內病例數的百分比</li>
            <li data-label="chartLegend1County--deaths">佔縣內COVID-19死亡數的百分比</li>
            <li data-label="chartLegend1County--tests">佔縣內檢測數的百分比</li>
            <li data-label="chartLegend1State--cases">佔全州病例數的百分比</li>
            <li data-label="chartLegend1State--deaths">佔全州COVID-19死亡數的百分比</li>
            <li data-label="chartLegend1State--tests">佔全州檢測數的百分比</li>
            <li data-label="chartLegend2State">佔全州人口的百分比</li>
            <li data-label="chartLegend2County">佔全縣人口的百分比</li>
            <li data-label="chartDescription--cases">比較各種族和族裔在placeholderForDynamicLocation病例數中所佔的百分比及其在placeholderForDynamicLocation人口中所佔的百分比。</li>
            <li data-label="chartDescription--deaths">比較各種族和族裔在placeholderForDynamicLocation COVID-19死亡數中所佔的百分比及其在placeholderForDynamicLocation人口中所佔的百分比。</li>
            <li data-label="chartDescription--tests">比較各種族和族裔在placeholderForDynamicLocation檢測數中所佔的百分比及其在placeholderForDynamicLocation人口中所佔的百分比。</li>
            <li data-label="chartLineDiff">自上個月以來的變化</li>
            <li data-label="county-label">縣</li>
            <li data-label="chartMetricName--tests">檢測</li>
            <li data-label="chartMetricName--cases">病例數</li>
            <li data-label="chartMetricName--deaths">COVID-19死亡數</li>
            <li data-label="applied-suppression-total">為保護民眾隱私，恕不顯示任何數據。這是因為這一群體的病例數或檢測數過少。</li>
            <li data-label="applied-suppression-population">為保護民眾隱私，恕不顯示任何數據。這是因為這一群體的人數少於20,000。</li>
            <li data-label="missing-data-caption-line-delimiter"><br></li>
            <li data-label="chartToolTip1-caption">placeholder_DEMOGRAPHIC_SET_CATEGORY people make up <span class="highlight-data"> placeholder_METRIC_TOTAL_PERCENTAGE</span> of placeholder_SelectedMetric in placeholderForDynamicLocation and <span class="highlight-data"> placeholder_POPULATION_PERCENTAGE </span> of the placeholderForDynamicLocation population</li>
<li data-label="data-missing-applied-suppression-total--tests">由於此群體的檢測數少於11，因此數據不顯示。</li>
            <li data-label="data-missing-applied-suppression-total--tests">由於此群體的檢測數少於11，因此數據不顯示。</li>
            <li data-label="data-missing-applied-suppression-total--cases">由於此群體的病例數少於11，因此數據不顯示。</li>
            <li data-label="data-missing-applied-suppression-total--deaths">由於此群體的死亡數少於11，因此數據不顯示。</li>
            <li data-label="data-missing-applied-suppression-population--tests">由於此群體的人數少於20,000，因此數據不顯示。</li>
            <li data-label="data-missing-applied-suppression-population--cases">由於此群體的人數少於20,000，因此數據不顯示。</li>
            <li data-label="data-missing-applied-suppression-population--deaths">由於此群體的人數少於20,000，因此數據不顯示。</li>
        </ul>       </cagov-chart-re-pop>     </div>
    <div class="col">       <cagov-chart-re-100k class="chart d-none">          <ul>
          <li data-label="chartTitle--cases">每100K人的患病率（按placeholderForDynamicLocation的種族和族裔群體劃分）</li>
          <li data-label="chartTitle--deaths">每100K人的死亡率（按placeholderForDynamicLocation的種族和族裔群體劃分）</li>
          <li data-label="chartTitle--tests">每100K人的檢測率（按placeholderForDynamicLocation的種族和族裔群體劃分）</li>
          <li data-label="chartDescription--cases">比較根據各種族和族裔的人口規模而調整的病例數。</li>
          <li data-label="chartDescription--deaths">比較根據各種族和族裔的人口規模而調整的COVID-19死亡數。</li>
          <li data-label="chartDescription--tests">比較根據各種族和族裔的人口規模而調整的檢測數。</li>
          <li data-label="chartLineDiff">自上個月以來的變化</li>
          <li data-label="chartLegend--cases">每100K人中的病例數</li>
          <li data-label="chartLegend--deaths">每100K人中的COVID-19死亡數</li>
          <li data-label="chartLegend--tests">每100K人中的檢測數</li>
          <li data-label="chartMetricName--tests">檢測數</li>
          <li data-label="chartMetricName--cases">病例數</li>
          <li data-label="chartMetricName--deaths">COVID-19死亡數</li>
          <li data-label="chartFilterLegendPfxCounty--cases">placeholderForDynamicLocation每100K人中的病例數： </li>
          <li data-label="chartFilterLegendPfxCounty--deaths">placeholderForDynamicLocation每100K人中的COVID-19死亡數： </li>
          <li data-label="chartFilterLegendPfxCounty--tests">placeholderForDynamicLocation每100K人中的檢測數： </li>
          <li data-label="chartFilterLegendPfxState--cases">全州每100K人中的病例數： </li>
          <li data-label="chartFilterLegendPfxState--deaths">全州每100K人中的COVID-19死亡數： </li>
          <li data-label="chartFilterLegendPfxState--tests">全州每100K人中的檢測數： </li>
          <li data-label="chartToolTip-caption"><span class="highlight-data">placeholderDEMO_CAT</span> people have <span class="highlight-data">placeholderMETRIC_100K</span> placeholderFilterScope per 100K people of the same race and ethnicity.</li>
            <li data-label="applied-suppression-total">為保護民眾隱私，恕不顯示任何數據。這是因為這一群體的病例數或檢測數過少。</li>
            <li data-label="applied-suppression-population">為保護民眾隱私，恕不顯示任何數據。這是因為這一群體的人數少於20,000。</li>
            <li data-label="missing-data-caption-line-delimiter"><br></li>
<li data-label="data-missing-applied-suppression-total--tests">由於此群體的檢測數少於11，因此數據不顯示。</li>
            <li data-label="data-missing-applied-suppression-total--tests">由於此群體的檢測數少於11，因此數據不顯示。</li>
            <li data-label="data-missing-applied-suppression-total--cases">由於此群體的病例數少於11，因此數據不顯示。</li>
            <li data-label="data-missing-applied-suppression-total--deaths">由於此群體的死亡數少於11，因此數據不顯示。</li>
            <li data-label="data-missing-applied-suppression-population--tests">由於此群體的人數少於20,000，因此數據不顯示。</li>
            <li data-label="data-missing-applied-suppression-population--cases">由於此群體的人數少於20,000，因此數據不顯示。</li>
            <li data-label="data-missing-applied-suppression-population--deaths">由於此群體的人數少於20,000，因此數據不顯示。</li>
        </ul>       </cagov-chart-re-100k>     </div>
  </div>
</div>



<ul class="small-text"><li>所示數據為過去30天的數據，每週更新一次。人口估算不包括「其他」或「未知」種族和族裔類別，因此其所佔的州人口百分比無法獲知。如需查看按年齡組劃分的種族和族裔數據，請參閱加州公共衛生局發佈的COVID-19<a href="https://www.cdph.ca.gov/Programs/CID/DCDC/Pages/COVID-19/Race-Ethnicity.aspx">種族和族裔數據</a>。為保護患者隱私，在1和11之間的數量均顯示為「<11」。</li><li>「其他」代表不屬於列出的任何種族或族裔的人士。「未知」種族及族裔包括拒絕提供或缺失種族和族裔資訊的人士。</li></ul>



<h3 class="text-center mt-5" id="metric">COVID-19健康公平指標</h3>



<p>健康公平指標會衡量受影響最嚴重社區的檢測呈陽性率。<a href="#learn-more">健康地方指數</a>（由南加州公共衛生聯盟研發）將這些社區作為具有較不健康社區環境（例如收入中位數低、教育完整性低和醫療保健普及率低）的人口普查區。更安全的經濟藍圖可確保各縣解決所有社區的COVID-19疫情。如要進一步開放，健康公平指標不能與縣整體檢測呈陽性率相差甚遠。詳情請參閱<a href="#learn-more" data-type="internal" data-id="#learn-more">包含健康公平指標的重新開放計劃</a>。</p>    <cagov-county-toggle-buttons></cagov-county-toggle-buttons>    <div class="col-lg-10 mx-auto"> <cagov-chart-d3-lines class="chart d-none">     <div>
      <ul>
        <li data-label="y-axis-label">檢測呈陽性率</li>
        <li data-label="data1-legend">全州檢測呈陽性率</li>
        <li data-label="data1-legend-local">placeholderForDynamicLocation檢測呈陽性率</li>
        <li data-label="data2-legend">健康公平四分位檢測呈陽性率</li>
        <li data-label="missing-data-caption">健康公平指標不適用於人口少於106,000的縣。</li>
        <li data-label="data-anomalies-caption">由於報告異常，我們無法準確顯示此數據。</li>
      </ul>
    </div> </cagov-chart-d3-lines> </div>



<p class="chart-data-label col-lg-10 mx-auto pl-lg-5 pr-lg-5">注：所示數據為7日平均檢測呈陽性率，有7天的滯後期。所示數據為截至<span data-replacement="d3-lines-report-date"></span>的7日週期數據。健康公平四分位數檢測呈陽性率，是指縣內健康地方指數人口普查區的檢測呈陽性率為最低的25%。健康公平指標不適用於人口少於106,000的縣。 </p>



<h3 class="text-center mt-5" id="data-completeness">數據完整性對於解決不公平問題而言至關重要</h3>



<p>我們對於部分社區受到的COVID-19影響了解甚多，但我們可以透過收集更多的種族、族裔、性取向及性別認同數據，來更好地投入資源。進行此數據收集工作，需要與私營行業合作夥伴、實驗室及州府和縣府官員密切合作。<a href="#learn-more">查閱有關如何改善報告的資源。</a></p>    <cagov-county-toggle-buttons></cagov-county-toggle-buttons> <cagov-chart-filter-buttons class="js-missingness-smalls">   <div class="d-flex justify-content-center"><button class="small-tab active" data-key="race_ethnicity">種族和族裔</button> <button class="small-tab" data-key="sexual_orientation">性取向</button> <button class="small-tab" data-key="gender_identity">性別認同</button>   </div> </cagov-chart-filter-buttons> <cagov-chart-equity-data-completeness class="chart d-none">   <ul>
    <div>
      <ul>
        <li data-label="title">加州按種族和族裔分類的報告</li>
        <li data-label="footnote">注：所示數據為總共30天的累計數據，更新於<span data-replacement="data-completeness-report-date"></span>。不會在檢測中收集性取向和性別認同資訊。為保護患者隱私，在1和10之間的數量不會顯示。</li>
        <li data-label="tab-label">由<span data-replace="metric-filter"></span>在<span data-replace="location"></span>報告</li>
        <li data-label="data-missing">數據缺失</li>
        <li data-label="data-reported">數據已上報</li>
        <li data-label="reported">已上報</li>
        <li data-label="missing">缺失</li>
        <li data-label="empty-tooltip">空文本</li>
        <li data-label="data-missing-applied-suppression-total">由於死亡人數少於11人，因此數據不顯示。</li>
        <li data-label="percent-change-previous-month">自上個月以來的完整度變化</li>
        <li data-label="chart-tooltip-complete">
          <div><span data-replace="location">加州</span>的<span data-replace="data-type">種族和族裔</span><span data-replace="metric">檢測</span>數據<span class="highlight-data"> <span data-replace="highlight-data"></span> </span>完整。 </div>
        </li>
        <li data-label="chart-tooltip-missing">
          <div><span data-replace="location">加州</span>的<span data-replace="data-type">種族和族裔</span><span data-replace="metric">檢測</span>數據<span class="highlight-data"> <span data-replace="highlight-data"></span> </span>缺失。 </div>
        </li>
      </ul>
      <ul data-group="displayOrder">
        <li data-item="tests">檢測數</li>
        <li data-item="cases">病例數</li>
        <li data-item="deaths">死亡數</li>
      </ul>
    </div>
  </ul> </cagov-chart-equity-data-completeness>    <div class="mb-2 mt-2"></div>    <cagov-chart-d3-bar class="chart d-none"><ul>
    <li data-label="sectionTitle" id="factors">增加感染及重症風險的因素</li>
    <li data-label="sectionDescription">住在擁擠的住房或乘坐公共交通工具的加州民眾，以及享有較少帶薪休假和其他員工保護措施的民眾有較高的COVID-19感染風險。健康問題社會決定因素，例如食物無保障、沒有醫療保險以及住房不穩定等，會增加預後不良的風險。這些健康問題社會決定因素通常是由結構性種族主義導致的。</li>
    <li data-label="chartTitleIncome">按年度家庭收入中位數範圍劃分的社區患病率</li>
    <li data-label="chartTitleHousing">按擁擠住房數量劃分的社區患病率</li>
    <li data-label="chartTitleHealthcare">按醫療保健普及度劃分的社區患病率</li>
    <li data-label="xAxisTitleIncome">年度家庭收入中位數範圍</li>
    <li data-label="xAxisTitleHousing">居住在擁擠住房之社區成員的百分比</li>
    <li data-label="xAxisTitleHealthcare">沒有醫療保險之社區成員的百分比</li>
    <li data-label="chartButtonIncome">收入</li>
    <li data-label="chartButtonHousing">擁擠的住房</li>
    <li data-label="chartButtonHealthcare">獲取醫療保險</li>
    <li data-label="footnote">注：數據來自美國社區調查，屬於全州性質。其並未反映個別縣的數據。所示數據為總共7天的累計數據，有7天的滯後期，更新於<span data-replacement="d3-bar-report-date"></span>。</li>
   <li data-label="casesPer100KPeople">每100K人中的病例數</li>
   <li data-label="statewideCaseRate">全州患病率：</li>
   <li data-label="ariaBarLabel">placeholderCaseRate 每100K人中的病例數。placeholderRateDiff30 自30天前以來的變化</li>
   <li data-label="tooltipCaption"><span class="highlight-data">placeholderCaseRate</span> 每100K人中的病例數。placeholderRateDiff30 自30天前以來的變化</li>
  </ul></cagov-chart-d3-bar>    <div class="bg-lightblue full-bleed py-4">
<div class="container">
<div class="row">
<div class="container col-lg-10">
  <h3 class="text-center" id="underlying">潛在的健康狀況</h3>
  <p>現有的健康問題會導致COVID-19症狀加劇。示例包括心臟病、肥胖症、腎病及糖尿病，所有這些疾病較常見於有色人種社區。</p>
  <p>兒童期不良經歷 (Adverse Childhood Experience, ACE) 會增加慢性疾病風險，包括心臟病、肥胖症、腎病及糖尿病，並且可能會增加COVID-19重症風險。</p>

  <ul>
    <li>ACE是指人們在18歲以前遭受的虐待、忽視及家庭挑戰經歷，並且伴有身心及行為健康狀況較差的長期風險。</li>
    <li>當在沒有保護性緩衝因素的情況下<a href="#learn-more">長期遭受ACE</a>時，可導致生物應激反應發生改變，進而影響免疫功能（不良應激反應）。</li>
    <li>有ACE經歷的個人亦可能對新的應激源的影響更加敏感，例如由COVID-19疫情帶來的應激源。<a href="#learn-more">查看如何管理壓力以保持健康。</a></li>
  </ul>
</div>
</div>
</div>
</div>



<div id="learn-more"></div> <!--THIS IS LEARN MORE SECTION--> <div class="full-bleed">
  <div class="container py-2">
    <h2 class="text-center color-purple my-4">了解更多資訊</h2>
    <div class="row pb-5">
      <div class="col-lg-6">
        <ul class="arrow-links">
            <li>                 <a class="link-arrow-blue" data-kind="pdf" href="https://www.cdph.ca.gov/Programs/CID/DCDC/CDPH%20Document%20Library/Equity%20Playbook_V1_12.1.2020_final.pdf">                     <div class="link-arrow-label">解決COVID-19不公平問題的縣府手冊</div>                     <cagov-arrow></cagov-arrow> </a>             </li>
            <li>                 <a class="link-arrow-blue" data-kind="external" href="https://www.ahrq.gov/evidencenow/tools/reduce-disparities.html">                     <div class="link-arrow-label">提高種族和族裔數據的完整度</div>                     <cagov-arrow></cagov-arrow> </a>             </li>
            <li>                 <a class="link-arrow-blue" data-kind="internal" href="/zh-hant/discrimination/">                     <div class="link-arrow-label">對抗歧視與污名化                     </div>                     <cagov-arrow></cagov-arrow> </a>             </li>
            <li>                 <a class="link-arrow-blue" data-kind="internal" href="/zh-hant/manage-stress-for-health/">                     <div class="link-arrow-label">在COVID-19疫情期間管理壓力                     </div>                     <cagov-arrow></cagov-arrow> </a>             </li>
          </ul>
      </div>
      <div class="col-lg-6">
        <ul class="arrow-links">
            <li>                 <a class="link-arrow-blue" data-kind="internal" href="/zh-hant/safer-economy/">                     <div class="link-arrow-label">包含健康公平指標的重新開放計劃</div>                     <cagov-arrow></cagov-arrow> </a>             </li>
            <li>                 <a class="link-arrow-blue" data-kind="external" href="https://www.lgbtqiahealtheducation.org/resources/in/collecting-sexual-orientation-and-gender-identity-data/">                     <div class="link-arrow-label">提高性取向和性別認同數據的完整度</div>                     <cagov-arrow></cagov-arrow> </a>             </li>
            <li>                 <a class="link-arrow-blue" data-kind="external" href="https://map.healthyplacesindex.org/">                     <div class="link-arrow-label">健康地方指數人口普查區地圖                     </div>                     <cagov-arrow></cagov-arrow> </a>             </li>
            <li>                 <a class="link-arrow-blue" data-kind="external" href="https://www.cdc.gov/coronavirus/2019-ncov/need-extra-precautions/people-with-medical-conditions.html">                     <div class="link-arrow-label">了解基礎疾病與COVID-19之間的關係                     </div>                     <cagov-arrow></cagov-arrow> </a>             </li>
        </ul>
      </div>
    </div>
  </div>
</div>    <!-- Ethnio Activation Code --> <script type="text/javascript" language="javascript" src="//ethn.io/81005.js" async="true" charset="utf-8"></script>    <p></p>
</div>
    </div>
  </div>
  <!-- end contentBlock -->

    </main>

    <script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-154336791-1', 'auto');
ga('create', 'UA-3419582-2', 'auto', 'tracker2');
ga('create', 'UA-21974567-38', 'auto', 'tracker3');
ga('send', 'pageview');
ga('tracker2.send', 'pageview');
ga('tracker3.send', 'pageview');
</script>
<script async defer src='https://www.google-analytics.com/analytics.js'></script>

<pagerating-section id="pagerating-section">
	<cagov-pagefeedback 
	data-endpoint-url="https://api.alpha.ca.gov/WasHelpful"
	data-question="您是否找到您尋找的東西？"
	data-yes="是"
	data-no="否"
	data-positive-comment-prompt="太棒了！您今天在找什麼？"
	data-comment-prompt="有什麼問題？"
	data-thanks-feedback="感謝您的回饋！"
	data-thanks-comments="太好了！"
	data-submit="提交"
	data-required-field="此為必填項"
	data-character-limit="您已達到字符限制。"
	data-anything-to-add="如果您有需要添加的任何內容，"
	data-positive-survey-url="https://ethn.io/85017"
	data-take-the-survey="填寫問卷調查"
	data-any-other-feedback="如果您對該網站有其他回饋，"
	data-negative-survey-url="https://ethn.io/77745"
	data-take-our-survey="填寫我們的問卷調查"
	></cagov-pagefeedback>	
</pagerating-section>

<footer-section>

<footer class="footer-section">
	<div class="footer-section-grid">

		<div class="footer-section-col footer-section-col-nav trigger">
			<nav class="footer-section-nav" role="navigation" aria-label="Footer navigation">
				
					<a class="footer-section-nav-link" href="/zh-hant/stay-home-except-for-essential-needs/">關於COVID-19限制</a>
				
					<a class="footer-section-nav-link" href="/zh-hant/safer-economy/">更安全的經濟藍圖</a>
				
					<a class="footer-section-nav-link" href="/zh-hant/vaccines/">疫苗</a>
				
					<a class="footer-section-nav-link" href="/zh-hant/industry-guidance/">行業指引</a>
				
					<a class="footer-section-nav-link" href="/zh-hant/get-local-information/">當地資訊和警報</a>
				
			</nav>
		</div>

		<div class="footer-section-col footer-section-col-logo trigger">
			<a class="footer-section-logo" href="/zh-hant/">
				<svg class="logo-mark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 140"><title>California for All</title><g class="mark-ca"><path class="logo-mark-orange" d="M48.2,83l-13.2,28.6h25.2L48.2,83z M66.7,126.9H28.1l-6,13H0.2l48.7-99.8l44.6,99.8H72.1L66.7,126.9z"/><polygon class="logo-mark-orange" points="117,42.9 117,122.4 146.9,122.4 146.9,139.9 97.1,139.9 97.1,42.9"/><polygon class="logo-mark-orange" points="170.2,42.9 170.2,122.4 200,122.4 200,139.9 150.2,139.9 150.2,42.9"/></g><g class="mark-all"><path class="logo-mark-white" d="M21,8.7c-2-2.2-4.3-3.3-7.1-3.3c-4.6,0-8.4,3.9-8.4,8.7c0,4.8,3.7,8.7,8.4,8.7c2.9,0,5.3-1.2,7.4-3.6l3.4,3.4 c-2.8,3.1-6.6,5.1-10.8,5.1C6.2,27.8,0,21.7,0,14.1C0,6.5,6.2,0.4,13.9,0.4c4.2,0,8.1,2,10.8,5.1L21,8.7z"/><path class="logo-mark-white" d="M37,11.8l-3.6,7.9h6.9L37,11.8z M42,23.9H31.4l-1.6,3.6h-6L37.1,0l12.3,27.5h-5.9L42,23.9z"/><polygon class="logo-mark-white" points="56.1,0.8 56.1,22.7 64.3,22.7 64.3,27.5 50.6,27.5 50.6,0.8"/><rect class="logo-mark-white" x="66" y="0.8" width="5.5" height="26.7"/><polygon class="logo-mark-orange" points="74.6,27.5 74.6,0.8 89.1,0.8 89.1,5.6 80.1,5.6 80.1,11.1 87.6,11.1 87.6,15.9 80.1,15.9 80.1,27.5"/><path class="logo-mark-orange" d="M95.1,14.1c0,4.8,3.7,8.7,8.4,8.7c4.6,0,8.4-3.9,8.4-8.7c0-4.8-3.8-8.7-8.4-8.7C98.8,5.4,95.1,9.3,95.1,14.1 M117.4,14.1c0,7.6-6.2,13.7-13.9,13.7c-7.7,0-13.9-6.1-13.9-13.7c0-7.6,6.2-13.7,13.9-13.7C111.2,0.4,117.4,6.5,117.4,14.1"/><path class="logo-mark-orange" d="M125.3,5.6v6.7h2.9c2.3,0,3.9-1.1,3.9-3.4c0-2.2-1.6-3.3-3.9-3.3H125.3z M125.3,16.8v10.6h-5.5V0.8h8.8 c4.9,0,9,3.1,9,8c0,3.1-1.7,5.7-4.2,7l5,11.6h-6L128,16.8H125.3z"/><polygon class="logo-mark-white" points="159.4,0.8 164.9,0.8 164.9,28.2 145.9,11.6 145.9,27.5 140.4,27.5 140.4,0 159.4,16.6"/><rect x="167.3" y="0.8" class="logo-mark-white" width="5.5" height="26.7"/><path class="logo-mark-white" d="M187.2,11.8l-3.6,7.9h6.9L187.2,11.8z M192.3,23.9h-10.6l-1.6,3.6h-6L187.4,0l12.3,27.5h-5.9L192.3,23.9z"/></g></svg>
			</a>
		</div>

		<div class="footer-section-col footer-section-col-hotline trigger">
			<div class="footer-section-hotline">
				<div class="footer-section-hotline-label">新型冠狀病毒熱線</div>
				<a class="footer-section-hotline-number" href="tel:8334224255">1-833-422-4255</a>
				<div class="footer-section-hotline-hours">週一至週五上午8:00至下午8:00，週六至週日上午8:00至下午5:00</div>
			</div>
		</div>

	</div>

	<nav class="social trigger" role="navigation" aria-label="California Department of Public Health on Social Media">
		<a class="social-link" href="https://www.facebook.com/CAPublicHealth/" title="California Department of Public Health on Facebook"><svg class="social-icon" xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512"><title>California Department of Public Health on Facebook</title><path d="M304 96h80V0h-80c-61.757 0-112 50.243-112 112v48h-64v96h64v256h96V256h80l16-96h-96v-48c0-8.673 7.327-16 16-16z"></path></svg></a>
    <a class="social-link" href="https://twitter.com/CAPublicHealth" title="California Department of Public Health on Twitter"><svg class="social-icon" xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512"><title>California Department of Public Health on Twitter</title><path d="M512 113.2c-18.8 8.4-39.1 14-60.3 16.5 21.7-13 38.3-33.6 46.2-58.1-20.3 12-42.8 20.8-66.7 25.5C412 76.7 384.7 64 354.5 64c-58 0-105 47-105 105 0 8.2.9 16.2 2.7 23.9-87.3-4.4-164.7-46.2-216.5-109.8-9 15.5-14.2 33.6-14.2 52.8 0 36.4 18.5 68.6 46.7 87.4-17.2-.5-33.4-5.3-47.6-13.1v1.3c0 50.9 36.2 93.4 84.3 103-8.8 2.4-18.1 3.7-27.7 3.7-6.8 0-13.3-.7-19.8-1.9 13.4 41.7 52.2 72.1 98.1 73-36 28.2-81.2 45-130.5 45-8.5 0-16.8-.5-25.1-1.5C46.5 462.7 101.7 480 161 480c193.2 0 298.9-160.1 298.9-298.9 0-4.6-.1-9.1-.3-13.6 20.5-14.7 38.3-33.2 52.4-54.3z"></path></svg></a>
	</nav>


	<div class="footer-section footer-section-grid footer-section-utility logo-flanked">
		
		<div class="trigger mx-auto">
			<nav class="footer-section-utility-nav" role="navigation" arial-label="Other State of California Resources">
				
				<a class="footer-section-utility-nav-link" href="https://www.ca.gov">CA.gov</a>
				
				<a class="footer-section-utility-nav-link" href="https://www.cdph.ca.gov/Programs/CID/DCDC/Pages/Immunization/ncov2019.aspx">公共衛生局</a>
				
				<a class="footer-section-utility-nav-link" href="https://www.gov.ca.gov/newsroom/">州長編輯部</a>
				
				<a class="footer-section-utility-nav-link" href="https://www.ca.gov/accessibility/">可訪問性</a>
				
				<a class="footer-section-utility-nav-link" href="https://www.ca.gov/privacy-policy/">隱私政策</a>
				
				<a class="footer-section-utility-nav-link" href="https://www.surveymonkey.com/r/COVID19CAGOV">回饋</a>
				
				<a class="footer-section-utility-nav-link" href="https://registertovote.ca.gov">登記投票</a>
				
			</nav>
			<span class="footer-section-utility-official">加州政府官方網站</span>
		</div>
		


<div class="mx-auto ca-gov">
	<a href="https://ca.gov" class="logo-cagov">
			<?xml version="1.0" encoding="UTF-8"?>
			<svg enable-background="new 0 0 81.6 60" version="1.1" viewBox="0 0 81.6 60" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
			<title>CA.Gov Logo White</title>
			<path class="st0" d="m49.7 25c0.2-0.7 0.8-2.6 1.7-5.8 0.2-0.8 0.8-2.4 1.7-4.9s1.6-4.5 2.2-6c-1.8 1.2-3.4 2.6-4.8 4.2-5.9 6.3-12.7 14-15.1 18 0.9-0.2 2.8-2.1 8.6-4.2 1.8-0.7 3.7-1.2 5.7-1.3zm-1.1 4c-18.4 0-26.5 29.5-39.3 29.5-2.9 0-5.2-1.3-6.7-3.9-1-1.7-1.6-3.7-1.5-5.7 0-5.4 2.6-12.1 7.6-20.3 4.3-7 8.9-12.6 13.7-16.8 4.1-3.8 7.6-5.6 10.6-5.6 1.5-0.1 3 0.6 3.9 1.8 0.7 1 1.1 2.2 1.1 3.4 0 2.4-0.8 5.2-2.4 8.2-1.4 2.6-3.2 5.1-5.3 7.2-1.4 1.4-2.5 2.1-3.3 2.1-0.6 0-1.1-0.3-1.4-0.8-0.3-0.3-0.5-0.8-0.5-1.3 0-0.9 0.8-1.9 2.3-3 2-1.4 3.7-3.2 5.1-5.2 1.8-2.8 2.8-5.1 2.8-7 0.1-0.6-0.1-1.2-0.5-1.7-0.4-0.4-0.9-0.6-1.5-0.6-1.4 0-3.3 1-5.8 3-3.3 2.7-6.4 5.8-9.1 9.1-3.8 4.5-6.9 9.4-9.4 14.6-2.2 4.9-3.3 9.1-3.3 12.6 0 1.5 0.5 3 1.4 4.2 0.9 1.3 2.4 2 3.9 2 5.9-0.2 13.2-13.6 15.4-16.7 22.5-30.8 24.2-30.9 27.6-34.1 2-1.9 3.5-2.8 4.5-2.8 0.6 0 1.3 0.3 1.7 0.8 0.4 0.4 0.6 1 0.6 1.6-0.2 1.3-0.5 2.5-1 3.7-1.2 3.1-2.3 6.3-3.4 9.8-1 3.1-1.6 5.5-1.9 7.1h0.9 1.8c1.4 0 2.2 0.5 2.2 1.6 0 0.5-0.2 1-0.5 1.4-0.2 0.4-0.6 0.7-1.1 0.8h-1.3c-1.1 0-2.1 0.1-3.2 0.3-0.3 0.8-0.9 7.4-1.9 7.7-3.1 2.6-2.9-6.1-2.8-7z"/>
			<path class="st1" d="m30.4 49.1c0.8 0 1.5 0.3 2.1 0.9 0.6 0.5 0.9 1.3 0.9 2.1 0 1.6-1.3 2.9-2.9 2.9s-2.9-1.3-2.9-2.9c-0.2-1.6 1.1-2.9 2.8-3-0.1 0 0 0 0 0z"/>
			<path class="st1" d="m48.4 41.3-2.1 2c-1.2-1.3-2.8-2.1-4.6-2.1-1.4 0-2.8 0.5-3.8 1.5s-1.6 2.3-1.5 3.7c0 1.4 0.6 2.8 1.6 3.8s2.5 1.6 3.9 1.5c0.9 0 1.8-0.2 2.6-0.6 0.7-0.5 1.3-1.2 1.7-2h-4.5v-2.7h7.7v0.7c0 1.3-0.4 2.7-1.1 3.8-0.6 1.1-1.6 2.1-2.7 2.8-1.2 0.7-2.5 1-3.9 1-1.5 0-3-0.3-4.3-1s-2.3-1.7-3-3-1.1-2.7-1.1-4.2c0-2 0.7-3.9 2-5.3 1.6-1.8 3.9-2.8 6.3-2.7 1.3 0 2.6 0.2 3.7 0.7 1.3 0.5 2.2 1.2 3.1 2.1z"/>
			<path class="st1" d="m58.4 38.4c2.1 0 4.2 0.8 5.6 2.4 1.5 1.5 2.4 3.6 2.3 5.8 0 2.1-0.8 4.2-2.3 5.7-3.1 3.1-8.2 3.1-11.4 0-3.1-3.2-3.1-8.3 0.1-11.4 1.6-1.6 3.6-2.5 5.7-2.5zm0 2.9c-1.3 0-2.6 0.5-3.6 1.5s-1.5 2.4-1.4 3.8c-0.1 1.6 0.6 3.1 1.8 4 0.9 0.8 2.1 1.2 3.3 1.2 1.3 0 2.6-0.5 3.5-1.5 2-2.1 2-5.3 0-7.4-1-1.1-2.3-1.6-3.6-1.6z"/>
			<polygon class="st1" points="65.9 38.8 68.9 38.8 72.7 49.8 76.7 38.8 79.7 38.8 74.1 54.2 71.3 54.2"/>
			</svg>
		</a>	
</div>
	</div>

</footer>

</footer-section>


	
		<script type="module">
			class e extends HTMLElement{connectedCallback(){this.expandTargets=this.querySelectorAll(".list-group-item-action"),this.expandTargets.forEach((e=>{let t=e.querySelector(".details");t.setAttribute("data-collapsed","true"),t.style.height="0px",t.setAttribute("aria-hidden","true"),e.addEventListener("click",this.listen)}))}listen(){let e=this.querySelector(".details"),t=this.querySelector(".step-description");var n,a;"true"===e.getAttribute("data-collapsed")?(a=(n=e).scrollHeight,n.style.height=a+"px",n.setAttribute("data-collapsed","false"),e.setAttribute("data-collapsed","false"),t.setAttribute("aria-expanded","true"),e.setAttribute("aria-hidden","false"),this.classList.add("list-open")):(!function(e){var t=e.scrollHeight;requestAnimationFrame((function(){e.style.height=t+"px",requestAnimationFrame((function(){e.style.height="0px"}))})),e.setAttribute("data-collapsed","true"),e.setAttribute("aria-hidden","true")}(e),this.classList.remove("list-open"),t.setAttribute("aria-expanded","false"))}}window.customElements.define("cwds-step-list",e);class t extends window.HTMLElement{connectedCallback(){if(this.classList.add("prog-enhanced"),this.expandTarget=this.querySelector(".card-container"),this.expandButton=this.querySelector(".card-header"),this.expandButton.addEventListener("click",this.listen.bind(this)),this.activateButton=this.querySelector(".card-header"),this.eventType=this.dataset.eventType?this.dataset.eventType:"click",this.addStyle(this),"true"===this.activateButton.getAttribute("aria-expanded")){this.triggerAccordionClick();let t=this.querySelectorAll(".card-container a"),n=this.querySelectorAll(".card-container button");for(var e=0;e<t.length;e++)t[e].removeAttribute("tabindex");for(e=0;e<n.length;e++)n[e].removeAttribute("tabindex")}else{let t=this.querySelectorAll(".card-container a"),n=this.querySelectorAll(".card-container button");for(e=0;e<t.length;e++)t[e].setAttribute("tabindex","-1");for(e=0;e<n.length;e++)n[e].setAttribute("tabindex","-1")}}listen(){this.cardBodyHeight||(this.cardBodyHeight=this.querySelector(".card-body").clientHeight),this.expandTarget.clientHeight>0?this.expandAccordion():this.closeAccordion()}triggerAccordionClick(){const e=new MouseEvent(this.eventType,{view:window,bubbles:!0,cancelable:!0});this.expandButton.dispatchEvent(e)}expandAccordion(){this.expandTarget.style.height="0px",this.expandTarget.setAttribute("aria-hidden","true"),this.querySelector(".card-header").classList.remove("accordion-alpha-open"),this.activateButton.setAttribute("aria-expanded","false");let e=this.querySelectorAll(".card-container a"),t=this.querySelectorAll(".card-container button");for(var n=0;n<e.length;n++)e[n].setAttribute("tabindex","-1");for(n=0;n<t.length;n++)t[n].setAttribute("tabindex","-1")}closeAccordion(){this.expandTarget.style.height=this.cardBodyHeight+"px",this.expandTarget.setAttribute("aria-hidden","false"),this.querySelector(".card-header").classList.add("accordion-alpha-open"),this.querySelector(".card-container").classList.remove("collapsed"),this.activateButton.setAttribute("aria-expanded","true");let e=this.querySelectorAll(".card-container a"),t=this.querySelectorAll(".card-container button");for(var n=0;n<e.length;n++)e[n].removeAttribute("tabindex");for(n=0;n<t.length;n++)t[n].removeAttribute("tabindex")}addStyle(e){const t=document.createElement("style");t.textContent="\ncagov-accordion .card{border-radius:0!important;border:none;margin-bottom:0;position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word;background-color:#fff;background-clip:border-box}cagov-accordion .card-container{display:block;overflow:hidden}cagov-accordion .card-container[aria-hidden=false]{border-bottom:1px solid #1f2574}cagov-accordion.prog-enhanced .card-container{height:0;transition:height .3s ease}cagov-accordion .collapsed{display:block;overflow:hidden;visibility:hidden}.card-header .button{color:#000}.accordion{margin-bottom:20px}.accordion-title{text-align:left;margin-bottom:0;color:#1f2574;margin-right:auto;width:90%;padding:0 .5rem 0 0!important}.accordion-title h2,.accordion-title h3,.accordion-title h4{padding:0!important;margin-top:0!important;margin-bottom:0!important;font-family:Roboto,sans-serif;font-size:1.2rem!important;font-weight:700;color:#1f2574;text-align:left!important}button.card-header{display:flex;justify-content:left;align-items:center;padding:1rem .75rem;background-clip:border-box;background-color:#fff;border:none;border-bottom:1px solid #1f2574;border-top:1px solid #1f2574;border-radius:0!important;margin-top:-1px}button.card-header:hover{background-color:#f2f5fc}button.card-header:focus{outline:2px solid #ffcf44;outline-offset:-2px}.prog-enhanced .accordion-alpha .plus-munus{width:2.125rem;height:2.125rem;border:2px solid #ff8000;border-radius:50%;padding:0;overflow:hidden;transition:all .3s ease;margin-left:1rem;color:#ff8000;align-self:flex-start}.prog-enhanced .accordion-alpha .plus-munus agov-plus .accordion-icon{display:block}.prog-enhanced .accordion-alpha .plus-munus cagov-minus .accordion-icon{display:none}.prog-enhanced .accordion-alpha-open{border-bottom-color:#fff!important}.prog-enhanced .accordion-alpha-open cagov-plus .accordion-icon{display:none}.prog-enhanced .accordion-alpha-open cagov-minus .accordion-icon{display:block!important}.dark-accordion-bg>.container.dark-accordion-first{padding-top:3rem;margin-top:3rem;padding-bottom:0;margin-bottom:0}.dark-accordion-bg>.container{padding-top:3rem;margin-top:3rem;padding-bottom:3rem;margin-bottom:3rem}.dark-accordion-sibling>.container{padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0}.dark-accordion-sibling+.dark-accordion-bg>.container{padding-top:0;margin-top:0;padding-bottom:3rem;margin-bottom:3rem}.dark-accordion-bg .card{background-color:#1f2574}.dark-accordion-bg .card .accordion-alpha{background-color:#1f2574;border-bottom:1px solid #4c5190;border-top:1px solid #4c5190}.dark-accordion-bg .card .accordion-alpha.accordion-alpha-open{border-bottom-color:#1f2574!important}.dark-accordion-bg .card .accordion-alpha:focus,.dark-accordion-bg .card .accordion-alpha:hover{background-color:#003d9d}.dark-accordion-bg .card .accordion-alpha .accordion-title{color:#fff}.dark-accordion-bg .card .accordion-alpha .accordion-title h2,.dark-accordion-bg .card .accordion-alpha .accordion-title h3,.dark-accordion-bg .card .accordion-alpha .accordion-title h4{color:#fff}.dark-accordion-bg .card .card-container{color:#fff}.dark-accordion-bg .card .card-container[aria-hidden=false]{border-bottom:1px solid #4c5190}.dark-accordion-bg .card .card-container h2,.dark-accordion-bg .card .card-container h3,.dark-accordion-bg .card .card-container h4,.dark-accordion-bg .card .card-container h5{color:#fff}.bg-darkblue .dark-accordion-bg>.container.dark-accordion-first{padding-top:1rem;margin-top:0;padding-bottom:0;margin-bottom:0}.fill-orange{fill:#ff8000!important}.card-body{padding:.55rem .45rem .55rem .75rem;color:#000;line-height:1.5}.card-body p{font-family:Roboto,sans-serif;font-weight:300}\n    ",e.appendChild(t)}}window.customElements.define("cagov-accordion",t);class n extends window.HTMLElement{connectedCallback(){let e=this.dataset.question?this.dataset.question:"Did you find what you were looking for?",t=this.dataset.yes?this.dataset.yes:"Yes",n=this.dataset.no?this.dataset.no:"No",a=this.dataset.commentPrompt?this.dataset.commentPrompt:"What was the problem?";this.positiveCommentPrompt=this.dataset.positiveCommentPrompt?this.dataset.positiveCommentPrompt:"Great! What were you looking for today?";let o=this.dataset.thanksFeedback?this.dataset.thanksFeedback:"Thank you for your feedback!",r=this.dataset.thanksComments?this.dataset.thanksComments:"Thank you for your comments!",i=this.dataset.submit?this.dataset.submit:"Submit",s=this.dataset.requiredField?this.dataset.requiredField:"This field is required",c=this.dataset.characterLimit?this.dataset.characterLimit:"You have reached your character limit.",d=this.dataset.anythingToAdd?this.dataset.anythingToAdd:"If you have anything to add,";this.positiveSurveyUrl=this.dataset.positiveSurveyUrl?this.dataset.positiveSurveyUrl:"https://ethn.io/85017";let l=this.dataset.takeTheSurvey?this.dataset.takeTheSurvey:"take the survey",u=this.dataset.anyOtherFeedback?this.dataset.anyOtherFeedback:"If you have any other feedback about this website,",h=this.dataset.negativeSurveyUrl?this.dataset.negativeSurveyUrl:"https://ethn.io/77745",m=this.dataset.takeOurSurvey?this.dataset.takeOurSurvey:"take our survey";this.endpointUrl=this.dataset.endpointUrl;let p=function(e,t,n,a,o,r,i,s,c,d,l,u,h,m,p){return`<section aria-label="Feedback">\n  <div class="feedback-form">\n    <div class="feedback-form-grid">\n\t\t\t\t<div class="feedback-form-grid-col" id="yes-no">\n          <div class="js-feedback-form">\n          <h3 class="feedback-form-label mt-0 mb-3 font-size-1-5em" id="feedback-rating">${e}</h3>\n          <button class="button-lightestblue mr-2 js-feedback-yes" id="feedback-yes">${t}</button>\n          <button class="button-lightestblue ml-3 js-feedback-no" id="feedback-no">${n}</button>\n          </div>\n          <div class="feedback-form-thanks js-feedback-thanks" role="alert"><span class="font-size-1-5em bold mb-3">${r}</span>\n          <br><span class="text-300">${d} <a href="${l}?page=${window.location.toString()}" class="color-secondary color-secondary-hover">${u}.</a></span></div>\n        </div>\n        <div class="col-md-6 mx-auto d-none" id="feedback-form">\n          <div class="feedback-form-add text-center">\n            <label class="feedback-form-label js-feedback-field-label font-size-1-5em" for="add-feedback">${a}</label>\n            <div class="feedback-form-add-grid d-block">\n              <textarea name="add-feedback" class="js-add-feedback feedback-form-textarea" id="add-feedback" rows="1"></textarea>\n              <div class="feedback-form-error feedback-error color-yellow" role="alert">${s}</div>\n              <div class="feedback-form-error feedback-limit-error color-yellow" role="alert">${c}</div>\n            </div>\n            <button class="button-lightestblue mt-4 mx-auto js-feedback-submit" type="submit" id="feedback-submit">${i}</button>\n          </div>\n          <div class="feedback-form-thanks feedback-thanks-add" role="alert">\n            <span class="font-size-1-5em bold">${o}</span>\n            <p class="text-300  mt-3">${h} <a href="${m}?page=${window.location.toString()}" class="color-secondary color-secondary-hover js-feedback-survey-link">${p}.</a></p>\n          </div>\n\t\t\t\t</div>\n\t\t  </div>\n    </div>\n    </section>`}(e,t,n,a,o,r,i,s,c,d,this.positiveSurveyUrl,l,u,h,m);this.innerHTML=p,this.applyListeners()}applyListeners(){this.wasHelpful="",this.querySelector(".js-add-feedback").addEventListener("focus",(e=>{this.querySelector(".js-feedback-submit").style.display="block"}));let e=this.querySelector(".js-add-feedback");e.addEventListener("keyup",(function(t){e.value.length>15?e.setAttribute("rows","3"):e.setAttribute("rows","1")})),e.addEventListener("keydown",(function(t){e.value.length>600?document.querySelector(".feedback-limit-error").style.display="block":document.querySelector(".feedback-limit-error").removeAttribute("style")})),e.addEventListener("blur",(t=>{0!==e.value.length&&(this.querySelector(".js-feedback-submit").style.display="block")})),this.querySelector(".js-feedback-yes").addEventListener("click",(e=>{this.querySelector(".js-feedback-field-label").innerHTML=this.positiveCommentPrompt,this.querySelector(".js-feedback-survey-link").href=`${this.positiveSurveyUrl}?page=${window.location.toString()}`,this.querySelector("#feedback-form").classList.remove("d-none"),this.querySelector("#yes-no").classList.add("d-none"),this.querySelector(".js-feedback-form").style.display="none",this.querySelector(".js-feedback-thanks").style.display="block",this.wasHelpful="yes",this.dispatchEvent(new CustomEvent("ratedPage",{detail:this.wasHelpful}))})),this.querySelector(".js-feedback-no").addEventListener("click",(e=>{this.querySelector("#feedback-form").classList.remove("d-none"),this.querySelector("#yes-no").classList.add("d-none"),this.querySelector(".js-feedback-form").style.display="none",this.querySelector(".js-feedback-thanks").style.display="block",this.wasHelpful="no",this.dispatchEvent(new CustomEvent("ratedPage",{detail:this.wasHelpful}))})),this.querySelector(".js-feedback-submit").addEventListener("click",(t=>{if(e.value.length>600)document.querySelector(".feedback-limit-error").style.display="block";else{this.querySelector(".feedback-form-add").style.display="none",this.querySelector(".feedback-thanks-add").style.display="block",document.querySelector(".feedback-limit-error").removeAttribute("style");let t={};t.url=window.location.href,t.helpful=this.wasHelpful,t.comments=e.value,t.userAgent=navigator.userAgent,fetch(this.endpointUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json())).then((e=>console.log(e)))}}))}}function a(e){let t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n="";for(let a=e;a>0;--a)n+=t[Math.floor(Math.random()*t.length)];return n}window.customElements.define("cagov-pagefeedback",n);class o extends window.HTMLElement{connectedCallback(){let e=function(){if(!localStorage.getItem("vaccineSurveyInteraction1"))return!1;return!0}(),t=this.dataset.pulseSurveyPrompt;if(!e&&function(){if(Math.random()<.1)return!0;return!1}()){t=this.dataset.surveyPrompt,r("surveyDisplayVaccine");let e=function(e){let t=`https://www.surveymonkey.com/r/MMJR7CW?source=covid&src=${a(32)}`;"/"==window.location.pathname&&(t=`https://www.surveymonkey.com/r/YNZBVPZ?source=covid&src=${a(32)}`);let n="Please take 5 minutes to complete our COVID-19 vaccines survey.";return e&&(n=e),`<section aria-label="vaccine survey alert">\n  <div role="alert">\n    <div class="survey">\n      <div class="survey-content">\n        <p class="survey-content-prompt">${n}</p>\n        <a href="${t}" target="_new" class="btn-link pt-2 pb-2 px-4 js-goto-survey"><span class="sr-only">Open survey </span><span aria-hidden="true">OK</span></a> \n        <button class="btn-link pt-2 pb-2 px-4 js-dismiss-survey" aria-label="Close" data-dismiss="alert"><span aria-hidden="true">Dismiss</span></button>\n      </div>\n    </div>\n  </div>\n  </section>`}(t);const o=document.querySelector(".header");o.classList.add("relative-position"),o.classList.remove("fixed-position");const i=document.querySelector(".hero");i&&i.classList.remove("hero-padding-top"),this.innerHTML=e,(n=this).querySelector(".js-goto-survey").addEventListener("click",(function(){r("openSurveyVaccine")})),n.querySelector(".js-dismiss-survey").addEventListener("click",(function(e){e.preventDefault(),r("dismissSurveyVaccine");const t=document.querySelector(".header");t.classList.remove("relative-position"),t.classList.add("fixed-position");const a=document.querySelector(".hero");a&&a.classList.add("hero-padding-top"),n.style.display="none"})),setTimeout((function(){window.scrollTo(0,0)}),100)}var n}}function r(e){localStorage.setItem("vaccineSurveyInteraction1",(new Date).getTime()),i(e)}function i(e){"undefined"!=typeof ga?ga("send","event","click","survey",e):setTimeout((function(){i(e)}),500)}window.customElements.define("cagov-vaccinesurvey",o),function(e){var t=new Image;function n(e){e&&"load"===e.type&&1==t.width||document.body.classList.add("no-webp")}t.onerror=n,t.onload=n,t.src=e}("data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=");class s extends window.HTMLElement{connectedCallback(){const{classPrefix:e,classList:t}=this.dataset;this.innerHTML=`<figure class="cwdsarrow ${e}-cwdsarrow ${t}" aria-hidden="true">\n      <span class="cwdsarrow-circle"></span>\n      <span class="cwdsarrow-arrow-wrapper">\n        <span class="cwdsarrow-arrow">\n          <span class="cwdsarrow-arrow-svg">\n            <svg class="cwdsarrow-arrow-svg-art" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 15"><g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-width="2"><path d="M13.1506849 1.02215525l6.5753425 6.57534247-6.5753425 6.57534248M0 7.59749772h19.7260274"></path></g></svg>\n          </span>\n        </span>\n        <span class="cwdsarrow-arrow">\n          <span class="cwdsarrow-arrow-svg">\n            <svg class="cwdsarrow-arrow-svg-art" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 15"><g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-width="2"><path d="M13.1506849 1.02215525l6.5753425 6.57534247-6.5753425 6.57534248M0 7.59749772h19.7260274"></path></g></svg>\n          </span>\n        </span>\n      </span>\n    </figure>`}}window.customElements.define("cwds-arrow",s);class c extends window.HTMLElement{connectedCallback(){this.dataset,this.innerHTML='<div class="link-arrow-icon" aria-hidden="true"><svg class="link-arrow-icon-svg" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n       viewBox="0 0 60.3 16.1" style="enable-background:new 0 0 60.3 16.1;" xml:space="preserve">\n    <path class="arrow1" d="M51.5,2.3L56.1,7H38.6C38,7,37.5,7.4,37.5,8s0.5,1.1,1.1,1.1h17.5l-4.6,4.6c-0.4,0.4-0.4,1.1,0,1.5\n      s1.1,0.4,1.5,0l6.5-6.5c0,0,0,0,0,0c0.1-0.1,0.2-0.2,0.2-0.3c0.1-0.3,0.1-0.6,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.4L53,0.8\n      c-0.4-0.4-1.1-0.4-1.5,0C51.1,1.2,51.1,1.9,51.5,2.3z"/>\n    <path class="arrow2" d="M13.9,2.3L18.6,7H1.1C0.5,7,0,7.4,0,8s0.5,1.1,1.1,1.1h17.5l-4.6,4.6c-0.4,0.4-0.4,1.1,0,1.5s1.1,0.4,1.5,0\n      l6.5-6.5c0,0,0,0,0,0c0.1-0.1,0.2-0.2,0.2-0.3c0.1-0.3,0.1-0.6,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.4l-6.5-6.5c-0.4-0.4-1.1-0.4-1.5,0\n      S13.5,1.9,13.9,2.3z"/>\n    </svg></div>'}}window.customElements.define("cagov-arrow",c);class d extends window.HTMLElement{connectedCallback(){this.dataset,this.innerHTML='<div class="accordion-icon" aria-hidden="true"><?xml version="1.0" encoding="utf-8"?>\n    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n        viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;" xml:space="preserve">\n    <path class="fill-orange" d="M5.7,12.8h5.5v5.5c0,0.4,0.4,0.8,0.8,0.8s0.8-0.4,0.8-0.8v-5.5h5.5c0.4,0,0.8-0.4,0.8-0.8s-0.4-0.8-0.8-0.8\n      h-5.5V5.7c0-0.4-0.4-0.8-0.8-0.8s-0.8,0.4-0.8,0.8v5.5H5.7c-0.4,0-0.8,0.4-0.8,0.8S5.2,12.8,5.7,12.8z"/>\n    </svg></div>'}}window.customElements.define("cagov-plus",d);class l extends window.HTMLElement{connectedCallback(){this.dataset,this.innerHTML='<div class="accordion-icon" aria-hidden="true"><?xml version="1.0" encoding="utf-8"?>\n    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;" xml:space="preserve">\n    <path class="fill-orange" d="M5.7,12.8h12.7c0.4,0,0.8-0.4,0.8-0.8s-0.4-0.8-0.8-0.8H5.7c-0.4,0-0.8,0.4-0.8,0.8S5.2,12.8,5.7,12.8z"/>\n    </svg></div>'}}window.customElements.define("cagov-minus",l);for(var u=document.querySelectorAll("a[href*='.pdf']"),h=0;h<u.length;h++)u[h].innerHTML+='<span class="pdf-link-icon no-underline-icon" aria-hidden="true">PDF</span><span class="sr-only"> (this is a pdf file)</span>';var m=document.querySelectorAll(".container .row .col-lg-10 a");for(h=0;h<m.length;h++){var p=m[h].href.indexOf("#")>-1,f=m[h].href.indexOf("localhost")>-1,b=m[h].href.indexOf("covid19.ca.gov")>-1,v=m[h].href.indexOf("@")>-1;m[h].host===window.location.host||b||f||p||v||(m[h].innerHTML+='<span class="ca-gov-icon-external-link link-icon" aria-hidden="true"></span>')}class g extends window.HTMLElement{connectedCallback(){this.menuContentFile=this.dataset.json,window.fetch(this.menuContentFile).then((e=>e.json())).then((e=>{this.innerHTML=function(e,t){return`<nav class="expanded-menu" role="navigation" aria-label="Site Navigation" aria-hidden="true" id="main-menu" tabindex="-1">\n\n    <div class="expanded-menu-grid">\n\n      <div class="expanded-menu-search" role="search">\n        <form class="expanded-menu-search-form" action="${t.search}">\n          <label class="expanded-menu-search-label" for="search-site">${t.labelSearch}</label>\n          <input name="q" id="search-site" class="expanded-menu-search-field" type="search" placeholder="${t.labelPlaceholder}">\n          <button class="expanded-menu-search-button" aria-label="Search the Website">\n            <svg class="expanded-menu-search-button-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M13.8,8.5c0-3-2.4-5.4-5.4-5.4c-3,0-5.4,2.4-5.4,5.4s2.4,5.4,5.4,5.4C11.4,13.8,13.8,11.4,13.8,8.5z M20,18.5 c0,0.8-0.7,1.5-1.5,1.5c-0.4,0-0.8-0.2-1.1-0.5l-4.1-4.1c-1.4,1-3.1,1.5-4.8,1.5C3.8,16.9,0,13.1,0,8.5S3.8,0,8.5,0\n              c4.7,0,8.5,3.8,8.5,8.5c0,1.7-0.5,3.4-1.5,4.8l4.1,4.1C19.8,17.7,20,18.1,20,18.5z"/></svg>\n          </button>\n        </form>\n      </div>\n      <div class="expanded-menu-section mobile-only">\n        <strong class="expanded-menu-section-header">\n          <a class="expanded-menu-section-header-link js-event-hm-menu" href="/">${t.labelHome}</a>\n        </strong>\n      </div>\n      ${e.sections.map((e=>`<div class="expanded-menu-col section-${e.title.toLowerCase().replace(/ /g,"-")}">\n          <div class="expanded-menu-section">\n            <strong class="expanded-menu-section-header">\n              <a class="expanded-menu-section-header-link js-expandable-mobile js-event-hm-menu" href="#">${e.title}</a>\n              <span class="expanded-menu-section-header-arrow js-expandable-mobile"><svg class="expanded-menu-section-header-arrow-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M16,5.1c0,0.4-0.1,0.7-0.4,0.9l-6.7,6.7C8.7,13,8.4,13.1,8,13.1c-0.4,0-0.7-0.1-0.9-0.4L0.4,6C0.1,5.8,0,5.5,0,5.1\tc0-0.4,0.1-0.7,0.4-0.9l0.8-0.8C1.4,3.1,1.7,3,2.1,3C2.4,3,2.8,3.1,3,3.4l5,5l5-5C13.2,3.1,13.6,3,13.9,3c0.4,0,0.7,0.1,0.9,0.4\n    l0.8,0.8C15.9,4.4,16,4.7,16,5.1z"></path></svg></span>\n            </strong>\n            <div class="expanded-menu-dropdown">\n              ${e.links.map((e=>`<a class="expanded-menu-dropdown-link js-event-hm-menu" href="${e.url}">${e.name}</a>`)).join(" ")}\n            </div>\n          </div>\n        </div>\n        `)).join(" ")}\n    </div>\n  </nav>\n  <div class="mobile-menu-close"></div>\n\n  <div>\n    <button class="menu-trigger open-menu" aria-label="${t.labelMenu}" aria-haspopup="true" aria-expanded="false" aria-owns="mainMenu" aria-controls="mainMenu">\n      <div class="hamburger">\n        <div class="hamburger-box">\n          <div class="hamburger-inner"></div>\n        </div>\n      </div>\n      <div class="menu-trigger-label menu-label" data-openlabel="${t.labelMenu}" data-closelabel="${t.labelMenuClose}">${t.labelMenu}</div>\n    </button>\n  </div>`}(e,this.dataset),this.querySelector(".open-menu").addEventListener("click",this.toggleMainMenu.bind(this)),window.innerWidth<1024&&this.expansionListeners()}))}toggleMainMenu(){this.querySelector(".hamburger").classList.contains("is-active")?this.closeMainMenu():this.openMainMenu()}openMainMenu(){this.classList.add("display-menu"),this.querySelector(".hamburger").classList.add("is-active"),this.querySelector(".menu-trigger").classList.add("is-fixed");var e=this.querySelector(".menu-trigger-label");e.innerHTML=e.getAttribute("data-closelabel"),this.querySelector("#main-menu").setAttribute("aria-hidden","false"),document.addEventListener("keydown",this.escapeMainMenu.bind(this)),setTimeout(function(){this.classList.add("reveal-items"),this.querySelector("#search-site").focus()}.bind(this),300)}closeMainMenu(){this.classList.remove("display-menu"),this.classList.remove("reveal-items"),this.querySelector(".hamburger").classList.remove("is-active"),this.querySelector(".menu-trigger").classList.remove("is-fixed");var e=this.querySelector(".menu-trigger-label");e.innerHTML=e.getAttribute("data-openlabel"),this.querySelector("#main-menu").setAttribute("aria-hidden","true"),document.removeEventListener("keydown",this.escapeMainMenu.bind(this))}escapeMainMenu(e){27===e.keyCode&&this.closeMainMenu()}expansionListeners(){this.querySelectorAll(".js-expandable-mobile").forEach((e=>{const t=e.closest(".expanded-menu-section");if(t){const n=t.querySelector(".expanded-menu-dropdown");n&&(n.setAttribute("aria-hidden","true"),e.closest(".expanded-menu-col").setAttribute("aria-expanded","false"))}e.addEventListener("click",(function(e){e.preventDefault(),this.closest(".expanded-menu-section").classList.toggle("expanded"),this.closest(".expanded-menu-col").setAttribute("aria-expanded","true");const t=this.closest(".expanded-menu-section").querySelector(".expanded-menu-dropdown");t&&t.setAttribute("aria-hidden","false")}))}))}}if(window.customElements.define("cagov-navoverlay",g),"IntersectionObserver"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype){const e=document.querySelector(".header"),t=document.querySelector(".nav-scroll-spy");new window.IntersectionObserver((t=>{t[0].isIntersecting?e.classList.remove("box-shadow"):e.classList.add("box-shadow")})).observe(t)}if(document.querySelector(".header-search-field").addEventListener("focus",(()=>{document.querySelector(".header-search").classList.add("focused")})),document.querySelector(".header-search-button").addEventListener("focus",(()=>{document.querySelector(".header-search").classList.add("focused")})),document.querySelector(".header-search-label").addEventListener("focus",(()=>{document.querySelector(".header-search").classList.add("focused")})),document.querySelector(".header-search-field").addEventListener("blur",(()=>{document.querySelector(".header-search").classList.remove("focused")})),document.querySelector(".header-search-button").addEventListener("blur",(()=>{document.querySelector(".header-search").classList.remove("focused")})),document.querySelector(".header-search-label").addEventListener("blur",(()=>{document.querySelector(".header-search").classList.remove("focused")})),matchMedia){const e=window.matchMedia("(min-width: 768px)");e.addListener(y),y(e)}function y(e){var t=document.getElementById("header-search-site"),n=document.querySelector("#dropdown-text");e.matches?(t.placeholder=t.dataset.placeholderWide,n.innerText=n.dataset.labelWide):(n.innerText=n.dataset.labelMobile,t.placeholder=t.dataset.placeholderMobile)}let w=document.querySelector(".dark-accordion-bg");if(w){w.nextElementSibling.classList.add("dark-accordion-sibling"),w.firstElementChild.classList.add("dark-accordion-first")}class k extends window.HTMLElement{connectedCallback(){this.selector=this.dataset.selector?this.dataset.selector:"cagov-accordion",this.cancelSelector=this.dataset.cancelSelector?this.dataset.cancelSelector:'button[aria-expanded="true"]',this.eventTargetSelector=this.dataset.eventTargetSelector?this.dataset.eventTargetSelector:"button.card-header.accordion-alpha",this.eventType=this.dataset.eventType?this.dataset.eventType:"click",this.runConditions(),this.reviewPageLinks()}runConditions(){if(0!==document.querySelectorAll(this.selector).length&&""!==window.location.hash){let e=window.location.hash.replace("#","");this.runInteract(e)}}reviewPageLinks(){document.body.addEventListener("click",function(e){let t=null;if("A"===e.target.nodeName?t=e.target.href:e.target.closest("a")&&(t=e.target.closest("a").href),t&&t.indexOf("#")>-1&&0===t.indexOf(window.location.origin+window.location.pathname)){let e=t.split("#")[1];this.runInteract(e)}}.bind(this))}runInteract(e){let t=document.getElementById(e);if(t&&t.closest(this.selector)&&!t.querySelector(this.cancelSelector)){const e=new MouseEvent(this.eventType,{view:window,bubbles:!0,cancelable:!0});t.closest(this.selector).querySelector(this.eventTargetSelector).dispatchEvent(e)}}}window.customElements.define("cagov-anchor-events",k);class x extends window.HTMLElement{static get observedAttributes(){return["data-hide-after","data-label"]}constructor(){super();this.options=Object.assign({},{parentSelector:"#main",onLoadSelector:"body",classes:"button-blue",scrollBottomThreshold:10,scrollAfterHeight:400},{label:this.dataset.label||"Top",hideAfter:Number(this.dataset.hideAfter)||7e3}),this.state={lastScrollTop:0,timer:null}}connectedCallback(){document.querySelector(this.options.onLoadSelector).onload=this.addGoToTopButton(this.options),window.addEventListener("scroll",(()=>this.scrollToTopHandler(this.options,this.state)),!1),window.onscroll=()=>function(e,t){let{timer:n}=t;var a=document.querySelector(".return-top");window.innerHeight+window.scrollY>=document.body.offsetHeight&&(a.classList.add("is-visible"),clearTimeout(n))}}attributeChangedCallback(e,t,n){"data-hide-after"===e&&(this.options.hideAfter=Number(n)),"data-label"===e&&(this.options.label=n,null!==document.querySelector(".return-top")&&(document.querySelector(".return-top").innerHTML=this.options.label))}scrollToTopHandler(e,t){let n=document.querySelector(this.options.parentSelector),{lastScrollTop:a,timer:o}=t;var r=document.querySelector(".return-top"),i=window.pageYOffset||document.documentElement.scrollTop;i>a?r.classList.remove("is-visible"):n.scrollTop>=e.scrollAfterHeight||document.documentElement.scrollTop>=e.scrollAfterHeight?(null!==o&&clearTimeout(o),r.classList.add("is-visible"),o=setTimeout((function(){r.classList.remove("is-visible")}),e.hideAfter)):r.classList.remove("is-visible"),t.lastScrollTop=i<=0?0:i}addStyle(e){const t=document.createElement("style");t.textContent='\n    .return-top {\n      position: fixed;\n      z-index: 99999;\n      right: 15px;\n      bottom: -50px;\n      opacity: 0;\n      visibility: hidden;\n      text-decoration: none;\n      cursor: pointer;\n      transition:all .5s linear;\n    }\n    \n    .return-top:before {\n      content: "\\e9f6";\n      font-family: "CaGov";\n      padding-right: 5px;\n    }\n    \n    .return-top.is-visible {\n      opacity: 1;\n      visibility: visible;\n      display: inline;\n      bottom:50px;\n    }\n    ',e.appendChild(t)}addGoToTopButton(e){let t=document.querySelector(e.parentSelector);const n=document.createElement("span");n.classList.add("return-top"),n.classList.add(e.classes),n.setAttribute("aria-hidden","true");const a=document.createTextNode(e.label);n.appendChild(a),this.addStyle(n),t.append(n),n.addEventListener("click",(e=>this.goToTopFunction(e)))}goToTopFunction(e){document.querySelector(this.options.onLoadSelector).scrollTop=0,document.documentElement.scrollTop=0}}window.customElements.define("cagov-go-to-top",x);let S={};function L(e,t=null,n=3e3,a="chart-in-view"){const o=null!=t?t:e,r=e,i=document.querySelector(e);if(null==i||null==i)return void console.log("Element not found",e);S[r]={triggered:!1,inView:!1,lh:null};var s,c;window.addEventListener("scroll",(s=()=>{S[r].triggered||(function(e){const t=document.documentElement.clientHeight,n=window.pageYOffset,a=n+t,o=e.getBoundingClientRect(),r=o.bottom-o.top,i=o.top+window.scrollY,s=(i+(i+r))/2;return s>n&&s<a}(i)?S[r].inView||(S[r].inView=!0,S[r].lh=setTimeout((()=>{S[r].triggered=!0;const t=new window.CustomEvent(a,{detail:{label:o,elem:e}});window.dispatchEvent(t)}),n)):S[r].inView&&(clearTimeout(S[r].lh),S[r].inView=!1))},c=1e3,e=>{let t=!1;t||(s(e),t=!0,setTimeout((()=>{t=!1}),c))}))}function q(){function e(t,n,a="click"){"undefined"!=typeof ga?(ga("send","event",a,t,n),ga("tracker2.send","event",a,t,n),ga("tracker3.send","event",a,t,n)):setTimeout((function(){e(t,n,a)}),500)}function t(e,t){"false"===e.getAttribute(t)?e.setAttribute(t,"true"):e.setAttribute(t,"false")}ga("set","transport","beacon"),document.querySelectorAll("cagov-accordion").forEach((t=>{t.addEventListener("click",(function(){this.querySelector(".accordion-title")&&e("accordion",this.querySelector(".accordion-title").textContent.trim())}))})),document.querySelectorAll("a").forEach((t=>{t.href.indexOf(window.location.hostname)>-1||t.href.indexOf("covid19.ca.gov")>-1?t.href.indexOf(".pdf")>-1&&t.addEventListener("click",(function(){e("pdf",this.href.split(window.location.hostname)[1])})):t.addEventListener("click",(function(){e("offsite",this.href)}))})),document.querySelectorAll(".show-all").forEach((e=>{const t=e.classList.contains("d-none");e.addEventListener("click",(()=>{let e=0;document.querySelectorAll("cwds-step-list .list-group-item-action"+(t?".list-open":":not(.list-open)")).forEach((t=>setTimeout((()=>t.click()),50*e++))),document.querySelectorAll(".show-all").forEach((e=>e.classList.toggle("d-none")))}))})),document.querySelectorAll(".navbar-toggler").forEach((function(e){e.addEventListener("click",(function(n){document.querySelector("#"+e.getAttribute("aria-controls")).classList.toggle("show"),t(this,"aria-expanded")}))})),document.querySelectorAll(".dropdown-toggle").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),document.querySelector('[aria-labelledby="'+this.id+'"]').classList.toggle("show"),t(this,"aria-expanded")}))})),document.body.addEventListener("click",(function(e){document.querySelectorAll(".dropdown-menu.show").forEach((t=>{if(t.parentNode!==e.target.parentNode){let e=t.closest(".dropdown");e&&e.querySelector('.dropdown-toggle[aria-expanded="true"]')&&e.querySelector('.dropdown-toggle[aria-expanded="true"]').setAttribute("aria-expanded","false"),t.classList.remove("show")}}))})),document.querySelector("cagov-pagefeedback")&&document.querySelector("cagov-pagefeedback").addEventListener("ratedPage",(e=>{ga("send","event","rating","helpful",e.detail)}));const n=(e,t)=>n=>{let a=!1;a||(e(n),a=!0,setTimeout((()=>{a=!1}),t))},a=[25,50,75,90],o=[],r=t=>()=>{const n=document.documentElement.clientHeight,r=document.documentElement.scrollHeight-n,i=window.pageYOffset,s=Math.floor(i/r*100);a.forEach((n=>{if(-1===o.indexOf(n)&&s>=n){o.push(n);e(`scroll-${n}`,`scroll-${n}-${t}`,"scroll")}}))},i=(t,n,a,o=!0)=>t=>{e(n,a)},s=e=>e.hostname===document.location.hostname?e.href:`external-${e.href}`,c=(e,t={})=>{window.ga("tracker3.send","event",Object.assign({eventCategory:"javascript",eventAction:"error",eventLabel:e&&e.stack||"(not set)",nonInteraction:!0},t))},d=["/","/tl","/es","/ar","/ko","/vi","/zh-hans","/zh-hant"];if(window.ga&&window.ga.create){if(document.querySelectorAll(".header-search-form, .expanded-menu-search-form").forEach((t=>{t.addEventListener("submit",(n=>{e(window.location.pathname,t.querySelector('input[name="q"]').value,"search")}))})),"localhost"!==window.location.hostname&&(()=>{const e=window.__e&&window.__e.q||[],t={eventAction:"uncaught error"};e.forEach((e=>c(e.error,t))),window.addEventListener("error",(e=>c(e.error,t)))})(),l=window.location.pathname,d.some((e=>l.match(new RegExp(`^${e}[/]?$`,"g"))))){window.addEventListener("scroll",n(r("homepage"),1e3));const t=document.querySelector("a.video-modal-open").href;document.querySelectorAll(".video-modal-open").forEach((e=>{e.addEventListener("click",i(e.href,"homepage-video",t,!1))})),document.querySelector("cagov-navoverlay").addEventListener("click",(function(t){t.target.classList.contains("js-event-hm-menu")&&e("homepage-menu",t.target.textContent.trim(),"click")})),document.querySelectorAll(".js-event-hm-wtk").forEach((e=>{e.addEventListener("click",i(e.href,"homepage-want to know",e.href))})),document.querySelectorAll("footer a").forEach((e=>{e.addEventListener("click",i(e.href,"homepage-footer",s(e)))})),document.querySelectorAll(".hero-stats a").forEach((e=>{e.addEventListener("click",i(e.href,"homepage-tracking covid",e.href))})),document.querySelectorAll(".hero-text a").forEach((e=>{e.addEventListener("click",i(e.href,"homepage-hero text",e.href))})),document.querySelectorAll(".hero-alert a").forEach((e=>{e.addEventListener("click",i(e.href,"homepage-alerts section",s(e)))}))}if(window.location.pathname.match(/\/roadmap[/]?$/g)&&(document.querySelectorAll("main a").forEach((e=>{e.addEventListener("click",i(e.href,"roadmap",s(e)))})),document.querySelectorAll("footer a").forEach((e=>{e.addEventListener("click",i(e.href,"roadmap-footer",s(e)))}))),window.location.pathname.match(/\/safer-economy[/]?$/g)&&window.addEventListener("safer-economy-page-submission",(t=>{let n=t.detail.county?t.detail.county:"None";t.detail.countyTier&&(n=t.detail.countyTier);e(n,t.detail.activity?t.detail.activity:"None","activity-status")})),window.location.pathname.match(/\/equity[/]?$/g)){window.addEventListener("scroll",n(r("equity"),1e3)),document.querySelector("cagov-county-search").addEventListener("county-selected",function(t){"tab"==t.detail.how?e("tab-select",t.detail.county,"click"):e("county-select",t.detail.county,"activity-status")}.bind(this),!1),document.addEventListener("setup-sd-tab-tracking",(function(){for(let t of["income","housing","healthcare"]){const n=document.querySelector("button.large-tab."+t);null!=n&&n.addEventListener("click",(n=>e("tab-select",t)))}})),document.querySelectorAll(".small-tab").forEach((t=>{t.addEventListener("click",(function(t){e("tab-select",this.getAttribute("data-key"))}))})),window.addEventListener("chart-in-view",(function(t){e("chart-in-view",t.detail.label,"scroll")})),L("cagov-chart-re-pop","re-pop"),L("cagov-chart-re-100k","re-100k"),L("cagov-chart-d3-lines","health-equity"),L("cagov-chart-equity-data-completeness","data-completeness"),L("cagov-chart-d3-bar","social-bar")}}var l}window.onload=e=>{q()};

		</script>
	

	<script type="module" src="https://d3js.org/d3.v6.min.js"></script><!-- had some trouble importing this, error circular dependencies after npm install so including here -->
	
	
		<script type="module">
			const config = {"equityChartsDataLoc":"https://files.covid19.ca.gov/data/reviewed/"}

/**
 * Simple, lightweight, usable local autocomplete library for modern browsers
 * Because there weren’t enough autocomplete scripts in the world?
 * Because I’m completely insane and have NIH syndrome? Probably both. :P
 * @author Lea Verou http://leaverou.github.io/awesomplete
 * MIT license
 */


/** Class representing a single Suggesstion. */
class Suggestion {
    constructor(data) {
        let o = { label: 'Unknown data', value: 'Unknown data' };
        if (typeof data === 'string') {
            o = { label: data, value: data };
        } else if (Array.isArray(data)) {
            o = { label: data[0], value: data[1] };
        } else if (typeof data === 'object' && ('label' in data || 'value' in data)) {
            o = data;
        }

        this.label = o.label || o.value;
        this.value = o.value;

        if ('userData' in o) {
            this.userData = o.userData;
        }
    }

    get length() {
        return this.label.length;
    }

    toString() {
        return `${this.label}`;
    }

    valueOf() {
        return this.toString();
    }
}


/** Class representing Awesomplete. */
class Awesomplete {
    constructor(input, o) {
        Awesomplete.all = [];
        const me = this;

        // Keep track of number of instances for unique IDs
        Awesomplete.count = (Awesomplete.count || 0) + 1;
        this.count = Awesomplete.count;

        // Setup
        this.isOpened = false;

        this.input = Awesomplete.query(input);
        this.input.setAttribute('autocomplete', 'off');
        this.input.setAttribute('aria-owns', `awesomplete_list_${this.count}`);
        this.input.setAttribute('role', 'combobox');

        // store constructor options in case we need to distinguish
        // between default and customized behavior later on
        if (o) {
            this.options = o;
        } else {
            this.options = {};
        }

        this.configure({
            minChars: 2,
            maxItems: 10,
            autoFirst: false,
            data: Awesomplete.DATA,
            filter: Awesomplete.FILTER_CONTAINS,
            sort: o.sort === false ? false : Awesomplete.SORT_BYLENGTH,
            container: Awesomplete.CONTAINER,
            item: Awesomplete.ITEM,
            replace: Awesomplete.REPLACE,
            tabSelect: false,
        }, o);

        this.index = -1;

        // Create necessary elements
        this.container = this.container(input);

        this.ul = Awesomplete.create('ul', {
            hidden: 'hidden',
            role: 'listbox',
            id: `awesomplete_list_${this.count}`,
            inside: this.container,
        });

        this.status = Awesomplete.create('span', {
            className: 'visually-hidden',
            role: 'status',
            'aria-live': 'assertive',
            'aria-atomic': true,
            inside: this.container,
            textContent: this.minChars !== 0 ? (`Type ${this.minChars} or more characters for results.`) : 'Begin typing for results.',
        });

        // Bind events
        this.events = {
            input: {
                input: this.evaluate.bind(this),
                blur: this.close.bind(this, { reason: 'blur' }),
                keydown(evt) {
                    const c = evt.keyCode;

                    // If the dropdown `ul` is in view, then act on keydown for the following keys:
                    // Enter / Esc / Up / Down
                    if (me.opened) {
                        if (c === 13 && me.selected) { // Enter
                            evt.preventDefault();
                            evt.stopImmediatePropagation();
                            me.select();
                        } else if (c === 9 && me.selected && me.tabSelect) {
                            me.select();
                        } else if (c === 27) { // Esc
                            me.close({ reason: 'esc' });
                        } else if (c === 38 || c === 40) { // Down/Up arrow
                            evt.preventDefault();
                            me[c === 38 ? 'previous' : 'next']();
                        }
                    }
                },
            },
            form: {
                submit: this.close.bind(this, { reason: 'submit' }),
            },
            ul: {
                // Prevent the default mousedowm, which ensures the input is not blurred.
                // The actual selection will happen on click. This also ensures dragging the
                // cursor away from the list item will cancel the selection
                mousedown(evt) {
                    evt.preventDefault();
                },

                // The click event is fired even if the corresponding mousedown event has called
                // preventDefault
                click(evt) {
                    let li = evt.target;

                    if (li !== this) {
                        while (li && !/li/i.test(li.nodeName)) {
                            li = li.parentNode;
                        }

                        if (li && evt.button === 0) { // Only select on left click
                            evt.preventDefault();
                            me.select(li, evt.target);
                        }
                    }
                },
            },
        };

        Awesomplete.bind(this.input, this.events.input);
        Awesomplete.bind(this.input.form, this.events.form);
        Awesomplete.bind(this.ul, this.events.ul);

        if (this.input.hasAttribute('list')) {
            this.list = `#${this.input.getAttribute('list')}`;
            this.input.removeAttribute('list');
        } else {
            this.list = this.input.getAttribute('data-list') || o.list || [];
        }

        Awesomplete.all.push(this);
    }

    configure(properties, o) {
        const iterFn = (i) => {
            const initial = properties[i];
            const attrValue = this.input.getAttribute(`data-${i.toLowerCase()}`);

            if (typeof initial === 'number') {
                this[i] = parseInt(attrValue, 10);
            } else if (initial === false) { // Boolean options must be false by default anyway
                this[i] = attrValue !== null;
            } else if (initial instanceof Function) {
                this[i] = null;
            } else {
                this[i] = attrValue;
            }

            if (!this[i] && this[i] !== 0) {
                this[i] = (i in o) ? o[i] : initial;
            }
        };
        Object.keys(properties).forEach(iterFn);
    }

    set list(list) {
        if (Array.isArray(list)) {
            this.dataList = list;
        } else if (typeof list === 'string' && list.indexOf(',') > -1) {
            this.dataList = list.split(/\s*,\s*/);
        } else { // Element or CSS selector
            const queriedList = Awesomplete.query(list);

            if (queriedList && queriedList.children) {
                const items = [];
                const iterFn = (el) => {
                    if (!el.disabled) {
                        const text = el.textContent.trim();
                        const value = el.value || text;
                        const label = el.label || text;
                        if (value !== '') {
                            items.push({ label, value });
                        }
                    }
                };
                Array.prototype.slice.apply(queriedList.children).forEach(iterFn);
                this.dataList = items;
            }
        }

        if (document.activeElement === this.input) {
            this.evaluate();
        }
    }

    get list() {
        return this.dataList;
    }

    get selected() {
        return this.index > -1;
    }

    get opened() {
        return this.isOpened;
    }

    close(o) {
        if (!this.opened) {
            return;
        }

        this.ul.setAttribute('hidden', '');
        this.isOpened = false;
        this.index = -1;

        this.status.setAttribute('hidden', '');

        Awesomplete.fire(this.input, 'awesomplete-close', o || {});
    }

    open() {
        this.ul.removeAttribute('hidden');
        this.isOpened = true;

        this.status.removeAttribute('hidden');

        if (this.autoFirst && this.index === -1) {
            this.goto(0);
        }

        Awesomplete.fire(this.input, 'awesomplete-open');
    }

    destroy() {
        // remove events from the input and its form
        Awesomplete.unbind(this.input, this.events.input);
        Awesomplete.unbind(this.input.form, this.events.form);

        // cleanup container if it was created by Awesomplete but leave it alone otherwise
        if (!this.options.container) {
            // move the input out of the awesomplete container and remove the container and
            // its children
            const { parentNode } = this.container;

            parentNode.insertBefore(this.input, this.container);
            parentNode.removeChild(this.container);
        }

        // remove autocomplete and aria-autocomplete attributes
        this.input.removeAttribute('autocomplete');
        this.input.removeAttribute('aria-autocomplete');

        // remove this awesomeplete instance from the global array of instances
        const indexOfAwesomplete = Awesomplete.all.indexOf(this);

        if (indexOfAwesomplete !== -1) {
            Awesomplete.all.splice(indexOfAwesomplete, 1);
        }
    }

    next() {
        const count = this.ul.children.length;
        let index = 0;
        if (this.index < count - 1) {
            index = this.index + 1;
        } else if (count) {
            index = 0;
        } else {
            index = -1;
        }
        this.goto(index);
    }

    previous() {
        const count = this.ul.children.length;
        const pos = this.index - 1;

        this.goto(this.selected && pos !== -1 ? pos : count - 1);
    }

    // Should not be used, highlights specific item without any checks!
    goto(i) {
        const lis = this.ul.children;

        if (this.selected) {
            lis[this.index].setAttribute('aria-selected', 'false');
        }

        this.index = i;

        if (i > -1 && lis.length > 0) {
            lis[i].setAttribute('aria-selected', 'true');

            this.status.textContent = `${lis[i].textContent}, list item ${(i + 1)} of ${lis.length}`;

            this.input.setAttribute('aria-activedescendant', `${this.ul.id}_item_${this.index}`);

            // scroll to highlighted element in case parent's height is fixed
            this.ul.scrollTop = lis[i].offsetTop - this.ul.clientHeight + lis[i].clientHeight;

            const suggestion = this.suggestions[this.index];
            Awesomplete.fire(this.input, 'awesomplete-highlight', {
                selectedIndex: this.index,
                selectedText: `${suggestion}`,
                selectedSuggestion: suggestion,
            });
        }
    }

    select(selected, origin) {
        let selectedItem = selected;
        if (selected) {
            this.index = Awesomplete.siblingIndex(selected);
        } else {
            selectedItem = this.ul.children[this.index];
        }

        if (selectedItem) {
            const selectedIndex = this.index;
            const suggestion = this.suggestions[selectedIndex];
            const allowed = Awesomplete.fire(this.input, 'awesomplete-select', {
                selectedIndex,
                selectedText: `${suggestion}`,
                selectedSuggestion: suggestion,
                origin: origin || selectedItem,
            });

            if (allowed) {
                this.replace(suggestion);
                this.close({ reason: 'select' });
                Awesomplete.fire(this.input, 'awesomplete-selectcomplete', {
                    selectedIndex,
                    selectedText: `${suggestion}`,
                    selectedSuggestion: suggestion,
                });
            }
        }
    }

    evaluate() {
        const me = this;
        const { value } = this.input;

        if (value.length >= this.minChars && this.dataList && this.dataList.length > 0) {
            this.index = -1;
            // Populate list with options that match
            this.ul.innerHTML = '';

            const mapFn = item => new Suggestion(me.data(item, value));
            const filterFn = item => me.filter(item, value);
            this.suggestions = this.dataList
                .map(mapFn)
                .filter(filterFn);

            if (this.sort !== false) {
                this.suggestions = this.suggestions.sort(this.sort);
            }

            this.suggestions = this.suggestions.slice(0, this.maxItems);

            const appendFn = (text, index) => {
                me.ul.appendChild(me.item(text, value, index));
            };
            this.suggestions.forEach(appendFn);

            if (this.ul.children.length === 0) {
                this.status.textContent = 'No results found';

                this.close({ reason: 'nomatches' });
            } else {
                this.open();

                this.status.textContent = `${this.ul.children.length} results found`;
            }
        } else {
            this.close({ reason: 'nomatches' });

            this.status.textContent = 'No results found';
        }
    }


    // Mark: Static methods/properties
    static FILTER_CONTAINS(text, input) {
        return RegExp(Awesomplete.regExpEscape(input.trim()), 'i').test(text);
    }

    static FILTER_STARTSWITH(text, input) {
        return RegExp(`^${Awesomplete.regExpEscape(input.trim())}`, 'i').test(text);
    }

    static SORT_BYLENGTH(a, b) {
        if (a.length !== b.length) {
            return a.length - b.length;
        }

        return a < b ? -1 : 1;
    }

    static CONTAINER(input) {
        return Awesomplete.create('div', {
            className: 'awesomplete',
            around: input,
        });
    }

    static ITEM(text, input, itemId) {
        const html = input.trim() === '' ? text : (`${text}`).replace(RegExp(Awesomplete.regExpEscape(input.trim()), 'gi'), '<mark>$&</mark>');
        return Awesomplete.create('li', {
            innerHTML: html,
            'aria-selected': 'false',
            id: `awesomplete_list_${this.count}_item_${itemId}`,
        });
    }

    static REPLACE(text) {
        this.input.value = text.value || text.label;
    }

    static DATA(item/* , input */) {
        return item;
    }


    // Helpers
    static query(expr, con) {
        return typeof expr === 'string' ? (con || document).querySelector(expr) : expr || null;
    }

    static queryAll(expr, con) {
        return Array.prototype.slice.call((con || document).querySelectorAll(expr));
    }

    static create(tag, o) {
        const element = document.createElement(tag);
        const iterFn = (i) => {
            const val = o[i];

            if (i === 'inside') {
                Awesomplete.query(val).appendChild(element);
            } else if (i === 'around') {
                const ref = Awesomplete.query(val);
                ref.parentNode.insertBefore(element, ref);
                element.appendChild(ref);

                if (ref.getAttribute('autofocus') != null) {
                    ref.focus();
                }
            } else if (i in element) {
                element[i] = val;
            } else {
                element.setAttribute(i, val);
            }
        };
        Object.keys(o).forEach(iterFn);

        return element;
    }

    static bind(element, o) {
        if (element) {
            const iterFn = (cKey) => {
                const callback = o[cKey];
                const eventIterFn = (event) => {
                    element.addEventListener(event, callback);
                };
                cKey.split(/\s+/).forEach(eventIterFn);
            };
            Object.keys(o).forEach(iterFn);
        }
    }

    static unbind(element, o) {
        if (element) {
            const iterFn = (cKey) => {
                const callback = o[cKey];
                const eventIterFn = (event) => {
                    element.removeEventListener(event, callback);
                };
                cKey.split(/\s+/).forEach(eventIterFn);
            };
            Object.keys(o).forEach(iterFn);
        }
    }

    static fire(target, type, properties) {
        const evt = document.createEvent('HTMLEvents');
        const iterFn = (j) => {
            evt[j] = properties[j];
        };
        evt.initEvent(type, true, true);
        if (typeof properties === 'object') {
            Object.keys(properties).forEach(iterFn);
        }

        return target.dispatchEvent(evt);
    }

    static regExpEscape(s) {
        return s.replace(/[-\\^$*+?.()|[\]{}]/g, '\\$&');
    }

    static siblingIndex(el) {
        let i = 0;
        let testEl = el;
        while (testEl) {
            testEl = testEl.previousElementSibling;
            if (testEl) {
                i += 1;
            }
        }

        return i;
    }
}

function template$6(countyLabel, countyPlaceholder) {
  return /*html*/`
    <div class="row d-flex justify-content-md-center">
      <form class="form-inline" id="county-form">
        <div class="form-group mx-sm-3 mb-2 pos-rel autocomplete-inline">
          <label for="location-query" class="sr-only">County</label>
          <div class="awesomplete">
            <input aria-expanded="false" aria-owns="awesomplete_list_1"  aria-controls="awesomplete_list_1"  autocomplete="off" class="form-control form-control-lg" data-list="" data-multiple="" id="location-query" role="combobox" type="text" placeholder="Enter a county">
            <button class="clear d-none" id="clearCounty"><span class="ca-gov-icon-close-line" aria-hidden="true"></span> <span class="underline">Clear</span></button>
            <span class="visually-hidden" role="status" aria-live="assertive" aria-atomic="true">Type 2 or more characters for results.</span>
          </div>
        </div>
      <button type="submit" class="btn btn-lightbg btn-bigger mb-2">Get county data</button>
      </form>
    </div>
    <div class="row d-flex justify-content-md-center">
      <span id="county-query-error" class="error-text d-none">County not found</span>
    </div>`
}

/* temporary fix for charts that don't render well in RTL languages, 
   such as arabic
*/

function rtlOverride(elem, divSelector='.svg-holder', desired_dir='ltr') {
    let contDiv = elem.querySelector(divSelector);
    if (contDiv != null) {
      // temporary override for rtl languages (arabic)
      // console.log("containing div found", contDiv);
      contDiv.setAttribute('dir', desired_dir);
    }
}

class CAGovCountySearch extends window.HTMLElement {

  processCountySearchInput(typedInValue) {
        let foundCounty = '';
        // console.log("Search Input: ",typedInValue);
        if(typedInValue == '') {
          this.state['county'] = 'California';
          this.state.statewide = true;
        }
        // console.log("Searching for ",typedInValue,"in",component.countyList);
        this.countyList.forEach(county => {
          if(county.toLowerCase() == typedInValue.toLowerCase()) {
            foundCounty = county;
          }
        });
        if(foundCounty) {
          this.state['county'] = foundCounty;
          this.state.statewide = false;
          document.querySelector('#location-query').value = foundCounty;
          console.log("emitCounty via search:",foundCounty);
          this.emitCounty();
          document.querySelector('#county-query-error').style.display = 'none';
        } else {
          // generate failed search event...
          // console.log("county not found: ",typedInValue);
          // console.log("emitCounty via typo",typedInValue);
          // this.emitCountyTypo(typedInValue);
          document.querySelector('#county-query-error').style.display = 'block';
        }
  }

  connectedCallback () {
    if(this.dataset.countyLabel) {
      this.dataset.countyLabel;
    }
    this.state = {};
    this.state.statewide = false;

    this.innerHTML = template$6();
    this.addListeners();

    window.fetch('/countystatus.json')
    .then(response => response.json())
    .then(function(data) {
      this.countyStatuses = data;
      let aList = [];
      this.countyStatuses.forEach(c => { aList.push(c.county); });
      this.countyList = aList;
      this.setupAutoComp('#location-query', 'county', aList);
      document.querySelector('#county-form').addEventListener('submit',function(event) {
        event.preventDefault();
        document.querySelector('#county-query-error').style.display = 'none';
        // do I have a full county typed in here?
        let typedInValue = document.querySelector('#location-query').value.trim();
        this.processCountySearchInput(typedInValue);
      }.bind(this));  
    }.bind(this));

    rtlOverride(this, 'div', 'ltr');

  }

  setupAutoComp(fieldSelector, fieldName, aList) {
    let component = this;
    const awesompleteSettings = {
      autoFirst: true,
      filter: function (text, input) {
        return Awesomplete.FILTER_CONTAINS(text, input.match(/[^,]*$/)[0]);
      },
      item: function (text, input) {
        return Awesomplete.ITEM(text, input.match(/[^,]*$/)[0]);
      },
      replace: function (selectedSuggestion) {
        let typedInValue = selectedSuggestion.value;
        component.processCountySearchInput(typedInValue);
      },
      list: aList
    };

    new Awesomplete(fieldSelector, awesompleteSettings);
  }

  emitCounty() {
    // jbum: If we get statewide: true, reset the dialog to as it appears on refresh
    // console.log("Emit County",this.state);
    // Dispatch custom event so we can pick up and track this usage elsewhere.
    const event = new window.CustomEvent('county-selected', {
      detail: {
        county: this.state.county,
        statewide: this.state.statewide,
        reset: this.state.statewide,
        how: 'emitCounty'
      }
    });
    // console.log("Emitting county-select",event.detail);
    this.dispatchEvent(event);    
  }

  /*
  emitCountyTypo(misspelling) {
    // Dispatch custom event so we can pick up and track this usage elsewhere.
   // console.log("Emit County Typo");
   const event = new window.CustomEvent('county-search-typo', {
      detail: {
        county: misspelling,
      }
    });
    this.dispatchEvent(event);    
  }
  */


  addListeners() {
    let countyInput = this.querySelector("#location-query");
    let clearBtn = this.querySelector("#clearCounty");
    countyInput.addEventListener("focus", inputValue);    
    countyInput.addEventListener("input", inputValue);
    countyInput.addEventListener("blur", inputValue);
    
    function inputValue() {
      if (countyInput && countyInput.value) {
        clearBtn.classList.remove('d-none');
      } else {
        clearBtn.classList.add('d-none');
      }
    }

    clearBtn.addEventListener("blur", inputValue);    
    clearBtn.addEventListener("click", function(e) {
      // console.log("Clear Button Clicked");
      e.preventDefault();
      countyInput.value = '';
      this.state['county'] = 'California';
      this.state.statewide = true;
      // console.log("C emitting county",this.state);
      console.log("Emit county via clearbutton");
      this.emitCounty();
      clearBtn.classList.add('d-none');
      document.querySelector('#county-query-error').style.display = 'none';
    }.bind(this));
  }

}
window.customElements.define('cagov-county-search', CAGovCountySearch);

class CAGovCountyButtons extends window.HTMLElement {
  connectedCallback () {
    this.resetText = 'Statewide';
    this.county = '';
    
    let searchElement = document.querySelector('cagov-county-search');
    searchElement.addEventListener('county-selected', function (e) {
      console.log("County-selected event: " , e.detail);
      if (e.detail.reset) {
        this.innerHTML = '';
      }
      else if(e.detail.statewide) {
        this.innerHTML = this.template(true);
      } else {
        this.county = e.detail.county;
        // console.log("Inner HTML: " , this.template(false));
        this.innerHTML = this.template(false);
      }
     }.bind(this), false);

    this.addEventListener('click',function(event) {
      event.preventDefault();
      if(event.target.classList.contains('js-toggle-county')) {
        let clickedCounty = event.target.textContent;
        // console.log("Issuing county-selected for button");

        if(!event.target.classList.contains('active')) {
          let emissionEvent = new window.CustomEvent('county-selected', {
            detail: {
              county: clickedCounty,
              statewide: false,
              reset: false,
              how: 'tab'
            }
          });
          if(event.target.classList.contains('statewide')) {
            emissionEvent = new window.CustomEvent('county-selected', {
              detail: {
                county: 'California',
                statewide: true,
                reset: false,
                how: 'tab'
              }
            });
          }
          // const event2 = new window.CustomEvent('tab-select',{detail:{tab_selected: emissionEvent.detail.county}});
          // window.dispatchEvent(event2);    
          searchElement.dispatchEvent(emissionEvent);
        }
      }
    });

  }




  template(isStatewide) {
    // console.log("Template isStatewide=",isStatewide);
    return /*html*/`<div class="d-flex flex-column flex-md-row justify-content-center my-3">
    <div class="text-center large-tabs">
          <button class="large-tab js-toggle-county county ${!isStatewide ? 'active' : ''}">${this.county}</button>
          <button class="large-tab js-toggle-county statewide ${isStatewide ? 'active' : ''}">${this.resetText}</button>
        </div>
    </div>`
  }
}
window.customElements.define('cagov-county-toggle-buttons', CAGovCountyButtons);

class CAGovChartFilterButtons extends window.HTMLElement {
  connectedCallback () {
    
    this.addEventListener('click',function(event) {
      event.preventDefault();
      let clickedFilterText = event.target.textContent;
      let clickedFilterKey = event.target.dataset.key;
      if (clickedFilterKey != undefined) {
        if(!event.target.classList.contains('active')) {
          let emissionEvent = new window.CustomEvent('filter-selected', {
            detail: {
              filterKey: clickedFilterKey,
              clickedFilterText: clickedFilterText
            }
          });
          this.resetActive();
          event.target.classList.add('active');
          this.dispatchEvent(emissionEvent); // this event fire is last because charts look at active class on filter to get new text
        }
      }
    });

    // listen for county events, hide deaths
    let statewideOnlyButton = this.querySelector("button[data-key='deaths']");
    let searchElement = document.querySelector('cagov-county-search');
    searchElement.addEventListener('county-selected', function (e) {
      if(statewideOnlyButton) {
        if(e.detail.statewide) {
          statewideOnlyButton.style.display = 'block';
        } else {
          statewideOnlyButton.style.display = 'none';
        }
        // we were on the filter we are now hiding, reset to first
        if(statewideOnlyButton.classList.contains('active')) {
          statewideOnlyButton.classList.remove('active');
          this.querySelector('button').classList.add('active'); // make ifrst one active instead
        }
      }
    }.bind(this), false);

  }

  resetActive() {
    let buttons = this.querySelectorAll('.small-tab');
    buttons.forEach(b => {
      if(b.classList.contains('active')) {
        b.classList.remove('active');
      }
    });
  }

}
window.customElements.define('cagov-chart-filter-buttons', CAGovChartFilterButtons);

function styleInject(css, ref) {
  if ( ref === void 0 ) ref = {};
  var insertAt = ref.insertAt;

  if (!css || typeof document === 'undefined') { return; }

  var head = document.head || document.getElementsByTagName('head')[0];
  var style = document.createElement('style');
  style.type = 'text/css';

  if (insertAt === 'top') {
    if (head.firstChild) {
      head.insertBefore(style, head.firstChild);
    } else {
      head.appendChild(style);
    }
  } else {
    head.appendChild(style);
  }

  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    style.appendChild(document.createTextNode(css));
  }
}

var css_248z$5 = "cagov-chart-re-100k {\n  min-width: 300px; }\n  cagov-chart-re-100k .change-from-month-labels {\n    font-size: 0.75em;\n    text-anchor: unset; }\n  cagov-chart-re-100k .bar-chart-label.label {\n    font-size: 0.85rem; }\n  cagov-chart-re-100k .label {\n    font-weight: normal;\n    color: #1f2574; }\n  cagov-chart-re-100k .chart-tooltip--re100k {\n    min-width: 100px; }\n  cagov-chart-re-100k .withheld-label {\n    font-size: 0.85em; }\n";
styleInject(css_248z$5);

function template$5(title, description) {
  return /*html*/`<div class="chart py-2">
    <div class="bg-white py-4">
      <div class="mx-auto">
        <div class="chart-title">${title}</div>
        <p class="small-text chart-description">${description}</p>
        <div class="svg-holder"></div>
      </div>
    </div>
  </div><!--END BG lightblue-->`;
}

function chartOverlayBox(svg,        // svg to change to 50% opacity
                         chartClass, // chart's class
                         boxClass,   // custom class name for this box
                         chartDims,  // dict that contains width and height
                         caption)    // caption text
{                         

      // 250 is current width of chart-overlaybox-container
      let boxWidth = 250;
      let boxHeight = boxWidth/2;

      d3.selectAll("." + boxClass).remove();
      svg.style("opacity",.5);
      // append informative box
      d3
      .select(chartClass)
      .append("div")
      .attr("class", "chart-overlaybox-container " + boxClass)
      .style("visibility", "visible")
      .style("left", (chartDims.width - boxWidth)/2 + "px")
      .style("top", (chartDims.height - boxHeight)/2 + "px")
      .append("div")
      .attr("class", "chart-overlaybox")
      .text(caption);
}

function chartOverlayFade(svg,        // svg to change to 50% opacity
                          chartClass, // chart's class
                          boxClass,   // custom class name for this box
                          chartDims  // dict that contains width and height
                          ) {

      d3.selectAll("." + boxClass).remove();
      svg.style("opacity",.5);
}

function chartOverlayBoxClear(svg, boxClass) {
    // clears previous box, if any and resets opacity of svg
    d3.selectAll("." + boxClass).remove();
    svg.style("opacity",1);
}

// Generic Formatters

let intFormatter = new Intl.NumberFormat(
    "us", // forcing US to avoid mixed styles on translated pages
    { style: "decimal", minimumFractionDigits: 0, maximumFractionDigits: 0 }
);
let float1Formatter = new Intl.NumberFormat(
    "us", // forcing US to avoid mixed styles on translated pages
    { style: "decimal", minimumFractionDigits: 1, maximumFractionDigits: 1 }
);
let float2Formatter = new Intl.NumberFormat(
    "us", // forcing US to avoid mixed styles on translated pages
    { style: "decimal", minimumFractionDigits: 2, maximumFractionDigits: 2 }
);
let float3Formatter = new Intl.NumberFormat(
    "us", // forcing US to avoid mixed styles on translated pages
    { style: "decimal", minimumFractionDigits: 3, maximumFractionDigits: 3 }
);

let pct0Formatter = new Intl.NumberFormat(
    "us", // forcing US to avoid mixed styles on translated pages
    { style: "percent", minimumFractionDigits: 0, maximumFractionDigits: 0 }
);
let pct1Formatter = new Intl.NumberFormat(
    "us", // forcing US to avoid mixed styles on translated pages
    { style: "percent", minimumFractionDigits: 1, maximumFractionDigits: 1 }
);
let pct2Formatter = new Intl.NumberFormat(
    "us", // forcing US to avoid mixed styles on translated pages
    { style: "percent", minimumFractionDigits: 2, maximumFractionDigits: 2 }
);
let pct3Formatter = new Intl.NumberFormat(
    "us", // forcing US to avoid mixed styles on translated pages
    { style: "percent", minimumFractionDigits: 3, maximumFractionDigits: 3 }
);


function formatValue(v, {format='number',min_decimals=1})
{
    // console.log("formatValue",v,format);
    if (format == 'integer') {
        return intFormatter.format(v);
    } else if (format == 'percent') {
        if (v == 0) {
            return pct0Formatter.format(v); // show integer for true zeros
        } else if (v < .00005) {
            return pct3Formatter.format(v);
        } else if (v < .0005) {
            return pct2Formatter.format(v);
        } else if (min_decimals == 0) {
            return pct0Formatter.format(v);
        } else {
            return pct1Formatter.format(v);
        }
    } else { // number or float
        if (v == 0) {
            return intFormatter.format(v); // show integer for true zeros
        } else if (v < .005) {
            return float3Formatter.format(v);
        } else if (v < .05) {
            return float2Formatter.format(v);
        } else if (min_decimals == 0) {
            return intFormatter.format(v);
        } else {
            return float1Formatter.format(v);
        }
    }
}

function drawBars$2(stackedData, data, statewideRatePer100k) {
  // console.log("Draw bars this.dimensions",this.dimensions);
  // using object context for most of the params

  // jbum cutting down on explicit params by using component as scope
  // otherwise we are going to end up with a zillion params for a method that really only applies to this one object
  let component = this;
  let svg = this.svg;
  let x = this.x;
  let y = this.y;
  let yAxis = this.yAxis;
  let color = this.color;
  let tooltip = this.tooltip;
  let filterScope = this.selectedMetricDescription;
  let filterString = this.filterString(statewideRatePer100k);
  let legendString = this.legendString();
  let translationsObj = this.translationsObj;
  let chartBreakpointValues = this.chartBreakpointValues;
  let appliedSuppressionStatus = this.appliedSuppressionStatus;
  let selectedMetric = this.selectedMetric;

  // console.log('100k', translationsObj, chartBreakpointValues, appliedSuppressionStatus);

  // console.log('selected', selectedMetric);
  
  svg.selectAll("g").remove();
  svg.selectAll("rect").remove();
  svg.selectAll("text").remove();
  svg.selectAll("path").remove();

  let bar = svg
    .append("g")
    .selectAll("g")
    // Enter in the stack data = loop key per key = group per group
    .data(stackedData)
    .enter()
    .append("g")
    .attr("fill", (d) => color(d.key))
    .selectAll("rect")

    // enter a second time = loop subgroup per subgroup to add all rectangles
    .data((d) => d)
    .enter();
  
  bar.append("rect")
    .attr("x", (d) => x(d[0]))
    .attr("y", (d) => y(d.data.DEMOGRAPHIC_SET_CATEGORY))
    .attr("width", (d) => x(d[1]) - x(d[0]))
    .attr("height", "10px");


  // large transparent area for tooltip hover area
  bar.append("rect")
    .attr("x", (d) => x(d[0]))
    .attr("y", (d) => y(d.data.DEMOGRAPHIC_SET_CATEGORY)-10)
    .attr("width", (d) => x(d[1]) - x(d[0]))
    .attr("height", "30px")
    .attr("fill", "transparent")  // use rgb(255,0,0,0.5) for debugging
    .attr("tabindex", "0")
    .attr("aria-label", (d, i) => {
      let caption = component.toolTipCaption(
        d.data.DEMOGRAPHIC_SET_CATEGORY,
        d.data.METRIC_VALUE_PER_100K
          ? d.data.METRIC_VALUE_PER_100K
          : 0,
        filterScope,
        d // .toLowerCase()
      );

      if (d.data.APPLIED_SUPPRESSION === "Total") {
        caption = translationsObj['data-missing-applied-suppression-total' + "--" + selectedMetric.toLowerCase()] || '';
      } else if (d.data.APPLIED_SUPPRESSION === "Population") {
        caption = translationsObj['data-missing-applied-suppression-population'+ "--" + selectedMetric.toLowerCase()] || '';
      }

      return `<div class="chart-tooltip"><div>${caption}</div></div>`;
    })
    .on("mouseover focus", function (event, d) {
      d3.select(this).transition();

      let caption = component.toolTipCaption(
        d.data.DEMOGRAPHIC_SET_CATEGORY,
        d.data.METRIC_VALUE_PER_100K
          ? d.data.METRIC_VALUE_PER_100K
          : 0,
        filterScope,
        d // .toLowerCase()
      );
      if (d.APPLIED_SUPPRESSION === "Population") {
        caption = ``;
      } else if (d.APPLIED_SUPPRESSION === "Total") {
        caption = ``;
      }
      // console.log("Caption",caption);
      // <span class="highlight-data">placeholderDEMO_CAT</span> people have <span class="highlight-data">placeholderMETRIC_100K</span> placeholderFilterScope for 100k people of the same race and ethnicity'
      tooltip.html(`<div class="chart-tooltip"><div >${caption}</div></div>`);
      tooltip.style("visibility", "visible");
      tooltip.style("left", "90px");
      tooltip.style("top", `${event.offsetY+230}px`);
    })
    .on("mouseout", function (d) {
      d3.select(this).transition();
      //.attr("fill", d => color(d.key));
      //.style("fill", "skyblue");
      tooltip.style("visibility", "hidden");
    });

  // svg.append("g").call(xAxis);

  let is_debugging_infobox = false;
  let boxClass = "chartOverlay-cagov-chart-re-100k";
  if (appliedSuppressionStatus !== null || is_debugging_infobox) {
    chartOverlayBox(svg,                      
                  "cagov-chart-re-100k",      // class of chart
                  boxClass,                   // class of box
                  chartBreakpointValues,      // dimensions dict (contains width,height)
                  translationsObj[appliedSuppressionStatus] ? translationsObj[appliedSuppressionStatus] : '' // caption
                  );
  } else {
    chartOverlayBoxClear(svg, boxClass);
  }

  // Bar labels.
  svg
    .append("g")
    .call(yAxis);

    // @TODO we need to change the classes for the bar labels in order to make them lighter color,
    // Syntax issue here:
    // d3.selectAll(".bar-label")
    // .data(data, (d) => {
    //   console.log("DD", d)
    // })
    // .enter((e) => console.log("E", e))
    // .each((enter) => {
    //   console.log('enter', enter);
    // NOPE
    //     // .attr("class", (d) => {
    //     //   console.log("DDD", d)
    //     //   if (d.APPLIED_SUPPRESSION === "Population") {
    //     //     return "bar-label bars-label-unknown";
    //     //   } else {
    //     //     return "bar-label bars-label-unknown";
    //     //   }
    //     // });
    // });

  // End of bar labels
  svg
    .append("g")
    .attr("class", "bars")
    .selectAll(".bars")
    .data(data)
    .join((enter) => {
      enter
        .append("text")
        .attr("class", (d) => {
          if (d.APPLIED_SUPPRESSION === "Population") {
            return "bars bars-unknown";
          } else {
            return "bars";
          }
        })
        .attr("y", (d) => y(d.DEMOGRAPHIC_SET_CATEGORY) + 9)
        .attr("x", (d) => 385)
        .attr("height", y.bandwidth())
        .text((d) => {
          // @TODO ADD COMMA HANDLER HERE
          if (
            d.APPLIED_SUPPRESSION === "None" &&
            d.METRIC_VALUE_PER_100K !== null
          ) {
            return d.METRIC_VALUE_PER_100K
              ? formatValue(d.METRIC_VALUE_PER_100K,{format:'integer'})
              : 0;
          } else {
            if (d.APPLIED_SUPPRESSION === "Total") {
              // return "Total";
              return "";
            } else if (d.APPLIED_SUPPRESSION === "Population") {
              // return "Population";
              return "";
            }
          }
        })
        .attr("text-anchor", "end");
    });

  // Times the lowest rate labels
  svg
    .append("g")
    .attr("class", "more-than-labels")
    .selectAll(".more-than-labels")
    .data(data)
    .join((enter) => {
      enter
        .append("text")
        .attr("class", "more-than-labels")
        .attr("y", (d) => y(d.DEMOGRAPHIC_SET_CATEGORY) + 25)
        .attr("x", (d) => 415)
        .attr("height", y.bandwidth())

        .html((d) => {
          if (d.APPLIED_SUPPRESSION === "None") {
            if (parseFloat(d.PCT_FROM_LOWEST_VALUE).toFixed(1) > 1) {
              return `<tspan class="highlight-data">${parseFloat(
                d.PCT_FROM_LOWEST_VALUE
              ).toFixed(1)}</tspan> times the lowest rate`;
            } else {
              return `Lowest rate`;
            }
          } else {
            return ``;
          }
        })
        .attr("text-anchor", "end");
    });

  // % Change since previous month labels
  svg
    .append("g")
    .attr("class", "change-from-month-labels")
    .selectAll(".change-from-month-labels")
    .data(data)
    .join((enter) => {
      enter
        .append("text")
        .attr("y", (d) => y(d.DEMOGRAPHIC_SET_CATEGORY) + 25)
        .attr("x", (d) => {
          return d.APPLIED_SUPPRESSION == "None"? 250 : 0;
        })
        .attr("height", y.bandwidth())
        .html((d) => {
          if (d.APPLIED_SUPPRESSION === "Population") {
            return `<tspan class="withheld-label">${translationsObj['data-missing-applied-suppression-population' + "--" + selectedMetric.toLowerCase()] || ''}</tspan>`;
          } else if (d.APPLIED_SUPPRESSION === "Total") {
            return `<tspan class="withheld-label">${translationsObj['data-missing-applied-suppression-total' + "--" + selectedMetric.toLowerCase()] || ''}</tspan>`;
          } else if (d.APPLIED_SUPPRESSION === "None") {
            return `<tspan class="highlight-data">
            ${parseFloat(
              d.METRIC_VALUE_PER_100K_CHANGE_30_DAYS_AGO * 100
            ).toFixed(1)}%</tspan>
            ${translationsObj.chartLineDiff}`;
          } else {
            console.log("unexpected applied suppression",d.APPLIED_SUPPRESSION);
            return ``;
          }
        })
        .attr("text-anchor", (d) => d.APPLIED_SUPPRESSION == "None"? "end" : "start");
        // .attr("inline-size", chartBreakpointValues.width);
    });

  // Change from month arrows
  svg
    .append("g")
    .attr("class", "change-from-month-labels")
    .selectAll(".change-from-month-labels")
    .data(data)
    .join((enter) => {
      enter
        .append("svg")
        .attr("y", (d) => y(d.DEMOGRAPHIC_SET_CATEGORY) + 15)
        .attr("x", (d) => {
          return 3;
        })
        .html((d) => {
          if (d.APPLIED_SUPPRESSION === "None") {
            if (
              !d.METRIC_VALUE_PER_100K_CHANGE_30_DAYS_AGO ||
              Math.abs(d.METRIC_VALUE_PER_100K_CHANGE_30_DAYS_AGO) < 0.0005
            ) {
              return `<svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M16.4155 8.8403L13.0689 12.013C12.8394 12.2306 12.4721 12.2234 12.2554 11.9949C12.0388 11.7663 12.0483 11.4018 12.2807 11.1815L14.5958 8.98667L1.0023 8.9417L0.784831 8.9417C0.629791 8.93708 0.495915 8.90016 0.388909 8.7873C0.284502 8.67717 0.227827 8.53225 0.231476 8.37719C0.2349 8.22757 0.297533 8.095 0.410888 7.98753C0.563911 7.84246 0.720296 7.81444 0.823716 7.81572L1.0023 7.816L14.6338 7.79526L12.449 5.49078C12.2324 5.26226 12.2419 4.89773 12.4743 4.67745C12.7038 4.45985 13.0712 4.46706 13.2878 4.69558L16.4409 8.02148C16.6573 8.25543 16.6478 8.62 16.4155 8.8403Z" fill="#1F2574"/>
</svg>`;
            } else if (
              parseFloat(d.METRIC_VALUE_PER_100K_CHANGE_30_DAYS_AGO) > 0
            ) {
              return `<svg width="15" height="10" viewBox="0 0 17 10" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M17 0.581819V5.19326C17 5.50954 16.742 5.77116 16.4271 5.77116C16.1122 5.77116 15.8543 5.51344 15.8543 5.19326V2.00308L10.1901 7.93042C10.0839 8.03975 9.93972 8.09832 9.78419 8.09832C9.63244 8.09832 9.48828 8.03975 9.37826 7.93042L6.11944 4.64647L0.971201 9.8321C0.86118 9.94143 0.720802 10 0.565271 10C0.413518 10 0.26936 9.94143 0.15934 9.8321C0.0531121 9.72667 0 9.59001 0 9.43381C0 9.22295 0.0872582 9.09018 0.15934 9.01601L5.70966 3.42434C5.81968 3.315 5.96006 3.25643 6.11559 3.25643C6.26734 3.25643 6.4115 3.315 6.52152 3.42434L9.78035 6.70829L15.0158 1.1558H11.8403C11.5254 1.1558 11.2674 0.898078 11.2674 0.5779C11.2674 0.26162 11.5254 0 11.8403 0H16.4233C16.742 0.00390471 17 0.261621 17 0.581819H17Z" fill="#FF8000"/>
  </svg>`;
            } else {
              return `<svg width="15" height=10 viewBox="0 0 17 10" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M17 9.41818V4.80674C17 4.49046 16.742 4.22884 16.4271 4.22884C16.1122 4.22884 15.8543 4.48656 15.8543 4.80674V7.99692L10.1901 2.06958C10.0839 1.96025 9.93972 1.90168 9.78419 1.90168C9.63244 1.90168 9.48828 1.96025 9.37826 2.06958L6.11944 5.35353L0.971201 0.167904C0.86118 0.0585697 0.720802 0 0.565271 0C0.413518 0 0.26936 0.0585717 0.15934 0.167904C0.0531121 0.273332 0 0.409992 0 0.566192C0 0.777052 0.0872582 0.909822 0.15934 0.983993L5.70966 6.57566C5.81968 6.685 5.96006 6.74357 6.11559 6.74357C6.26734 6.74357 6.4115 6.685 6.52152 6.57566L9.78035 3.29171L15.0158 8.8442H11.8403C11.5254 8.8442 11.2674 9.10192 11.2674 9.4221C11.2674 9.73838 11.5254 10 11.8403 10H16.4233C16.742 9.9961 17 9.73838 17 9.41818H17Z" fill="#003D9D"/>
  </svg>`;
            }
          } else {
            return ``;
          }
        });
    });

  // Reference line for statewide rate
  svg
    .append("path")
    .attr(
      "d",
      d3.line()([
        [x(statewideRatePer100k), 30],
        [x(statewideRatePer100k), 650],
      ])
    )
    .attr("stroke", "#1F2574")
    .attr("opacity", "0.25")
    .style("stroke-dasharray", "5, 5")
    .style("stroke", "#1F2574");

  let xpos = x(statewideRatePer100k);
  let xalign = "middle";
  if (xpos < this.dimensions.width * 0.3) {
    xalign = "start";
  } else if (xpos >= this.dimensions.width * 0.66) {
    xalign = "end";
  }
  // console.log("Filter string",filterString,"align",xalign);
  // Label for statewide line
  svg
    .append("g")
    .append("text")
    .text(filterString) // `Statewide ${filterScope.toLowerCase()} per 100K: ${parseFloat(statewideRatePer100k).toFixed(1)}`)
    .attr("x", x(statewideRatePer100k))
    .attr("y", 25)
    .attr("text-anchor", xalign)
    .attr("fill", "#1F2574")
    .attr("class", "label bar-chart-label");

  // Chart legend
  // Box
  svg
    .append("rect")
    .attr("x", 0)
    .attr("y", -20)
    .attr("width", 15)
    .attr("height", 15)
    .attr("fill", "#FFCF44");

  // Label
  svg
    .append("text")
    .attr("x", 25)
    .attr("y", -12)
    .attr("class", "legend-label")
    .attr("dy", "0.35em")
    .text(legendString);

}

/*
// This is the desired term set from GO:
  American Indian or Alaska Native (AI/AN)
  Asian American
  Black
  Latino
  Multi-Race
  Native Hawaiian and other Pacific Islander (NHPI)
  Other
  Unknown
  White
*/

function termCheck() {
  // The following mapping uses terms we've seen in the database to terms we want to display in that case
  let desiredTermMappings = new Map();
  desiredTermMappings.set("African American", "Black");
  desiredTermMappings.set("Native Hawaiian and other Pacific Islander", "Native Hawaiian and other Pacific Islander (NHPI)");
  desiredTermMappings.set("American Indian", "American Indian or Alaska Native (AI/AN)"); 

  return desiredTermMappings;
}

function getTranslations(container) {
  let translationsObj = {};
  let translateEls = container.querySelectorAll('[data-label]');
  translateEls.forEach(item => {
    translationsObj[item.dataset.label] = item.innerHTML;
  });
  let translateElArrays = container.querySelectorAll('[data-group]');
  translateElArrays.forEach(group => {
    let groupKey = group.getAttribute('data-group');
    let arrayItems = group.querySelectorAll('[data-item]');
    if (groupKey !== null && arrayItems !== null) {
      let groupItems = {};
      arrayItems.forEach(item => {
        let key = item.getAttribute('data-item');
        groupItems[key] = item.innerHTML;
      });
      translationsObj[groupKey] = groupItems;
    }

  });
  return translationsObj;
}

function getScreenResizeCharts() {
  // Putting this in a special scope for just this component.
  window.charts = {};
  // Get window size, return based on breakpoint settings,
  // Then return mobile, tablet or desktop.
  const getIsHighDensity = () => {
    return (
      (window.matchMedia &&
        (window.matchMedia(
          "only screen and (min-resolution: 124dpi), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 48.8dpcm)"
        ).matches ||
          window.matchMedia(
            "only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (min-device-pixel-ratio: 1.3)"
          ).matches)) ||
      (window.devicePixelRatio && window.devicePixelRatio > 1.3)
    );
  };

  const getIsRetina = () => {
    return (
      ((window.matchMedia &&
        (window.matchMedia(
          "only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx), only screen and (min-resolution: 75.6dpcm)"
        ).matches ||
          window.matchMedia(
            "only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min--moz-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2)"
          ).matches)) ||
        (window.devicePixelRatio && window.devicePixelRatio >= 2)) &&
      /(iPad|iPhone|iPod)/g.test(navigator.userAgent)
    );
  };

  const getOrientation = () => {
    var orientation =
      (screen.orientation || {}).type ||
      screen.mozOrientation ||
      screen.msOrientation;
    if (orientation === "landscape-primary") {
      return 'landscape';
    } else if (orientation === "landscape-secondary") {
      // Upside down
      return 'landscape';
    } else if (
      orientation === "portrait-secondary" ||
      orientation === "portrait-primary"
    ) {
      return 'portrait';
    } else if (orientation === undefined) {
      return null;
    }
    return null;
  };

  const getWindowSize = () => {
    let windowSize = {
      width: window.innerWidth,
      height: window.innerHeight,
    };

    let isRetina = getIsRetina();
    let highDensity = getIsHighDensity();
    getOrientation();

    // console.log('retina', isRetina, 'highDensity', highDensity, 'orientation', orientation);
  
    if (window.charts !== undefined) {
      if (windowSize.width <= 576) {
        window.charts.displayType = "mobile";
        if (highDensity === true || isRetina === true) {
          window.charts.displayType = "retina";
        }
      } else if (windowSize.width > 576 && windowSize.width <= 768) {
        window.charts.displayType = "tablet";
      } else {
        window.charts.displayType = "desktop";
      }
    }
  };

  

  const handleResize = () => {
    getWindowSize();
  };

  window.addEventListener("resize", handleResize);
  handleResize();
}

class CAGOVEquityRE100K extends window.HTMLElement {
  connectedCallback() {
    // Settings and initial values
    this.chartOptions = {
      // Data
      subgroups: ["METRIC_VALUE_PER_100K", "WORST_VALUE_DELTA"],
      dataUrl:
        config.equityChartsDataLoc + "/equitydash/cumulative-california.json", // Overwritten by county.
      dataStatewideRateUrl:
        config.equityChartsDataLoc + "/equitydash/cumulative-combined.json", // Overwritten by county?
      state: "California",
      county: "California",
      // Style
      chartColors: ["#FFCF44", "#F2F5FC"],
      selectedMetric: "cases",
      selectedMetricDescription: "cases",
      // Breakpoints
      desktop: {
        is_single_col: false,
        height: 642,
        width: 450,
        margin: {
          top: 20,
          right: 30,
          bottom: 10,
          left: 10,
        },
      },
      tablet: {
        is_single_col: true,
        height: 642,
        width: 450,
        margin: {
          top: 20,
          right: 30,
          bottom: 10,
          left: 10,
        },
      },
      mobile: {
        is_single_col: true,
        height: 642,
        width: 450,
        margin: {
          top: 20,
          right: 30,
          bottom: 10,
          left: 10,
        },
      },
      retina: {
        is_single_col: true,
        height: 642,
        width: 450,
        margin: {
          top: 20,
          right: 30,
          bottom: 10,
          left: 10,
        },
      },
    };
    // Resizing
    getScreenResizeCharts();
    this.screenDisplayType = window.charts
      ? window.charts.displayType
      : "desktop";
    this.chartBreakpointValues = this.chartOptions[
      this.screenDisplayType ? this.screenDisplayType : "desktop"
    ];

    // Choose settings for current screen display.
    // Display content & layout dimensions
    const handleChartResize = () => {
      getScreenResizeCharts();
      this.screenDisplayType = window.charts
        ? window.charts.displayType
        : "desktop";
      this.chartBreakpointValues = this.chartOptions[
        this.screenDisplayType ? this.screenDisplayType : "desktop"
      ];
    };

    // @TODO connect a debouncer
    window.addEventListener("resize", handleChartResize);

    this.dimensions = this.chartBreakpointValues;

    this.translationsObj = getTranslations(this);
    this.selectedMetric = "cases";
    this.selectedMetricDescription = "cases";
    this.county = "California";
    this.drawBars = drawBars$2;
    this.chartTitle = function () {
      let isStatewide = this.county === "California";
      return this.translationsObj["chartTitle--" + this.selectedMetric].replace(
        "placeholderForDynamicLocation",
        isStatewide ? this.county : this.county + " County "
      );
    };
    this.description = function (selectedMetricDescription) {
      return this.translationsObj["chartDescription--" + this.selectedMetric];
    };
    this.legendString = function () {
      return this.translationsObj["chartLegend" + "--" + this.selectedMetric];
    };
    this.filterString = function (statewideRatePer100k) {
      let isStatewide = this.county === "California";
      let key =
        "chartFilterLegendPfx" +
        (isStatewide ? "State" : "State") + // change right-most one to County after we fix it...
        "--" +
        this.selectedMetric;
      let filterTxt =
        this.translationsObj[key] + formatValue(statewideRatePer100k,{format:'integer'});
      // console.log("Filter key",key);
      // console.log("Filter text",filterTxt);
      filterTxt = filterTxt.replace(
        "placeholderForDynamicLocation",
        isStatewide ? this.county : this.county + " County "
      );
      return filterTxt;
    };

    this.toolTipCaption = function (a, b, c, d) {
      if (d.data.APPLIED_SUPPRESSION === "Total") {
        return this.translationsObj['data-missing-applied-suppression-total' + "--" + this.selectedMetric.toLowerCase()] || '';
      } else if (d.data.APPLIED_SUPPRESSION === "Population") {
        return this.translationsObj['data-missing-applied-suppression-population'+ "--" + this.selectedMetric.toLowerCase()] || '';
      }

      let templateStr = this.translationsObj["chartToolTip-caption"];
      let caption = templateStr
        .replace("placeholderDEMO_CAT", a)
        .replace("placeholderMETRIC_100K", formatValue(b,{format:'integer'}))
        .replace("placeholderFilterScope", c);
      return caption;
    };
    // `Statewide ${filterScope.toLowerCase()} per 100K: ${parseFloat(statewideRatePer100k).toFixed(1)}`

    this.innerHTML = template$5(
      this.chartTitle(),
      this.description(this.selectedMetricDescription)
    );

    this.classList.remove("d-none");

    this.tooltip = d3
      .select("cagov-chart-re-100k")
      .append("div")
      .attr("class", "tooltip-container tooltip-container--re100k")
      .text("an empty tooltip");

    this.svg = d3
      .select(this.querySelector(".svg-holder"))
      .append("svg")
      .attr("viewBox", [0, 0, this.dimensions.width, this.dimensions.height])
      .append("g")
      .attr(
        "transform",
        "translate(" +
          this.dimensions.margin.left +
          "," +
          this.dimensions.margin.top +
          ")"
      );

    // @TODO Connect to chartOptions
    this.subgroups = this.chartOptions.subgroups;
    this.color = d3
      .scaleOrdinal()
      .domain(this.subgroups)
      .range(this.chartOptions.chartColors);

    this.dataUrl = this.chartOptions.dataUrl;
    this.dataStatewideRateUrl = this.chartOptions.dataStatewideRateUrl;

    this.retrieveData(this.dataUrl, this.dataStatewideRateUrl);
    this.listenForLocations();
    this.county = this.chartOptions.state;
    this.resetTitle();
    this.resetDescription();
    rtlOverride(this);

  }

  listenForLocations() {
    let searchElement = document.querySelector("cagov-county-search");
    searchElement.addEventListener(
      "county-selected",
      function (e) {
        this.county = e.detail.county;
        if (this.selectedMetric === "deaths") {
          this.selectedMetric = "cases";
        }
        this.dataUrl =
          config.equityChartsDataLoc +
          "/equitydash/cumulative-" +
          this.county.toLowerCase().replace(/ /g, "") +
          ".json";
        this.retrieveData(this.dataUrl, this.dataStatewideRateUrl);
        this.resetTitle();
        this.resetDescription();
      }.bind(this),
      false
    );

    let metricFilter = document.querySelector(
      "cagov-chart-filter-buttons.js-re-smalls"
    );
    metricFilter.addEventListener(
      "filter-selected",
      function (e) {
        if (e.detail.filterKey != undefined) {
          // console.log("filter selected",e.detail.filterKey);
          this.selectedMetricDescription = e.detail.clickedFilterText.toLowerCase();
          let metricKey = "chartMetricName--" + e.detail.filterKey;
          if (metricKey in this.translationsObj) {
            this.selectedMetricDescription = this.translationsObj[metricKey];
          }
          this.selectedMetric = e.detail.filterKey;
          this.retrieveData(this.dataUrl, this.dataStatewideRateUrl);
          this.resetDescription();
          this.resetTitle();
        }
      }.bind(this),
      false
    );
  }

  resetTitle() {
    this.querySelector(".chart-title").innerHTML = this.chartTitle();
  }

  resetDescription() {
    this.querySelector(".chart-description").innerHTML = this.description(
      this.selectedMetricDescription
    );
  }

  checkAppliedDataSuppression(data) {
    let appliedSuppressionStatus = null;
    let groups = data.map((item) => item.DEMOGRAPHIC_SET_CATEGORY);

    let suppressionAllocations = {
      None: 0,
      Total: 0,
      Population: 0,
      CountySuppressed: false,
      TotalSuppression: 0,
    };

    data.map((item) => {
      suppressionAllocations[item.APPLIED_SUPPRESSION] = suppressionAllocations[item.APPLIED_SUPPRESSION] + 1;
      if (item.APPLIED_SUPPRESSION !== "None") {      
        suppressionAllocations['TotalSuppression'] = suppressionAllocations['TotalSuppression'] + 1;
      }
    });

    if (groups.length === suppressionAllocations.TotalSuppression) {
      suppressionAllocations.CountySuppressed = true;
      appliedSuppressionStatus = 'applied-suppression-total';
    }
    // console.log(suppressionAllocations);
    return appliedSuppressionStatus;
  }

  render() {
    // NOTE subgroups: "METRIC_VALUE_PER_100K", "WORST_VALUE_DELTA"

    // Exclude Other & Unknown categories from displaying for this chart.
    let data = this.alldata.filter(
      (item) =>
        item.METRIC === this.selectedMetric &&
        item.DEMOGRAPHIC_SET_CATEGORY !== "Other" &&
        item.DEMOGRAPHIC_SET_CATEGORY !== "Unknown"
    );

    // Update term display strings
    let displayDemoMap = termCheck();

    // Format data
    data.forEach((d) => {
      // Set default value of 0 for per 100k change.
      d.METRIC_VALUE_PER_100K_CHANGE_30_DAYS_AGO = 0;

      // If value found for metric rate 30 days ago
      if (d.METRIC_VALUE_PER_100K_30_DAYS_AGO) {
        // Create new value that calculates the difference of change.
        d.METRIC_VALUE_PER_100K_CHANGE_30_DAYS_AGO =
          d.METRIC_VALUE_PER_100K_DELTA_FROM_30_DAYS_AGO /
          d.METRIC_VALUE_PER_100K_30_DAYS_AGO;
      }

      // Map the race/ethnicities in the db to the desired display values here.
      if (displayDemoMap.get(d.DEMOGRAPHIC_SET_CATEGORY)) {
        d.DEMOGRAPHIC_SET_CATEGORY = displayDemoMap.get(
          d.DEMOGRAPHIC_SET_CATEGORY
        );
      }
    });

    let sortableData = data.filter((d) => d.DISPROPORTIONALITY_RATIO !== null);
    let nullSortData = data.filter((d) => d.DISPROPORTIONALITY_RATIO === null);

    // Sort data with non-null 'disproportionality ratio' 
    sortableData.sort(function (a, b) {
      return d3.descending(a.METRIC_VALUE_PER_100K, b.METRIC_VALUE_PER_100K);
    });

    // Push null data values to the end or the sorted array (@TODO double check order)
    // Remap data object
    data = sortableData.concat(nullSortData); 
    

    this.appliedSuppressionStatus = this.checkAppliedDataSuppression(data);
    // ordering this array by the order they are in in data
    // need to inherit this as a mapping of all possible values to desired display values becuase these differ in some tables

    // Get list of groups (?)
    let groups = data.map((item) => item.DEMOGRAPHIC_SET_CATEGORY);

    // Keys of data to use in chart.
    let stackedData = d3.stack().keys(this.subgroups)(data);

    // Y position of bars.
    this.y = d3
      .scaleBand()
      .domain(groups)
      .range([
        this.dimensions.margin.top,
        this.dimensions.height - this.dimensions.margin.bottom,
      ])
      .padding([0.6]);

    // Position for labels.
    this.yAxis = (g) =>
      g
        .attr("class", "bar-label")
        .attr("transform", "translate(5," + -32 + ")")
        .call(d3.axisLeft(this.y).tickSize(0))
        .call((g) => g.selectAll(".domain").remove());

    let statewideRatePer100k = this.combinedData[this.selectedMetric]
      ? this.combinedData[this.selectedMetric].METRIC_VALUE_PER_100K
      : null;
    let max_xdomain = d3.max(stackedData, (d) => d3.max(d, (d) => d[1]));
    if (statewideRatePer100k !== null) {
      // console.log("max xd",max_xdomain, statewideRatePer100k);
      max_xdomain = Math.max(max_xdomain, statewideRatePer100k);
    }

    let barGap = this.dimensions.is_single_col? 60 : 40;
    this.x = d3
      .scaleLinear()
      .domain([0, max_xdomain])
      .range([0, this.dimensions.width - this.dimensions.margin.right - barGap]);

    // ?
    this.xAxis = (g) =>
      g
        .attr("transform", "translate(0," + this.dimensions.width + ")")
        .call(d3.axisBottom(this.x).ticks(width / 50, "s"))
        .remove();
    this.drawBars(stackedData, data, statewideRatePer100k);
  }

  retrieveData(url, statewideUrl) {
    Promise.all([window.fetch(url), window.fetch(statewideUrl)])
      .then(function (responses) {
        return Promise.all(
          responses.map(function (response) {
            return response.json();
          })
        );
      })
      .then(
        function (requestData) {
          this.alldata = requestData[0];
          this.combinedData = requestData[1];
          this.render();
        }.bind(this)
      );
  }
}
window.customElements.define("cagov-chart-re-100k", CAGOVEquityRE100K);

var css_248z$4 = "cagov-chart-re-pop {\n  min-width: 300px; }\n  cagov-chart-re-pop .svg-holder-second {\n    border-top: solid 1px #000;\n    margin-top: 10px;\n    padding-top: 30px; }\n    cagov-chart-re-pop .svg-holder-second svg {\n      width: 100%; }\n  cagov-chart-re-pop .chart-overlaybox-container {\n    top: 23%;\n    left: 20%; }\n  cagov-chart-re-pop .change-from-month-labels {\n    font-size: 0.75em;\n    text-anchor: unset; }\n  cagov-chart-re-pop .withheld-label {\n    font-size: 0.85em; }\n  cagov-chart-re-pop .chart-tooltip--repop {\n    min-width: 100px; }\n";
styleInject(css_248z$4);

function template$4(translationsObj) {
  return /*html*/`<div class="py-2">
    <div class="bg-white pt-4 pb-0">
      <div class="mx-auto">
      <div class="chart-title">${translationsObj["title"]}</div>
        <p class="small-text chart-description">${translationsObj["description"]}</p>
        <div class="svg-holder"></div>
        <div class="svg-holder-second"></div>
      </div>
    </div>
  </div><!--END BG lightblue-->`;
}

function drawBars$1({
  component,
  svg,
  x1,
  x2,
  y,
  yAxis,
  stackedData1,
  stackedData2,
  color1,
  color2,
  data,
  tooltip,
  legendStrings,
  legendScope = ``,
  selectedMetric,
  translationsObj,
  appliedSuppressionStatus,
  chartBreakpointValues
}) {
  svg.selectAll("g").remove();
  svg.selectAll("rect").remove();
  svg.selectAll("text").remove();

  // Blue bars rendered first, to go under hover area
  svg
    .append("g")
    .selectAll("g")
    .data(stackedData2)
    .enter()
    .append("g")
    .attr("fill", (d) => color2(d.key))
    .selectAll("rect")

    // enter a second time = loop subgroup per subgroup to add blue bars
    .data((d) => d)
    .enter()
    .append("rect")
    .attr("x", (d) => x2(d[0]))
    .attr("y", (d) => y(d.data.DEMOGRAPHIC_SET_CATEGORY) + 20)
    .attr("width", (d) => x2(d[1]) - x2(d[0]))
    .attr("height", "10px")

    .attr("tabindex", "0")
    .attr("aria-label", (d, i) => `<div class="chart-tooltip">
    <div >unused_caption1</div>`)
    ;

  // Yellow bars rendered second
  let bar = svg
    .append("g")
    .attr('class', 'svg-first-section')
    .selectAll("g")
    .data(stackedData1)
    .enter()
    .append("g")
    .attr("fill", (d) => color1(d.key))
    .selectAll("rect")

    // enter a second time = loop subgroup per subgroup to add yellow bars
    .data((d) => d)
    .enter();

  bar .append("rect")
    .attr("x", (d) => x1(d[0]))
    .attr("y", (d) => y(d.data.DEMOGRAPHIC_SET_CATEGORY))
    .attr("width", (d) => x1(d[1]) - x1(d[0]))
    .attr("height", "10px");

  // Larger Transparent hover area for tooltip
  bar.append("rect")
    .attr("x", (d) => x1(d[0]))
    .attr("y", (d) => y(d.data.DEMOGRAPHIC_SET_CATEGORY)-5)
    .attr("width", (d) => x1(d[1]) - x1(d[0]))
    .attr("height", "40px")
    .attr("fill", "transparent")  // use rgb(255,0,0,0.5) for debugging
    .attr("tabindex", "0")
    .attr("aria-label", (d, i) => {
      let caption = component.getToolTipCaption1(d, selectedMetric);
      return `<div class="chart-tooltip">
      <div>${caption}</div>
      </div>`}
    )
    .on("mouseover focus", function (event, d) {
      d3.select(this).transition();
      // Rephrase as "X people make up XX% of cases statewide and XX% of California's population"
      let caption = component.getToolTipCaption1(d, selectedMetric);
      tooltip.html(`<div class="chart-tooltip"><div>${caption}</div></div>`);
      tooltip.style("visibility", "visible");
      tooltip.style("left", "90px");
      tooltip.style("top", `${event.offsetY+230}px`);
    })
    .on("mouseout", function (d) {
      d3.select(this).transition();
      //.attr("fill", d => color(d.key));
      //.style("fill", "skyblue");
      
      // @TODO Hover off is too quick 
      tooltip.style("visibility", "hidden");
    });


  svg.append("g").call(yAxis);

  // End of bar labels, POPULATION_PERCENTAGE (blue)
  let barGap = component.dimensions.is_single_col? 25 : 5;
  svg
    .append("g")
    .attr("class", "bars")
    .selectAll(".bars")
    .data(data)
    .join((enter) => {
      enter
        .append("text")
        .attr("class", "bars")
        .attr("y", (d) => y(d.DEMOGRAPHIC_SET_CATEGORY) + 8)
        .attr("x", (d) => x2(100) + barGap)
        .attr("height", y.bandwidth())
        .text((d) =>
          d.POPULATION_PERCENTAGE
            ? parseFloat(d.POPULATION_PERCENTAGE).toFixed(1) + "%"
            : 0 + "%"
        )
        .attr("text-anchor", "end");
    });

  // End of bar labels, METRIC total (yellow)
  svg
    .append("g")
    .attr("class", "bars")
    .selectAll(".bars")
    .data(data)
    .join((enter) => {
      enter
        .append("text")
        .attr("class", (d) => "bars" + ((d.METRIC_TOTAL_PERCENTAGE === null) ? " bars-unknown" : ""))
        .attr("y", (d) => y(d.DEMOGRAPHIC_SET_CATEGORY) + 28)
        .attr("x", (d) => x1(100) + barGap)
        .attr("height", y.bandwidth())
        .text((d) => {
          if (d.METRIC_TOTAL_PERCENTAGE !== null) {
          return d.METRIC_TOTAL_PERCENTAGE
            ? parseFloat(d.METRIC_TOTAL_PERCENTAGE).toFixed(1) + "%"
            : 0 + "%"
          } else {
            return ``;
            // return d.APPLIED_SUPPRESSION;
          }
          }
        )
        .attr("text-anchor", "end");
    });

  // % Change since previous month labels
  svg
    .append("g")
    .attr("class", "change-from-month-labels")
    .selectAll(".change-from-month-labels")
    .data(data)
    .join((enter) => {
      enter
        .append("text")
        .attr("class", "change-from-month-labels")
        .attr("y", (d) => y(d.DEMOGRAPHIC_SET_CATEGORY) + 47)
        .attr("x", (d) => {
          if (d.APPLIED_SUPPRESSION === "Population" || d.APPLIED_SUPPRESSION === "Total")  {
            return x2(1);
          } else {
            return x2(1) + 20
          }
        })
        .attr("height", y.bandwidth())

        .html((d) => {
          if (d.APPLIED_SUPPRESSION === "Population")  {
            return `<tspan class="withheld-label">${translationsObj['data-missing-applied-suppression-population' + "--" + selectedMetric.toLowerCase()] || ''}</tspan>`;
          } else if (d.APPLIED_SUPPRESSION === "Total")  {
            return `<tspan class="withheld-label">${translationsObj['data-missing-applied-suppression-total' + "--" + selectedMetric.toLowerCase()] || ''}</tspan>`;
          }

          if (!d.METRIC_VALUE_PERCENTAGE_DELTA_FROM_30_DAYS_AGO) {
            return `<tspan class="highlight-data">0%</tspan> ${translationsObj.chartLineDiff}`;
          } else {
            return `<tspan class="highlight-data">${parseFloat(
              d.METRIC_VALUE_PERCENTAGE_DELTA_FROM_30_DAYS_AGO
            ).toFixed(1)}%</tspan> ${translationsObj.chartLineDiff}`;
          }
        })
        .attr("text-anchor", "end");
    });

  // % Change from month arrows
  svg
    .append("g")
    .attr("class", "change-from-month-labels")
    .selectAll(".change-from-month-labels")
    .data(data)
    .join((enter) => {
      enter
        .append("svg")

        .attr("y", (d) => y(d.DEMOGRAPHIC_SET_CATEGORY) + 35)
        .attr("x", (d) => x2(1))
        .html((d) => {
          if (d.APPLIED_SUPPRESSION === "Population" || d.APPLIED_SUPPRESSION === "Total")  {
            return ``;
          }

          if (
            !d.METRIC_VALUE_PERCENTAGE_DELTA_FROM_30_DAYS_AGO ||
            Math.abs(d.METRIC_VALUE_PERCENTAGE_DELTA_FROM_30_DAYS_AGO) < 0.05
          ) {
            return `<svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M16.4155 8.8403L13.0689 12.013C12.8394 12.2306 12.4721 12.2234 12.2554 11.9949C12.0388 11.7663 12.0483 11.4018 12.2807 11.1815L14.5958 8.98667L1.0023 8.9417L0.784831 8.9417C0.629791 8.93708 0.495915 8.90016 0.388909 8.7873C0.284502 8.67717 0.227827 8.53225 0.231476 8.37719C0.2349 8.22757 0.297533 8.095 0.410888 7.98753C0.563911 7.84246 0.720296 7.81444 0.823716 7.81572L1.0023 7.816L14.6338 7.79526L12.449 5.49078C12.2324 5.26226 12.2419 4.89773 12.4743 4.67745C12.7038 4.45985 13.0712 4.46706 13.2878 4.69558L16.4409 8.02148C16.6573 8.25543 16.6478 8.62 16.4155 8.8403Z" fill="#1F2574"/>
</svg>`;
          } else if (
            parseFloat(d.METRIC_VALUE_PERCENTAGE_DELTA_FROM_30_DAYS_AGO) > 0
          ) {
            return `<svg width="15" height="10" viewBox="0 0 17 10" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M17 0.581819V5.19326C17 5.50954 16.742 5.77116 16.4271 5.77116C16.1122 5.77116 15.8543 5.51344 15.8543 5.19326V2.00308L10.1901 7.93042C10.0839 8.03975 9.93972 8.09832 9.78419 8.09832C9.63244 8.09832 9.48828 8.03975 9.37826 7.93042L6.11944 4.64647L0.971201 9.8321C0.86118 9.94143 0.720802 10 0.565271 10C0.413518 10 0.26936 9.94143 0.15934 9.8321C0.0531121 9.72667 0 9.59001 0 9.43381C0 9.22295 0.0872582 9.09018 0.15934 9.01601L5.70966 3.42434C5.81968 3.315 5.96006 3.25643 6.11559 3.25643C6.26734 3.25643 6.4115 3.315 6.52152 3.42434L9.78035 6.70829L15.0158 1.1558H11.8403C11.5254 1.1558 11.2674 0.898078 11.2674 0.5779C11.2674 0.26162 11.5254 0 11.8403 0H16.4233C16.742 0.00390471 17 0.261621 17 0.581819H17Z" fill="#FF8000"/>
  </svg>`;
          } else {
            return `<svg width="15" height=10 viewBox="0 0 17 10" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M17 9.41818V4.80674C17 4.49046 16.742 4.22884 16.4271 4.22884C16.1122 4.22884 15.8543 4.48656 15.8543 4.80674V7.99692L10.1901 2.06958C10.0839 1.96025 9.93972 1.90168 9.78419 1.90168C9.63244 1.90168 9.48828 1.96025 9.37826 2.06958L6.11944 5.35353L0.971201 0.167904C0.86118 0.0585697 0.720802 0 0.565271 0C0.413518 0 0.26936 0.0585717 0.15934 0.167904C0.0531121 0.273332 0 0.409992 0 0.566192C0 0.777052 0.0872582 0.909822 0.15934 0.983993L5.70966 6.57566C5.81968 6.685 5.96006 6.74357 6.11559 6.74357C6.26734 6.74357 6.4115 6.685 6.52152 6.57566L9.78035 3.29171L15.0158 8.8442H11.8403C11.5254 8.8442 11.2674 9.10192 11.2674 9.4221C11.2674 9.73838 11.5254 10 11.8403 10H16.4233C16.742 9.9961 17 9.73838 17 9.41818H17Z" fill="#003D9D"/>
  </svg>`;
          }
        });
    });

  // stack legends if space is too tight
  const stackLegends = chartBreakpointValues.chartSectionOne.width < 400;
  const stackGapY = 24;
  // Legend
  svg
    .append("rect")
    .attr("x", 0)
    .attr("y", -20)
    .attr("width", 15)
    .attr("height", 15)
    .attr("fill", "#92C5DE");

  svg
    .append("rect")
    .attr("x", stackLegends? 0 : 190)
    .attr("y", stackLegends? stackGapY-20 : -20)
    .attr("width", 15)
    .attr("height", 15)
    .attr("fill", "#FFCF44");
    

  svg
    .append("text")
    .attr("x", 20)
    .attr("y", -12)
    .attr("class", "legend-label")
    .attr("dy", "0.35em")
    .text('% ' + legendStrings[1]);

    svg
    .append("text")
    .attr("x", stackLegends? 20 : 210)
    .attr("y", stackLegends? stackGapY-12 : -12)
    .attr("class", "legend-label")
    .attr("dy", "0.35em")
    .text('% ' + legendStrings[0]);


  let is_debugging_infobox = false;
  let boxClass = "chartOverlay-svg-first-section";

  if ( appliedSuppressionStatus !== null || is_debugging_infobox) {
    chartOverlayBox(svg,                      
                    "cagov-chart-re-pop",       // class of chart
                    boxClass,                   // class of box
                    chartBreakpointValues,      // dimensions dict (contains width,height)
                    translationsObj[appliedSuppressionStatus] ? translationsObj[appliedSuppressionStatus] : ''
                    );
    } else {
      chartOverlayBoxClear(svg, boxClass);
    }  

}

function drawSecondBars({
  component,
  svg,
  x1,
  x2,
  y,
  yAxis,
  stackedData1,
  stackedData2,
  color1,
  color2,
  data,
  tooltip,
  selectedMetric,
  translationsObj,
  legendScope = ``,
  legendScopeStatewide = ``,
  appliedSuppressionStatus,
  chartBreakpointValues
}) {
  
  svg.selectAll("g").remove();
  svg.selectAll("rect").remove();
  svg.selectAll("text").remove();

  let is_debugging_infobox = false;
  let boxClass = "chartOverlay-svg-holder-second";

  if ( appliedSuppressionStatus !== null || is_debugging_infobox) {
    chartOverlayFade(svg,                      
                    "cagov-chart-re-pop",       // class of chart
                    boxClass);
    } else {
      chartOverlayBoxClear(svg, boxClass);
    }  

  // End of bar labels, METRIC total (yellow)
  svg
    .append("g")
    .selectAll("g")
    .data(stackedData1)
    .enter()
    .append("g")
    .attr("fill", (d) => color2(d.key))
    .selectAll("rect")

    // enter a second time = loop subgroup per subgroup to add yellow bars
    .data((d) => d)
    .enter()

    .append("rect")
    .attr("x", (d) => x1(d[0]))
    .attr("y", (d) => y(d.data.DEMOGRAPHIC_SET_CATEGORY))
    .attr("width", (d) => x1(d[1]) - x1(d[0]))
    .attr("height", "10px")

    .attr("tabindex", "0")
    // .attr("aria-label", (d, i) => `<div class="chart-tooltip">
    // <div>unused_caption2</div>`)

     // jbum: event handlers appear to be unused
    .on("mouseover focus", function (event, d) {
      d3.select(this).transition();

      // Rephrase as "X people make up XX% of cases statewide and XX% of California's population"
      // @TODO Commented out so that we do not launch with incomplete code.
      // tooltip.html(`<div class="chart-tooltip">
      //     <div>unused_caption1 </div>`);
      // tooltip.style("visibility", "visible");
      // tooltip.style("left", "90px");
      // tooltip.style("top", `${event.layerY}px`);
    })
    .on("mouseout", function (d) {
      d3.select(this).transition();
      //.attr("fill", d => color(d.key));
      //.style("fill", "skyblue");
      tooltip.style("visibility", "hidden");
    });
  // bars.append("rect")
  //   .attr("x", (d) => x1(d[0]))
  //   .attr("y", (d) => y(d.data.DEMOGRAPHIC_SET_CATEGORY)-5)
  //   .attr("width", (d) => (x1(d[1]) - x1(d[0])/2))
  //   .attr("height", "20px")
  //   .attr("fill", "rgb(255,0,0,0.5)")
  //   ;

  // svg.append("g").call(xAxis);

  svg.append("g").call(yAxis);

  // End of bar labels, METRIC total (yellow)
  let barGap = component.dimensions.is_single_col? 25 : 5;
  svg
    .append("g")
    .attr("class", "bars")
    .selectAll(".bars")
    .data(data)
    .join((enter) => {
      enter
        .append("text")
        .attr("class", "bars")
        .attr("y", (d) => y(d.DEMOGRAPHIC_SET_CATEGORY) + 8)
        .attr("x", (d) => x1(100) + barGap)
        .attr("height", y.bandwidth())
        .text((d) =>
          d.METRIC_TOTAL_PERCENTAGE
            ? parseFloat(d.METRIC_TOTAL_PERCENTAGE).toFixed(1) + "%"
            : 0 + "%"
        )
        .attr("text-anchor", "end");
    });

  // % Change since previous month labels
  svg
    .append("g")
    .attr("class", "change-from-month-labels")
    .selectAll(".change-from-month-labels")
    .data(data)
    .join((enter) => {
      enter
        .append("text")
        .attr("class", "change-from-month-labels")
        .attr("y", (d) => y(d.DEMOGRAPHIC_SET_CATEGORY) + 27)
        .attr("x", (d) => {
          if (d.APPLIED_SUPPRESSION === "Population" || d.APPLIED_SUPPRESSION === "Total")  {
            return x2(1);
          } else {
            return x2(1) + 20
          }
        })
        .attr("height", y.bandwidth())

        .html((d) => {
          if (d.APPLIED_SUPPRESSION === "Population")  {
            return `${translationsObj['data-missing-applied-suppression-population' + "--" + selectedMetric.toLowerCase()] || ''}`;
          } else if (d.APPLIED_SUPPRESSION === "Total")  {
            return `${translationsObj['data-missing-applied-suppression-total' + "--" + selectedMetric.toLowerCase()] || ''}`;
          }

          if (!d.METRIC_VALUE_PERCENTAGE_DELTA_FROM_30_DAYS_AGO) {
            return `<tspan class="highlight-data">0%</tspan> ${translationsObj.chartLineDiff}`;
          } else {
            return `<tspan class="highlight-data">${parseFloat(
              d.METRIC_VALUE_PERCENTAGE_DELTA_FROM_30_DAYS_AGO
            ).toFixed(1)}%</tspan> ${translationsObj.chartLineDiff}`;
          }
        })
        .attr("text-anchor", "end");
    });

  // % Change from month arrows
  svg
    .append("g")
    .attr("class", "change-from-month-labels")
    .selectAll(".change-from-month-labels")
    .data(data)
    .join((enter) => {
      enter
        .append("svg")

        .attr("y", (d) => y(d.DEMOGRAPHIC_SET_CATEGORY) + 15)
        .attr("x", (d) => x2(1))
        .html((d) => {
          if (d.APPLIED_SUPPRESSION === "Population" || d.APPLIED_SUPPRESSION === "Total")  {
            return ``;
          }
          
          if (
            !d.METRIC_VALUE_PERCENTAGE_DELTA_FROM_30_DAYS_AGO ||
            Math.abs(d.METRIC_VALUE_PERCENTAGE_DELTA_FROM_30_DAYS_AGO) < 0.05
          ) {
            return `<svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M16.4155 8.8403L13.0689 12.013C12.8394 12.2306 12.4721 12.2234 12.2554 11.9949C12.0388 11.7663 12.0483 11.4018 12.2807 11.1815L14.5958 8.98667L1.0023 8.9417L0.784831 8.9417C0.629791 8.93708 0.495915 8.90016 0.388909 8.7873C0.284502 8.67717 0.227827 8.53225 0.231476 8.37719C0.2349 8.22757 0.297533 8.095 0.410888 7.98753C0.563911 7.84246 0.720296 7.81444 0.823716 7.81572L1.0023 7.816L14.6338 7.79526L12.449 5.49078C12.2324 5.26226 12.2419 4.89773 12.4743 4.67745C12.7038 4.45985 13.0712 4.46706 13.2878 4.69558L16.4409 8.02148C16.6573 8.25543 16.6478 8.62 16.4155 8.8403Z" fill="#1F2574"/>
  </svg>`;
          } else if (
            parseFloat(d.METRIC_VALUE_PERCENTAGE_DELTA_FROM_30_DAYS_AGO) > 0
          ) {
            return `<svg width="15" height="10" viewBox="0 0 17 10" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M17 0.581819V5.19326C17 5.50954 16.742 5.77116 16.4271 5.77116C16.1122 5.77116 15.8543 5.51344 15.8543 5.19326V2.00308L10.1901 7.93042C10.0839 8.03975 9.93972 8.09832 9.78419 8.09832C9.63244 8.09832 9.48828 8.03975 9.37826 7.93042L6.11944 4.64647L0.971201 9.8321C0.86118 9.94143 0.720802 10 0.565271 10C0.413518 10 0.26936 9.94143 0.15934 9.8321C0.0531121 9.72667 0 9.59001 0 9.43381C0 9.22295 0.0872582 9.09018 0.15934 9.01601L5.70966 3.42434C5.81968 3.315 5.96006 3.25643 6.11559 3.25643C6.26734 3.25643 6.4115 3.315 6.52152 3.42434L9.78035 6.70829L15.0158 1.1558H11.8403C11.5254 1.1558 11.2674 0.898078 11.2674 0.5779C11.2674 0.26162 11.5254 0 11.8403 0H16.4233C16.742 0.00390471 17 0.261621 17 0.581819H17Z" fill="#FF8000"/>
    </svg>`;
          } else {
            return `<svg width="15" height=10 viewBox="0 0 17 10" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M17 9.41818V4.80674C17 4.49046 16.742 4.22884 16.4271 4.22884C16.1122 4.22884 15.8543 4.48656 15.8543 4.80674V7.99692L10.1901 2.06958C10.0839 1.96025 9.93972 1.90168 9.78419 1.90168C9.63244 1.90168 9.48828 1.96025 9.37826 2.06958L6.11944 5.35353L0.971201 0.167904C0.86118 0.0585697 0.720802 0 0.565271 0C0.413518 0 0.26936 0.0585717 0.15934 0.167904C0.0531121 0.273332 0 0.409992 0 0.566192C0 0.777052 0.0872582 0.909822 0.15934 0.983993L5.70966 6.57566C5.81968 6.685 5.96006 6.74357 6.11559 6.74357C6.26734 6.74357 6.4115 6.685 6.52152 6.57566L9.78035 3.29171L15.0158 8.8442H11.8403C11.5254 8.8442 11.2674 9.10192 11.2674 9.4221C11.2674 9.73838 11.5254 10 11.8403 10H16.4233C16.742 9.9961 17 9.73838 17 9.41818H17Z" fill="#003D9D"/>
    </svg>`;
          }
        });
    });
}

/* 
  Calculate disproportionality sort value.
  For notes on the sorting function, please refer to the README.md.
*/
function getDisproportionateRatioSortValue(d, data, self) {
  d.METRIC;

  let ratio = null;
  // console.log(d);
  
  if (d.POPULATION_PERCENTAGE !== null && d.METRIC_TOTAL_PERCENTAGE !== null) {
    ratio = d.METRIC_TOTAL_PERCENTAGE / d.POPULATION_PERCENTAGE;

    // @TODO Check isNan or Infinity.
    // @TODO And Math.round or decimal point fixing for display.
    // console.log("DISPROPORTIONALITY_RATIO:", ratio, d.DEMOGRAPHIC_SET_CATEGORY);
  }
  return ratio;
}

class CAGOVEquityREPop extends window.HTMLElement {
  connectedCallback() {
    // Settings and initial values
    this.chartOptions = {
      // Data
      subgroups1: ["POPULATION_PERCENTAGE", "POPULATION_PERCENTAGE_DELTA"],
      subgroups2: ["METRIC_TOTAL_PERCENTAGE", "METRIC_TOTAL_DELTA"],
      dataUrl:
        config.equityChartsDataLoc + "/equitydash/cumulative-california.json", // Overwritten by county.
      state: "California",
      county: "California",
      // Style
      chartColors: ["#92C5DE", "#FFCF44", "#F2F5FC"], // blue yellow gray
      selectedMetric: "cases",
      selectedMetricDescription: "Cases",
      // Breakpoints
      desktop: {
        chartSectionOne: {
          is_single_col: false,
          height: 700,
          width: 450,
          margin: {
            top: 20,
            right: 30,
            bottom: 1,
            left: 10,
          },
        },
        chartSectionTwo: {
          is_single_col: false,
          height: 180,
          width: 450,
          margin: {
            top: 4,
            right: 30,
            bottom: 0,
            left: 10,
          },
        },
      },
      tablet: {
        chartSectionOne: {
          is_single_col: true,
          height: 700,
          width: 450,
          margin: {
            top: 20,
            right: 30,
            bottom: 1,
            left: 10,
          },
        },
        chartSectionTwo: {
          is_single_col: true,
          height: 180,
          width: 450,
          margin: {
            top: 4,
            right: 30,
            bottom: 0,
            left: 10,
          },
        },
      },
      mobile: {
        chartSectionOne: {
          is_single_col: true,
          height: 700,
          width: 440,
          margin: {
            top: 20,
            right: 30,
            bottom: 1,
            left: 10,
          },
        },
        chartSectionTwo: {
          is_single_col: true,
          height: 180,
          width: 440,
          margin: {
            top: 4,
            right: 30,
            bottom: 0,
            left: 10,
          },
        },
      },
      retina: {
        chartSectionOne: {
          is_single_col: true,
          height: 700,
          width: 440,
          margin: {
            top: 20,
            right: 30,
            bottom: 1,
            left: 10,
          },
        },
        chartSectionTwo: {
          is_single_col: true,
          height: 180,
          width: 440,
          margin: {
            top: 4,
            right: 30,
            bottom: 0,
            left: 10,
          },
        },
      },
    };

    // Resizing
    getScreenResizeCharts();
    this.screenDisplayType = window.charts
      ? window.charts.displayType
      : "desktop";
    this.chartBreakpointValues = this.chartOptions[
      this.screenDisplayType ? this.screenDisplayType : "desktop"
    ];

    // Choose settings for current screen display.
    // Display content & layout dimensions
    const handleChartResize = () => {
      getScreenResizeCharts();
      this.screenDisplayType = window.charts
        ? window.charts.displayType
        : "desktop";
      this.chartBreakpointValues = this.chartOptions[
        this.screenDisplayType ? this.screenDisplayType : "desktop"
      ];
    };

    // @TODO connect a debouncer
    window.addEventListener("resize", handleChartResize);

    // Get data
    this.retrieveData(this.chartOptions.dataUrl);

    // Text strings
    this.translationsObj = getTranslations(this);
    this.county = this.chartOptions.state; // Initial default county
    this.state = this.chartOptions.state;
    this.selectedMetric = this.chartOptions.selectedMetric;
    this.selectedMetricDescription = this.chartOptions.selectedMetricDescription;
    this.innerHTML = template$4(this.translationsObj);
    this.updateTranslatedTextStrings();

    // Layout
    // Remap prior variables to translated variable, can remove if connect prior variables directly to these ones.
    this.dimensions = this.chartBreakpointValues.chartSectionOne;
    this.dimensionsSecond = this.chartBreakpointValues.chartSectionTwo;

    // SVG
    this.svg = d3
      .select(this.querySelector(".svg-holder"))
      .append("svg")
      .attr("viewBox", [0, 0, this.dimensions.width, this.dimensions.height])
      .append("g")
      .attr(
        "transform",
        "translate(" +
          this.dimensions.margin.left +
          "," +
          this.dimensions.margin.top +
          ")"
      );

    this.svgSecond = d3
      .select(this.querySelector(".svg-holder-second"))
      .append("svg")
      .attr("viewBox", [
        0,
        0,
        this.dimensionsSecond.width,
        this.dimensionsSecond.height,
      ])
      .append("g")
      .attr(
        "transform",
        "translate(" +
          this.dimensionsSecond.margin.left +
          "," +
          this.dimensionsSecond.margin.top +
          ")"
      );

    this.color1 = d3
      .scaleOrdinal()
      .domain(this.chartOptions.subgroups1)
      .range([
        this.chartOptions.chartColors[0],
        this.chartOptions.chartColors[2],
      ]);

    this.color2 = d3
      .scaleOrdinal()
      .domain(this.chartOptions.subgroups2)
      .range([
        this.chartOptions.chartColors[1],
        this.chartOptions.chartColors[2],
      ]);
    // .range(this.chartOptions.chartColors);

    this.listenForLocations();

    this.classList.remove("d-none");
    
    rtlOverride(this);

  }

  updateTranslatedTextStrings() {
    this.resetTitle();
    this.resetDescription();
    this.resetTooltip();
    this.resetLegend();
  }

  getLocation() {
    if (this.county === "California") {
      return this.state;
    } else {
      let countyLabel = this.translationsObj["county-label"];
      return this.county + " " + countyLabel; // @TODO this pattern probably won't translate well
    }
  }

  getTitle() {
    let title = this.translationsObj[
      "chartTitle--" + this.selectedMetric.toLowerCase()
    ];
    if (title !== undefined) {
      title = title.replace(
        "placeholderForDynamicLocation",
        this.getLocation()
      );
    }
    return title;
  }

  getDescription() {
    let description = this.translationsObj[
      "chartDescription--" + this.selectedMetric.toLowerCase()
    ];
    description = description.replace(
      "placeholderForDynamicLocation",
      this.getLocation()
    );
    // do it twice
    description = description.replace(
      "placeholderForDynamicLocation",
      this.getLocation()
    );
    return description;
  }

  legendStrings() {
    let isStatewide = this.county === 'California';
    let key1 = 'chartLegend1' + (isStatewide? 'State' : "County") + '--'+this.selectedMetric;
    let key2 = 'chartLegend2' + (isStatewide? 'State' : "County");
    return [this.translationsObj[key1], this.translationsObj[key2]];
  }

  getToolTipCaption1(d, selectedMetric) {
    if (d.data.APPLIED_SUPPRESSION === "Total") {
      return this.translationsObj['data-missing-applied-suppression-total' + "--" + this.selectedMetric.toLowerCase()] || '';
    } else if (d.data.APPLIED_SUPPRESSION === "Population") {
      return this.translationsObj['data-missing-applied-suppression-population'+ "--" + this.selectedMetric.toLowerCase()] || '';
    }

    let templateStr = this.translationsObj['chartToolTip1-caption'];
    const nomKey = 'chartMetricName--'+selectedMetric;
    let metricNom = selectedMetric;
    if (nomKey in this.translationsObj) {
        metricNom = this.translationsObj[nomKey];
    }
    let caption = templateStr
                    .replace('placeholderForDynamicLocation',this.getLocation())
                    .replace('placeholderForDynamicLocation',this.getLocation()) // needs a second one
                    .replace('placeholder_DEMOGRAPHIC_SET_CATEGORY',d.data.DEMOGRAPHIC_SET_CATEGORY)
                    .replace('placeholder_METRIC_TOTAL_PERCENTAGE',d.data.METRIC_TOTAL_PERCENTAGE? parseFloat(d.data.METRIC_TOTAL_PERCENTAGE).toFixed(1) + "%" : 0)
                    .replace('placeholder_SelectedMetric',metricNom)
                    .replace('placeholder_LegendString',metricNom) // backward compat
                    .replace('placeholder_POPULATION_PERCENTAGE',d.data.POPULATION_PERCENTAGE ? parseFloat(d.data.POPULATION_PERCENTAGE).toFixed(1) + "%" : 0);
    return caption;
  }

  // @TODO Is this used? Looks like it's not.
  getToolTipCaption2(d, selectedMetric) {
    if (d.APPLIED_SUPPRESSION === "Total") {
      return translationsObj['data-missing-applied-suppression-total'] || '';
    } else if (d.APPLIED_SUPPRESSION === "Population") {
      return translationsObj['data-missing-applied-suppression-population'] || '';
    }

    let templateStr = this.translationsObj['chartToolTip2-caption'];
    let caption = templateStr
                    .replace('placeholderForDynamicLocation',this.getLocation())
                    .replace('placeholderForDynamicLocation',this.getLocation()) // needs a second one
                    .replace('placeholder_DEMOGRAPHIC_SET_CATEGORY',d.data.DEMOGRAPHIC_SET_CATEGORY)
                    .replace('placeholder_METRIC_TOTAL_PERCENTAGE',d.data.METRIC_TOTAL_PERCENTAGE? parseFloat(d.data.METRIC_TOTAL_PERCENTAGE).toFixed(1) + "%" : 0)
                    .replace('placeholder_SelectedMetric',selectedMetric)
                    .replace('placeholder_POPULATION_PERCENTAGE',d.data.POPULATION_PERCENTAGE ? parseFloat(d.data.POPULATION_PERCENTAGE).toFixed(1) + "%" : 0);
    return caption;
  }
// placeholderDEMOGRAPHIC_SET_CATEGORY people make up<span class="highlight-data"> placeholder_POPULATION_PERCENTAGE</span> of California's population and <span class="highlight-data"> placeholderMETRIC_TOTAL_PERCENTAGE</span> of placeholder_selectedMetric statewide
// d.data.DEMOGRAPHIC_SET_CATEGORY + " people make up"
//        }<span class="highlight-data"> ${d.data.POPULATION_PERCENTAGE ? parseFloat(d.data.POPULATION_PERCENTAGE).toFixed(1) + "%" : 0}</span> of California's population and 
//<span class="highlight-data"> ${
//        d.data.METRIC_TOTAL_PERCENTAGE
//          ? parseFloat(d.data.METRIC_TOTAL_PERCENTAGE).toFixed(1) + "%"
//          : 0
//      }</span> of ${selectedMetric} statewide

  setupTooltip() {
    return d3
      .select("cagov-chart-re-pop")
      .append("div")
      .attr("class", "tooltip-container tooltip-container--re100k")
      .text("an empty tooltip");
  }

  getFilterText() {
    return document
      .querySelector("cagov-chart-filter-buttons.js-re-smalls")
      .querySelector(".active").textContent;
  }

  resetTitle() {
    this.querySelector(".chart-title").innerHTML = this.getTitle();
  }

  resetDescription() {
    this.querySelector(".chart-description").innerHTML = this.getDescription();
  }

  resetTooltip() {
    // console.log("reset tooltip");
    // this.querySelector(".tooltip-***").innerHTML = this.getDescription();
  }

  resetLegend() {
    // Where does this go?
  }

  // Tab events for county or state.
  listenForLocations() {
    let searchElement = document.querySelector("cagov-county-search");
    searchElement.addEventListener(
      "county-selected",
      function (e) {
        this.county = e.detail.county;
        if (this.selectedMetric === "deaths") {
          this.selectedMetric = "cases";
        }
        this.retrieveData(
          config.equityChartsDataLoc +
            "/equitydash/cumulative-" +
            this.county.toLowerCase().replace(/ /g, "") +
            ".json"
        );
        this.resetTitle();
        this.resetDescription();
      }.bind(this),
      false
    );

    let metricFilter = document.querySelector(
      "cagov-chart-filter-buttons.js-re-smalls"
    );
    metricFilter.addEventListener(
      "filter-selected",
      function (e) {
        if (e.detail.filterKey != undefined) {
          this.selectedMetricDescription = e.detail.clickedFilterText;
          this.selectedMetric = e.detail.filterKey;
          if (this.alldata) {
            this.render();
            this.resetDescription();
            this.resetTitle();
          }
        }
      }.bind(this),
      false
    );
  }

  retrieveData(url) {
    window
      .fetch(url)
      .then((response) => response.json())
      .then(
        function (alldata) {
          this.alldata = alldata;
          this.render();
        }.bind(this)
      );
  }

  checkAppliedDataSuppression(data) {
    let appliedSuppressionStatus = null;
    let groups = data.map((item) => item.DEMOGRAPHIC_SET_CATEGORY);

    let suppressionAllocations = {
      None: 0,
      Total: 0,
      Population: 0,
      CountySuppressed: false,
      TotalSuppression: 0,
    };

    data.map((item) => {
      suppressionAllocations[item.APPLIED_SUPPRESSION] = suppressionAllocations[item.APPLIED_SUPPRESSION] + 1;
      if (item.APPLIED_SUPPRESSION !== "None") {      
        suppressionAllocations['TotalSuppression'] = suppressionAllocations['TotalSuppression'] + 1;
      }
    });

    if (groups.length === suppressionAllocations.TotalSuppression) {
      suppressionAllocations.CountySuppressed = true;
      appliedSuppressionStatus = 'applied-suppression-total';
    }
    // console.log(suppressionAllocations);
    return appliedSuppressionStatus;
  }

  render() {
    let data = this.alldata.filter(
      (item) =>
        item.METRIC === this.selectedMetric &&
        item.DEMOGRAPHIC_SET_CATEGORY !== "Other" &&
        item.DEMOGRAPHIC_SET_CATEGORY !== "Unknown"
    );
    let secondData = this.alldata.filter(
      (item) =>
        item.METRIC === this.selectedMetric &&
        (item.DEMOGRAPHIC_SET_CATEGORY === "Other" ||
          item.DEMOGRAPHIC_SET_CATEGORY === "Unknown")
    );

    // we map the race/ethnicities in the db to the desired display values here
    let displayDemoMap = termCheck();
    data.forEach((d) => {
      if (displayDemoMap.get(d.DEMOGRAPHIC_SET_CATEGORY)) {
        d.DEMOGRAPHIC_SET_CATEGORY = displayDemoMap.get(
          d.DEMOGRAPHIC_SET_CATEGORY
        );
      }
      // Run the sort ratio calculating logic. 
      // If not valid, will return null.
      d.DISPROPORTIONALITY_RATIO = getDisproportionateRatioSortValue(d);
    });

    secondData.forEach((d) => {
      if (displayDemoMap.get(d.DEMOGRAPHIC_SET_CATEGORY)) {
        d.DEMOGRAPHIC_SET_CATEGORY = displayDemoMap.get(
          d.DEMOGRAPHIC_SET_CATEGORY
        );
      }
      // Run the sort ratio calculating logic. 
      // If not valid, will return null.
      d.DISPROPORTIONALITY_RATIO = getDisproportionateRatioSortValue(d);
    });

    let sortableData = data.filter((d) => d.DISPROPORTIONALITY_RATIO !== null);
    let nullSortData = data.filter((d) => d.DISPROPORTIONALITY_RATIO === null);

    // Sort data with non-null 'disproportionality ratio' 
    sortableData.sort(function (a, b) {
      return d3.descending(a.DISPROPORTIONALITY_RATIO, b.DISPROPORTIONALITY_RATIO);
    });

    // Push null data values to the end or the sorted array (@TODO double check order)
    // Remap data object
    data = sortableData.concat(nullSortData); 
    
    // data.sort(function (a, b) {
    //   return d3.descending(
    //     a.METRIC_TOTAL_PERCENTAGE, // @TODO can abstract
    //     b.METRIC_TOTAL_PERCENTAGE // @TODO can abstract
    //   );
    // });
    let sortableSecondData = secondData.filter((d) => d.DISPROPORTIONALITY_RATIO !== null);
    let nullSortSecondData = secondData.filter((d) => d.DISPROPORTIONALITY_RATIO === null);

    // Sort data with non-null 'disproportionality ratio' 
    sortableSecondData.sort(function (a, b) {
      return d3.ascending(a.DISPROPORTIONALITY_RATIO, b.DISPROPORTIONALITY_RATIO);
    });

    // Push null data values to the end or the sorted array (@TODO double check order)
    // Remap data object
    secondData = sortableSecondData.concat(nullSortSecondData); 

    // secondData.sort(function (a, b) {
    //   return d3.descending(
    //     a.METRIC_TOTAL_PERCENTAGE, // @TODO can abstract
    //     b.METRIC_TOTAL_PERCENTAGE // @TODO can abstract
    //   );
    // });

    this.appliedSuppressionStatus = this.checkAppliedDataSuppression(data);

    // @TODO Pull into a data formatting method
    // need to inherit this as a mapping of all possible values to desired display values becuase these differ in some tables
    // let groups = ["Latino", "Native Hawaiian and other Pacific Islander", "American Indian", "African American", "Multi-Race", "White", "Asian American"]
    let groups = data.map((item) => item.DEMOGRAPHIC_SET_CATEGORY); // ["Native Hawaiian and other Pacific Islander", "Latino", "American Indian", "African American", "Multi-Race", "White", "Asian American"]
    // Push second section data to end of data array.
    let groupsSecond = secondData.map((item) => item.DEMOGRAPHIC_SET_CATEGORY); // ["Other", "Unknown"]


    let stackedData1 = d3.stack().keys(this.chartOptions.subgroups1)(data);
    let stackedData2 = d3.stack().keys(this.chartOptions.subgroups2)(data);
    let stackedData1Second = d3.stack().keys(this.chartOptions.subgroups2)(
      secondData
    );

    this.y = d3
      .scaleBand()
      .domain(groups)
      .range([
        this.dimensions.margin.top,
        this.dimensions.height - this.dimensions.margin.bottom,
      ])
      .padding([0.6]);

    this.ySecond = d3
      .scaleBand()
      .domain(groupsSecond)
      .range([
        this.dimensionsSecond.margin.top,
        this.dimensionsSecond.height - this.dimensionsSecond.margin.bottom,
      ])
      .padding([0.2]);

    let yAxis = (g) =>
      g
        .attr("class", "bar-label")
        .attr("transform", "translate(4," + -32 + ")")
        .call(d3.axisLeft(this.y).tickSize(0))
        .call((g) => g.selectAll(".domain").remove());

    let yAxisSecond = (g) =>
      g
        .attr("class", "bar-label")
        .attr("transform", "translate(4," + -44 + ")")
        .call(d3.axisLeft(this.ySecond).tickSize(0))
        .call((g) => g.selectAll(".domain").remove());

    let barGap = this.dimensions.is_single_col? 60 : 40;

    let x1 = d3
      .scaleLinear()
      .domain([0, d3.max(stackedData1, (d) => d3.max(d, (d) => d[1]))])
      .range([0, this.dimensions.width - this.dimensions.margin.right - barGap]);

    let x2 = d3
      .scaleLinear()
      .domain([0, d3.max(stackedData2, (d) => d3.max(d, (d) => d[1]))])
      .range([0, this.dimensions.width - this.dimensions.margin.right - barGap]);
    let legendStrings = this.legendStrings();

    // drawBars({this.svg, x1, x2, this.y, yAxis, stackedData1, stackedData2, this.color1, this.color2, data, this.tooltip, legendStrings, this.selectedMetric, this.translationsObj)
    // drawSecondBars(this.svgSecond, x1, x2, this.ySecond, yAxisSecond, stackedData1Second, this.color1, secondData, this.tooltip, legendStrings[0], this.selectedMetric, this.translationsObj)


    // placeholderDEMO_CAT people make up <span class="highlight-data"> placeholderMETRIC_Percentage</span> placeholder_Legend0 and <span class="highlight-data"> placeholder_PopPct </span> of California's population

    // ${d.data.DEMOGRAPHIC_SET_CATEGORY} people make up <span class="highlight-data"> ${
    //      d.data.METRIC_TOTAL_PERCENTAGE
    //        ? parseFloat(d.data.METRIC_TOTAL_PERCENTAGE).toFixed(1) + "%"
    //        : 0
    //      }</span> ${legendStrings[0]} and <span class="highlight-data"> ${d.data.POPULATION_PERCENTAGE ? parseFloat(d.data.POPULATION_PERCENTAGE).toFixed(1) + "%" : 0}</span> of California's population

    // console.log( 'appliedSuppressionStatus',   this.appliedSuppressionStatus)
    
    drawBars$1({
      component: this,
      svg: this.svg,
      x1,
      x2,
      y: this.y,
      yAxis,
      stackedData1,
      stackedData2,
      color1: this.color1,
      color2: this.color2,
      data,
      tooltip: this.setupTooltip(),
      selectedMetric: this.selectedMetric,
      translationsObj: this.translationsObj,
      legendStrings: legendStrings,
      appliedSuppressionStatus: this.appliedSuppressionStatus,
      chartBreakpointValues: this.chartBreakpointValues,
    });
    drawSecondBars({
      component: this,
      svg: this.svgSecond,
      x1,
      x2,
      y: this.ySecond,
      yAxis: yAxisSecond,
      stackedData1: stackedData1Second,
      stackedData2: null,
      color1: this.color1,
      color2: this.color2,
      data: secondData,
      tooltip: this.setupTooltip(),
      selectedMetric: this.selectedMetric,
      translationsObj: this.translationsObj,
      legendStrings: legendStrings,
      appliedSuppressionStatus: this.appliedSuppressionStatus,
      chartBreakpointValues: this.chartBreakpointValues,
    });
  }

  retrieveData(url) {
    window
      .fetch(url)
      .then((response) => response.json())
      .then(
        function (alldata) {
          this.alldata = alldata;
          this.render();
        }.bind(this)
      );
  }
}
window.customElements.define("cagov-chart-re-pop", CAGOVEquityREPop);

// DATE UTILITIES for charts
//
// Use parseSnowflakeDate('YYYY-MM-DD') instead of new Date('YYYY-MM-DD') 
// as the latter assumes GMT, which you probably don't want.
// This function produces a local (Pacific) date.
//
function parseSnowflakeDate(dateStr) {
    const tokens = dateStr.split('-');
    const yyyy = +tokens[0];
    const mm = +tokens[1];
    const dd = +tokens[2];
    return new Date(yyyy,mm-1,dd);
}

function reformatJSDate(theDate, // expects javascript date
    fmt={ month: "long", day: 'numeric', year:'numeric' }) 
{
    const readableDate = 
    theDate.toLocaleString( document.documentElement.lang, fmt);
    // console.log(dateStr + " --> " + readableDate);
    return readableDate;
}


// Date converter for use on chart footnotes.
// Converts a string (typically from Snowflake) 
// in the form YYYY-MM-DD
//
// into a readable localized date, such as 
//    December 12, 2020
// or 
//    12 de diciembre de 2020
function reformatReadableDate(dateStr, // expects YYYY-MM-DD
                              fmt={ month: "long", day: 'numeric', year:'numeric' }, dayDelta=0) {

    const theDate = parseSnowflakeDate(dateStr);
    if (dayDelta != 0) {
        theDate.setDate(theDate.getDate() + dayDelta);
    }
    return reformatJSDate(theDate, fmt);
}

class Tooltip {
  constructor(needs_anno, yScale) {
    let yRange = yScale.range();
    console.log("Range",yRange);
    this.needs_anno = needs_anno;
    // this.legend = legend; // no longer using this param
    this.node = document.createElementNS("http://www.w3.org/2000/svg","g");
    this.node.setAttribute("pointer-events","none");
    this.node.setAttribute("text-anchor","left");
    this.node.setAttribute("display", "none");
    this.node.innerHTML = 
    (needs_anno? 
       `<rect x="0" width=0.25 y=${yRange[1]} height=${(yRange[0] - yRange[1])} fill="#003D9D" stroke=none opacity=0.5></rect>
        <rect x="-5.5" width="10" y="89.5" height="3.5" fill="white" opacity=0.5></rect>
        <text class="date" y="62", x="0"></text>`
      : '') + 
    `<g class="lineanno">
       <!-- <rect x="2" width="28" y="-5.5" height="3.5" fill="white" opacity=0.5></rect> -->
       <text class="label1" y="-1", x="2"></text>
       <circle r="3" dx="3" fill="#0F368E"></circle>
     </g>`;
  } // <!-- <text class="label2" y="3", x="2"></text> -->
  show(d,x,y) {
    let yVal = d.METRIC_VALUE;
    // console.log("Showing: ",d);
    this.node.removeAttribute("display");
    let tranX = x(parseSnowflakeDate(d.DATE));
    let tranY = y(yVal) + 4;
    let xRange = x.range();
    let midPoint = (xRange[0]+xRange[1])/2;
    // console.log("Tran X: ",tranX);
    // 70 is halfway point of svg...
    if (tranX > midPoint) {
      this.node.querySelector('text.label1').setAttribute('text-anchor','end');
      // this.node.querySelector('text.label2').setAttribute('text-anchor','end')
      this.node.querySelector('text.label1').setAttribute('x','-4');
      // this.node.querySelector('text.label2').setAttribute('x','-2')
    } else {
      this.node.querySelector('text.label1').setAttribute('text-anchor','start');
      // this.node.querySelector('text.label2').setAttribute('text-anchor','start')
      this.node.querySelector('text.label1').setAttribute('x','4');
      // this.node.querySelector('text.label2').setAttribute('x','2')
    }
    let tipLabel = (yVal * 100).toFixed(1);
    this.node.setAttribute("transform", `translate(${tranX},0)`);
    this.node.setAttribute("aria-label", tipLabel);
    this.node.querySelector(".lineanno").setAttribute("transform", `translate(0,${tranY - 4 })`);
    this.node.querySelector('text.label1').innerHTML = `<tspan font-weight="bold">${tipLabel}%</tspan>`;
    // this.node.querySelector('text.label2').innerHTML = `<tspan >${this.legend}</tspan>`;
    /***** 
    // date alignment debugging
    if (this.needs_anno) {
      let tfmt = d3.timeFormat('%b. %d');
      let tstr = tfmt(parseSnowflakeDate(d.DATE));
      this.node.querySelector('text.date').innerHTML = `<tspan>${tstr}</tspan>`;
    }
    *******/
  }

  hide() {
    this.node.setAttribute("display", "none");
  }
}

var css_248z$3 = "cagov-chart-d3-lines .tick line {\n  stroke: #ccc;\n  /* F2F5FC */\n  stroke-width: 0.5; }\n\ncagov-chart-d3-lines .tick {\n  font-size: 0.2rem; }\n\ncagov-chart-d3-lines svg text {\n  font-size: 1rem; }\n\ncagov-chart-d3-lines text.label1 {\n  font-size: 0.85rem; }\n";
styleInject(css_248z$3);

function template$3(translationsObj) {
  return /*html*/`<div class="py-2 d-none">
    <div class="container">
      <div class="col-lg-12 bg-white py-4">
        <div class="row">
          <div class="col-lg-12 col-md-12 col-sm-12 mx-auto px-3">
            <div class="svg-holder">
            </div>
          </div>
        </div>
      </div><!--END col-12-->
    </div><!--END CONTAINER-->
  </div>`;
}

// import { stackOffsetNone } from 'd3';



class CAGOVChartD3Lines extends window.HTMLElement {
  connectedCallback() {
    this.translationsObj = this.getTranslations(this);
    // this.innerHTML = this.translationsObj; // not currently using a template.
    this.innerHTML = template$3(this.translationsObj);
    
    // Settings and initial values
    // let debugLatest = false;
    this.chartOptions = {
      // Data
      dataUrl: config.equityChartsDataLoc + "/equitydash/healthequity-california.json",  // Overwritten by county.
      // state: "California",
      // county: "California",
      // Style
      chartColors: ["#000000", "#2772B3"],
      // Breakpoints
      desktop: {
        width: 613,
        height: 355,
        margin: { top: 30, right: 20, bottom: 40, left: 30 },
        legendPosition: {
          x: 200,
          y: 18
        }
      },
      tablet: {
        width: 440,
        height: 355,
        margin: { top: 30, right: 20, bottom: 40, left: 30 },
        legendPosition: {
          x: 160,
          y: 18
        }
      },
      mobile: {
        width: 440,
        height: 600,
        margin: { top: 30, right: 20, bottom: 40, left: 30 },
        legendPosition: {
          x: 160,
          y: 18
        }
      },
      retina: {
        width: 320,
        height: 450,
        margin: { top: 30, right: 20, bottom: 40, left: 30 },
        legendPosition: {
          x: 100,
          y: 18
        }
      },
    };
    // if (debugLatest) {
    //   this.chartOptions.dataUrl = this.chartOptions.dataUrl.replace('reviewed','to-review');
    //   console.log("Latest",this.chartOptions.dataUrl);
    // }

    getScreenResizeCharts();
    this.screenDisplayType = window.charts
      ? window.charts.displayType
      : "desktop";
    this.chartBreakpointValues = this.chartOptions[
      this.screenDisplayType ? this.screenDisplayType : "desktop"
    ];

    // Choose settings for current screen display.
    // Display content & layout dimensions
    const handleChartResize = () => {
      getScreenResizeCharts();
      this.screenDisplayType = window.charts
        ? window.charts.displayType
        : "desktop";
      this.chartBreakpointValues = this.chartOptions[
        this.screenDisplayType ? this.screenDisplayType : "desktop"
      ];
    };

    // @TODO connect a debouncer
    window.addEventListener("resize", handleChartResize);

    // jbum: all text for line chart collected here...
    this.textLabels = {
      yAxisLabel: this.translationsObj["y-axis-label"], // Test positivity
      data1Legend: this.translationsObj["data1-legend"], // Statewide positivity
      data1LegendLocal: this.translationsObj["data1-legend-local"], // 'placeholderForDynamicLocation test positivity', // appended to county name
      data2Legend: this.translationsObj["data2-legend"], // 'Health equity quartile positivity',
      missingDataCaption: this.translationsObj["missing-data-caption"], // 'The health equity metric is not<br>applied to counties with a population<br>less than 106,000.',
      dataAnomaliesCaption: this.translationsObj["data-anomalies-caption"], // Due to reporting anomalies, we cannot display this data accurately.
    };

    this.svg = d3
      .create("svg")
      .attr("viewBox", [0, 0, this.chartBreakpointValues.width, this.chartBreakpointValues.height]);

    window
      .fetch(
        this.chartOptions.dataUrl
      )
      .then((response) => response.json())
      .then((alldata) => {
        this.writeChart(alldata, this.svg, this.textLabels.data1Legend);
        // this.innerHTML = `<div class="svg-holder"></div>`;
        this.querySelector(".svg-holder").appendChild(this.svg.node());
      });

    let legendLabels = [
      this.textLabels.data1Legend,
      this.textLabels.data2Legend,
    ];

    this.legend = this.svg
      .append("g")
      .attr("class", "legend")
      .attr("transform", `translate(${this.chartBreakpointValues.legendPosition.x},${this.chartBreakpointValues.legendPosition.y})`);

    this.writeLegendColors(this.chartOptions.chartColors, this.legend);
    this.writeLegendLabels(legendLabels, this.legend);
    this.listenForLocations();
    this.classList.remove("d-none"); // this works
    if (this.querySelector('.d-none') !== null) { // doesn't work
      this.querySelector('.d-none').classList.remove("d-none");
    }

    rtlOverride(this); // quick fix for arabic
  }

  listenForLocations() {
    let searchElement = document.querySelector("cagov-county-search");
    searchElement.addEventListener(
      "county-selected",
      function (e) {
        this.county = e.detail.county;
        // console.log("Got County: " + this.county);
        let legendText = this.textLabels.data1LegendLocal.replace(
          "placeholderForDynamicLocation",
          this.county
        );

        window
          .fetch(
            config.equityChartsDataLoc +
              "/equitydash/healthequity-" +
              this.county.toLowerCase().replace(/ /g, "") +
              ".json"
          )
          .then((response) => response.json())
          .then((alldata) => {
            this.writeChart(alldata, this.svg, legendText);
          });
      }.bind(this),
      false
    );
  }

  // Related to the line that appears on hover
  bisect(data, date) {
    const bisectDate = d3.bisector((d) => parseSnowflakeDate(d.DATE)).left;
    // this is consistently failing and returning the default==1
    const i = Math.min(data.length - 1, bisectDate(data, date, 1));
    const a = data[i - 1],
      b = data[i];
    // console.log("date = " + date+ " i= " + i);
    return date - parseSnowflakeDate(a.DATE) > parseSnowflakeDate(b.DATE) - date ? b : a;
  }


  writeChart(alldata, svg, data1Legend) {
    let component = this;

    component.dims = this.chartBreakpointValues !== undefined ? this.chartBreakpointValues : this.chartOptions.desktop; // Patch error until we can investigate it
    let data = alldata.county_positivity_all_nopris;
    let data2 = alldata.county_positivity_low_hpi;

    let updateDate =  reformatReadableDate( data2[data2.length-1].DATE );
    // using document since the footnote lies outside this element
    document.querySelectorAll('span[data-replacement="d3-lines-report-date"]').forEach(elem => {
      // console.log("Got date span");
      elem.innerHTML = updateDate;
    });


    // console.log("Overall Data ", data);
    // console.log("Equity Data2 ", data2);
    let missing_eq_data =
      data2.filter((d) => null == d.METRIC_VALUE).length > 0;
    let anomalies_data = data[0].COUNTY === "San Diego";
    let using_data_overlay = (missing_eq_data || anomalies_data);

    let legendLabels = [data1Legend, this.textLabels.data2Legend];
    this.rewriteLegend(this.svg, legendLabels);
    svg
      .selectAll(".legend")
      .attr("visibility", using_data_overlay ? "hidden" : "visible");
    // console.log("dims",this.chartBreakpointValues);

    let minDate = d3.min(missing_eq_data ? data : data2, (d) => parseSnowflakeDate(d.DATE));
    minDate.setDate(minDate.getDate() - 1);
    let maxDate = d3.max(data, (d) => parseSnowflakeDate(d.DATE));
    maxDate.setDate(maxDate.getDate() + 1);
    let xbounds = {
      min: minDate,
      max: maxDate,
    };

  
    let x = d3
      .scaleTime()
      .domain([xbounds.min, xbounds.max])
      .range([this.chartBreakpointValues.margin.left, this.chartBreakpointValues.width - this.chartBreakpointValues.margin.right]);

    // don't allow max_y to exceed 100%, since that would be silly
    let max_y = Math.min(
      1,
      d3.max(missing_eq_data ? data : data2, (d) => d.METRIC_VALUE) * 1.4
    );

    let y = d3
      .scaleLinear()
      .domain([0, max_y]) // using county_positivity_low_hpi because that has higher numbers
      .range([
        this.chartBreakpointValues.height - this.chartBreakpointValues.margin.bottom,
        this.chartBreakpointValues.margin.top,
      ]);
    let xRange = x.range();
    let yRange = y.range();
    let chartWidth = xRange[1] - xRange[0]; // 128.5
    let chartHeight = yRange[1] - yRange[0]; // -52
    // console.log("Chart width", chartWidth, "height", chartHeight);
    
    // jbum note: 14 is a magic number that aligns axis to the line and tooltips
    // note the left margin is 30, so I'm not sure why it's so odd
    let xAxis = (g) =>
      g
        .attr("transform", "translate(0," + this.chartBreakpointValues.margin.bottom + ")" )
        .call(
          d3
            .axisBottom(x)
            .ticks(d3.timeWeek.every(1))
            // .tickFormat(d3.timeFormat("%b. %d"))  // d3 timeFormatDefaultLocale is currently breaking, so using a non-d3 method
            .tickFormat(d => d.toLocaleString(document.documentElement.lang, { month: "short", day: 'numeric' }))
            .tickSize(-chartHeight)
        )
        // .call(g => g)
        .call((g) => g.select(".domain").remove());

    let nbr_ticks = Math.min(10, 1 + Math.floor(max_y * 100));
    let y_tick_fmt = d3.format(".0%");

    let yAxis = (g) =>
      g
        .attr("transform", "translate(" + this.chartBreakpointValues.margin.left + ", 0)")
        .call(
          d3
            .axisLeft(y)
            .ticks(nbr_ticks)
            .tickFormat(y_tick_fmt)
            .tickSize(-chartWidth)
        )
        // .call(g => g)
        .call((g) => g.select(".domain").remove());

    let yAxisLabel = (g) =>
      g
        .append("text")
        .attr(
          "transform",
          "translate(" + 0 + " ," + (this.chartBreakpointValues.margin.top - 10) + ")"
        )
        .style("text-anchor", "left")
        .text(component.textLabels.yAxisLabel)
        .attr("class", "y-label");
    
    let line = d3
      .line()
      .x((d, i) => {
        return x(parseSnowflakeDate(d.DATE));
      })
      .y((d) => {
        return y(d.METRIC_VALUE);
      });

    //call line chart county_positivity_all_nopris
    svg.selectAll(".county_positivity_all_nopris").remove();
    svg.selectAll(".tick").remove(); // remove previous axes annotations
    svg.selectAll(".y-label").remove();
    // d3.selectAll(".tooltip-container--d3-lines").remove();

    if (!using_data_overlay) {
      svg
        .append("path")
        .datum(
          data.sort(function (a, b) {
            return a.DATE > b.DATE;
          })
        )
        .attr("fill", "none")
        .attr("stroke", this.chartOptions.chartColors[0])
        .attr("stroke-width", 3)
        .attr("class", "county_positivity_all_nopris")
        .attr("d", line);
    }

    //call line chart county_positivity_low_hpi
    svg.selectAll(".county_positivity_low_hpi").remove();

    if (!using_data_overlay) {
      svg
        .append("path")
        .datum(
          data2.sort(function (a, b) {
            return a.DATE > b.DATE;
          })
        )
        .attr("fill", "none")
        .attr("stroke", this.chartOptions.chartColors[1])
        .attr("stroke-width", 3)
        .attr("class", "county_positivity_low_hpi")
        .attr("d", line);
    }

    svg.append("g").call(xAxis);
    svg.append("g").call(yAxis);
    // debug ticks
    // xg.selectAll("line").style("stroke", "red");
    // yg.selectAll("line").style("stroke", "green");
    svg.append("g").call(yAxisLabel);

    let is_debugging_infobox = false;
    let is_debugging_anomalies = false;
    let boxClass = "chartOverlay-d3-lines";
    if (missing_eq_data || is_debugging_infobox) {
      chartOverlayBox(svg,                      
            "cagov-chart-d3-lines",     // class of chart
            boxClass,                   // class of box
            this.chartBreakpointValues, // dimensions dict (contains width,height)
            this.textLabels.missingDataCaption // caption
            );
    } else if (anomalies_data || is_debugging_anomalies) {
      chartOverlayBox(svg,                      
            "cagov-chart-d3-lines",     // class of chart
            boxClass,                   // class of box
            this.chartBreakpointValues, // dimensions dict (contains width,height)
            this.textLabels.dataAnomaliesCaption // caption
            );
    } else {
      chartOverlayBoxClear(svg, boxClass);
    }

    //tooltip
    svg.on("mousemove", null);
    svg.on("mouseleave touchend", null);

    if (!using_data_overlay) {
      const tooltip = new Tooltip(true, y);
      const tooltip2 = new Tooltip(false, y);

      
      svg
        .on("mousemove", (event) => {
          // console.log("move: " + event.offsetX);
          // coords are container screen-coords, and need to be scaled/translated
          // to x display bounds before passed to x.invert
          var xy = d3.pointer(event);
          // console.log("event: ",xy);
          tooltip.show(this.bisect(data, x.invert(xy[0])), x, y);
          if (!using_data_overlay) {
            tooltip2.show(this.bisect(data2, x.invert(xy[0])), x, y);
          }
        })
        .on("mouseleave touchend", (event) => {
          // console.log("leave");
          tooltip.hide();
          if (!using_data_overlay) {
            tooltip2.hide();
          }
        });

      svg.append(() => tooltip.node);
      if (!using_data_overlay) {
        svg.append(() => tooltip2.node);
      }
    }
  }

  rewriteLines(svg, data, x, y) {
    svg
      .selectAll(".barshere rect")
      .data(data)
      .transition()
      .duration(300)
      .attr("x", (d, i) => x(i))
      .attr("y", (d) => y(d.CASE_RATE_PER_100K))
      .attr("height", (d) => y(0) - y(d.CASE_RATE_PER_100K));
  }

  writeLegendColors(legendColors, legend) {
    legend
      .selectAll("rect")
      .data(legendColors)
      .enter()
      .append("rect")
      .attr("x", function (d, i) {
        // return i * 200 + 0;
        return 0;
      })
      .attr("y", function (d, i) {
        // return 2; // i * 6;
        return i * 20  - 10;
      })
      .attr("width", 20)
      .attr("height", 3)
      .attr("fill", function (d, i) {
        return d;
      });
  }

  writeLegendLabels(legendLabels, legend) {
    // console.log("write legend width",this.chartBreakpointValues.width);
    legend
      .selectAll("text")
      .data(legendLabels)
      .enter()
      .append("text")
      .text(function (d) {
        return d;
      })
      .attr("x", function (d, i) {
        // return i * 100 + 25;
        return 25;
      })
      .attr("y", function (d, i) {
        // return -1; // i * 6 - 2;
        return i * 20 - 10;
      })
      .attr("text-anchor", "start")
      .attr("dominant-baseline", "hanging");
  }

  rewriteLegend(svg, legendLabels) {
    svg
      .selectAll(".legend text")
      .data(legendLabels)
      .text((d) => d);
  }

  getTranslations() {
    let translations = getTranslations(this);
    return translations;
  }
}
window.customElements.define("cagov-chart-d3-lines", CAGOVChartD3Lines);

var css_248z$2 = "cagov-chart-equity-data-completeness .chart-tooltip--missingness {\n  min-width: 300px; }\n\ncagov-chart-equity-data-completeness .bar-label .tick text {\n  text-transform: capitalize; }\n";
styleInject(css_248z$2);

function template$2(translationsObj) {
  // inhibit special note if it is missing (as it currently is for some translations)
  const inhibitNote = ('special-note' in translationsObj)? 
                      '' : 'style="display:none;"' ;
  return /*html*/`<div class="py-2">
    <div class="container">
      <div class="col-lg-12 bg-white py-4">

        <div class="row">
          <div class="col-lg-9 col-md-9 col-sm-12 mx-auto px-0">
            <div class="chart-title">${translationsObj["title"]}</div>
            <div class="svg-holder">
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-9 col-md-9 col-sm-12 mx-auto px-0">
            <p class="chart-data-label">${translationsObj["footnote"]}</p>
          </div>
        </div>

        <div class="row" ${inhibitNote}>
          <div class="col-lg-9 col-md-9 col-sm-12 mx-auto px-0">
            <div class="special-note mt-1 mb-1"><p>${translationsObj["special-note"]}</p></div>
          </div>
        </div>
      </div><!--END col-12-->
    </div><!--END CONTAINER-->
  </div>`;
}

function drawBars(svg, x, y, yAxis, stackedData, color, data, tooltip, translations) {

  svg.selectAll("g").remove();
  svg.selectAll("rect").remove();
  svg.selectAll("text").remove();

  // Add neutral background fill
  svg
    .append("g")
    .selectAll("g")
    // Enter in the stack data = loop key per key = group per group.
    .data(stackedData)
    .enter()
    .append("g")
    .attr("fill", '#F2F5FC') // Neutral background color
    .selectAll("rect")
    .attr("width", "10px")
    // Enter a second time = loop subgroup per subgroup to add all rectangles.
    .data(d => {
      return d;
    })
    .enter()
    .append("rect")
    .attr("x", d => x(d[0]))
    .attr("y", d => y(d.data.METRIC))
    .attr("width", d => x(1) - x(0))
    .attr("height", "10px");

    // This is the logic for rendering the alternative message for the tooltip which can be placed here, except there is a lot of UX to also connect because this bar was not previously made to be interactive.
    // if (d.data.PERCENT_COMPLETE === null) {
    //   console.log("NULL");
    //   let tooltipCheck = translations.chartTooltip({
    //     metric: d.data.METRIC,
    //     highlightData: percentMissing,
    //     complete: false,
    //     suppression: true,
    //   });
    //   console.log('tooltip check', tooltipCheck);
    //   return tooltipCheck;
    // }


  // Render the bars with their connected tooltips.
  let bar = svg
    .append("g")
    .selectAll("g")
    // Enter in the stack data = loop key per key = group per group.
    .data(stackedData)
    .enter()
    .append("g")
    .attr("fill", d => color(d.key))
    .selectAll("rect")
    .attr("width", "40px")

    // Enter a second time = loop subgroup per subgroup to add all rectangles.
    .data(d => {
      return d;
    })
    .enter();
  bar.append("rect")
    .attr("x", d => x(d[0]))
    .attr("y", d => y(d.data.METRIC))
    .attr("width", d => x(d[1]) - x(d[0]))
    .attr("height", "10px");

  // larger transparent overlay for tooltip hover
  bar.append("rect")
    .attr("x", d => x(d[0]))
    .attr("y", d => y(d.data.METRIC)-10)
    .attr("width", d => x(d[1]) - x(d[0]))
    .attr("height", "30px")
    .attr("fill", "transparent")  // use rgb(255,0,0,0.5) for debugging
    .attr("tabindex", "0")
    .attr("aria-label", (d, i) => {
      let percentNotMissing = d.data.NOT_MISSING
        ? parseFloat(d.data.NOT_MISSING * 100).toFixed(1) + "%"
        : 0;

      let percentMissing = d.data.MISSING
        ? parseFloat(d.data.MISSING * 100).toFixed(1) + "%"
        : 0;

      if (d[0] == 0) {
        return translations.chartTooltip({
          metric: d.data.METRIC,
          highlightData: percentNotMissing,
          complete: true,
        });
      } else {
        return translations.chartTooltip({
          metric: d.data.METRIC,
          highlightData: percentMissing,
          complete: false,
        });
      }})

    .on("mouseover focus", function(event, d) {
      d3.select(this).transition();
      tooltip.html(() => {
        if (d.data.PERCENT_COMPLETE === null) {
          // Return nothing.
          return ``;
        } else {
          let percentNotMissing = d.data.NOT_MISSING
          ? parseFloat(d.data.NOT_MISSING * 100).toFixed(1) + "%"
          : 0;

        let percentMissing = d.data.MISSING
          ? parseFloat(d.data.MISSING * 100).toFixed(1) + "%"
          : 0;

        if (d[0] == 0) {
          return translations.chartTooltip({
            metric: d.data.METRIC,
            highlightData: percentNotMissing,
            complete: true,
          });
        } else {
          return translations.chartTooltip({
            metric: d.data.METRIC,
            highlightData: percentMissing,
            complete: false,
          });
        }
        }
      });
      /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
      tooltip.style("visibility", "visible");
      tooltip.style("left",'90px');
      // console.log("Tool top L, O, y",event.layerY, event.offsetY, event.y);
      // tooltip.style("top",`${event.layerY+60}px`)
      tooltip.style("top",`${event.offsetY+120}px`);
    })
    .on("mouseout", function(d) {
      d3.select(this).transition();
      tooltip.style("visibility", "hidden");
    });

  // Percent change since previous month labels
  svg
    .append("g")
    .attr("class", "more-than-labels")
    .selectAll(".more-than-labels")
    .data(data)
    .join(enter => {
      enter
        .append("text")
        .attr("class", "more-than-labels")
        .attr("y", d => {
          return y(d.METRIC) + 25
        })
        .attr("x", d => {
          if (d.PERCENT_COMPLETE === null) {
            return x(0) + 72;
          } else {
            return x(0) + 19;
          }
        })
        .attr("height", y.bandwidth())
        .html(d => {
          if (d.PERCENT_COMPLETE === null) {
            return `<tspan>${translations['data-missing-applied-suppression-total'] || ''}</tspan>`
          }
          if (
            parseFloat(
              (d.PERCENT_COMPLETE_30_DAYS_DIFF /
                d.PERCENT_COMPLETE_30_DAYS_PRIOR) *
                100
            ).toFixed(1) == 0.0
          ) {
            return `<tspan class="highlight-data">0%</tspan>  ${translations['percent-change-previous-month']}`;
          } else {
            return `<tspan class="highlight-data">${(d.PERCENT_COMPLETE_30_DAYS_PRIOR != 0) ? parseFloat(
              (d.PERCENT_COMPLETE_30_DAYS_DIFF) *
                100
            ).toFixed(1) : "0"}%</tspan> ${translations['percent-change-previous-month']}`;
          }
        })
        .attr('text-anchor', 'start');
    });

  svg.append("g").call(yAxis);

  // Change since previous month arrows
  svg
    .append("g")
    .attr("class", "more-than-labels")
    .selectAll(".more-than-labels")
    .data(data)
    .join(enter => {
      enter
        .append("svg")
        .attr("y", d => y(d.METRIC) + 15)
        .attr("x", d => x(0))
        .html(d => {
          if (d.PERCENT_COMPLETE === null) {
            return ``;
          }
          // Difference is greater than zero, point arrow up.
          if (
            parseFloat(
              (d.PERCENT_COMPLETE_30_DAYS_DIFF /
                d.PERCENT_COMPLETE_30_DAYS_PRIOR) *
                100
            ) > 0
          ) {
            return `<svg width="15" height="10" viewBox="0 0 17 10" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M17 0.581819V5.19326C17 5.50954 16.742 5.77116 16.4271 5.77116C16.1122 5.77116 15.8543 5.51344 15.8543 5.19326V2.00308L10.1901 7.93042C10.0839 8.03975 9.93972 8.09832 9.78419 8.09832C9.63244 8.09832 9.48828 8.03975 9.37826 7.93042L6.11944 4.64647L0.971201 9.8321C0.86118 9.94143 0.720802 10 0.565271 10C0.413518 10 0.26936 9.94143 0.15934 9.8321C0.0531121 9.72667 0 9.59001 0 9.43381C0 9.22295 0.0872582 9.09018 0.15934 9.01601L5.70966 3.42434C5.81968 3.315 5.96006 3.25643 6.11559 3.25643C6.26734 3.25643 6.4115 3.315 6.52152 3.42434L9.78035 6.70829L15.0158 1.1558H11.8403C11.5254 1.1558 11.2674 0.898078 11.2674 0.5779C11.2674 0.26162 11.5254 0 11.8403 0H16.4233C16.742 0.00390471 17 0.261621 17 0.581819H17Z" fill="#003D9D"/>
  </svg>`;
          } else if (
            // Difference is greater than zero, point arrow down.
            parseFloat(
              (d.perc_total_diff_30_day_prev /
                d.PERCENT_COMPLETE_30_DAYS_PRIOR) *
                100
            ).toFixed(1) == 0
          ) {
            return `<svg width="15" height=10 viewBox="0 0 17 10" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M17 9.41818V4.80674C17 4.49046 16.742 4.22884 16.4271 4.22884C16.1122 4.22884 15.8543 4.48656 15.8543 4.80674V7.99692L10.1901 2.06958C10.0839 1.96025 9.93972 1.90168 9.78419 1.90168C9.63244 1.90168 9.48828 1.96025 9.37826 2.06958L6.11944 5.35353L0.971201 0.167904C0.86118 0.0585697 0.720802 0 0.565271 0C0.413518 0 0.26936 0.0585717 0.15934 0.167904C0.0531121 0.273332 0 0.409992 0 0.566192C0 0.777052 0.0872582 0.909822 0.15934 0.983993L5.70966 6.57566C5.81968 6.685 5.96006 6.74357 6.11559 6.74357C6.26734 6.74357 6.4115 6.685 6.52152 6.57566L9.78035 3.29171L15.0158 8.8442H11.8403C11.5254 8.8442 11.2674 9.10192 11.2674 9.4221C11.2674 9.73838 11.5254 10 11.8403 10H16.4233C16.742 9.9961 17 9.73838 17 9.41818H17Z" fill="none"/>
  </svg>`;
          } else {
            return `<svg width="15" height=10 viewBox="0 0 17 10" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M17 9.41818V4.80674C17 4.49046 16.742 4.22884 16.4271 4.22884C16.1122 4.22884 15.8543 4.48656 15.8543 4.80674V7.99692L10.1901 2.06958C10.0839 1.96025 9.93972 1.90168 9.78419 1.90168C9.63244 1.90168 9.48828 1.96025 9.37826 2.06958L6.11944 5.35353L0.971201 0.167904C0.86118 0.0585697 0.720802 0 0.565271 0C0.413518 0 0.26936 0.0585717 0.15934 0.167904C0.0531121 0.273332 0 0.409992 0 0.566192C0 0.777052 0.0872582 0.909822 0.15934 0.983993L5.70966 6.57566C5.81968 6.685 5.96006 6.74357 6.11559 6.74357C6.26734 6.74357 6.4115 6.685 6.52152 6.57566L9.78035 3.29171L15.0158 8.8442H11.8403C11.5254 8.8442 11.2674 9.10192 11.2674 9.4221C11.2674 9.73838 11.5254 10 11.8403 10H16.4233C16.742 9.9961 17 9.73838 17 9.41818H17Z" fill="#FF8000"/>
  </svg>`;
          }
        });
    });

  // Percent reported and missing labels for each METRIC type
  svg
    .append("g")
    .attr("class", "change-from-month-labels")
    .selectAll(".change-from-month-labels")
    .data(data)
    .join(enter => {
      enter
        .append("text")
        .attr("y", d => y(d.METRIC) - 12)
        .attr("x", d => x(1))
        .attr("height", y.bandwidth())
        .html(
          (d) => {
            // No data for this county
            if (d.PERCENT_COMPLETE === null) {
              return null;
            } else {
              let notMissing = parseFloat(d.NOT_MISSING * 100).toFixed(1);
              let missing = parseFloat(d.MISSING * 100).toFixed(1);
              return `<tspan class="highlight-data">${notMissing}%</tspan> ${translations['reported']} (<tspan class="highlight-data">${missing}%</tspan> ${translations['missing']})`
            }
        })
        .attr('text-anchor', 'end');
    });

  // Legend (Data reported / Data missing)
  svg
    .append("rect")
    .attr("x", 0)
    .attr("y", -20)
    .attr("width", 15)
    .attr("height", 15)
    .attr('class', 'legend-label')
    .attr("fill", "#92C5DE");

  svg
    .append("rect")
    .attr("x", 135) // widened for spanish/tagalog
    .attr("y", -20)
    .attr("width", 15)
    .attr("height", 15)
    .attr("fill", "#FFCF44");

  svg
    .append("text")
    .attr("x", 20)
    .attr("y", -12)
    .attr("dy", "0.35em")
    .attr("class", "legend-label")
    .text(translations['data-reported']);

  svg
    .append("text")
    .attr("x", 155) // widened for spanish/tagalog
    .attr("y", -12)
    .attr("dy", "0.35em")
    .attr("class", "legend-label")
    .text(translations['data-missing']);
}

class CAGOVEquityMissingness extends window.HTMLElement {
  connectedCallback() {
    // console.log("Setting up CAGOVEquityMissingness");
    // Get translations.
    // Use component function, which loads getTranslations and then appends that function with additional translation functions.
    this.translationsObj = this.getTranslations(this);
    // console.log("trans objs",this.translationsObj);

    this.updateDate = "";

    this.innerHTML = template$2(this.translationsObj);



    // Settings and initial values
    this.chartOptions = {
      // Data
      subgroups: ["NOT_MISSING", "MISSING"],
      selectedMetric: "race_ethnicity",
      dataUrl: config.equityChartsDataLoc+"/equitydash/missingness-california.json", // Overwritten by county.
      state: 'California',
      county: 'California',
      displayOrder: ["tests", "cases", "deaths"],
      // Style
      backgroundFill: '#F2F5FC',
      chartColors: ["#92C5DE", "#FFCF44"],
      // Breakpoints
      desktop: {
        fontSize: 14,
        height: 214,
        width: 613,
        margin: {
          top: 40,
          right: 0,
          bottom: 20,
          left: 0,
        },
        heightMultiplier: 100,
        labelOffsets: [-52, -52, -57],
      },
      tablet: {
        fontSize: 14,
        height: 214,
        width: 440,
        margin: {
          top: 40,
          right: 0,
          bottom: 20,
          left: 0,
        },
        heightMultiplier: 100,
        labelOffsets: [-52, -52, -57],
      },
      mobile: {
        fontSize: 12,
        height: 600,
        width: 440,
        margin: {
          top: 40,
          right: 0,
          bottom: 20,
          left: 0,
        },
        heightMultiplier: 100,
        labelOffsets: [-52, -52, -57],
      },
      retina: {
        fontSize: 12,
        height: 600,
        width: 320,
        margin: {
          top: 40,
          right: 0,
          bottom: 20,
          left: 0,
        },
        heightMultiplier: 100,
        labelOffsets: [-52, -52, -57],
      },
    };

    getScreenResizeCharts();
    this.screenDisplayType = window.charts ? window.charts.displayType : 'desktop';
    this.chartBreakpointValues = this.chartOptions[this.screenDisplayType ? this.screenDisplayType : 'desktop'];

    // Choose settings for current screen display.
    // Display content & layout dimensions
    const handleChartResize = () => {
      getScreenResizeCharts();
      this.screenDisplayType = window.charts ? window.charts.displayType : 'desktop';
      this.chartBreakpointValues = this.chartOptions[this.screenDisplayType ? this.screenDisplayType : 'desktop'];
    };

    // @TODO connect a debouncer
    window.addEventListener('resize', handleChartResize);

    this.metricFilter = document.querySelector(
      "cagov-chart-filter-buttons.js-missingness-smalls"
    );

    // Build chart.
    this.svg = d3
      .select(this.querySelector(".svg-holder"))
      .append("svg")
      .attr("viewBox", [0, 0, this.chartBreakpointValues.width, this.chartBreakpointValues.height])
      .append("g")
      .attr(
        "transform",
        "translate(" +
          this.chartBreakpointValues.margin.left +
          "," +
          this.chartBreakpointValues.margin.top +
          ")"
      );

    this.color = d3
      .scaleOrdinal()
      .domain(this.chartOptions.subgroups)
      .range(this.chartOptions.chartColors);

    // Set default values for data and labels
    this.dataUrl = this.chartOptions.dataUrl;
    this.county = this.chartOptions.county;
    this.state = this.chartOptions.state;
    this.selectedMetric = this.chartOptions.selectedMetric;

    this.retrieveData(this.dataUrl);
    this.listenForLocations();
    this.classList.remove("d-none"); // this works
    if (this.querySelector('.d-none') !== null) { // this didn't seem to be working...
      this.querySelector('.d-none').classList.remove("d-none");
    }

    rtlOverride(this); // quick fix for arabic
  }

  listenForLocations() {
    let searchElement = document.querySelector("cagov-county-search");
    searchElement.addEventListener(
      "county-selected",
      function (e) {
        this.county = e.detail.county;
        this.dataUrl =
        config.equityChartsDataLoc+"/equitydash/missingness-" +
          this.county.toLowerCase().replace(/ /g, "") +
          ".json";
        this.retrieveData(this.dataUrl);
        this.resetTitle();
      }.bind(this),
      false
    );

    this.metricFilter.addEventListener(
      "filter-selected",
      function (e) {
        this.selectedMetricDescription = e.detail.clickedFilterText;
        this.selectedMetric = e.detail.filterKey;
        this.retrieveData(this.dataUrl);
        this.resetDescription();
        this.resetTitle();
      }.bind(this),
      false
    );
  }

  resetTitle() {
    this.querySelector(".chart-title").innerHTML = this.translationsObj['tab-label'] ? this.translationsObj['tab-label'] : null;
    this.querySelector('.chart-title span[data-replace="metric-filter"]').innerHTML = this.getFilterText().toLowerCase();
    this.querySelector('.chart-title span[data-replace="location"]').innerHTML = this.getLocation();
  }

  resetUpdateDate() {
    this.querySelectorAll('span[data-replacement="data-completeness-report-date"]').forEach(elem => {
      // console.log("Got completeness date span");
      elem.innerHTML = this.updateDate;
    });
  }

  getFilterText() {
    return this.metricFilter.querySelector(".active").textContent;
  }

  getLocation() {
    if (this.county === 'California') {
      return this.state;
    } else {
      return this.county;
    }
  }

  resetDescription() {}

  formatDataSet(dataSet) {
    let data = [];
    let casesObj = {};
    if (dataSet.cases !== undefined) {
      casesObj = dataSet.cases;
      casesObj.METRIC = "cases";
      data.push(casesObj);
    }
    let deathsObj = {};
    if (dataSet.deaths !== undefined) {
      deathsObj = dataSet.deaths;
      deathsObj.METRIC = "deaths";
      data.push(deathsObj);
    }
    let testsObj = {};
    if (dataSet.tests !== undefined) {
      testsObj = dataSet.tests;
      testsObj.METRIC = "tests";
      data.push(dataSet.tests);
    }
    data.forEach((d) => {
      this.formatDataObject(d);
    });
    data.sort(function (a, b) {
      return d3.descending(a.MISSING, b.MISSING);
    });
    return data;
  }

  /**
   * Format the data object.
   * Testing strategy:
   * We can pull in this formatData function into a unit test and pass
   * in some variations of mock data to ensure that null, NaN,
   * Infinity and other errors are not returned.
   * This would also allow us to document the expected data object
   * and provide a place to store examples of the data responses,
   * expected value ranges and required values.
   *
     // Complete mock data example.
      {
      "COUNTY": "Alpine",
      "METRIC": "tests",
      "MISSING": 183,
      "NOT_MISSING": 22,
      "TOTAL": 205,
      "PERCENT_COMPLETE": 0.107317073170732,
      "PERCENT_COMPLETE_30_DAYS_PRIOR": 0.21078431372549,
      "PERCENT_COMPLETE_30_DAYS_DIFF": -0.103467240554758,
      "REPORT_DATE": "2020-11-16"
      }

      // Incomplete mock data example.
      {
      "METRIC": "deaths",
      "MISSING": 0,
      "NOT_MISSING": 0,
      "TOTAL": 0,
      "PERCENT_COMPLETE": null,
      "PERCENT_COMPLETE_30_DAYS_DIFF": null,
      "REPORT_DATE": "2020-11-16"
      }
  */
  formatDataObject(d) {
    if (d.TOTAL === 0 && d.MISSING === 0) {
      d.MISSING = 0;
    } else if (d.TOTAL === 1 && d.MISSING === 0) {
      d.MISSING = 0;
    } else if ((d.TOTAL === 0 || d.TOTAL === null) && d.MISSING === 1) {
      d.MISSING = 1;
    } else {
      d.MISSING = d.MISSING / d.TOTAL;
      if (isNaN(d.MISSING)) {
        d.MISSING = 1;
      }
    }

    if (d.TOTAL === 0 && d.NOT_MISSING === 0) {
      d.NOT_MISSING = 0;
    } else if (d.TOTAL === 1 && d.NOT_MISSING === 0) {
      d.NOT_MISSING = 0;
    } else if ((d.TOTAL === 0 || d.TOTAL === null) && d.NOT_MISSING === 1) {
      d.NOT_MISSING = 1;
    } else {
      d.NOT_MISSING = d.NOT_MISSING / d.TOTAL;
      if (isNaN(d.NOT_MISSING)) {
        d.NOT_MISSING = 0;
      }
    }
  }

  /**
   * Sort domains by preferred display order.
   * @param {} data
   */
  getDomains(data) {
    let unsortedDomains = data.map((group) => group.METRIC);
    // Display order
    let displayOrder = this.chartOptions.displayOrder;
    let domains = [];
    displayOrder.map((key) => {
      let position = unsortedDomains.indexOf(key);
      if (position >= 0) {
        domains.push(key);
      }
    });
    return domains;
  }

  getTranslations() {
    let translations = getTranslations(this);

    // This function is called when the chart title values are changed by user interaction.
    // Intention is to accommodate different placement of values in sentence structure for translated content.
    // Take translated template string, replace values into the span tags.
    translations.chartTitle = ({
      metricFilter = 'race_ethnicity',
      location = 'California'
    }) => {
      let title = translations['tab-label'];
      return title;
    };


    // Generate tooltip text, taking dynamic variable.
    // This takes an HTML text string from the template.
    // @TODO Accommodate different placement of values in sentence structure for translated content.
    // Take translated template string, replace values into the span tags.
    translations.chartTooltip = ({
        metric = 'tests',
        highlightData = 0,
        complete = true,
        suppression = false,
      }) => {
        let location = this.getLocation();
        let dataType = this.getFilterText().toLowerCase();
        let tooltipHTML = translations['chart-tooltip-complete'];


        if (!complete) {
          tooltipHTML = translations['chart-tooltip-missing'];
        }

        tooltipHTML = tooltipHTML.replace('<span data-replace="metric">tests</span>', `<span data-replace="metric">${metric}</span>`);
        tooltipHTML = tooltipHTML.replace('<span data-replace="highlight-data"></span>', `<span data-replace="highlight-data">${highlightData}</span>`);
        tooltipHTML = tooltipHTML.replace('<span data-replace="location">California</span>', `<span data-replace="location">${location}</span>`);
        tooltipHTML = tooltipHTML.replace('<span data-replace="data-type">race and ethnicity</span>', `<span data-replace="data-type">${dataType}</span>`);

        if (suppression) {
          tooltipHTML = translations['data-missing-applied-suppression-total'];
        }
        return `<div class="chart-tooltip"><div>${tooltipHTML}</div></div>`;
      };
    return translations;
  }

  drawSvg(data) {
    // console.log("Chart data",data);
    let stackedData = d3.stack().keys(this.chartOptions.subgroups)(data);
    let domains = this.getDomains(data); // Get list of data domains for this dataset.

    let heightMultiplier = this.chartBreakpointValues.heightMultiplier;
    let svgHeight = heightMultiplier * domains.length;

    d3.select(this.querySelector(".svg-holder svg")).attr("viewBox", [
      0,
      0,
      this.chartBreakpointValues.width,
      svgHeight,
    ]); // Reset height.

    this.x = d3
      .scaleLinear()
      .domain([0, d3.max(stackedData, (d) => d3.max(d, (d) => d[1]))])
      .range([0, this.chartBreakpointValues.width]);

    this.y = d3
      .scaleBand()
      .domain(domains)
      .range([
        this.chartBreakpointValues.margin.top,
        svgHeight - this.chartBreakpointValues.margin.bottom,
      ]); // Spacing between bars.
    // .padding([.4])

    let labelOffsets = this.chartBreakpointValues.labelOffsets;
    let labelOffset = domains.length <= labelOffsets.length ? labelOffsets[domains.length - 1] : this.chartBreakpointValues.labelOffsets[0];

    this.yAxis = (g) =>
      g
        .attr("class", "bar-label")
        .attr("transform", "translate(5," + labelOffset + ")") // Relative positioning of label.
        .call(d3.axisLeft(this.y)
          .tickSize(0)
          .tickFormat(i => this.translationsObj.displayOrder[i]))
        .call((g) => g.selectAll(".domain").remove());

    this.tooltip = d3
      .select("cagov-chart-equity-data-completeness")
      .append("div")
      .attr("class", "tooltip-container tooltip-container--missingness")
      .text(this.translationsObj['empty-tooltip']);

    drawBars(
      this.svg,
      this.x,
      this.y,
      this.yAxis,
      stackedData,
      this.color,
      data,
      this.tooltip,
      this.translationsObj
    );
  }

  render() {
    getScreenResizeCharts();
    this.screenDisplayType = window.charts ? window.charts.displayType : 'desktop';
    this.chartBreakpointValues = this.chartOptions[this.screenDisplayType ? this.screenDisplayType : 'desktop'];

    this.resetTitle();
    let data = this.formatDataSet(this.alldata[this.selectedMetric]);
    this.drawSvg(data);

    // fetch date for footnote
    // console.log("rendering",this.selectedMetric,this.alldata);
    if (this.selectedMetric in this.alldata && 'cases' in this.alldata[this.selectedMetric]) {
      const theDate = parseSnowflakeDate(this.alldata[this.selectedMetric].cases.REPORT_DATE);
      let TUESDAY_ADJUSTMENT = 0;
      if (theDate.getDay() < 2) {
        TUESDAY_ADJUSTMENT = 2 - theDate.getDay();
      }
      this.updateDate = reformatReadableDate( this.alldata[this.selectedMetric].cases.REPORT_DATE , { month: "long", day: 'numeric', year:'numeric' }, TUESDAY_ADJUSTMENT);
    } else {
      this.updateDate = 'Unknown';
    }
    // console.log("Update Date",this.updateDate);
    this.resetUpdateDate();
  }

  retrieveData(url) {
    window
      .fetch(url)
      .then((response) => response.json())
      .then(
        function (alldata) {
          this.alldata = alldata;
          this.render();
        }.bind(this)
      );
  }
}
window.customElements.define(
  "cagov-chart-equity-data-completeness",
  CAGOVEquityMissingness
);

var css_248z$1 = "cagov-chart-d3-bar h2 {\n  margin-top: 3rem; }\n\ncagov-chart-d3-bar .chart-title {\n  max-width: 633px;\n  margin: 50px auto 20px;\n  border-bottom: solid 1px; }\n\ncagov-chart-d3-bar .svg-holder {\n  max-width: 633px; }\n\ncagov-chart-d3-bar .bar-chart-label.label {\n  font-size: 1rem; }\n\ncagov-chart-d3-bar .bar-label tspan {\n  font-weight: 100;\n  font-size: 0.85rem; }\n\ncagov-chart-d3-bar .bar-label tspan.bold {\n  font-weight: bold; }\n\ncagov-chart-d3-bar .tick text {\n  font-size: 0.75rem;\n  font-weight: 600; }\n\n@media (max-width: 768px) {\n  cagov-chart-d3-bar .chart-title {\n    margin: 50px 20px 20px 20px; }\n  cagov-chart-d3-bar .tick text {\n    font-size: 0.65rem !important;\n    font-weight: 500; }\n  cagov-chart-d3-bar .xaxis-label {\n    font-size: 0.75rem !important; }\n  cagov-chart-d3-bar .label.bar-chart-label {\n    font-size: 0.75rem !important; } }\n\n@media (max-width: 520px) {\n  cagov-chart-d3-bar .tick text {\n    font-size: 0.65rem !important;\n    font-weight: 500; }\n  cagov-chart-d3-bar .bar-label tspan {\n    font-size: 0.6rem !important; }\n  cagov-chart-d3-bar .xaxis-label {\n    font-size: 0.75rem !important;\n    font-weight: 600; }\n  cagov-chart-d3-bar .label.bar-chart-label {\n    font-size: 0.75rem !important; } }\n";
styleInject(css_248z$1);

// import chartCss from './../chart.scss';

function template$1(translationsObj) {
  return /*html*/`<div class="py-2 bg-lightblue full-bleed px-4">
    <div class="container">
    <div class="row">
    <div class="container col-lg-10 mx-auto">
    <h2 class="text-center" id="factors">${translationsObj.sectionTitle}</h2>
    <p>${translationsObj.sectionDescription}</p>
    <div class="col-lg-12 bg-white px-3 py-4">
        <div class="d-flex flex-column flex-md-row justify-content-center mt-3">
          <div class="large-tabs">
              <button class="large-tab active js-toggle-group income">${translationsObj.chartButtonIncome}</button>
              <button class="large-tab js-toggle-group housing">${translationsObj.chartButtonHousing}</button>
              <button class="large-tab js-toggle-group healthcare">${translationsObj.chartButtonHealthcare}</button>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-9 col-md-9 col-sm-12 mx-auto px-0">
              <div class="chart-title">${translationsObj.chartTitleIncome}</div>
              <div class="svg-holder">
                <div class="tooltip-container">an empty tooltip</div>
              </div>
            </div>
        </div>
        <div class="row d-flex justify-content-md-center">
          <div class="col-lg-9 col-md-9 col-sm-12 mx-auto">
            <p class="chart-data-label py-4 mx-auto">${translationsObj.footnote}</p>
          </div>
        </div>
    </div><!--END col-12-->
  </div><!--END CONTAINER-->
  </div> <!-- row -->
  </div> <!-- container -->
</div><!--END BG lightblue-->`;
}

let labelMap = new Map();
labelMap.set("below $40K","0 - $40K");
labelMap.set("above $120K","$120K+");

function fixRangeHyphens(label) {
  return label.replace(" - ","–"); // use n-dashes instead of space-hyphen-space
}

function writeXAxis(component, data, height, margin, x) {
  let xAxis = g => g
    .attr("transform", `translate(0,${height - (margin.bottom - 5)})`)
    .call(d3.axisBottom(x).tickFormat(i => {
      if(labelMap.get(data[i].SOCIAL_TIER)) {
        return fixRangeHyphens(labelMap.get(data[i].SOCIAL_TIER));
      } else {
        return fixRangeHyphens(data[i].SOCIAL_TIER);
      }
    }).tickSize(0))
    .call(g => g.select(".domain").remove());
  return xAxis;
}

function writeXAxisLabel(component, svg, label) {
  svg.selectAll("g.x-label").remove();
  svg.append("g")
        .attr("class", "x-label")
        .append("text")
          .attr(
            "transform",
            "translate(" + (component.chartBreakpointValues.width/2) + " ," + (component.chartBreakpointValues.height-10) + ")"
          )
          .attr("class", "xaxis-label")
          .style("text-anchor", "middle")
          .text(label);
}

// function rewriteLegend(svg, legendLabels) { // UNUSED
//   svg.selectAll('.legend text')
//     .data(legendLabels)
//     .text(legendLabels[0])
//     .attr("text-anchor", "start")
// }

function writeLegend(component, svg, legendLabels, width, legendPositions) {
  let legend = svg.append('g')
    .attr('class', 'legend');
  
  legend.selectAll('rect')
    .data(legendLabels)
    .enter()
    .append('rect')
    .attr("x", 30)
    .attr("y", 0)
    .attr("width", 15)
    .attr("height", 15)
    .attr('fill', "#92C5DE");

  legend.selectAll('text')
    .data(legendLabels)
    .enter()
    .append('text')
    .text(legendLabels[0])
    .attr('class', 'legend-label')
    .attr('x', 50)
    .attr('y', legendPositions.y)
    .attr('text-anchor', 'start')
    .attr('dominant-baseline', 'hanging');
    // add statewide element here...
  let linePosY = 7.5;
  let legendX = component.chartBreakpointValues.width/2;
  legend.append('line')
    .attr("x1", legendX)
    .attr("y1", linePosY)
    .attr("x2", legendX+15)
    .attr("y2", linePosY)
    .attr("stroke", "#1F2574")
    .attr("opacity", 0.5)
    .style("stroke-dasharray", ("1, 1"))
    .attr('class','label bar-chart-yline');
  legend.append('text')
    .text(`${component.translationsObj.statewideCaseRate} ${formatValue(component.yDValue,{format:'number',min_decimals:1})}`)
    .attr('class', 'legend-label')
    .attr("x", legendX+20)
    .attr("y", legendPositions.y)
    .attr('text-anchor', 'start')
    .attr('dominant-baseline', 'hanging');
 
}

function writeBars(component, svg, data, x, y, width, tooltip) {
  svg.append("g")
    .attr("fill", "#92C5DE")
    .attr('class','barshere')
    .selectAll("rect")
    .data(data)
    .enter()
    .append("rect")
      .attr("x", (d, i) => x(i))
      .attr("y", d => y(d.CASE_RATE_PER_100K))
      .attr("height", d => y(0) - y(d.CASE_RATE_PER_100K))
      .attr("width", x.bandwidth())
      .attr("id", (d, i) => "barid-"+i)
      .attr("tabindex", "0")
      .attr("aria-label", (d, i) => `${component.ariaLabel(d)}`)
      .on("mouseover focus", function(event, d, i) {
        d3.select(this).style("fill", "#003D9D");
        // problem the svg is not the width in px in page as the viewbox width
        if (tooltip !== null) { // @TODO Q: why is tooltip coming null
          tooltip.style.top = "50%";
          let barIdInt = this.id.replace('barid-','');
          let svgLeft = x(barIdInt);
          let percentLeft = svgLeft / width;
          let elWidth = document.querySelector('.svg-holder .equity-bar-chart').getBoundingClientRect().width; 
          let actualLeft = parseInt(percentLeft * elWidth) - 70;
          tooltip.style.left = parseInt(actualLeft)+"px";
          // @TODO 70 is quick approximation, could actually be subtract half width of tooltip - half width of bar

            // @TODO Adapt from example from data completeness, add to translations.
            tooltip.innerHTML = `<div class="chart-tooltip chart-tooltip-desc">${component.tooltipCaption(d)}</div>`;
            tooltip.style.visibility = "visible";
        }
      })
      .on("mouseout blur", function(d) {
        d3.select(this).style("fill", "#92C5DE");
        if (tooltip !== null) { // @TODO Q: why is tooltip coming null
          tooltip.style.visibility = "hidden";
        }
      });
}
function rewriteBars(component, svg, data, x, y) {
  svg.selectAll(".barshere rect")
    .data(data)
    .transition().duration(300)
    .attr("x", (d, i) => x(i))
    .attr("y", d => y(d.CASE_RATE_PER_100K))
    .attr("height", d => y(0) - y(d.CASE_RATE_PER_100K))
    .attr("aria-label", (d, i) => `${component.ariaLabel(d)}`);
}

function writeBarLabels(component, svg, data, x, y, sparkline) {
  svg.append("g")
    .attr("class", "bar-label-group")
    .selectAll(".bar-label")
    .data(data)
    .join(
      enter => {
        enter
          .append("text")
          .attr("class", "bar-label")
          .attr("x", (d, i) => x(i) + (x.bandwidth() / 2))
          .attr("y", d => y(d.CASE_RATE_PER_100K) - 5)
          .attr("width", x.bandwidth() / 4)
          .html(d => {
            return `<tspan class="bold" dx="-1.25em" dy="-1.2em">${(d.CASE_RATE_PER_100K).toFixed(1)}</tspan>
            <tspan dx="-1.5em" dy="1.2em">${parseFloat(d.RATE_DIFF_30_DAYS).toFixed(1)}%</tspan>`;
          })
          .attr('text-anchor','middle');
      }
    );

  writeSparklines(svg, data, x, y, sparkline);
}
function writeSparklines(svg, data, x, y, sparkline) {
  svg.append("g")
    .selectAll(".bar-label")
    .data(data)
    .join(
      enter => {
        enter
          .append("svg")
          .attr("x", (d, i) => x(i) + (x.bandwidth() / 10))
          .attr("y", d => y(d.CASE_RATE_PER_100K) - 20)
          .html(d => {
            if(parseFloat(d.RATE_DIFF_30_DAYS) > 0) {
              return `<svg class="sparkline" width="${sparkline.width}" height="${sparkline.height}" viewBox="0 0 17 10" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M17 0.581819V5.19326C17 5.50954 16.742 5.77116 16.4271 5.77116C16.1122 5.77116 15.8543 5.51344 15.8543 5.19326V2.00308L10.1901 7.93042C10.0839 8.03975 9.93972 8.09832 9.78419 8.09832C9.63244 8.09832 9.48828 8.03975 9.37826 7.93042L6.11944 4.64647L0.971201 9.8321C0.86118 9.94143 0.720802 10 0.565271 10C0.413518 10 0.26936 9.94143 0.15934 9.8321C0.0531121 9.72667 0 9.59001 0 9.43381C0 9.22295 0.0872582 9.09018 0.15934 9.01601L5.70966 3.42434C5.81968 3.315 5.96006 3.25643 6.11559 3.25643C6.26734 3.25643 6.4115 3.315 6.52152 3.42434L9.78035 6.70829L15.0158 1.1558H11.8403C11.5254 1.1558 11.2674 0.898078 11.2674 0.5779C11.2674 0.26162 11.5254 0 11.8403 0H16.4233C16.742 0.00390471 17 0.261621 17 0.581819H17Z" fill="#003D9D"/>
              </svg>`
            } else {
              return `<svg class="sparkline" width="${sparkline.width}" height="${sparkline.height}" viewBox="0 0 17 10" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M17 9.41818V4.80674C17 4.49046 16.742 4.22884 16.4271 4.22884C16.1122 4.22884 15.8543 4.48656 15.8543 4.80674V7.99692L10.1901 2.06958C10.0839 1.96025 9.93972 1.90168 9.78419 1.90168C9.63244 1.90168 9.48828 1.96025 9.37826 2.06958L6.11944 5.35353L0.971201 0.167904C0.86118 0.0585697 0.720802 0 0.565271 0C0.413518 0 0.26936 0.0585717 0.15934 0.167904C0.0531121 0.273332 0 0.409992 0 0.566192C0 0.777052 0.0872582 0.909822 0.15934 0.983993L5.70966 6.57566C5.81968 6.685 5.96006 6.74357 6.11559 6.74357C6.26734 6.74357 6.4115 6.685 6.52152 6.57566L9.78035 3.29171L15.0158 8.8442H11.8403C11.5254 8.8442 11.2674 9.10192 11.2674 9.4221C11.2674 9.73838 11.5254 10 11.8403 10H16.4233C16.742 9.9961 17 9.73838 17 9.41818H17Z" fill="#FF8000"/>
              </svg>`  
            }
          });
      }
    );
}
function rewriteBarLabels(component, svg, data, x, y, sparkline) {
  svg.selectAll("text.bar-label")
    .data(data)
    .attr("x", (d, i) => x(i) + (x.bandwidth() / 2))
    .attr("y", d => y(d.CASE_RATE_PER_100K) - 5)
    .attr("width", x.bandwidth() / 4)
    .html(d => {
      return `<tspan class="bold" dx="-1.25em" dy="-1.2em">${formatValue(d.CASE_RATE_PER_100K,{format:'number'})}</tspan>
      <tspan dx="-1.5em" dy="1.2em">${parseFloat(d.RATE_DIFF_30_DAYS).toFixed(1)}%</tspan>`
    })
    .attr('text-anchor','middle');

  svg.selectAll(".sparkline").remove();

  writeSparklines(svg, data, x, y, sparkline);

}

function redrawYLine(component, y, dataset) {
  // remove previous Y Line, if any
  if (component.querySelector('.bar-chart-yline') !== null)
    component.querySelector('.bar-chart-yline').remove();
  if (component.querySelector('.bar-chart-label') !== null)
    component.querySelector('.bar-chart-label').remove();

  // add a new one
  let yDottedLinePos = y(component.yDValue);
  y(dataset[2].CASE_RATE_PER_100K);
  y(dataset[3].CASE_RATE_PER_100K);
  component.chartBreakpointValues.width - (component.chartBreakpointValues.margin.right+10);
  let dotLen = 1; // component.chartBreakpointValues.is_mobile? 1 : 5;
  component.svg.append("path")
    .attr("d", d3.line()([[component.chartBreakpointValues.margin.left, yDottedLinePos], 
                          [component.chartBreakpointValues.width - component.chartBreakpointValues.margin.right, yDottedLinePos]]))
    .attr("stroke", "#1F2574")
    .attr("opacity", 0.5)
    .style("stroke-dasharray", (`${dotLen},${dotLen}`))
    .attr('class','label bar-chart-yline');
    
  // if (!component.chartBreakpointValues.is_mobile) {
  //   component.svg.append("text")
  //     .text(`${component.translationsObj.statewideCaseRate} ${formatValue(component.yDValue,{format:'number',min_decimals:1})}`)
  //     .attr("y", yDottedLinePos - 6)
  //     // .attr("x", 38)
  //     // .attr('text-anchor','start')
  //     .attr("x", yXAnchor)
  //     .attr('text-anchor', yTextAnchor)
  //     .attr('fill', '#1F2574')
  //     .attr('class','label bar-chart-label');
  // }
}

class CAGOVChartD3Bar extends window.HTMLElement {
  connectedCallback () {
    // console.log("Setting up CAGOVChartD3Bar");
    // stuff from observables: https://observablehq.com/@aaronhans/covid-19-case-rate-by-income-bracket-in-california
    // let height = 500;
    // let width = 842;
    // let margin = ({top: 88, right: 0, bottom: 30, left: 10})
    this.chartOptions = {
      // Data
      // subgroups: ["NOT_MISSING", "MISSING"],
      // selectedMetric: "race_ethnicity",
      // dataUrl: config.equityChartsDataLoc+"/equitydash/missingness-california.json", // Overwritten by county.
      // state: 'California',
      // county: 'California',
      // displayOrder: ["tests", "cases", "deaths"],
      // // Style
      // backgroundFill: '#F2F5FC',
      // chartColors: ["#92C5DE", "#FFCF44"],
      // Breakpoints
      desktop: {
        is_mobile: false,
        width: 613,
        height: 500,
        margin: {
          top: 88, right: 0, bottom: 50, left: 10
        },
        sparkline: {
          width: 15,
          height: 20
        },
        legend: {
          y: 2
        }
      },
      tablet: {
        is_mobile: false,
        width: 500, // 440 x 400
        height: 450,
        margin: {
          top: 88, right: 0, bottom: 40, left: 10
        },
        sparkline: {
          width: 15,
          height: 20
        },
        legend: {
          y: 2
        }
      },
      mobile: { // 440x400
        is_mobile: true,
        width: 440,
        height: 400,
        margin: {
          top: 88, right: 0, bottom: 40, left: 10
        },
        sparkline: {
          width: 15,
          height: 20
        },
        legend: {
          y: 2
        }
      },
      retina: {
        is_mobile: true,
        width: 440,
        height: 300,
        margin: {
          top: 40, right: 0, bottom: 40, left: 10
        },
        sparkline: {
          width: 15,
          height: 20
        },
        legend: {
          y: 2
        }
      },
    };

    getScreenResizeCharts();
    this.screenDisplayType = window.charts ? window.charts.displayType : 'desktop';
    this.chartBreakpointValues = this.chartOptions[this.screenDisplayType ? this.screenDisplayType : 'desktop'];

    // Choose settings for current screen display.
    // Display content & layout dimensions
    const handleChartResize = () => {
      getScreenResizeCharts();
      this.screenDisplayType = window.charts ? window.charts.displayType : 'desktop';
      this.chartBreakpointValues = this.chartOptions[this.screenDisplayType ? this.screenDisplayType : 'desktop'];
    };

    window.addEventListener('resize', handleChartResize);

    this.translationsObj = getTranslations(this);


    function sortedOrder(a,b) {
      return parseInt(a.SORT) - parseInt(b.SORT)
    }

    this.svg = d3.create("svg")
      .attr("viewBox", [0, 0, this.chartBreakpointValues.width, this.chartBreakpointValues.height])
      .attr("class","equity-bar-chart");
    

    
    Promise.all([
      window.fetch(config.equityChartsDataLoc+"/equitydash/social-data-income.json"),
      window.fetch(config.equityChartsDataLoc+"/equitydash/social-data-crowding.json"),
      window.fetch(config.equityChartsDataLoc+"/equitydash/social-data-insurance.json")
    ]).then(function (responses) {
      return Promise.all(responses.map(function (response) {
        return response.json();
      }));
    }).then(function (alldata) {
      let dataincome = alldata[0];
      let datacrowding = alldata[1];
      let datahealthcare = alldata[2];

      dataincome.sort(sortedOrder).reverse();
      datacrowding.sort(sortedOrder).reverse();
      datahealthcare.sort(sortedOrder).reverse();
      const ONE_DAY_LATER = 1;
      let updateDate = reformatReadableDate( dataincome[0].DATE , { month: "long", day: 'numeric', year:'numeric' }, ONE_DAY_LATER); // localized readable date

      let y = d3.scaleLinear()
        .domain([0, d3.max(dataincome, d => d.CASE_RATE_PER_100K)]).nice()
        .range([this.chartBreakpointValues.height - this.chartBreakpointValues.margin.bottom, this.chartBreakpointValues.margin.top]);
  
      let x = d3.scaleBand()
        .domain(d3.range(dataincome.length))
        .range([this.chartBreakpointValues.margin.left, this.chartBreakpointValues.width - this.chartBreakpointValues.margin.right])
        .padding(this.chartBreakpointValues.is_mobile? 0.02 : 0.1);
      this.innerHTML = template$1(this.translationsObj);
      // console.log("ran template", this.innerHTML);
      this.querySelectorAll('span[data-replacement="d3-bar-report-date"]').forEach(elem => {
        // console.log("Got date span");
        elem.innerHTML = updateDate;
      });

      this.tooltip = this.querySelector('.tooltip-container'); // @TODO: Q: where did the class go? tooltip is coming back null.
      writeBars(this, this.svg, dataincome, x, y, this.chartBreakpointValues.width, this.tooltip);
      writeBarLabels(this,this.svg, dataincome, x, y, this.chartBreakpointValues.sparkline);
      let xAxis = writeXAxis(this, dataincome, this.chartBreakpointValues.height, this.chartBreakpointValues.margin, x);
      writeXAxisLabel(this, this.svg, this.translationsObj.xAxisTitleIncome);
  
      this.svg.append("g")
        .attr("class", "xaxis")
        .call(xAxis);

      let yDValue = dataincome[0].STATE_CASE_RATE_PER_100K;
      this.yDValue = yDValue;

      redrawYLine(this, y, dataincome);

      writeLegend(this, this.svg, [this.translationsObj.casesPer100KPeople], this.chartBreakpointValues.width - 5, this.chartBreakpointValues.legend);

      this.querySelector('.svg-holder').appendChild(this.svg.node());
      this.applyListeners(this.svg, x, y, this.chartBreakpointValues.height, this.chartBreakpointValues.margin, xAxis, dataincome, datacrowding, datahealthcare, this.chartBreakpointValues);
      this.classList.remove('d-none');

      document.dispatchEvent(new window.CustomEvent('setup-sd-tab-tracking'));

      rtlOverride(this);

    }.bind(this));



  }

  ariaLabel(d) {
      // this is currently the same as the tooltip with span tags removed...
      // placeholderCaseRate cases per 100K people. placeholderRateDiff30 change since previous week
      // ${parseFloat(d.CASE_RATE_PER_100K).toFixed(1)} cases per 100K people. ${parseFloat(d.RATE_DIFF_30_DAYS).toFixed(1)}% change since previous week
      let templateStr = this.translationsObj['ariaBarLabel'];
      let label = templateStr
                    .replace('placeholderCaseRate', formatValue(d.CASE_RATE_PER_100K,{format:'number',min_decimals:1}))
                    .replace('placeholderRateDiff30', parseFloat(d.RATE_DIFF_30_DAYS).toFixed(1) + '%');
      return label;
  }
  tooltipCaption(d) {
      // <span class="highlight-data">placeholderCaseRate</span> cases per 100K people. placeholderRateDiff30 change since previous week
      // <span class="highlight-data">${parseFloat(d.CASE_RATE_PER_100K).toFixed(1)}</span> cases per 100K people. ${parseFloat(d.RATE_DIFF_30_DAYS).toFixed(1)}% change since previous week
      let templateStr = this.translationsObj['tooltipCaption'];
      let caption = templateStr
                    .replace('placeholderCaseRate', formatValue(d.CASE_RATE_PER_100K,{format:'number',min_decimals:1}))
                    .replace('placeholderRateDiff30', parseFloat(d.RATE_DIFF_30_DAYS).toFixed(1) + '%');
      return caption;
  }

  applyListeners(svg, x, y, height, margin, xAxis, dataincome, datacrowding, datahealthcare, chartBreakpointValues) {
    let toggles = this.querySelectorAll('.js-toggle-group');
    let component = this;
    let tab_recs = [{nom:'income',data:dataincome, tranHTML:component.translationsObj.chartTitleIncome, xAxisLabel:component.translationsObj.xAxisTitleIncome},
                    {nom:'healthcare',data:datahealthcare, tranHTML:component.translationsObj.chartTitleHealthcare, xAxisLabel:component.translationsObj.xAxisTitleHealthcare},
                    {nom:'housing',data:datacrowding, tranHTML:component.translationsObj.chartTitleHousing, xAxisLabel:component.translationsObj.xAxisTitleHousing},
                   ];

    toggles.forEach(tog => {
      tog.addEventListener('click',function(event) {

        // console.log("Got Social Toggle: ",this.classList);
        event.preventDefault();
        tab_recs.forEach(tRec => {
          // console.log("Checking ",tRec.nom,this.classList);
          if(this.classList.contains(tRec.nom)) {
           // console.log("Hit on ",tRec.nom);
            const event = new window.CustomEvent('tab-select',{detail:{tab_selected: tRec.nom}});
            window.dispatchEvent(event);    
            rewriteBar(component, tRec.data);
            component.querySelector('.chart-title').innerHTML = tRec.tranHTML;
            writeXAxisLabel(component, component.svg, tRec.xAxisLabel);
          }
        });
        resetToggles();
        tog.classList.add('active');
      });
    });

    function resetToggles() {
      toggles.forEach(toggle => {
        toggle.classList.remove('active');
      });
    }

    function rewriteBar(component, dataset) {
      // console.log("Redraw Bar");
      y = d3.scaleLinear()
        .domain([0, d3.max(dataset, d => d.CASE_RATE_PER_100K)]).nice()
        .range([chartBreakpointValues.height - chartBreakpointValues.margin.bottom, chartBreakpointValues.margin.top]);

      rewriteBars(component, svg, dataset, x, y);
      rewriteBarLabels(component, svg, dataset, x, y, chartBreakpointValues.sparkline);
      xAxis = writeXAxis(component, dataset, chartBreakpointValues.height, chartBreakpointValues.margin, x);
      svg.selectAll(".xaxis")
        .call(xAxis);
      redrawYLine(component, y, dataset);
    }


  }
}
window.customElements.define('cagov-chart-d3-bar', CAGOVChartD3Bar);

var css_248z = "";
styleInject(css_248z);

function template(href, title) {
  return /*html*/`
<article class="faq-item trigger">    
<a class="faq-item-link cwdsarrow-parent" href="` + href + `">
<h4 class="faq-item-headline">` + title + `</h4>
<cwds-arrow data-class-prefix="faq" data-class-list="cwdsarrow-size-sm cwdsarrow-idle-orange cwdsarrow-hover-darkblue cwdsarrow-focus-darkblue"></cwds-arrow>
</a>
</article>
`
}

class LearnMoreLinks extends window.HTMLElement {
    connectedCallback() {
        // process the list...
        // todo: data-kind tags contain hints about link treatment (pdf, external, internal)
        let innerHTML = '';
        this.querySelectorAll('a').forEach(function(a,i) {
            innerHTML += template(a.getAttribute('href'), a.innerText);
        });
        this.innerHTML = innerHTML;
    }
}
window.customElements.define('learn-more-links', LearnMoreLinks);

		</script>
	

<script nomodule src="https://d3js.org/d3.v5.min.js"></script><!-- lot of transpilation issues, using older d3 for ie -->
<script nomodule src="/js/es5.js"></script>
<cagov-anchor-events />
 <!-- Do not display go-to-top on homepage. -->
	<cagov-go-to-top data-hide-after="7000" data-label="Top"></cagov-go-to-top>

<script type="text/javascript">	
  {	
    function googleTranslateElementInit() {	
      new google.translate.TranslateElement({	
          pageLanguage: 'zh-Hant',
          layout: google.translate.TranslateElement.InlineLayout.VERTICAL	
         },	
        'google_translate_element'	
      );	
    }	
    function addGoogleTranslateCode() {	
      const storagekey = 'google_translate_page_used';if (sessionStorage.getItem(storagekey)) {	
        const JS= document.createElement('script');	
        JS.type='text/javascript';	
        JS.defer='defer';	
        JS.src='//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit';	
        document.body.appendChild(JS);	
      }	
    }	
    addGoogleTranslateCode();	
  }({});	
  </script>

    
    
  </body>
</html>
