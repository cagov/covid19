<!DOCTYPE html>
<html lang="zh-Hans" xml:lang="zh-Hans">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="{{_varStatDate_}}（v3的更新 截至{{_varStatDateNoYear_}}，加州共有{{_varStatTotalCases_}}例COVID-19确诊病例，造成{{_varStatTotalDeaths_}}人死亡。病例数 {{_varStatTotalCases_}} 总共 {{_varStatTotalCasesToday_}} 今日 {{_varStatNewCasesPer100k_}} 每100K人中的新增病例数 死亡数 {{_varStatTotalDeaths_}} 总共 {{_varStatTotalDeathsToday_}} 今日 {{_varStatNewDeathsPer100k_}} 每100K人中的新增死亡数 检测数 {{_varStatTested_}} 总共 {{_varStatTestedDaily_}} 今日 {{_varStatLatestPositivityPct_}}%检测呈阳性率 施打的疫苗数 {{_varStatVaccines_}} 总共 {# {{_varStatVaccinesDaily_}} 今日 {{_varStatVaccinesDailyPct_}}%增长率#} […]">
    <meta name="author" content="State of California">
     
  <title>加州COVID-19追踪) - Coronavirus COVID-19 Response</title>


    <!-- Collect errors -->
    <script>addEventListener('error', window.__e=function f(e){f.q=f.q||[];f.q.push(e)});</script>

    <meta content="加州COVID-19追踪)" property="og:title">
    <meta content="{{_varStatDate_}}（v3的更新 截至{{_varStatDateNoYear_}}，加州共有{{_varStatTotalCases_}}例COVID-19确诊病例，造成{{_varStatTotalDeaths_}}人死亡。病例数 {{_varStatTotalCases_}} 总共 {{_varStatTotalCasesToday_}} 今日 {{_varStatNewCasesPer100k_}} 每100K人中的新增病例数 死亡数 {{_varStatTotalDeaths_}} 总共 {{_varStatTotalDeathsToday_}} 今日 {{_varStatNewDeathsPer100k_}} 每100K人中的新增死亡数 检测数 {{_varStatTested_}} 总共 {{_varStatTestedDaily_}} 今日 {{_varStatLatestPositivityPct_}}%检测呈阳性率 施打的疫苗数 {{_varStatVaccines_}} 总共 {# {{_varStatVaccinesDaily_}} 今日 {{_varStatVaccinesDailyPct_}}%增长率#} […]" property="og:description">
    <meta name="twitter:card" content="summary_large_image">

    <link rel="preconnect" href="https://www.google-analytics.com/">
    <link href="https://covid19.ca.gov/zh-hans/v3-state-dashboard/" rel="canonical">

    <link rel="manifest" href="/img/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="img/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <link rel="alternate" hreflang="en" href="https://covid19.ca.gov/v3-state-dashboard/"><link rel="alternate" hreflang="es" href="https://covid19.ca.gov/es/v3-state-dashboard/"><link rel="alternate" hreflang="tl" href="https://covid19.ca.gov/tl/v3-state-dashboard/"><link rel="alternate" hreflang="ar" href="https://covid19.ca.gov/ar/v3-state-dashboard/"><link rel="alternate" hreflang="ko" href="https://covid19.ca.gov/ko/v3-state-dashboard/"><link rel="alternate" hreflang="vi" href="https://covid19.ca.gov/vi/v3-state-dashboard/"><link rel="alternate" hreflang="zh-Hant" href="https://covid19.ca.gov/zh-hant/v3-state-dashboard/">

    <!-- Favicons -->
<link rel="apple-touch-icon" sizes="180x180" href="/img/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/img/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/img/icons/favicon-16x16.png">
<link rel="manifest" href="/img/icons/site.webmanifest">
<link rel="mask-icon" href="/img/icons/safari-pinned-tab.svg" color="#1f2574">
<meta name="msapplication-TileColor" content="#1f2574">

    
  <meta name="keywords" content="covid19, coronavirus, covid19, covid-19, california">
    <meta name="robots" content="noindex">
  
    <meta content="https://covid19.ca.gov/img/awareness/CAForAll_COVID_EndCards_v4_English.jpg" property="og:image">
  
  <meta property="og:url" content="https://covid19.ca.gov/zh-hans/v3-state-dashboard/">


    
	
  
    <style>
      /*!
 * Bootstrap v4.3.1 (https://getbootstrap.com/)
 * Copyright 2011-2019 The Bootstrap Authors
 * Copyright 2011-2019 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */:root{--blue:#0d6efd;--indigo:#6610f2;--purple:#6f42c1;--pink:#d63384;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#0d6efd;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,:after,:before{box-sizing:border-box}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}[tabindex="-1"]:focus:not(:focus-visible){outline:0!important}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}.h1,.h2,.h3,.h4,.h5,h1,h2,h3,h4,h5{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}.h1,h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){.h1,h1{font-size:2.5rem}}.h2,h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){.h2,h2{font-size:2rem}}.h3,h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){.h3,h3{font-size:1.75rem}}.h4,h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){.h4,h4{font-size:1.5rem}}.h5,h5{font-size:1.25rem}p{margin-top:0}address,p{margin-bottom:1rem}address{line-height:inherit}ol,ul{padding-left:2rem;margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}.small,small{font-size:.875em}sup{font-size:.75em}a{color:#0d6efd}a:hover{color:#024dbc;text-decoration:underline}a:not([href]),a:not([href]):hover{color:inherit;text-decoration:none}code{font-family:SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}figure{margin:0 0 1rem}img,svg{vertical-align:middle}svg{overflow:hidden}table{border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left;caption-side:bottom}th{text-align:inherit}label{display:inline-block;margin-bottom:.5rem}button{border-radius:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}button,input,select,textarea{font-size:inherit;line-height:inherit}select{word-wrap:normal}[list]::-webkit-calendar-picker-indicator{display:none}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}input[type=date],input[type=month],input[type=time]{-webkit-appearance:textfield}textarea{resize:vertical}legend{float:left;width:100%;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}.mark,mark{padding:.2em;background-color:#fcf8e3}output{display:inline-block}template{display:none}[hidden]{display:none!important}.lead{font-size:1.25rem;font-weight:300}.display-4{font-size:calc(1.475rem + 2.7vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-4{font-size:3.5rem}}.blockquote{margin-bottom:1rem;font-size:1.25rem}.img-fluid{max-width:100%;height:auto}.figure{display:inline-block}.container,.container-fluid{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width:576px){.container{max-width:540px}}@media (min-width:768px){.container{max-width:720px}}@media (min-width:992px){.container{max-width:960px}}@media (min-width:1200px){.container{max-width:1140px}}.row{display:flex;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.col,.col-10,.col-lg-6,.col-lg-8,.col-lg-9,.col-lg-10,.col-lg-12,.col-md-3,.col-md-4,.col-md-6,.col-md-8,.col-md-9,.col-md-10,.col-md-12,.col-md-auto,.col-sm,.col-sm-1,.col-sm-3,.col-sm-12{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{flex-basis:0;flex-grow:1;max-width:100%}.col-10{flex:0 0 83.333333%;max-width:83.333333%}@media (min-width:576px){.col-sm{flex-basis:0;flex-grow:1;max-width:100%}.col-sm-1{flex:0 0 8.333333%;max-width:8.333333%}.col-sm-3{flex:0 0 25%;max-width:25%}.col-sm-12{flex:0 0 100%;max-width:100%}}@media (min-width:768px){.col-md-auto{flex:0 0 auto;width:auto;max-width:100%}.col-md-3{flex:0 0 25%;max-width:25%}.col-md-4{flex:0 0 33.333333%;max-width:33.333333%}.col-md-6{flex:0 0 50%;max-width:50%}.col-md-8{flex:0 0 66.666667%;max-width:66.666667%}.col-md-9{flex:0 0 75%;max-width:75%}.col-md-10{flex:0 0 83.333333%;max-width:83.333333%}.col-md-12{flex:0 0 100%;max-width:100%}}@media (min-width:992px){.col-lg-6{flex:0 0 50%;max-width:50%}.col-lg-8{flex:0 0 66.666667%;max-width:66.666667%}.col-lg-9{flex:0 0 75%;max-width:75%}.col-lg-10{flex:0 0 83.333333%;max-width:83.333333%}.col-lg-12{flex:0 0 100%;max-width:100%}}.table{width:100%;margin-bottom:1rem;color:#212529;vertical-align:top}.table td,.table th{padding:.5rem;border-bottom:1px solid #dee2e6}.table tbody{vertical-align:inherit}.table thead th{vertical-align:bottom;border-bottom-color:#495057}.table tbody+tbody{border-top:2px solid #dee2e6}.form-control{display:block;width:100%;min-height:calc(1.5em + .75rem + 2px);padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #ced4da;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-control{transition:none}}.form-control::-ms-expand{background-color:transparent;border:0}.form-control:focus{color:#495057;background-color:#fff;border-color:#8bbafe;box-shadow:0 0 0 .2rem rgba(13,110,253,.25)}.form-control::-webkit-input-placeholder{color:#6c757d;opacity:1}.form-control::-moz-placeholder{color:#6c757d;opacity:1}.form-control:-ms-input-placeholder{color:#6c757d;opacity:1}.form-control::-ms-input-placeholder{color:#6c757d;opacity:1}.form-control::placeholder{color:#6c757d;opacity:1}.form-control:disabled{background-color:#e9ecef;opacity:1}.form-control-lg{min-height:calc(1.5em + 1rem + 2px);padding:.5rem 1rem;font-size:16px;border-radius:.3rem}.form-row{display:flex;flex-wrap:wrap;margin-right:-5px;margin-left:-5px}.form-row>.col,.form-row>[class*=col-]{padding-right:5px;padding-left:5px}.form-inline{display:flex;flex-flow:row wrap;align-items:center}@media (min-width:576px){.form-inline label{display:flex;align-items:center;justify-content:center;margin-bottom:0}.form-inline .form-control{display:inline-block;width:auto;vertical-align:middle}}.invalid-feedback{display:none;width:100%;margin-top:.25rem;font-size:.875em;color:#dc3545}.is-invalid~.invalid-feedback{display:block}.form-control.is-invalid{border-color:#dc3545;padding-right:calc(1.5em + .75rem);background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545'%3E%3Ccircle cx='6' cy='6' r='4.5'/%3E%3Cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3E%3Ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.form-control.is-invalid:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}textarea.form-control.is-invalid{padding-right:calc(1.5em + .75rem);background-position:top calc(.375em + .1875rem) right calc(.375em + .1875rem)}.btn{display:inline-block;font-weight:400;line-height:1.5;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn.focus,.btn:focus{outline:0;box-shadow:0 0 0 .2rem rgba(13,110,253,.25)}.btn.disabled,.btn:disabled{opacity:.65}a.btn.disabled{pointer-events:none}.btn-primary{background-color:#0d6efd;border-color:#0d6efd}.btn-primary.focus,.btn-primary:focus,.btn-primary:hover{background-color:#025ce2;border-color:#0257d5}.btn-primary.focus,.btn-primary:focus{color:#fff;box-shadow:0 0 0 .2rem rgba(49,132,253,.5)}.btn-primary.disabled,.btn-primary:disabled{background-color:#0d6efd;border-color:#0d6efd}.btn-primary:not(:disabled):not(.disabled).active,.btn-primary:not(:disabled):not(.disabled):active,.show>.btn-primary.dropdown-toggle{color:#fff;background-color:#0257d5;border-color:#0252c9}.btn-primary:not(:disabled):not(.disabled).active:focus,.btn-primary:not(:disabled):not(.disabled):active:focus,.show>.btn-primary.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(49,132,253,.5)}.btn-link{font-weight:400;color:#0d6efd;text-decoration:none}.btn-link:hover{color:#024dbc;text-decoration:underline}.btn-link.focus,.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link.disabled,.btn-link:disabled{color:#6c757d;pointer-events:none}.collapse:not(.show){display:none}.dropdown{position:relative}.dropdown-toggle{white-space:nowrap}.dropdown-toggle:after{margin-left:.255em;vertical-align:.255em;content:"";border-top:.3em solid;border-right:.3em solid transparent;border-bottom:0;border-left:.3em solid transparent}.dropdown-toggle:empty:after{margin-left:0}.dropdown-menu{position:absolute;top:100%;left:0;z-index:1000;display:none;min-width:10rem;padding:.5rem 0;margin:.125rem 0 0;font-size:1rem;color:#212529;text-align:left;list-style:none;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.15);border-radius:.25rem}.dropdown-item{display:block;width:100%;padding:.25rem 1.5rem;clear:both;font-weight:400;color:#212529;text-align:inherit;white-space:nowrap;background-color:transparent;border:0}.dropdown-item:focus,.dropdown-item:hover{color:#16181b;text-decoration:none;background-color:#f8f9fa}.dropdown-item.active,.dropdown-item:active{color:#fff;text-decoration:none;background-color:#0d6efd}.dropdown-item.disabled,.dropdown-item:disabled{color:#6c757d;pointer-events:none;background-color:transparent}.dropdown-menu.show{display:block}.nav{display:flex;flex-wrap:wrap;padding-left:0;margin-bottom:0;list-style:none}.navbar-toggler{padding:.25rem .75rem;font-size:1.25rem;line-height:1;background-color:transparent;border:1px solid transparent;border-radius:.25rem}.navbar-toggler:focus,.navbar-toggler:hover{text-decoration:none}.card{border:1px solid rgba(0,0,0,.125)}.card>hr{margin-right:0;margin-left:0}.card-body{flex:1 1 auto;min-height:1px;padding:1.25rem}.card-title{margin-bottom:.75rem}.card-text:last-child{margin-bottom:0}.card-header{padding:.75rem 1.25rem;background-color:rgba(0,0,0,.03);border-bottom:1px solid rgba(0,0,0,.125)}.card-header:first-child{border-radius:calc(.25rem - 1px) calc(.25rem - 1px) 0 0}.accordion>.card{overflow:hidden}.accordion>.card:not(:last-of-type){border-bottom:0;border-bottom-right-radius:0;border-bottom-left-radius:0}.accordion>.card:not(:first-of-type){border-top-left-radius:0;border-top-right-radius:0}.accordion>.card>.card-header{border-radius:0;margin-bottom:-1px}.badge{display:inline-block;padding:.25em .5em;font-size:.75em;font-weight:700;line-height:1;color:#fff;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25rem}.badge:empty{display:none}.btn .badge{position:relative;top:-1px}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}@keyframes progress-bar-stripes{0%{background-position-x:1rem}}.progress{display:flex;height:1rem;overflow:hidden;font-size:.75rem;background-color:#e9ecef;border-radius:.25rem}.list-group-item-action{width:100%;color:#495057;text-align:inherit}.list-group-item-action:focus,.list-group-item-action:hover{z-index:1;color:#495057;text-decoration:none;background-color:#f8f9fa}.list-group-item-action:active{color:#212529;background-color:#e9ecef}.list-group-item{position:relative;display:block;padding:.75rem 1.25rem;margin-bottom:0;background-color:#fff;border:1px solid rgba(0,0,0,.125)}.list-group-item:first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem}.list-group-item:last-child{border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.list-group-item.disabled,.list-group-item:disabled{color:#6c757d;pointer-events:none;background-color:#fff}.list-group-item.active{z-index:2;color:#fff;background-color:#0d6efd;border-color:#0d6efd}.list-group-item+.list-group-item{border-top-width:0}.list-group-item+.list-group-item.active{margin-top:-1px;border-top-width:1px}.list-group-flush .list-group-item{border-right-width:0;border-left-width:0;border-radius:0}.list-group-flush .list-group-item:first-child{border-top-width:0}.list-group-flush:last-child .list-group-item:last-child{border-bottom-width:0}.close{font-size:calc(1.275rem + .3vw);font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:.5}@media (min-width:1200px){.close{font-size:1.5rem}}.close:hover{color:#000;text-decoration:none}.close:not(:disabled):not(.disabled):focus,.close:not(:disabled):not(.disabled):hover{opacity:.75}button.close{padding:0;background-color:transparent;border:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}a.close.disabled{pointer-events:none}.tooltip{position:absolute;z-index:1070;display:block;margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-style:normal;font-weight:400;line-height:1.5;text-align:left;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-break:normal;word-spacing:normal;white-space:normal;line-break:auto;font-size:.875rem;word-wrap:break-word;opacity:0}.tooltip.show{opacity:.9}@-webkit-keyframes spinner-border{to{transform:rotate(1turn)}}@keyframes spinner-border{to{transform:rotate(1turn)}}@keyframes spinner-grow{0%{transform:scale(0)}50%{opacity:1}}.sr-only{position:absolute!important;width:1px!important;height:1px!important;padding:0!important;margin:-1px!important;overflow:hidden!important;clip:rect(0,0,0,0)!important;white-space:nowrap!important;border:0!important}.d-block{display:block!important}.d-flex{display:flex!important}.border{border:1px solid #dee2e6!important}.border-0{border:0!important}.border-bottom{border-bottom:1px solid #dee2e6!important}.w-100{width:100%!important}.h-100{height:100%!important}.flex-column{flex-direction:column!important}.justify-content-start{justify-content:flex-start!important}.justify-content-center{justify-content:center!important}.order-1{order:1!important}.order-last{order:6!important}.m-0{margin:0!important}.mx-auto{margin-right:auto!important;margin-left:auto!important}.my-0{margin-top:0!important;margin-bottom:0!important}.my-2{margin-top:.5rem!important;margin-bottom:.5rem!important}.my-3{margin-top:1rem!important;margin-bottom:1rem!important}.my-4{margin-top:1.5rem!important;margin-bottom:1.5rem!important}.mt-1{margin-top:.25rem!important}.mt-2{margin-top:.5rem!important}.mt-3{margin-top:1rem!important}.mt-4{margin-top:1.5rem!important}.mt-minus-4{margin-top:-1.5rem!important}.mt-5{margin-top:3rem!important}.mt-auto{margin-top:auto!important}.mr-0{margin-right:0!important}.mr-1{margin-right:.25rem!important}.mr-2{margin-right:.5rem!important}.mr-3{margin-right:1rem!important}.mb-1{margin-bottom:.25rem!important}.mb-2{margin-bottom:.5rem!important}.mb-3{margin-bottom:1rem!important}.mb-4{margin-bottom:1.5rem!important}.mb-5{margin-bottom:3rem!important}.ml-0{margin-left:0!important}.ml-1{margin-left:.25rem!important}.ml-3{margin-left:1rem!important}.mt-n3{margin-top:-1rem!important}.mb-n3{margin-bottom:-1rem!important}.p-4{padding:1.5rem!important}.px-0{padding-right:0!important;padding-left:0!important}.px-2{padding-right:.5rem!important;padding-left:.5rem!important}.px-3{padding-right:1rem!important;padding-left:1rem!important}.px-4{padding-right:1.5rem!important;padding-left:1.5rem!important}.py-0{padding-top:0!important;padding-bottom:0!important}.py-2{padding-top:.5rem!important;padding-bottom:.5rem!important}.py-3{padding-top:1rem!important;padding-bottom:1rem!important}.py-4{padding-top:1.5rem!important;padding-bottom:1.5rem!important}.py-5{padding-top:3rem!important;padding-bottom:3rem!important}.pt-2{padding-top:.5rem!important}.pt-3{padding-top:1rem!important}.pt-4{padding-top:1.5rem!important}.pt-5{padding-top:3rem!important}.pt-6{padding-top:3.5rem!important}.pr-0{padding-right:0!important}.pb-0{padding-bottom:0!important}.pb-1{padding-bottom:.25rem!important}.pb-2{padding-bottom:.5rem!important}.pb-3{padding-bottom:1rem!important}.pb-4{padding-bottom:1.5rem!important}.pb-5{padding-bottom:3rem!important}.pl-0{padding-left:0!important}.pl-2{padding-left:.5rem!important}.font-weight-bold{font-weight:700!important}.text-uppercase{text-transform:uppercase!important}.text-left{text-align:left!important}.text-right{text-align:right!important}.text-center{text-align:center!important}.text-primary{color:#0d6efd!important}.text-success{color:#28a745!important}.text-danger{color:#dc3545!important}.text-white{color:#fff!important}.text-muted{color:#6c757d!important}.bg-light{background-color:#f8f9fa!important}.bg-white{background-color:#fff!important}.rounded{border-radius:.25rem!important}.rounded-0{border-radius:0!important}.visible{visibility:visible!important}@media (min-width:576px){.mx-sm-3{margin-right:1rem!important;margin-left:1rem!important}}@media (min-width:768px){.flex-md-row{flex-direction:row!important}.justify-content-md-center{justify-content:center!important}.order-md-1{order:1!important}.order-md-last{order:6!important}.pt-md-0{padding-top:0!important}}@media (min-width:992px){.pr-lg-5{padding-right:3rem!important}.pl-lg-5{padding-left:3rem!important}}@font-face{font-family:Montserrat;font-style:normal;font-weight:600;font-display:swap;src:local("Montserrat Medium"),local("Montserrat-Medium"),url(https://fonts.gstatic.com/s/montserrat/v14/JTURjIg1_i6t8kCHKm45_dJE3gnD_vx3rCs.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:local("Montserrat Bold"),local("Montserrat-Bold"),url(https://fonts.gstatic.com/s/montserrat/v14/JTURjIg1_i6t8kCHKm45_dJE3gnD_vx3rCs.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Montserrat;font-style:normal;font-weight:900;font-display:swap;src:local("Montserrat Black"),local("Montserrat-Black"),url(https://fonts.gstatic.com/s/montserrat/v14/JTURjIg1_i6t8kCHKm45_epG3gnD_vx3rCs.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Roboto;font-style:normal;font-weight:300;font-display:swap;src:local("Roboto Light"),local("Roboto-Light"),url(https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmSU5fBBc4AMP6lQ.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Roboto;font-style:normal;font-weight:500;font-display:swap;src:local("Roboto Medium"),local("Roboto-Medium"),url(https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmEU9fBBc4AMP6lQ.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Roboto;font-style:normal;font-weight:700;font-display:swap;src:local("Roboto Bold"),local("Roboto-Bold"),url(https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmWUlfBBc4AMP6lQ.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}.awesomplete [hidden]{display:none}.awesomplete .visually-hidden{position:absolute;clip:rect(0,0,0,0)}.awesomplete{display:inline-block}.awesomplete>input{display:block}.awesomplete>ul{position:absolute;left:0;z-index:1;min-width:100%;box-sizing:border-box;list-style:none;padding:0;margin:0;background:#fff}.awesomplete>ul:empty{display:none}.awesomplete>ul{border-radius:.3em;margin:.2em 0 0;background:hsla(0,0%,100%,.9);background:linear-gradient(to bottom right,#fff,hsla(0,0%,100%,.8));border:1px solid rgba(0,0,0,.3);box-shadow:.05em .2em .6em rgba(0,0,0,.2);text-shadow:none}@supports (transform:scale(0)){.awesomplete>ul{transition:.3s cubic-bezier(.4,.2,.5,1.4);transform-origin:1.43em -.43em}.awesomplete>ul:empty,.awesomplete>ul[hidden]{opacity:0;transform:scale(0);display:block;transition-timing-function:ease}}.awesomplete>ul:before{content:"";position:absolute;top:-.43em;left:1em;width:0;height:0;padding:.4em;background:#fff;border:inherit;border-right:0;border-bottom:0;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.awesomplete>ul>li{position:relative;padding:.2em .5em;cursor:pointer}.awesomplete>ul>li:hover{background:#b8d3e0;color:#000}.awesomplete>ul>li[aria-selected=true]{background:#3d6d8f;color:#fff}.awesomplete mark{background:#eaff00}.awesomplete li:hover mark{background:#b5d100}.awesomplete li[aria-selected=true] mark{background:#3d6b00;color:inherit}.featured-content .news-wrap,.header-wrap,.learn-more-links .faq-twitter-wrap,faq-section .faq-twitter-wrap,footer-section .footer-section-grid,hero-stats .hero-wrap,learn-more-section .faq-twitter-wrap,news-section .news-wrap,video-section .video-wrap{width:100%;max-width:81.25rem;margin:0 auto;position:relative}.featured-content .news,.learn-more-links .faq-twitter,faq-section .faq-twitter,footer-section .footer-section,learn-more-section .faq-twitter,news-section .news,video-section .video{padding:2.5rem 1.5rem}@media (min-width:48rem){.featured-content .news,.learn-more-links .faq-twitter,faq-section .faq-twitter,footer-section .footer-section,learn-more-section .faq-twitter,news-section .news,video-section .video{padding:4rem 2rem}}@media (min-width:81.25rem){.featured-content .news,.learn-more-links .faq-twitter,faq-section .faq-twitter,footer-section .footer-section,learn-more-section .faq-twitter,news-section .news,video-section .video{padding:5rem 2rem}}@media (min-width:100rem){.featured-content .news,.learn-more-links .faq-twitter,faq-section .faq-twitter,footer-section .footer-section,learn-more-section .faq-twitter,news-section .news,video-section .video{padding:8rem 2rem}}@media (min-width:112.5rem){.featured-content .news,.learn-more-links .faq-twitter,faq-section .faq-twitter,footer-section .footer-section,learn-more-section .faq-twitter,news-section .news,video-section .video{padding:10rem 2rem}}hero-stats .hero-headline{font-family:Montserrat,sans-serif;font-size:2rem}@media (min-width:48rem){hero-stats .hero-headline{font-size:2.2rem}}@media (min-width:81.25rem){hero-stats .hero-headline{font-size:2.5rem}}@media (min-width:100rem){hero-stats .hero-headline{font-size:2.8rem}}@media (min-width:112.5rem){hero-stats .hero-headline{font-size:3.2rem}}footer-section .footer-section-hotline-number{font-family:Montserrat,sans-serif;font-size:1.5rem;line-height:1.1}@media (min-width:48rem){footer-section .footer-section-hotline-number{font-size:1.8rem}}@media (min-width:81.25rem){footer-section .footer-section-hotline-number{font-size:2.1rem}}@media (min-width:100rem){footer-section .footer-section-hotline-number{font-size:2.4rem}}@media (min-width:112.5rem){footer-section .footer-section-hotline-number{font-size:2.7rem}}.header-logo-text-url,footer-section .footer-section-hotline-label{font-family:Montserrat,sans-serif;font-size:1.25rem}@media (min-width:48rem){.header-logo-text-url,footer-section .footer-section-hotline-label{font-size:1.35rem}}@media (min-width:81.25rem){.header-logo-text-url,footer-section .footer-section-hotline-label{font-size:1.45rem}}@media (min-width:100rem){.header-logo-text-url,footer-section .footer-section-hotline-label{font-size:1.55rem}}@media (min-width:112.5rem){.header-logo-text-url,footer-section .footer-section-hotline-label{font-size:1.7rem}}.featured-content .news-item-headline,.learn-more-links .faq-item-headline,news-section .news-item-headline{font-family:Montserrat,sans-serif;font-size:1rem}@media (min-width:48rem){.featured-content .news-item-headline,.learn-more-links .faq-item-headline,news-section .news-item-headline{font-size:1.1rem}}@media (min-width:81.25rem){.featured-content .news-item-headline,.learn-more-links .faq-item-headline,news-section .news-item-headline{font-size:1.2rem}}@media (min-width:100rem){.featured-content .news-item-headline,.learn-more-links .faq-item-headline,news-section .news-item-headline{font-size:1.3rem}}@media (min-width:112.5rem){.featured-content .news-item-headline,.learn-more-links .faq-item-headline,news-section .news-item-headline{font-size:1.4rem}}footer-section .footer-section-nav-link{font-family:Montserrat,sans-serif;font-size:1rem}@media (min-width:48rem){footer-section .footer-section-nav-link{font-size:1.1rem}}@media (min-width:81.25rem){footer-section .footer-section-nav-link{font-size:1.15rem}}@media (min-width:100rem){footer-section .footer-section-nav-link{font-size:1.2rem}}@media (min-width:112.5rem){footer-section .footer-section-nav-link{font-size:1.25rem}}.header-logo-text-title{font-family:Montserrat,sans-serif;font-size:.9rem}@media (min-width:48rem){.header-logo-text-title{font-size:1rem}}@media (min-width:81.25rem){.header-logo-text-title{font-size:.95rem}}@media (min-width:100rem){.header-logo-text-title{font-size:1rem}}@media (min-width:112.5rem){.header-logo-text-title{font-size:1.1rem}}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}button,input[type=email],input[type=number],input[type=submit],input[type=tel],input[type=text],input[type=url],textarea{-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:0}#content[tabindex="-1"]:focus{outline:0}address{font-style:normal}html{line-height:1.15;-webkit-text-size-adjust:100%}body,figure,h1,h2,h3,h4,h5,ol,p,ul{margin:0}button,input[type=button i],input[type=file i]::-webkit-file-upload-button,input[type=reset i],input[type=submit i]{padding:0}main{display:block}b,strong{font-weight:700}code{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;top:-.5em}img{border-style:none}button,input,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:2px solid #ffcf44}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}[hidden]{display:none}body{color:#000;font-family:Roboto,sans-serif;font-weight:500;font-size:1.2rem}html{scroll-behavior:smooth}.h1,.h2,.h3,.h4,.h5,h1,h2,h3,h4,h5{color:#000;font-family:Montserrat,sans-serif;font-weight:700}.h1,h1{font-size:2.3rem;margin-top:3.45rem;margin-bottom:2.18rem}.h1{color:#1f2574}.h2,h2{font-size:2rem;margin-top:3rem;margin-bottom:2rem}.h3,h3{font-size:1.5rem;margin-top:2.25rem;margin-bottom:1.1875rem}.h3,.h4,h3,h4{font-family:Roboto,sans-serif!important}.h4,h4{margin-top:2rem;margin-bottom:1.15rem;font-size:1.4rem}.h5,h5{font-size:.8rem}img{max-width:100%;height:auto}sup{font-size:normal!important;font-family:Roboto,sans-serif;font-weight:300}hr{border-top:1px solid #f0f0f0;margin:3rem 0}p,ul{margin-bottom:1.2rem}.list-group-item,li,p{font-size:auto!important}.bg-darkblue,.bg-purple{background-color:#1f2574!important;background:#1f2574!important}.bg-blue{background-color:#003d9d!important;background:#003d9d!important}.bg-lightblue{background-color:#f2f5fc!important}.color-primary,.color-purple{color:#1f2574!important}.bg-blue{color:#003d9d!important}.color-yellow{color:#ffcf44!important}.color-orange{color:#ff8000!important}.color-white{color:#fff!important}.color-secondary,.color-secondary-hover:focus,.color-secondary-hover:hover{color:#92c5de!important}.bullet-orange li{list-style:none;position:relative;margin-bottom:.7rem}.bullet-orange li:before{content:"";background:#ff8000;width:1rem;height:1rem;border-radius:50%;display:inline-block;margin-right:.5rem;position:absolute;top:7px;left:-30px}.fill-orange{fill:#ff8000!important}.list-group-flush a,a,a:hover,a:visited{color:#004abc}a,a:visited{text-decoration:underline}.action-link,a:hover{text-decoration:none}.action-link{color:#004abc;background:#92c5de;display:inline-block;padding:.5rem;font-size:1.2rem;line-height:2rem;margin-bottom:1rem;margin-top:1rem}.interior-page a.action-link{text-decoration:none}.action-link,.action-link:after{background-size:1rem;background-repeat:no-repeat;background-position-x:.4rem;background-position-y:center}.action-link:hover{color:#fff!important;background-color:#003d9d}th{font-family:Montserrat,sans-serif;font-weight:700}.table{color:#000;margin-bottom:2rem}.table thead th{background:#f0f0f0}.card .table thead th{background:transparent}.grid-layout-hd{display:grid;grid-gap:1px;grid-row-gap:1px;padding:0;grid-template-columns:1fr 1fr 1fr 1fr}.grid-main{grid-column:1/5;-ms-grid-column:1;-ms-grid-column-span:4}.grid-main,.grid-single{background-color:#fff;padding:20px;margin:0;text-align:center}.grid-main{padding:20px 0 0}@media (max-width:900px){.grid-layout-hd{width:500px;grid-template-columns:1fr}.grid-main{grid-column:1/1}}.bold,strong{font-family:Roboto,sans-serif;font-weight:700}a.list-group-item{padding:20px}a.list-group-item-action{color:#000;text-decoration:none}.list-group-item-action{color:#000}a.list-group-item.list-group-item-action{color:#004abc;border-bottom:solid;border-top:1px solid rgba(0,0,0,.125);border-bottom-left-radius:0;border-bottom-right-radius:0;margin:9px;font-size:1.25rem}a.list-group-item.list-group-item-action.guide{color:#000;margin:0;border-radius:0;border:1px solid rgba(0,0,0,.125);border-top:0 solid rgba(0,0,0,.125)}.list-group-item.list-group-item-action.guide.active{background:linear-gradient(60deg,#1f2574,#003d9d 70%)}a.list-group-item.list-group-item-action.guide:first-child{border-top:1px solid rgba(0,0,0,.125);border-top-left-radius:.25rem;border-top-right-radius:.25rem}a.list-group-item.list-group-item-action.guide:last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.list-group-item:first-child{border-top-left-radius:0;border-top-right-radius:0}.list-group-item{border-color:#ccc}.list-group-item-action:focus,.list-group-item-action:hover{z-index:1;color:#000;text-decoration:none;background-color:#f8f9fa}.list-group-flush.list-group-item{font-family:Montserrat,sans-serif;font-weight:700}.alert{border:0}.alert-left{border-left:4px solid #ffcf44;margin-left:1rem;margin-bottom:1.5rem;margin-top:1.5rem}.card-header{margin-bottom:0;background-color:#f0f0f0;padding-right:12%;border:none}.card{position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word;background-color:#fff;background-clip:border-box;border:1px solid #f0f0f0;border-radius:.25rem}.card-body{padding:.75rem 1.25rem}.card .btn-link{font-family:Roboto,sans-serif;font-weight:500;color:#000;background-color:transparent}.card .btn-link,.card p{font-size:1.125rem}.wrimagecard{margin-top:0;margin-bottom:1.5rem;text-align:left;position:relative;background:#fff;border:1px solid #f0f0f0;border-radius:4px;transition:all .3s ease}.wrimagecard-topimage_header{background:#f0f0f0;padding:10% 20px 20px}.wrimagecard-topimage a{width:100%;height:100%;display:block;border-bottom:none;text-decoration:none;color:#000;transition:color .3s ease}.jumbotron{background:#f0f0f0;border-bottom:0;margin-bottom:2%;padding-bottom:1.2%;padding-top:2%}.jumbotron h1{font-size:2.3rem;margin-top:0;margin-bottom:1.2rem}.jumbotron,.jumbotron .lead,.jumbotron h1{color:#fff}.jumbotron.alpha{background:#1f2574;background:linear-gradient(60deg,#1f2574,#003d9d 70%);color:#fff}.jumbotron img{width:100%;height:auto;max-width:75px;padding:10px 0}.official{background:#f0f0f0;padding:3px 0}.official a,.official a:hover,.official a:visited{color:#000}.official p{background-image:url(https://www.alpha.ca.gov/img/ca-flag.png);background-repeat:no-repeat;background-position:5px 50%;background-size:contain;margin:0;padding:0 0 0 65px}.official img{margin-right:10px;max-width:40px}.footer{border-top:1px solid #f0f0f0;background-color:#fff;padding-bottom:40px;padding-top:50px}.footer,.footer a,.footer a:hover,.footer a:visited{color:#000}.feedback{margin-top:3rem}.form-control:focus{outline:0;box-shadow:0 0 0 .2rem #0257d5;color:#000}form{padding-bottom:2rem}.form-control,form.form-inline input[type=text],label{margin-right:.5rem}label{padding-bottom:.75rem}.btn{font-family:Roboto,sans-serif;font-weight:500}.footer,.official{font-size:1rem}.summary-box{height:90%}.list-group-item-action:focus{outline:2px solid #ffcf44;box-shadow:0 0 0 .2rem #fff}.wp-block-separator{width:100vw;margin-left:calc(50% - 50vw);border-top:1px solid #000;margin-top:5rem;margin-bottom:5rem}.display-4{font-family:Montserrat,sans-serif;font-weight:700}.card{margin-bottom:20px}.card-set .card{min-width:200px;float:left}.card-set{grid-gap:20px}figure{margin-bottom:10px}li .action-link:focus-within{outline:2px solid #ffcf44}.bg-light{padding:.75rem}.d-none{display:none}.aside{padding-bottom:1rem}.aside,.more{padding-top:1rem}.more{margin-top:3rem;border-top:2px solid #ccc;font-size:1.5rem;font-family:Roboto,sans-serif;font-weight:700}.awesomplete{display:contents;position:relative;margin-right:.5rem}.form-control{border:1px solid #000;border-radius:0}.tooltip-container{position:relative;display:inline-block}.list-group-item-action.list-group-item.active{background-color:#1f2574;border-color:#000;color:#fff}label{margin-bottom:auto;vertical-align:middle}button#dropdown-menu-button{border:1px solid #f0f0f0;background:#1f2574;color:#fff}button#dropdown-menu-button:focus,button#dropdown-menu-button:hover{background-color:#003d9d;border-color:#003d9d}button#dropdown-menu-button:focus{outline:2px solid #fff;box-shadow:none}.card-header{padding:.75rem}.card-body{padding:.55rem .45rem .55rem .75rem}@media (min-width:768px){.official p{padding:3px 0 3px 60px}}@media (max-width:767.98px){.container-fluid.jumbotron{padding-left:0}.container-fluid.jumbotron.alpha{padding-left:15px}.card-body{padding:5px}.form-control{margin-bottom:1rem}}.mb-0{margin-bottom:0!important}.mt-0{margin-top:0!important}.underline{text-decoration:underline!important}.no-underline{text-decoration:none!important}.rounded-50{border-radius:50px!important}.font-size-1-5em{font-size:1.5rem!important}.font-size-1-2em{font-size:1.2rem!important}.font-size-1em{font-size:1rem!important}.line-height-1-2{line-height:1.2em}.line-height-1-5{line-height:1.5em}body.interior-page figure,body.interior-page ol,body.interior-page ul{margin-bottom:1rem}a{background-color:transparent}font{pointer-events:none}.bg-transparent{background-color:transparent!important}.small-text,.text-sm{font-size:.95rem!important}.text-small{font-size:.85rem!important}ul.small-text{line-height:1.5rem}.caption{font-size:.95rem!important;line-height:1.5;margin-bottom:.95rem}.text-xs{font-size:.75rem!important}.text-black{color:#000!important}.bg-purple-alert{background-color:#e6d5e1!important}.bg-red-alert{background-color:#f3d8dd!important}.bg-orange-alert{background-color:#f7e4d9!important}.bg-yellow-alert{background-color:#faf1d7!important}.bg-purple-btn{background-color:#802f67!important}.bg-red-btn{background-color:#c43d53!important}.bg-orange-btn{background-color:#d97641!important}.bg-yellow-btn{background-color:#e6b735!important}.p-rel{position:relative!important}.px-6px{padding-left:6px!important;padding-right:6px!important}.px-10px{padding-left:10px!important;padding-right:10px!important}.ptop-12px{padding-top:12px!important}.pos-rel{position:relative}.bd-lightblue{border:2px solid #f2f5fc!important}.bd-top-darkblue{border-top:1px solid #1f2574}.bd-rounded-10{border-radius:10px}.has-text-align-center{text-align:center!important}.text-300{font-weight:300!important}.text-700{font-weight:700!important}@media (max-width:767.98px){.text-300{font-weight:300!important}}.emphasized{font-size:1.45rem!important;margin-top:2.18rem;margin-bottom:1.45rem}.highlight{box-shadow:0 0 5px 2px rgba(0,0,0,.14);border-bottom:8px solid #ff8000;padding:32px 40px 40px;background-color:#fff}.link-icon{font-size:.85rem;padding-left:2px;text-decoration:none}.link-icon,.pdf-link-icon{position:relative;top:-3px;display:inline-block}.pdf-link-icon{font-family:Roboto,sans-serif;font-size:.6rem;font-weight:400;outline:1px solid;outline-offset:-2px;padding:1px 4px 0;left:1px;line-height:.9rem}.no-underline-icon{display:inline-block;text-decoration:none}.toc{list-style:none;font-size:1.2rem;font-weight:700;padding-left:7px}.toc li{color:#1f2574;line-height:1.5rem;margin-top:.4rem;margin-bottom:.6rem;text-indent:-1.3rem;padding-left:10px}.toc li:before{font-family:CaGov;content:"\35";position:relative;font-size:1.5rem;top:3px;right:4px}.toc li a:hover{text-decoration:none}.sr-only{text-indent:-10000px;height:unset!important;width:unset!important}.list-can{list-style:none;padding:0;margin:12px 0 10px;line-height:1.5}.list-can li{padding:1rem .5rem 1rem 2.5rem;margin:0;border-bottom:1px solid #000}.list-can li:first-child{border-top:1px solid #000}.list-can li:before{content:"\4e";font-family:CaGov;height:1rem;width:2.5rem;margin-left:-2.5rem;vertical-align:sub;font-size:1.5rem;display:inline-block;color:#1f2574;position:relative;top:-3px}.list-should{list-style:none;padding:0;margin:12px 0 10px;line-height:1.5}.list-should li{padding:1rem .5rem 1rem 2.5rem;margin:0;border-bottom:1px solid #000}.list-should li:first-child{border-top:1px solid #000}.list-should li:before{content:"\e94e";font-family:CaGov;height:1rem;width:2.5rem;margin-left:-2.5rem;vertical-align:sub;font-size:1.5rem;display:inline-block;color:#1f2574;position:relative;top:-3px}.jumbotron{background-color:#1f2574;color:#fff;text-align:center}h1{color:#1f2574}.jumbotron .lead,.jumbotron h1,.jumbotron h2,.jumbotron h3,.jumbotron p{color:#fff}a.btn{background:#1f2574}a.btn:hover{border-color:#003d9d}.bold{font-family:Roboto,sans-serif;font-weight:700}a.list-group-item.list-group-item-action{border-radius:.25rem;border-radius:0;border-top:0;border-left:0;border-right:0}a.list-group-item{padding:15px}ol,ul{line-height:2rem}.text-primary{color:#1f2574!important}.text-white a{color:#fff}.text-primary a,.text-white a.action-link{color:#1f2574}.wrimagecard.wrimagecard-topimage a:focus{outline:2px solid #003d9d}.wrimagecard-topimage_header{min-height:15rem}a.list-group-item.list-group-item-action{color:#1f2574}.translate{margin-top:.3rem}a.dropdown-item{font-size:1.1rem}.show{text-decoration:none!important;float:none!important}.list-group-item.list-group-item-action.guide.active{background:#1f2574;border-color:#1f2574;color:#fff}.list-group-item.list-group-item-action ul li a{text-decoration:none}a.list-group-item.list-group-item-action.guide{color:#1f2574}a.list-group-item.list-group-item-action{border-bottom:1px solid}.text-sm{font-size:.9rem!important}a.list-group-item.list-group-item-action{text-indent:-25px;padding-left:35px;padding-right:0}.jumbotron img{max-width:130px}.jumbotron a:focus{outline:2px solid #fff}a .wrimagecard-topimage_header h3{text-decoration:underline;color:#1f2574;font-size:1.5rem}a:hover .wrimagecard-topimage_header h3{text-decoration:none;font-size:1.5rem}.bg-light{background-color:#f1f1f1}.bg-secondary-covid{background-color:#f2f5fc}a,a:hover,a:visited{color:#1f2574}.wrimagecard p{color:#000}.list-group-flush .list-group-item{text-indent:-24px;padding-left:27px}.footer a,.footer a:hover,.footer a:visited{color:#000}.footer a:focus,a:focus,ol a:focus,p a:focus,ul a:focus{outline:2px solid #ffcf44}.action-link,a .card-title{color:#1f2574}.action-link{border-radius:50px;padding:.5rem 1.5rem}.card-header-multi{justify-content:space-between;display:flex;padding-right:2%}.card-text a:hover{background-image:none}.action-link.mr-30{margin-right:30px}button:focus,input:focus{outline:2px solid #ffcf44}.accordion-title{padding-bottom:0!important}.accordion-title,.aside{padding-top:0!important}.form-inline.form-inline-left label{justify-content:left}a.list-group-item.list-group-item-action{font-size:1.15rem}.aside{padding-bottom:0!important}.wrimagecard-topimage_header{min-height:14.5rem}.accordion-title{padding-left:0!important}a.card,a:visited.card{text-decoration:none!important}.text-larger{font-size:1.4rem!important}@media (max-width:767.98px){.jumbotron h1{font-size:2rem}body{font-size:1rem}.jumbotron img{display:none}.wrimagecard-topimage_header.text-center{min-height:auto!important}cagov-accordion .card .card-container .card-body{padding:0!important}.aside{padding-bottom:0!important}cagov-accordion a.list-group-item.list-group-item-action.guide:last-child{border-radius:0!important}.card-body{padding:.75rem 1.25rem}.text-center-mobile{text-align:center!important}}@media (min-width:768px){.no-webp .jumbo-img{background-image:linear-gradient(180deg,#1f2574 0,rgba(31,37,116,0) 20%),url(/img/hero.jpg)}}@media only screen and (min-width:992px){.aside{position:sticky;z-index:2;height:fit-content;top:2rem}}@media (min-width:1200px){.h4,h4{font-size:1.3rem}.h3,h3{font-size:1.5rem}}.jumbotron+.container{padding-top:1.5rem;padding-bottom:2.5rem}@media (max-width:64rem){.jumbotron.jumbo-img .container{padding-top:1.5rem;padding-bottom:1.5rem}}@media (min-width:48rem){.jumbotron.jumbo-img .container{padding-top:2rem;padding-bottom:1.5rem}}.jumbotron.jumbo-img{text-align:center}.col-lg-10.mx-auto h2{color:#1f2574;text-align:center}@font-face{font-family:CaGov;src:url(/fonts/CaGov.woff2) format("woff2"),url(/fonts/CaGov.woff) format("woff");font-weight:400;font-style:normal;font-display:swap}[class*=" ca-gov-icon-"],[class^=ca-gov-icon-]{font-family:CaGov!important;speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.ca-gov-icon-agriculture:before{content:"\e973"}.ca-gov-icon-amusement:before{content:"\e9ab"}.ca-gov-icon-building:before{content:"\e0fd"}.ca-gov-icon-car-alt:before{content:"\e9b5"}.ca-gov-icon-check-list:before{content:"\e651"}.ca-gov-icon-check-mark:before{content:"\4e"}.ca-gov-icon-close-line:before{content:"\51"}.ca-gov-icon-close-mark:before{content:"\4d"}.ca-gov-icon-compass:before{content:"\e633"}.ca-gov-icon-cubes:before{content:"\e999"}.ca-gov-icon-digging:before{content:"\e989"}.ca-gov-icon-electricity-hazard:before{content:"\e95c"}.ca-gov-icon-entertainment:before{content:"\e9bb"}.ca-gov-icon-external-link:before{content:"\e9ed"}.ca-gov-icon-family-alt:before{content:"\e9bd"}.ca-gov-icon-fastfood:before{content:"\e9be"}.ca-gov-icon-fitness:before{content:"\e9c0"}.ca-gov-icon-flowchart:before{content:"\e0df"}.ca-gov-icon-hair:before{content:"\e9c2"}.ca-gov-icon-hand-heart:before{content:"\e99a"}.ca-gov-icon-house:before{content:"\e64c"}.ca-gov-icon-institute:before{content:"\e93b"}.ca-gov-icon-map:before{content:"\e083"}.ca-gov-icon-mobile:before{content:"\e944"}.ca-gov-icon-museum:before{content:"\e9c5"}.ca-gov-icon-nail-polish:before{content:"\e9f1"}.ca-gov-icon-payment-card:before{content:"\e645"}.ca-gov-icon-rail:before{content:"\e9cb"}.ca-gov-icon-read-book:before{content:"\e655"}.ca-gov-icon-reader:before{content:"\e985"}.ca-gov-icon-restaurant:before{content:"\e9cc"}.ca-gov-icon-road:before{content:"\e9cd"}.ca-gov-icon-science:before{content:"\e00a"}.ca-gov-icon-ship:before{content:"\e9d1"}.ca-gov-icon-shopping-cart:before{content:"\e635"}.ca-gov-icon-soccer:before{content:"\e9f4"}.ca-gov-icon-stay-home:before{content:"\e9a4"}.ca-gov-icon-teleworking:before{content:"\e9a5"}.ca-gov-icon-tent:before{content:"\e969"}.ca-gov-icon-testing-alt:before{content:"\e9a7"}.ca-gov-icon-truck-delivery:before{content:"\e627"}.ca-gov-icon-user-desk:before{content:"\ea0d"}.ca-gov-icon-users:before{content:"\e950"}.ca-gov-icon-video-camera:before{content:"\e636"}.ca-gov-icon-warning-circle:before{content:"\e967"}.ca-gov-icon-warning-triangle:before{content:"\e063"}.ca-gov-icon-zoo:before{content:"\e9db"}cwds-step-list{padding-top:5px;display:block}cwds-step-list li .details{height:0;overflow:hidden;transition:height .3s}.hide,.show{float:right;font-size:15px;color:#004abc;text-decoration:underline}.show-all{padding-right:.5rem;text-align:right;margin-top:-1.6rem;float:right;font-size:1rem}cwds-step-list li .hide,cwds-step-list li.list-group-item.list-open>div>span.hide,cwds-step-list li.list-open .show{display:none}cwds-step-list li.list-open .hide{display:block}cwds-step-list button.step-description{background:transparent;border:none;text-indent:-45px;padding-left:45px}.list-group-item-action:active :hover,.list-group-item-action:hover{color:#000}.list-group-item.active{background-color:#e5e8e4;border-color:#e5e8e4;background-color:#efefef;border-color:#efefef;color:#000}.list-group-item.active>a{color:#073984}cwds-step-list li.list-group-item:focus-within{outline:2px solid #0257d5;z-index:2;background:rgba(215,230,252,.2)}.cwds-step-list{margin-bottom:3rem}cwds-step-list li .details[data-collapsed=true]{visibility:hidden}cwds-step-list ul{margin-left:-.5rem}@supports (-ms-ime-align:auto){.step-description:focus,button.card-header:focus{outline:2px solid #0257d5;z-index:2}}@media (max-width:767.98px){cwds-step-list{padding-top:30px;display:block}}.video-thumb-link{display:block}.video-thumb-link:focus{outline:2px solid #ffcf44}.video-thumb-photo{background:#003d9d;position:relative;margin:0;overflow:hidden}.video-thumb-photo-img{width:100%}.video-thumb-play-button{position:absolute;left:50%;top:50%;transform:translateX(-50%) translateY(-50%);background:hsla(0,0%,100%,.5);z-index:250;width:5rem;height:5rem;border:4px solid #ff8000;border-radius:50%;padding:.9rem .5rem .5rem 1.2rem;margin:0 auto 1rem;transition:border-color .3s}.video-thumb-play-button-icon{width:100%;max-height:4rem;fill:#ff8000;position:relative;left:.2rem}.video-thumb-play-button:hover{border-color:#003d9d}.video-thumb-play-button:hover .video-thumb-play-button-icon{fill:#003d9d}.video-thumb-play-button:focus{outline:2px solid #ffcf44}.video-modal{position:fixed;overflow:auto;z-index:100001;width:100%;height:100%;top:0;left:0;text-align:center}.video-modal-content{width:80%;max-width:1200px;box-shadow:0 .5rem 1.5rem 0 rgba(0,0,0,.3);background:#003d9d;display:block;transition:all .3s ease-in-out;transition-delay:.2s;position:absolute;left:50%;top:50%;transform:scale(.9) translateX(-50%) translateY(-50%)}.video-modal-player{background:#000;position:relative;padding-top:56.25%;padding-right:5rem;padding-left:5rem;z-index:100}.video-modal-player embed,.video-modal-player iframe,.video-modal-player object{position:absolute;left:0;top:0;width:100%;height:100%}.video-modal-close{position:absolute;top:50%;right:0;z-index:1000;display:block;width:3em;height:3em;padding:.75em;border-radius:50%;cursor:pointer;border:none;background:#ecca00;color:#fff;transform:translateX(50%) translateY(-50%);transition:all .3s ease-in-out}@media (min-height:700px){.video-modal-close{top:0}}.video-modal-close-svg{fill:#fff;width:1.5em;max-height:3rem}.video-modal-close:hover{background:#ff8000}.popup_background{background:#1f2574;opacity:0;visibility:hidden;position:fixed;width:100%;height:100%;top:0;right:0;bottom:0;left:0;z-index:1}.popup_visible{overflow:hidden}.popup_visible .video-modal{opacity:1;visibility:visible;z-index:100000000}.popup_visible .video-modal-content{opacity:1;visibility:visible;transform:scale(1) translateX(-50%) translateY(-50%)}.popup_visible .popup_background{opacity:1;visibility:visible;z-index:100000}.cwdsarrow-arrow,.cwdsarrow-circle{position:absolute;transition:1.2s cubic-bezier(.15,.92,.14,.95);-webkit-backface-visibility:hidden;backface-visibility:hidden}.cwdsarrow-circle{width:100%;height:100%;border-radius:100%;border-style:solid;overflow:hidden;top:0;right:0;bottom:0;left:0}.cwdsarrow-arrow{left:50%;top:50%;transform:translate(-50%,-50%)}.cwdsarrow-arrow:last-of-type{transform:translate(-275%,-50%)}.cwdsarrow-arrow-wrapper{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;overflow:hidden}.cwdsarrow-arrow-svg{position:relative;display:block;width:100%}.cwdsarrow-arrow-svg-art{width:100%;height:100%;position:absolute;top:0;right:0;bottom:0;left:0;display:block}.cwdsarrow{margin-left:auto;position:relative;z-index:100;display:flex;align-items:center;justify-content:center}.cwdsarrow-parent:focus .cwdsarrow-circle,.cwdsarrow-parent:hover .cwdsarrow-circle{transform:scale(1.2)}.cwdsarrow-parent:focus .cwdsarrow-arrow,.cwdsarrow-parent:hover .cwdsarrow-arrow{transform:translate(275%,-50%)}.cwdsarrow-parent:focus .cwdsarrow-arrow:last-of-type,.cwdsarrow-parent:hover .cwdsarrow-arrow:last-of-type{transform:translate(-50%,-50%)}.cwdsarrow-size-sm .cwdsarrow-arrow{width:16px;min-width:16px;height:1rem}@media (min-width:112.5rem){.cwdsarrow-size-sm .cwdsarrow-arrow{width:.75vw;min-width:.75vw}}.cwdsarrow-size-sm .cwdsarrow-circle{border-width:1px}.cwdsarrow-size-sm .cwdsarrow-arrow-svg{height:1rem}.cwdsarrow-size-sm.cwdsarrow{width:40px;height:40px;min-width:40px;min-height:40px}@media (min-width:48rem){.cwdsarrow-size-sm.cwdsarrow{width:30px;height:30px;min-width:30px;min-height:30px}}@media (min-width:81.25rem){.cwdsarrow-size-sm.cwdsarrow{width:35px;height:35px;min-width:35px;min-height:35px}}@media (min-width:112.5rem){.cwdsarrow-size-sm.cwdsarrow{width:40px;height:40px;min-width:40px;min-height:40px}}.cwdsarrow-idle-orange .cwdsarrow-circle{border-color:#ff8000}.cwdsarrow-idle-orange.cwdsarrow{color:#ff8000}.cwdsarrow-parent:focus .cwdsarrow-focus-darkblue.cwdsarrow{color:#1f2574!important}.cwdsarrow-parent:focus .cwdsarrow-focus-darkblue .cwdsarrow-circle{background:#c7e1ef!important;border-color:#1f2574!important}.cwdsarrow-parent:hover .cwdsarrow-hover-darkblue.cwdsarrow{color:#1f2574}.cwdsarrow-parent:hover .cwdsarrow-hover-darkblue .cwdsarrow-circle{background:#fff;border-color:#1f2574}.header-language-arrow{margin-left:.5rem;fill:#ff8000;width:.75rem;max-height:1rem;margin-left:.25rem;transition:all .6s cubic-bezier(.5,1.65,.4,.8)}button[aria-expanded=true] .header-language-arrow{transform:rotate(180deg)}.social{display:inline-block;vertical-align:middle}.social-link{background:#ff8000;border-radius:50%;width:3rem;height:3rem;display:inline-block;padding:.5rem .7rem;margin:0 .25rem;transition:fill .5s cubic-bezier(.5,1.65,.4,.8),transform .5s cubic-bezier(.5,1.65,.4,.8)}.social-link:hover{background:#92c5de;transform:scale(1.1)}.social-link:hover .social-icon{fill:#1f2574}.social-link:focus,.social-link:focus-within{background:#fff!important;box-shadow:0 0 0 2px #ecca00}.social-link:focus-within .social-icon,.social-link:focus .social-icon{fill:#1f2574!important}.social-icon{width:100%;height:100%;fill:#fff;transition:fill .5s cubic-bezier(.5,1.65,.4,.8)}.button{display:inline-flex;justify-content:center;text-decoration:none;cursor:pointer;margin:1rem 0 0;color:#003d9d;padding:.15rem}@media (min-width:48em){.button{margin:1.25rem 0 0}}@media (min-width:81.25em){.button{margin:1.75rem 0 0}}cagov-navoverlay{order:3}cagov-navoverlay .menu-trigger{background:#ff8000;margin-left:1em;border:0;padding:.5em 1em;font-family:Montserrat,sans-serif;transform-origin:top left;display:inline-block;cursor:pointer;position:relative;top:-2px;right:0;transition:all .5s cubic-bezier(.57,.2,.21,.89);box-shadow:0 .5rem 1rem 0 rgba(0,0,0,.2),0 0 0 0 #ff8000;transform-origin:center center}cagov-navoverlay .menu-trigger .is-fixed{position:fixed}@media (max-width:64rem){cagov-navoverlay .menu-trigger{z-index:2000}}@media (min-width:48rem){cagov-navoverlay .menu-trigger{z-index:2000}}cagov-navoverlay .menu-trigger-label{color:#1f2574}cagov-navoverlay .menu-trigger:hover{background:#ffcf44;box-shadow:0 .5rem 1.5rem 0 rgba(0,0,0,.3)}cagov-navoverlay .menu-trigger:hover .hamburger-inner,cagov-navoverlay .menu-trigger:hover .hamburger-inner:after,cagov-navoverlay .menu-trigger:hover .hamburger-inner:before{background-color:#1f2574}cagov-navoverlay .menu-trigger:hover .hamburger-inner:after,cagov-navoverlay .menu-trigger:hover .hamburger-inner:before{width:13px}cagov-navoverlay .menu-trigger:focus-wthin{background:#ffcf44;outline:2px solid #1f2574}cagov-navoverlay .menu-trigger:focus{box-shadow:0 .5rem 1rem 0 rgba(0,0,0,.2),0 0 0 2px #1f2574;outline:0 solid #1f2574;background:#ffcf44}@media (min-width:81.25rem){cagov-navoverlay .menu-trigger:focus{background:#ffcf44}}cagov-navoverlay .menu-trigger:focus .hamburger-inner,cagov-navoverlay .menu-trigger:focus .hamburger-inner:after,cagov-navoverlay .menu-trigger:focus .hamburger-inner:before{background-color:#1f2574}cagov-navoverlay .hamburger{padding:.15rem;display:inline-block;cursor:pointer;transition-property:opacity;transition-duration:.15s;transition-timing-function:linear;position:relative;transition:all .2s ease-in-out;vertical-align:middle;z-index:10000}cagov-navoverlay .hamburger-box{width:20px;height:20px;display:inline-block;position:relative}cagov-navoverlay .hamburger-inner{display:block;top:50%;width:20px;margin-top:-1px;transition-duration:.22s;transition-timing-function:cubic-bezier(.55,.055,.675,.19)}cagov-navoverlay .hamburger-inner,cagov-navoverlay .hamburger-inner:after,cagov-navoverlay .hamburger-inner:before{height:2px;background-color:#1f2574;border-radius:0;position:absolute;transition-property:transform,width,background-color;transition-duration:.15s;transition-timing-function:ease}cagov-navoverlay .hamburger-inner:after,cagov-navoverlay .hamburger-inner:before{width:20px;content:"";display:block}cagov-navoverlay .hamburger-inner:before{top:-6px;transition:top .1s ease-in .25s,opacity .1s ease-in,width .1s ease-out .12s}cagov-navoverlay .hamburger-inner:after{bottom:-6px;transition:bottom .1s ease-in .25s,transform .22s cubic-bezier(.55,.055,.675,.19),width .1s ease-out .12s}cagov-navoverlay.display-menu .menu-trigger{box-shadow:none}cagov-navoverlay.display-menu .menu-trigger:focus,cagov-navoverlay.display-menu .menu-trigger:hover{background:#ffcf44}@media (max-width:64rem){cagov-navoverlay.display-menu .menu-trigger:focus,cagov-navoverlay.display-menu .menu-trigger:hover{background:#ffcf44}cagov-navoverlay.display-menu .menu-trigger:focus .hamburger-inner,cagov-navoverlay.display-menu .menu-trigger:focus .hamburger-inner:after,cagov-navoverlay.display-menu .menu-trigger:focus .hamburger-inner:before,cagov-navoverlay.display-menu .menu-trigger:hover .hamburger-inner,cagov-navoverlay.display-menu .menu-trigger:hover .hamburger-inner:after,cagov-navoverlay.display-menu .menu-trigger:hover .hamburger-inner:before{transition:all .5s cubic-bezier(.57,.2,.21,.89);background-color:#1f2574}}@media (min-width:48rem){cagov-navoverlay.display-menu .menu-trigger{background:#ff8000}}cagov-navoverlay.display-menu .menu-trigger .hamburger-inner,cagov-navoverlay.display-menu .menu-trigger .hamburger-inner:after,cagov-navoverlay.display-menu .menu-trigger .hamburger-inner:before{transition:all .5s cubic-bezier(.57,.2,.21,.89);background-color:#1f2574}@media (min-width:48rem){cagov-navoverlay.display-menu .menu-trigger .hamburger-inner,cagov-navoverlay.display-menu .menu-trigger .hamburger-inner:after,cagov-navoverlay.display-menu .menu-trigger .hamburger-inner:before{background-color:#1f2574}}cagov-navoverlay.display-menu .menu-trigger:hover{background:#ff8000}@media (min-width:48rem){cagov-navoverlay.display-menu .menu-trigger:hover .hamburger-inner,cagov-navoverlay.display-menu .menu-trigger:hover .hamburger-inner:after,cagov-navoverlay.display-menu .menu-trigger:hover .hamburger-inner:before{background-color:#1f2574}}cagov-navoverlay.display-menu .hamburger-inner{transform:rotate(225deg);transition-delay:.12s;transition-timing-function:cubic-bezier(.215,.61,.355,1);width:12px}cagov-navoverlay.display-menu .hamburger-inner,cagov-navoverlay.display-menu .hamburger-inner:after,cagov-navoverlay.display-menu .hamburger-inner:before{width:20px!important;background-color:#1f2574}@media (min-width:48rem){cagov-navoverlay.display-menu .hamburger-inner,cagov-navoverlay.display-menu .hamburger-inner:after,cagov-navoverlay.display-menu .hamburger-inner:before{background-color:#1f2574}}cagov-navoverlay.display-menu .hamburger-inner:before{top:0;opacity:0;transition:top .1s ease-out,opacity .1s ease-out .12s}cagov-navoverlay.display-menu .hamburger-inner:after{bottom:0;transform:rotate(-90deg);transition:bottom .1s ease-out,transform .22s cubic-bezier(.215,.61,.355,1) .12s}.fixed cagov-navoverlay .menu-trigger{transition:all .5s cubic-bezier(.57,.2,.21,.89)}cagov-navoverlay a.expanded-menu-section-header-link{text-decoration:none}cagov-navoverlay .expanded-menu{background:#1f2574;width:85vw;height:100%;position:fixed;top:0;right:0;z-index:1000;transition:all .5s cubic-bezier(.57,.2,.21,.89);transform:translateX(100%);visibility:hidden;overflow-y:scroll;box-shadow:-.5rem 0 1.2rem 0 rgba(0,0,0,.25)}@media (min-width:48rem){cagov-navoverlay .expanded-menu{width:100%;height:100%;position:fixed;top:0;left:0;background:#003d9d;opacity:0;padding:1rem;transform:translateX(0)}}@media (min-width:81.25rem){cagov-navoverlay .expanded-menu{padding:2rem}}cagov-navoverlay .expanded-menu-grid{margin:0 auto}@media (min-width:48rem){cagov-navoverlay .expanded-menu-grid{width:81.25rem;max-width:100%;position:absolute;left:50%;top:50%;transform:translateX(-50%) translateY(-50%);display:flex;flex-wrap:wrap;justify-content:space-between;align-content:flex-start;align-items:stretch;width:64em}}cagov-navoverlay .expanded-menu-col{margin:0;text-align:left}@media (min-width:48rem){cagov-navoverlay .expanded-menu-col{opacity:0;transform:translateY(3rem);transition:all .5s cubic-bezier(.57,.2,.21,.89);width:25%;padding:.5rem}}cagov-navoverlay .expanded-menu-section{background:#003d9d;text-align:left;padding:1rem}@media (max-width:64rem){cagov-navoverlay .expanded-menu-section{border-bottom:1px solid #1f2574}}@media (min-width:48rem){cagov-navoverlay .expanded-menu-section{background:transparent;padding:0;margin-bottom:1rem}cagov-navoverlay .expanded-menu-section:last-of-type{margin-bottom:0}}@media (min-width:48rem){cagov-navoverlay .expanded-menu-section.mobile-only{display:none}}@media (max-width:64rem){cagov-navoverlay .expanded-menu-section.expanded .expanded-menu-dropdown{max-height:100rem}}@media (max-width:64rem) and (max-width:48rem){cagov-navoverlay .expanded-menu-section.expanded .expanded-menu-section-header-link{color:#fff}}cagov-navoverlay .expanded-menu-section.expanded .expanded-menu-section-header-arrow-svg{transform:rotate(180deg)}cagov-navoverlay .expanded-menu-section-header{display:block;position:relative;color:#f2f5fc}@media (min-width:48rem){cagov-navoverlay .expanded-menu-section-header{margin-bottom:0}}cagov-navoverlay .expanded-menu-section-header-link{font-family:Roboto,sans-serif;font-weight:700;font-size:1.2rem;color:#ff8000;width:100%;text-transform:none;display:block;text-align:left;transition:all .2s ease-in-out;background:transparent;border:none;padding:.25rem 2rem .25rem 0;border-radius:1.2rem}cagov-navoverlay .expanded-menu-section-header-link:hover{color:#fff}cagov-navoverlay .expanded-menu-section-header-link:active{background:transparent}cagov-navoverlay .expanded-menu-section-header-link.white{color:#fff}@media (min-width:48rem){cagov-navoverlay .expanded-menu-section-header-link{cursor:default;width:auto}cagov-navoverlay .expanded-menu-section-header-link:hover{color:#ff8000}}cagov-navoverlay .expanded-menu-section-header-arrow{width:1rem;height:1rem;position:absolute;top:50%;right:.5rem;transform:translateY(-50%);display:block;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (min-width:48rem){cagov-navoverlay .expanded-menu-section-header-arrow{display:none}}cagov-navoverlay .expanded-menu-section-header-arrow-svg{fill:#fff;width:100%;display:block;transition:all .6s cubic-bezier(.5,1.65,.4,.8)}cagov-navoverlay .expanded-menu-dropdown{max-height:0;overflow:hidden;transition:max-height .5s cubic-bezier(.57,.2,.21,.89)}@media (min-width:48rem){cagov-navoverlay .expanded-menu-dropdown{display:block;max-height:none;padding:2px 0}}cagov-navoverlay .expanded-menu-dropdown-link{color:#fff;font-family:Roboto,sans-serif;font-weight:400;font-size:1.2rem;padding:.5rem .25rem;margin:.15rem 0 .15rem 2px;display:table;transition:color .3s cubic-bezier(.57,.2,.21,.89);border-radius:1rem}cagov-navoverlay .expanded-menu-dropdown-link:first-child{margin-top:.7em}@media (min-width:48rem){cagov-navoverlay .expanded-menu-dropdown-link{padding:0;margin:.85rem 0 0 2px;line-height:1.3rem}}@media (min-width:81.25rem){cagov-navoverlay .expanded-menu-dropdown-link{padding:0;line-height:1.3rem}}cagov-navoverlay .expanded-menu-dropdown-link:active,cagov-navoverlay .expanded-menu-dropdown-link:hover{color:#fff}cagov-navoverlay .expanded-menu-dropdown-link:focus{color:#fff;box-shadow:0 0 0 2px #fff;padding-left:.5rem}cagov-navoverlay .expanded-menu-search{background:#1f2574;border-radius:2rem;transition:background .5s cubic-bezier(.57,.2,.21,.89);padding:0;width:80%;margin-bottom:1rem;display:none}@media (min-width:48rem){cagov-navoverlay .expanded-menu-search{display:block;padding:0 0 0 .75rem;margin-left:auto;margin-bottom:2rem;margin-top:7rem}}@media (min-width:81.25rem){cagov-navoverlay .expanded-menu-search{padding:.7rem .7rem .75rem 1.25rem}}cagov-navoverlay .expanded-menu-search.focused{background:#fff;box-shadow:0 .5rem 1rem 0 rgba(0,0,0,.2),0 0 0 2px #ffcf44;animation-name:border-pulse;animation-duration:1s;animation-iteration-count:3}cagov-navoverlay .expanded-menu-search.focused .expanded-menu-search-field.placeholder,cagov-navoverlay .expanded-menu-search.focused .expanded-menu-search-label{color:#1f2574}cagov-navoverlay .expanded-menu-search.focused .expanded-menu-search-field:-moz-placeholder,cagov-navoverlay .expanded-menu-search.focused .expanded-menu-search-field::-moz-placeholder{color:#1f2574}cagov-navoverlay .expanded-menu-search.focused .expanded-menu-search-field:-ms-input-placeholder{color:#1f2574}cagov-navoverlay .expanded-menu-search.focused .expanded-menu-search-field::-webkit-input-placeholder{color:#1f2574}cagov-navoverlay .expanded-menu-search.focused .expanded-menu-search-button-svg{fill:#1f2574}cagov-navoverlay .expanded-menu-search:hover{background:#fff}cagov-navoverlay .expanded-menu-search:hover .expanded-menu-search-field.placeholder,cagov-navoverlay .expanded-menu-search:hover .expanded-menu-search-label{color:#1f2574}cagov-navoverlay .expanded-menu-search:hover .expanded-menu-search-field:-moz-placeholder,cagov-navoverlay .expanded-menu-search:hover .expanded-menu-search-field::-moz-placeholder{color:#1f2574}cagov-navoverlay .expanded-menu-search:hover .expanded-menu-search-field:-ms-input-placeholder{color:#1f2574}cagov-navoverlay .expanded-menu-search:hover .expanded-menu-search-field::-webkit-input-placeholder{color:#1f2574}cagov-navoverlay .expanded-menu-search:hover .expanded-menu-search-button-svg{fill:#1f2574}cagov-navoverlay .expanded-menu-search-form{background:transparent;width:100%;display:flex;align-items:center;padding:0;transition:all .5s cubic-bezier(.57,.2,.21,.89);cursor:pointer}@media (min-width:48rem){cagov-navoverlay .expanded-menu-search-form{background:transparent}}cagov-navoverlay .expanded-menu-search-label{color:#ff8000;text-transform:uppercase;font-size:1.2rem;padding:.5rem .75rem .5rem 0;border-right:1px solid #1f2574;cursor:pointer;transition:color .5s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){cagov-navoverlay .expanded-menu-search-label{clip:rect(1px,1px,1px,1px);position:absolute!important;height:1px;width:1px;overflow:hidden;word-wrap:normal!important}cagov-navoverlay .expanded-menu-search-label:focus{background:#ff8000;color:#fff;clip:auto!important;display:inline-block;font-size:1rem;height:auto;position:absolute;left:0;top:0;z-index:100000;line-height:normal;padding:.5rem;width:auto}}cagov-navoverlay .expanded-menu-search-label:hover{color:#003d9d}cagov-navoverlay .expanded-menu-search-field{background:transparent;padding:.75rem .5rem .75rem 1rem;font-size:1.1rem;border:0;width:100%;color:#fff;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (min-width:48rem){cagov-navoverlay .expanded-menu-search-field{padding:.75rem .5rem .75rem .75}}cagov-navoverlay .expanded-menu-search-field.placeholder{color:#fff;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){cagov-navoverlay .expanded-menu-search-field.placeholder{color:#ff8000}}cagov-navoverlay .expanded-menu-search-field:-moz-placeholder{color:#fff;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){cagov-navoverlay .expanded-menu-search-field:-moz-placeholder{color:#ff8000}}cagov-navoverlay .expanded-menu-search-field::-moz-placeholder{color:#fff;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){cagov-navoverlay .expanded-menu-search-field::-moz-placeholder{color:#ff8000}}cagov-navoverlay .expanded-menu-search-field:-ms-input-placeholder{color:#fff;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){cagov-navoverlay .expanded-menu-search-field:-ms-input-placeholder{color:#ff8000}}cagov-navoverlay .expanded-menu-search-field::-webkit-input-placeholder{color:#fff;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){cagov-navoverlay .expanded-menu-search-field::-webkit-input-placeholder{color:#ff8000}}cagov-navoverlay .expanded-menu-search-field:hover,cagov-navoverlay .expanded-menu-search-field:hover.placeholder{color:#003d9d}cagov-navoverlay .expanded-menu-search-field:hover:-moz-placeholder,cagov-navoverlay .expanded-menu-search-field:hover::-moz-placeholder{color:#003d9d}cagov-navoverlay .expanded-menu-search-field:hover:-ms-input-placeholder{color:#003d9d}cagov-navoverlay .expanded-menu-search-field:hover::-webkit-input-placeholder{color:#003d9d}cagov-navoverlay .expanded-menu-search-field:focus,cagov-navoverlay .expanded-menu-search-field:focus.placeholder{color:#1f2574}cagov-navoverlay .expanded-menu-search-field:focus:-moz-placeholder,cagov-navoverlay .expanded-menu-search-field:focus::-moz-placeholder{color:#1f2574}cagov-navoverlay .expanded-menu-search-field:focus:-ms-input-placeholder{color:#1f2574}cagov-navoverlay .expanded-menu-search-field:focus::-webkit-input-placeholder{color:#1f2574}cagov-navoverlay .expanded-menu-search-button{width:2.5rem;height:2.5rem;border:0;background:transparent;cursor:pointer;padding:.6rem .5rem .5rem;margin-right:.15rem;border-radius:50%;transition:transform .5s cubic-bezier(.5,1.65,.4,.8)}cagov-navoverlay .expanded-menu-search-button-svg{width:100%;max-height:2.5rem;fill:#fff;transition:fill .3s cubic-bezier(.57,.2,.21,.89)}cagov-navoverlay .expanded-menu-search-button:hover .expanded-menu-search-button-svg{fill:#003d9d}cagov-navoverlay .expanded-menu-search-button:focus{background:#003d9d}cagov-navoverlay .expanded-menu-search-button:focus .expanded-menu-search-button-svg{fill:#fff}cagov-navoverlay .mobile-menu-close{width:100%;height:100%;position:fixed;top:0;left:0;background:rgba(0,0,0,.7);display:block;z-index:999;opacity:0;visibility:hidden;transition:all .5s cubic-bezier(.57,.2,.21,.89)}cagov-navoverlay.display-menu{overflow:hidden}cagov-navoverlay.display-menu .expanded-menu{transform:translateX(0);visibility:visible}@media (min-width:48rem){cagov-navoverlay.display-menu .expanded-menu{width:100vw;height:100vh;opacity:1;visibility:visible}}cagov-navoverlay.display-menu .expanded-menu:focus{outline:none}@media (min-width:48rem){cagov-navoverlay.display-menu.reveal-items .expanded-menu-col,cagov-navoverlay.display-menu.reveal-items .expanded-menu-search{transition:all .6s cubic-bezier(.5,1.65,.4,.8);opacity:1;transform:translateY(0)}}cagov-navoverlay.display-menu .mobile-menu-close{opacity:.6;visibility:visible}cagov-accordion .card{border-radius:0!important;border:none;margin-bottom:0}cagov-accordion .card-container{display:block;overflow:hidden}cagov-accordion .card-container[aria-hidden=false]{border-bottom:1px solid #1f2574}cagov-accordion.prog-enhanced .card-container{height:0;transition:height .3s ease}cagov-accordion .collapsed{display:block;overflow:hidden;visibility:hidden}.card-header .button{color:#000}.accordion{margin-bottom:20px}.accordion-title{padding:.5rem;text-align:left;margin-bottom:0;color:#1f2574;margin-right:auto;width:90%}.accordion-title h2,.accordion-title h3,.accordion-title h4{padding:0!important;margin-top:0!important;margin-bottom:0!important;font-family:Roboto,sans-serif;font-size:1.2rem!important;font-weight:700;color:#1f2574;text-align:left!important}button.card-header{display:flex;justify-content:left;align-items:center;padding:1rem .75rem;background-clip:border-box;background-color:#fff;border:1px solid #1f2574;border-right:none;border-left:none;border-radius:0!important;margin-top:-1px}button.card-header:hover{background-color:#f2f5fc}button.card-header:focus{outline-offset:-2px}.prog-enhanced .accordion-alpha .plus-munus{width:2.125rem;height:2.125rem;border:2px solid #ff8000;border-radius:50%;padding:.02rem 0;overflow:hidden;transition:all .3s ease;margin-left:1rem;color:#ff8000;align-self:flex-start}.prog-enhanced .accordion-alpha .plus-munus cagov-plus .accordion-icon{display:block}.prog-enhanced .accordion-alpha .plus-munus cagov-minus .accordion-icon{display:none}.prog-enhanced.chart-drawer{font-size:.95rem}.prog-enhanced.chart-drawer .accordion-alpha .plus-munus{margin-left:0;margin-right:1rem;height:1.35rem;width:1.35rem}.chart-drawer button.card-header{border-bottom:none;border-top:none}.chart-drawer .card-container[aria-hidden=false]{border-bottom:none}.chart-drawer .card{padding:1px;border:1px solid #f2f5fc}.prog-enhanced .accordion-alpha-open{border-bottom-color:#fff!important}.prog-enhanced .accordion-alpha-open cagov-plus .accordion-icon{display:none!important}.prog-enhanced .accordion-alpha-open cagov-minus .accordion-icon{display:block!important}.dark-accordion-bg>.container.dark-accordion-first{padding-top:3rem;margin-top:3rem;padding-bottom:0;margin-bottom:0}.dark-accordion-bg>.container{padding-top:3rem;margin-top:3rem;padding-bottom:3rem;margin-bottom:3rem}.dark-accordion-sibling>.container{padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0}.dark-accordion-sibling+.dark-accordion-bg>.container{padding-top:0;margin-top:0;padding-bottom:3rem;margin-bottom:3rem}.dark-accordion-bg .card{background-color:#1f2574}.dark-accordion-bg .card .accordion-alpha{background-color:#1f2574;border-bottom:1px solid #4c5190;border-top:1px solid #4c5190}.dark-accordion-bg .card .accordion-alpha.accordion-alpha-open{border-bottom-color:#1f2574!important}.dark-accordion-bg .card .accordion-alpha:focus,.dark-accordion-bg .card .accordion-alpha:hover{background-color:#003d9d}.dark-accordion-bg .card .accordion-alpha .accordion-title,.dark-accordion-bg .card .accordion-alpha .accordion-title h2,.dark-accordion-bg .card .accordion-alpha .accordion-title h3,.dark-accordion-bg .card .accordion-alpha .accordion-title h4,.dark-accordion-bg .card .card-container{color:#fff}.dark-accordion-bg .card .card-container[aria-hidden=false]{border-bottom:1px solid #4c5190}.dark-accordion-bg .card .card-container h2,.dark-accordion-bg .card .card-container h3,.dark-accordion-bg .card .card-container h4,.dark-accordion-bg .card .card-container h5{color:#fff}.bg-darkblue .dark-accordion-bg>.container.dark-accordion-first{padding-top:1rem;margin-top:0;padding-bottom:0;margin-bottom:0}a.btn{background:#003d9d;color:#fff;border:50px;text-decoration:none;padding:.375rem .75rem;font-size:1rem;font-family:Roboto,sans-serif;font-weight:700}a.btn:hover{color:#fff;background-color:#003d9d;background:#003d9d}a.btn:visited{color:#fff}.btn-primary{color:#fff;background-color:#1f2574;background:#1f2574;border-color:#1f2574}.btn-primary:hover{background-color:#003d9d;border-color:#003d9d;color:#fff}button.step-description{text-align:left;padding-left:0;margin-left:-10px;font-family:Roboto,sans-serif;font-weight:700;font-size:1.4rem}button:focus{outline:none}.btn.focus,.btn:focus{color:#fff;background-color:#003d9d;border-color:#003d9d;box-shadow:none}.btn-lightbg{color:#1f2574;background-color:#92c5de}.btn-bigger{min-height:3rem;font-size:1.25rem}button.card-header.accordion-alpha:focus{outline:2px solid #ffcf44}.btn-primary.disabled,.btn-primary:disabled{color:#fff;background-color:#2d2d2d;border-color:#2d2d2d}.btn-matrix{display:inline-block;font-size:1rem;line-height:1.5;text-align:center;text-transform:uppercase;vertical-align:middle;background-color:transparent;border-radius:50px!important;padding-top:.375rem;padding-bottom:.375rem;padding-right:1.5rem!important;padding-left:1.5rem!important;font-weight:500}.btn-matrix.bg-purple-btn,.btn-matrix.bg-red-btn{color:#fff!important}.btn-matrix.bg-orange-btn,.btn-matrix.bg-yellow-btn{color:#000!important}button.clear:focus{outline:2px solid #ffcf44}.small-tab{padding:.5rem .75rem;border:1px solid #f2f5fc;text-decoration:underline;color:#1f2574;background:#fff;font-size:.95rem;font-weight:700!important}.small-tab:focus,.small-tab:hover{text-decoration:none;outline-offset:-2px}.small-tab:focus{outline:2px solid #ffcf44}.small-tab.active,.small-tab[aria-expanded=true]{color:#000;text-decoration:none;cursor:default}.small-tab.active:focus,.small-tab[aria-expanded=true]:focus{outline:2px solid #ffcf44}.large-tabs{border:1px solid #1f2574!important;background-color:#1f2574!important;display:flex!important;flex-direction:column;justify-content:center!important}@media (min-width:768px){.large-tabs{flex-direction:row}}.large-tabs .large-tab{text-decoration:none;font-family:Montserrat;font-style:normal;text-align:center;font-weight:500;font-size:1.15rem;display:inline-block;padding:10px;background-color:#fff;color:#1f2574;width:100%;margin:0 1px 1px 0;border:none}@media (min-width:768px){.large-tabs .large-tab{margin:0 1px 0 0;min-width:200px}}.large-tabs .large-tab:focus,.large-tabs .large-tab:hover{background-color:#f2f5fc}.large-tabs .large-tab:focus{outline:2px solid #ffcf44}.large-tabs .large-tab:last-child{margin-right:0;margin-bottom:0}.large-tabs .large-tab.active,.large-tabs .large-tab.toggle-active,.large-tabs .large-tab[aria-expanded=true]{color:#fff;background-color:#1f2574;text-decoration:none;pointer-events:none;cursor:default}.large-tabs .large-tab.active:focus,.large-tabs .large-tab.active:hover,.large-tabs .large-tab.toggle-active:focus,.large-tabs .large-tab.toggle-active:hover,.large-tabs .large-tab[aria-expanded=true]:focus,.large-tabs .large-tab[aria-expanded=true]:hover{background-color:#1f2574;pointer-events:none}.large-tabs .large-tab.active:focus,.large-tabs .large-tab.toggle-active:focus,.large-tabs .large-tab[aria-expanded=true]:focus{outline:2px solid #ffcf44}.link-arrow-label{margin-right:1em}.link-arrow-icon{width:2.75rem;height:2.75rem;border-radius:50%;padding:0;overflow:hidden;transition:all .3s ease}.link-arrow-icon-svg{width:60px;height:100%;position:relative;transition:all .3s ease;right:28px}.link-arrow-blue{font-size:1.2rem;font-family:Montserrat,sans-serif;text-transform:uppercase;text-decoration:none!important;display:flex;justify-content:center;align-items:center;transition:all .3s ease;color:#1f2574}.link-arrow-blue .link-arrow-icon{border:2px solid #1f2574}.link-arrow-blue .arrow1,.link-arrow-blue .arrow2{transition:all .3s ease;fill:#1f2574}.link-arrow-blue .pdf-link-icon{display:none}.link-arrow-blue:focus,.link-arrow-blue:hover{color:#003d9d}.link-arrow-blue:focus .link-arrow-icon,.link-arrow-blue:hover .link-arrow-icon{border-color:#003d9d}.link-arrow-blue:focus .link-arrow-icon .arrow1,.link-arrow-blue:focus .link-arrow-icon .arrow2,.link-arrow-blue:hover .link-arrow-icon .arrow1,.link-arrow-blue:hover .link-arrow-icon .arrow2{fill:#003d9d}.link-arrow-blue:focus .link-arrow-icon-svg,.link-arrow-blue:hover .link-arrow-icon-svg{right:-10px}.link-arrow-blue:focus{outline:2px solid #ffcf44!important}.link-arrow-white{font-size:1.2rem;font-family:Montserrat,sans-serif;text-transform:uppercase;text-decoration:none!important;display:flex;justify-content:center;align-items:center;transition:all .3s ease;color:#fff!important}.link-arrow-white .link-arrow-icon{border:2px solid #fff}.link-arrow-white .arrow1,.link-arrow-white .arrow2{transition:all .3s ease;fill:#fff}.link-arrow-white .pdf-link-icon{display:none}.link-arrow-white:focus,.link-arrow-white:hover{color:#ff8000!important}.link-arrow-white:focus .link-arrow-icon,.link-arrow-white:hover .link-arrow-icon{border-color:#ff8000}.link-arrow-white:focus .link-arrow-icon .arrow1,.link-arrow-white:focus .link-arrow-icon .arrow2,.link-arrow-white:hover .link-arrow-icon .arrow1,.link-arrow-white:hover .link-arrow-icon .arrow2{fill:#ff8000}.link-arrow-white:focus .link-arrow-icon-svg,.link-arrow-white:hover .link-arrow-icon-svg{right:-10px}.link-arrow-white:focus{outline:2px solid #ffcf44!important}.link-arrow-orange{font-size:1.2rem;font-family:Montserrat,sans-serif;text-transform:uppercase;text-decoration:none!important;display:flex;justify-content:center;align-items:center;transition:all .3s ease;color:#ff8000!important}.link-arrow-orange .link-arrow-icon{border:2px solid #ff8000}.link-arrow-orange .arrow1,.link-arrow-orange .arrow2{transition:all .3s ease;fill:#ff8000}.link-arrow-orange .pdf-link-icon{display:none}.link-arrow-orange:focus,.link-arrow-orange:hover{color:#92c5de!important}.link-arrow-orange:focus .link-arrow-icon,.link-arrow-orange:hover .link-arrow-icon{border-color:#92c5de}.link-arrow-orange:focus .link-arrow-icon .arrow1,.link-arrow-orange:focus .link-arrow-icon .arrow2,.link-arrow-orange:hover .link-arrow-icon .arrow1,.link-arrow-orange:hover .link-arrow-icon .arrow2{fill:#92c5de}.link-arrow-orange:focus .link-arrow-icon-svg,.link-arrow-orange:hover .link-arrow-icon-svg{right:-10px}.link-arrow-orange:focus{outline:2px solid #ffcf44!important}.button-blue{display:inline-block;font-family:Montserrat,sans-serif;font-weight:600;font-size:1.2rem;text-align:center;vertical-align:middle;user-select:none;border:0 transparent;padding:.625rem 1.5rem;line-height:1.5;border-radius:50px;text-decoration:none!important;transition:all .3s ease;background-color:#1f2574;color:#fff!important}.button-blue:focus,.button-blue:hover{background-color:#ff8000;color:#1f2574!important}.button-blue:focus{outline:2px solid #ffcf44!important}.button-lightblue{display:inline-block;font-family:Montserrat,sans-serif;font-weight:600;font-size:1.2rem;text-align:center;vertical-align:middle;user-select:none;border:0 transparent;padding:.625rem 1.5rem;line-height:1.5;border-radius:50px;text-decoration:none!important;transition:all .3s ease;background-color:#92c5de;color:#1f2574!important}.button-lightblue:focus,.button-lightblue:hover{background-color:#ff8000;color:#1f2574!important}.button-lightblue:focus{outline:2px solid #ffcf44!important}.button-lightestblue{display:inline-block;font-family:Montserrat,sans-serif;font-weight:600;font-size:1.2rem;text-align:center;vertical-align:middle;user-select:none;border:0 transparent;padding:.625rem 1.5rem;line-height:1.5;border-radius:50px;text-decoration:none!important;transition:all .3s ease;background-color:#f2f5fc;color:#1f2574!important}.button-lightestblue:focus,.button-lightestblue:hover{background-color:#ff8000;color:#1f2574!important}.button-lightestblue:focus{outline:2px solid #ffcf44!important}learn-more-section .faq-twitter{width:100%;order:1}@media (min-width:48rem){learn-more-section .faq-twitter{order:2}}@media (min-width:48rem){learn-more-section .faq-twitter-wrap{display:flex;align-items:flex-start}}learn-more-section .faq{text-align:left}@media (min-width:48rem){learn-more-section .faq{width:50%;padding:0 2rem 0 0}}learn-more-section .faq article:first-child .faq-item-link{border-top:1px solid #003d9d}faq-section .faq-twitter{background:#1f2574;width:100%;order:1}@media (min-width:48rem){faq-section .faq-twitter{order:2}}@media (min-width:48rem){faq-section .faq-twitter-wrap{display:flex;align-items:center}}faq-section .faq{text-align:left}@media (min-width:48rem){faq-section .faq{width:50%;padding:0 2rem 0 0}}.special-note{background:#f2f5fc;padding:1rem 1rem 1rem 3.5rem;position:relative;margin:0 auto}.special-note p{font-size:.95rem;margin-bottom:0}.special-note p:before{font-family:CaGov!important;content:"\e072";position:absolute;left:15px;top:10px;font-size:2rem;color:#003d9d}.arrow-links{padding-left:0}.arrow-links li{list-style:none}.arrow-links .link-arrow-label{margin-right:auto}.arrow-links .link-arrow-icon{width:2.75rem;height:2.75rem;border:2px solid;border-radius:50%;padding:0;overflow:hidden;transition:all .3s ease;margin-left:1rem}.arrow-links .link-arrow-icon-svg{width:60px;height:100%;position:relative;transition:all .3s ease;right:28px}.arrow-links article:first-child a.link-arrow-blue,.arrow-links li:first-child a.link-arrow-blue{border-top:1px solid #1f2574}.arrow-links .link-arrow-blue{font-family:Roboto,sans-serif;font-size:1.5rem;line-height:1.2;font-weight:700;text-decoration:none!important;text-transform:none;display:flex;justify-content:left;transition:none;padding:1rem .75rem;color:#1f2574;border-bottom:1px solid #1f2574}.arrow-links .link-arrow-blue .link-arrow-icon{border-color:#ff8000}.arrow-links .link-arrow-blue .arrow1,.arrow-links .link-arrow-blue .arrow2{transition:all .3s ease;fill:#ff8000}.arrow-links .link-arrow-blue:focus,.arrow-links .link-arrow-blue:hover{color:#003d9d;background:#f2f5fc}.arrow-links .link-arrow-blue:focus .link-arrow-icon,.arrow-links .link-arrow-blue:hover .link-arrow-icon{border-color:#ff8000}.arrow-links .link-arrow-blue:focus .link-arrow-icon .arrow1,.arrow-links .link-arrow-blue:focus .link-arrow-icon .arrow2,.arrow-links .link-arrow-blue:hover .link-arrow-icon .arrow1,.arrow-links .link-arrow-blue:hover .link-arrow-icon .arrow2{fill:#ff8000}.arrow-links .link-arrow-blue:focus .link-arrow-icon-svg,.arrow-links .link-arrow-blue:hover .link-arrow-icon-svg{right:-10px}.arrow-links .link-arrow-blue:focus{outline:2px solid #ffcf44!important}.arrow-links article:first-child a.link-arrow-white,.arrow-links li:first-child a.link-arrow-white{border-top:1px solid #4c5190}.arrow-links .link-arrow-white{font-family:Roboto,sans-serif;font-size:1.5rem;line-height:1.2;font-weight:700;text-decoration:none!important;text-transform:none;display:flex;justify-content:left;transition:none;padding:1rem .75rem;color:#fff;border-bottom:1px solid #4c5190}.arrow-links .link-arrow-white .link-arrow-icon{border-color:#ff8000}.arrow-links .link-arrow-white .arrow1,.arrow-links .link-arrow-white .arrow2{transition:all .3s ease;fill:#ff8000}.arrow-links .link-arrow-white:focus,.arrow-links .link-arrow-white:hover{color:#fff!important;background:#003d9d}.arrow-links .link-arrow-white:focus .link-arrow-icon,.arrow-links .link-arrow-white:hover .link-arrow-icon{border-color:#ff8000}.arrow-links .link-arrow-white:focus .link-arrow-icon .arrow1,.arrow-links .link-arrow-white:focus .link-arrow-icon .arrow2,.arrow-links .link-arrow-white:hover .link-arrow-icon .arrow1,.arrow-links .link-arrow-white:hover .link-arrow-icon .arrow2{fill:#ff8000}.arrow-links .link-arrow-white:focus .link-arrow-icon-svg,.arrow-links .link-arrow-white:hover .link-arrow-icon-svg{right:-10px}.arrow-links .link-arrow-white:focus{outline:2px solid #ffcf44!important}.btn-link{background:transparent;border:none;font-weight:300;color:#1f2574;text-decoration:underline}.btn-link:hover{text-decoration:none}.btn-link:focus{outline:2px solid #ffcf44}.action-link>span.ca-gov-icon-external-link,.btn-matrix>span.ca-gov-icon-external-link,.btn-primary>span.ca-gov-icon-external-link,.button-blue>span.ca-gov-icon-external-link,.button-lightblue>span.ca-gov-icon-external-link,.button-lightestblue>span.ca-gov-icon-external-link .btn>span.ca-gov-icon-external-link,.link-arrow-blue>span.ca-gov-icon-external-link,.link-arrow-orange>span.ca-gov-icon-external-link,.link-arrow-white>span.ca-gov-icon-external-link,.social-link>span.ca-gov-icon-external-link,.toc li a>span.ca-gov-icon-external-link,a span.pdf-link-icon~span.ca-gov-icon-external-link,img~span.ca-gov-icon-external-link{display:none}.box-shadow{box-shadow:0 .5rem 1.5rem 0 rgba(0,0,0,.3)}.logo-mark{width:100%}.logo-mark-orange{fill:#ff8000}.logo-mark-orange,.logo-mark-white{transition:fill .5s cubic-bezier(.57,.2,.21,.89)}.logo-mark-white{fill:#fff}.header{background:#1f2574;width:100%;z-index:1000;transition:box-shadow .4s cubic-bezier(.57,.2,.21,.89)}.header.fixed-position{position:fixed;top:0;left:0}.header.relative-position{position:relative}.header.fixed{font-size:1rem}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.header.fixed .logo-mark{max-height:3.5rem}}.header-wrap{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;position:relative}@media (min-width:81.25rem){.header-wrap{flex-wrap:nowrap}}.header-logo{width:100%;order:4;background:#003d9d}@media (min-width:48rem){.header-logo{background:transparent;order:0;width:auto}}.header-logo-grid{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center}.header-logo-mark{width:6rem;display:block;background:#003d9d;padding:.5rem;box-shadow:0 .5rem 1rem 0 rgba(0,0,0,.2);transition:width .4s cubic-bezier(.57,.2,.21,.89),background .4s cubic-bezier(.57,.2,.21,.89);overflow-y:hidden}@media (min-width:48rem){.header-logo-mark{padding:.5rem .75rem}}.header-logo-text{text-align:left;padding-left:.75rem}.header-logo-text-url{color:#ff8000;text-transform:uppercase;display:block;transition:color .4s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){.header-logo-text-url{font-size:1.2rem}}.header-logo-text-title{color:#fff;white-space:normal;display:block;transition:color .4s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){.header-logo-text-title{font-size:.9rem}}@media (min-width:48rem){.header-logo-text-title{font-size:.9rem;white-space:nowrap}}.header-logo:hover .header-logo-mark{background:#fff}.header-logo:hover .header-logo-text-url{color:#fff}.header-logo:hover .header-logo-text-title{color:#ff8000}.header-logo:hover .logo-mark-orange{fill:#1f2574}.header-logo:hover .logo-mark-white{fill:#ff8000}.header-logo:focus .header-logo{margin:0 0 0 64px}.header-logo:focus .header-logo-mark{background:#fff;box-shadow:0 0 0 4px #ffcf44,0 .5rem 1.5rem 0 rgba(0,0,0,.3)}.header-logo:focus .header-logo-text-url{color:#fff}.header-logo:focus .header-logo-text-title{color:#ff8000}.header-logo:focus .logo-mark-orange{fill:#1f2574}.header-logo:focus .logo-mark-white{fill:#ff8000}body.interior-page{font-weight:300}.interior-page a{text-decoration:underline}.interior-page .header{position:relative}.header-search{background:#003d9d;border-radius:2rem;transition:background .5s cubic-bezier(.57,.2,.21,.89);padding:0;margin:.5rem .5rem .5rem 1em;order:2;width:37%}@media (max-width:48rem){.header-search{width:34%}}@media (max-width:20.5rem){.header-search{width:25%}.header-search .header-search-field::placeholder{visibility:hidden}}@media (min-width:48rem){.header-search{width:12.5rem;padding:0 0 0 .25rem;order:0;margin:0 0 0 auto}}@media (min-width:64rem){.header-search{width:22rem;padding:.25rem .25rem .25rem .75rem;margin:.5rem .5rem .5rem auto}}@media (min-width:81.25rem){.header-search{width:25rem;padding:.5rem .5rem .5rem 1rem;margin:.5rem .5rem .5rem auto}}@keyframes border-pulse{0%{box-shadow:0 0 0 0 #ffcf44}50%{box-shadow:0 0 0 3px #ffcf44}to{box-shadow:0 0 0 0 #ffcf44}}.header-search.focused{background:#fff;box-shadow:0 .5rem 1rem 0 rgba(0,0,0,.2),0 0 0 2px #ffcf44;animation-name:border-pulse;animation-duration:1s;animation-iteration-count:3}.header-search.focused .header-search-label{color:#1f2574;margin-bottom:.5rem}.header-search.focused .header-search-field,.header-search.focused .header-search-field.placeholder{color:#1f2574}.header-search.focused .header-search-field:-ms-input-placeholder{color:#1f2574}.header-search.focused .header-search-field::-webkit-input-placeholder{color:#1f2574}.header-search.focused .header-search-field:-moz-placeholder,.header-search.focused .header-search-field::-moz-placeholder{color:#1f2574;opacity:1}.header-search.focused .header-search-button-svg{fill:#1f2574}.header-search:hover{background:#fff}.header-search:hover .header-search-field.placeholder,.header-search:hover .header-search-label{color:#1f2574}.header-search:hover .header-search-field:-ms-input-placeholder{color:#1f2574}.header-search:hover .header-search-field::-webkit-input-placeholder{color:#1f2574}.header-search:hover .header-search-field:-moz-placeholder,.header-search:hover .header-search-field::-moz-placeholder{color:#1f2574;opacity:1}.header-search:hover .header-search-button-svg{fill:#1f2574}.header-search-form{background:transparent;width:100%;display:flex;align-items:center;padding:0;transition:all .5s cubic-bezier(.57,.2,.21,.89);position:relative;cursor:pointer}@media (min-width:48rem){.header-search-form{background:transparent}}.header-search-label{color:#f2f5fc;text-transform:uppercase;font-size:95%;padding:0 .75rem 0 0;border-right:1px solid #1f2574;cursor:pointer;transition:color .5s cubic-bezier(.57,.2,.21,.89);position:relative;margin-bottom:.5rem;top:4px}@media (max-width:64rem){.header-search-label{clip:rect(1px,1px,1px,1px);position:absolute!important;height:1px;width:1px;overflow:hidden;word-wrap:normal!important}.header-search-label:focus{background:#ff8000;color:#fff;clip:auto!important;display:inline-block;font-size:1rem;height:auto;position:absolute;left:0;top:0;z-index:100000;line-height:normal;padding:.5rem;width:auto}}.header-search-label:hover{color:#003d9d}.header-search-field{background:transparent;padding:.75rem 0 .75rem .75rem;font-size:1rem;border:0;width:100%;color:#fff;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (min-width:48rem){.header-search-field{padding:.75rem 0 .75rem .75rem;width:100%}}@media (min-width:64rem){.header-search-field{padding:.75rem .5rem .75rem .35rem;width:100%}}@media (min-width:81.25rem){.header-search-field{padding:.75rem .5rem .75rem .35rem;width:100%}}.header-search-field:-moz-placeholder,.header-search-field::-moz-placeholder{opacity:1}.header-search-field.placeholder{color:#fff;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){.header-search-field.placeholder{color:#ff8000}}.header-search-field:-moz-placeholder{color:#fff;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){.header-search-field:-moz-placeholder{color:#ff8000}}.header-search-field::-moz-placeholder{color:#fff;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){.header-search-field::-moz-placeholder{color:#ff8000}}.header-search-field:-ms-input-placeholder{color:#fff;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){.header-search-field:-ms-input-placeholder{color:#ff8000}}.header-search-field::-webkit-input-placeholder{color:#fff;transition:all .5s cubic-bezier(.57,.2,.21,.89)}@media (max-width:64rem){.header-search-field::-webkit-input-placeholder{color:#ff8000}}.header-search-field:hover.placeholder{color:#003d9d!important}.header-search-field:hover:-ms-input-placeholder{color:#003d9d!important}.header-search-field:hover::-webkit-input-placeholder{color:#003d9d!important}.header-search-field:hover:-moz-placeholder,.header-search-field:hover::-moz-placeholder{color:#003d9d!important;opacity:1}.header-search-field:focus{outline:none}.header-search-field:focus.placeholder{color:#1f2574}.header-search-field:focus:-ms-input-placeholder{color:#1f2574}.header-search-field:focus::-webkit-input-placeholder{color:#1f2574}.header-search-field:focus:-moz-placeholder,.header-search-field:focus::-moz-placeholder{color:#1f2574;opacity:1}.header-search-button{width:2.25rem;height:2.25rem;border:0;border-radius:50%;background:transparent;cursor:pointer;padding:.5rem;margin-right:.15rem;position:absolute;right:4px;flex:1 0 auto;transition:transform .5s cubic-bezier(.5,1.65,.4,.8)}.header-search-button-svg{width:100%;max-height:2.5rem;fill:#fff;transition:fill .3s cubic-bezier(.57,.2,.21,.89)}.header-search-button:hover .header-search-button-svg{fill:#003d9d}.header-search-button:focus{background:#003d9d;outline:none}.header-search-button:focus .header-search-button-svg{fill:#fff}#header-search-site::-ms-clear,#header-search-site::-ms-reveal{display:none;width:0;height:0}#header-search-site::-webkit-search-cancel-button,#header-search-site::-webkit-search-decoration,#header-search-site::-webkit-search-results-button,#header-search-site::-webkit-search-results-decoration{display:none}header .dropdown{margin-right:auto}@media (min-width:48rem){header .dropdown{margin-right:0}}.translate{position:relative;padding-right:30px}.translate:after{display:none!important}button#dropdown-menu-button{transition-duration:.3s;transition-property:all;transition-timing-function:ease;transition-delay:0s;padding:.5rem .3rem;vertical-align:middle}@media (min-width:48rem){button#dropdown-menu-button{padding:.5rem 1rem}}button#dropdown-menu-button:hover{background-color:transparent;border-color:transparent;color:#ecca00}button#dropdown-menu-button:focus{background-color:#fff;border-color:#fff;color:#1f2574;outline:none}button#dropdown-menu-button[aria-expanded=false] .rotate{right:2px;top:1px;width:20px;height:20px;position:absolute;text-align:center;transition:all .2s ease!important}button#dropdown-menu-button[aria-expanded=true] .rotate{transform:rotate(90deg)!important;right:-5px;top:6px;width:20px;height:20px;position:absolute;text-align:center}.nav-scroll-spy{height:0}#dropdown-text{pointer-events:none}@media (max-width:768px){.hero-text{min-height:20vh}header{position:absolute}.navbar-toggler{padding:0}}.dropdown-toggle:after{font-family:CaGov!important;speak:none;font-style:normal;font-weight:700;font-variant:normal;font-size:larger;content:"\33";display:inline-block;margin-left:0;vertical-align:0;border:0;-webkit-font-smoothing:antialiased}.dropdown-menu{margin-left:20px}cagov-navoverlay .expanded-menu-search{margin-right:5em}cagov-navoverlay .expanded-menu-search-field:focus{outline:none;color:#fff}cagov-navoverlay .expanded-menu-search:hover .expanded-menu-search-field:focus{outline:none;color:#1f2574}.jumbo-img{background-image:linear-gradient(180deg,#1f2574 0,rgba(31,37,116,0) 20%),url(/img/hero.webp);background-color:#1d2574}@media (min-width:48rem){.jumbo-img{background-size:cover;background-position-x:50%}}@media (min-width:64rem){.jumbo-img{background-size:cover;background-position-x:50%}}@media (min-width:81.25rem){.jumbo-img{background-size:cover;background-position-x:50%}}hero-stats{background-color:#1f2574}hero-stats .hero{position:relative;color:#fff;width:100%}@media (min-width:48rem){hero-stats .hero-padding-top{margin-top:65px}}@media (max-width:400px){hero-stats .hero-padding-top{margin-top:120px}}@media (max-device-width:640px){hero-stats .hero-padding-top{margin-top:120px}}@media (max-width:20.5rem){hero-stats .hero-padding-top{margin-top:135px}}@media (min-width:48rem){hero-stats .hero{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:center;align-content:center;align-items:flex-end}}hero-stats .hero-wrap{position:relative;z-index:500}@media (min-width:48rem){hero-stats .hero-wrap{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-content:flex-end;align-items:flex-start;padding:1rem 1rem 0}}@media (min-width:81.25rem){hero-stats .hero-wrap{padding:0}}@media (-ms-high-contrast:active),(-ms-high-contrast:none){hero-stats .hero-wrap{margin:0}}hero-stats .hero-text{display:flex;text-align:left;padding:1.5rem;min-height:60vh;align-items:flex-end;align-self:flex-end}@media (min-width:48rem){hero-stats .hero-text{display:flex;width:50%;min-height:auto;align-self:center}}@media (min-width:64rem){hero-stats .hero-text{width:50%;margin-bottom:1rem}}hero-stats .hero-text-align{width:100%;height:100%}@media (min-width:48rem){hero-stats .hero-text-align{height:auto}}hero-stats .hero-headline{margin-bottom:.5rem;text-align:left;font-weight:900;color:#fff}hero-stats .hero-subhead{color:#fff;font-weight:700}hero-stats .hero-photo{background:#0641a2;position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1}hero-stats .hero-photo-pic{width:100%;height:70vh;position:absolute;top:0;left:0;object-fit:cover}@media (min-width:48rem){hero-stats .hero-photo-pic{width:100%;height:100%}}hero-stats .hero-photo-description{clip:rect(1px,1px,1px,1px);position:absolute!important;height:1px;width:1px;overflow:hidden;word-wrap:normal!important}hero-stats .hero-photo-description:focus{background:#ff8000;color:#fff;clip:auto!important;display:inline-block;font-size:1rem;height:auto;position:absolute;left:0;top:0;z-index:100000;line-height:normal;padding:.5rem;width:auto}hero-stats .hero-photo-fade{width:100%;height:10rem;background:linear-gradient(180deg,#1f2574 0,rgba(31,37,116,0));position:absolute;top:0;left:0;z-index:100}hero-stats .hero-stats{background:#1f2574;padding:1rem 2rem;box-shadow:0 .5rem 1.5rem 0 rgba(0,0,0,.3);align-self:flex-end}@media (min-width:48rem){hero-stats .hero-stats{background:#1f2574;padding:1rem 1.5rem;margin:3rem auto 2rem;width:50%;transition-delay:.9s}}@media (min-width:64rem){hero-stats .hero-stats{padding:1rem 1.5rem;width:50%;margin:3.5rem auto 2rem}}@media (min-width:81.25rem){hero-stats .hero-stats{padding:1rem 1.5rem;margin:5rem auto 2rem}}hero-stats .hero-stats-footer{margin-top:1rem;text-align:center}hero-stats .hero-stats-footer-slink{color:#92c5de}hero-stats .hero-stats-footer-slink:hover{color:#ff8000}hero-stats .hero-stats-footer-link{color:#92c5de;padding:.65rem .75rem .5rem;transition:all .3s cubic-bezier(.57,.2,.21,.89);font-size:1.2rem;font-weight:300;display:inline-block;margin-left:.5rem;margin-right:.5rem;text-decoration:none}@media (min-width:48rem){hero-stats .hero-stats-footer-link{white-space:nowrap}}@media (min-width:64rem){hero-stats .hero-stats-footer-link{padding:.65rem 0 .5rem;padding:.5rem 0}}hero-stats .hero-stats-footer-link:hover{color:#ff8000}hero-stats .hero-stats-footer-link:hover .chart-icon-path{fill:#ff8000}hero-stats .hero-alert{background:#fff;border-bottom:.5rem solid #ff8000;width:100%;text-align:left;box-shadow:0 .5rem 1.5rem 0 rgba(0,0,0,.3);color:#000}@media (min-width:48rem){hero-stats .hero-alert{width:95%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:center;align-content:center;position:relative;top:2rem}}@media (min-width:81.25rem){hero-stats .hero-alert{width:95%}}hero-stats .hero-alert-align{padding:2rem;text-align:center}@media (min-width:48rem){hero-stats .hero-alert-align{text-align:left;display:flex;align-items:center;width:60%;padding:1.5rem}}@media (min-width:64rem){hero-stats .hero-alert-align{width:66%;padding:2rem}}@media (min-width:81.25rem){hero-stats .hero-alert-align{padding:2.5rem}}hero-stats .hero-alert-icon{width:4rem;height:4rem;fill:#1f2574;display:block;margin:0 auto 1rem;position:relative}@media (min-width:48rem){hero-stats .hero-alert-icon{width:3rem;height:3rem;margin:0 1rem 0 0;flex:1 0 auto;top:.5rem;align-self:flex-start}}hero-stats .hero-alert-social{background:#fff;text-align:center;padding:2rem}@media (min-width:48rem){hero-stats .hero-alert-social{width:40%;padding:1.5rem;display:flex;align-items:flex-start}}@media (min-width:64rem){hero-stats .hero-alert-social{padding:2.5rem;width:34%}}@media (min-width:81.25rem){hero-stats .hero-alert-social{padding:2.5rem 2rem}}hero-stats .hero-alert-social-align{width:100%}hero-stats .hero-alert-social .social-link{background:#1f2574}hero-stats .hero-alert-social .social-link:hover{background:#003d9d}hero-stats .hero-alert-social .social-link:hover .social-icon{fill:#fff}hero-stats .hero-alert-text p{font-weight:300}.jumbo-img{background-image:linear-gradient(180deg,#1f2574,rgba(31,37,116,0) 20%),url(/img/hero.jpg);background-color:#1f2574;background-size:contain;background-repeat:no-repeat;background-position:center 10%}@media (min-width:48rem){.jumbo-img{background-size:cover}}.chart-icon{width:25px}.chart-icon-path{fill:#92c5de;transition:all .3s cubic-bezier(.57,.2,.21,.89)}.chart-arrow svg{width:20px;height:20px}.chart-arrow-path{fill:#ff8000}@media (max-width:767.98px){.hero-wrap .px-10px{padding-right:15%!important;padding-left:15%!important}}video-section .video{background:#f0f0f0;width:100%;order:2}@media (min-width:48rem){video-section .video{order:1;background:#fff}}@media (min-width:48rem){video-section .video-wrap{padding-top:0}}@media (min-width:81.25rem){video-section .video-wrap{padding-top:0}}video-section .video-item{text-align:left}.featured-content .news,news-section .news{background:#fff;width:100%;order:3;text-align:center}@media (min-width:48rem){.featured-content .news,news-section .news{order:3}}@media (min-width:48rem){.featured-content .news-grid,news-section .news-grid{display:flex}}.featured-content .news-item,news-section .news-item{text-align:left;padding:1.25rem 0}.featured-content .news-item p,news-section .news-item p{font-weight:300}@media (min-width:48rem){.featured-content .news-item,news-section .news-item{width:33%;padding:.75rem}}@media (min-width:81.25rem){.featured-content .news-item,news-section .news-item{padding:1rem 1rem 0}}.featured-content .news-item-link,news-section .news-item-link{display:block;text-decoration:none}.featured-content .news-item-link:hover .news-item-photo,news-section .news-item-link:hover .news-item-photo{box-shadow:0 .5rem 1.25rem 0 rgba(0,0,0,.2)}.featured-content .news-item-link:hover .news-item-photo-img,news-section .news-item-link:hover .news-item-photo-img{opacity:1;width:110%;height:110%}.featured-content .news-item-link:hover .news-item-headline,news-section .news-item-link:hover .news-item-headline{color:#003d9d}.featured-content .news-item-link:focus .news-item-photo,news-section .news-item-link:focus .news-item-photo{box-shadow:0 0 0 4px #ffcf44,0 .5rem 1.5rem 0 rgba(0,0,0,.3)}.featured-content .news-item-link:focus .news-item-photo-img,news-section .news-item-link:focus .news-item-photo-img{opacity:1;width:110%;height:110%}.featured-content .news-item-link:focus .news-item-headline,news-section .news-item-link:focus .news-item-headline{color:#003d9d}.featured-content .news-item-photo,news-section .news-item-photo{background:#1f2574;padding-top:56.25%;position:relative;margin-bottom:1rem;overflow:hidden;transition:box-shadow .3s cubic-bezier(.5,1.65,.4,.8)}.featured-content .news-item-photo-img,news-section .news-item-photo-img{opacity:.75;width:100%;height:100%;position:absolute;top:0;left:50%;transform:translateX(-50%);transition:1s cubic-bezier(.15,.92,.14,.95)}.featured-content .news-item-date,news-section .news-item-date{font-size:.85rem;text-transform:uppercase;margin-bottom:.25rem;display:block;color:#000}.featured-content .news-item-headline,news-section .news-item-headline{color:#003d9d;margin-bottom:.25rem;transition:color .3s cubic-bezier(.57,.2,.21,.89)}@media (min-width:48rem){.featured-content .news-item-headline,news-section .news-item-headline{overflow-wrap:break-word}}@media (min-width:81.25rem){.featured-content .news-item-headline,news-section .news-item-headline{overflow-wrap:normal}}.featured-content .news-item-teaser,news-section .news-item-teaser{color:#000;margin-top:.25rem;line-height:1.5}@media (min-width:48rem){.featured-content .news-item-teaser,news-section .news-item-teaser{font-size:.8rem}}@media (min-width:81.25rem){.featured-content .news-item-teaser,news-section .news-item-teaser{font-size:1rem}}.featured-content .featured-content-image,news-section .featured-content-image{border:1px solid;display:block;overflow:hidden}.featured-content .featured-content-image img,news-section .featured-content-image img{width:100%;height:240px;object-fit:cover}.featured-content .featured-content-image img.state-map,news-section .featured-content-image img.state-map{width:auto;margin:0 auto;display:block;object-fit:contain}pagerating-section .feedback-form{background:#003d9d;padding:2rem;text-align:center}@media (min-width:81.25rem){pagerating-section .feedback-form{padding:3rem}}pagerating-section .feedback-form-label{color:#fff;display:block;margin-bottom:.5rem;transition:color .3s cubic-bezier(.57,.2,.21,.89);font-size:1.25rem}@media (min-width:81.25rem){pagerating-section .feedback-form-label{margin-bottom:0}}pagerating-section .feedback-form-add{padding-top:2rem}@media (min-width:48rem){pagerating-section .feedback-form-add{text-align:left;padding-top:0}}pagerating-section .feedback-form-add-grid{position:relative}@media (min-width:48rem){pagerating-section .feedback-form-add-grid{display:inline-flex}}pagerating-section .feedback-form-textarea{width:100%;padding:1rem;font-family:Roboto,sans-serif;color:#1f2574}pagerating-section .feedback-form-textarea:focus{box-shadow:0 0 0 2px #ff8000}pagerating-section .feedback-form-thanks{display:none;color:#fff}pagerating-section .feedback-form-error{position:relative;top:100%;left:0;display:none;font-weight:300;text-align:left}footer-section .footer-section{background:#1f2574;color:#fff;text-align:center}footer-section .footer-section-grid{display:flex;flex-wrap:wrap}@media (min-width:48rem){footer-section .footer-section-grid{flex-wrap:nowrap}}footer-section .footer-section-col{text-align:center;margin:0 auto;width:100%}@media (min-width:48rem){footer-section .footer-section-col{width:33.33%}}footer-section .footer-section-col-nav{order:2}@media (min-width:48rem){footer-section .footer-section-col-nav{order:0}}footer-section .footer-section-col-logo{order:1;margin-bottom:2rem}@media (min-width:48rem){footer-section .footer-section-col-logo{order:0;margin-bottom:0}}footer-section .footer-section-col-hotline{order:3;margin:1rem auto}@media (min-width:48rem){footer-section .footer-section-col-hotline{order:0;margin:0 auto}}footer-section .footer-section-nav{text-align:center;margin-bottom:1rem}@media (min-width:48rem){footer-section .footer-section-nav{text-align:left;margin-bottom:0}}footer-section .footer-section-nav-link{display:table;color:#92c5de;padding:.5rem;margin:0 auto;transition:color .3s cubic-bezier(.57,.2,.21,.89);border-radius:1.5rem}@media (min-width:48rem){footer-section .footer-section-nav-link{margin-left:0}}footer-section .footer-section-nav-link:hover{color:#ff8000}footer-section .footer-section-nav-link:focus{color:#ff8000;box-shadow:0 0 0 2px #ffcf44}@media (min-width:48rem){footer-section .footer-section-hotline{text-align:right}}footer-section .footer-section-hotline-number{color:#92c5de;padding:.35rem 0;border-radius:2.5rem;display:inline-block;transition:all .3s cubic-bezier(.57,.2,.21,.89)}footer-section .footer-section-hotline-number:hover{color:#ff8000}footer-section .footer-section-hotline-number:focus{padding:.35rem .5rem;box-shadow:0 0 0 2px #ffcf44}footer-section .footer-section-hotline-hours{font-weight:300;margin-top:1rem}@media (min-width:48rem){footer-section .footer-section-hotline-hours{margin-top:.5rem}}footer-section .footer-section-logo{max-width:9rem;display:block;margin:0 auto;padding:1rem}@media (min-width:48rem){footer-section .footer-section-logo{max-width:12rem}}footer-section .footer-section-logo:hover .logo-mark-orange{fill:#fff}footer-section .footer-section-logo:hover .logo-mark-white{fill:#ff8000}footer-section .footer-section-logo:focus{box-shadow:0 0 0 2px #ffcf44}footer-section .footer-section-logo:focus .logo-mark-orange{fill:#fff}footer-section .footer-section-logo:focus .logo-mark-white{fill:#ff8000}footer-section .footer-section .social{margin:1.5rem auto}@media (min-width:48rem){footer-section .footer-section .social{margin:1rem 0}}@media (min-width:81.25rem){footer-section .footer-section .social{margin:-1.5rem 0 1.5rem}}footer-section .footer-section-utility{margin-top:1rem;font-weight:300}@media (min-width:48rem){footer-section .footer-section-utility{margin-top:2rem}}footer-section .footer-section-utility-nav{line-height:1.2}footer-section .footer-section-utility-nav-link{display:inline-block;color:#92c5de;transition:color .3s cubic-bezier(.57,.2,.21,.89);margin:.25rem;padding:.25rem .4rem;font-size:.85rem;line-height:1;border-radius:1.5rem;white-space:nowrap}@media (min-width:48rem){footer-section .footer-section-utility-nav-link{margin:.25rem;font-size:1rem}}footer-section .footer-section-utility-nav-link:hover{color:#ff8000}footer-section .footer-section-utility-nav-link:focus{color:#ff8000;box-shadow:0 0 0 1px #ffcf44}footer-section .footer-section-utility-official{margin-top:1.5rem;display:block;font-size:.85rem}@media (min-width:48rem){footer-section .footer-section-utility-official{margin-top:1rem;font-size:1rem}}footer-section .footer-section .ca-gov{width:75px;margin-top:1.25rem}footer-section .footer-section .ca-gov .logo-cagov svg .st0{transition:fill .5s cubic-bezier(.57,.2,.21,.89);transition:stroke .5s cubic-bezier(.57,.2,.21,.89);stroke:#ff8002;fill:#ff8002}footer-section .footer-section .ca-gov .logo-cagov svg .st1{transition:fill .5s cubic-bezier(.57,.2,.21,.89);transition:stroke .5s cubic-bezier(.57,.2,.21,.89);stroke:#fff;fill:#fff}footer-section .footer-section .ca-gov .logo-cagov:hover svg .st0{stroke:#fff;fill:#fff}footer-section .footer-section .ca-gov .logo-cagov:hover svg .st1{stroke:#ff8002;fill:#ff8002}footer-section .footer-section .logo-flanked{display:flex;justify-content:space-between;margin-top:0;padding-top:2rem;flex-flow:column}.safer-economy-page .jumbotron+.container{padding-top:0}.safer-economy-page .jumbotron{margin-bottom:0;padding-bottom:0}.safer-economy-page .matrix-holder cagov-accordion .accordion-title h4{font-weight:300}html[dir=rtl] .full-bleed{width:100vw;margin-left:auto;margin-right:calc(50% - 50vw)}cagov-reopening .subtitle-color{color:#1f2574}cagov-reopening .reopening-activities{margin-top:20px}cagov-reopening .reopening-activities label{font-weight:700}cagov-reopening .reopening-activities #awesomplete_list_2{max-height:283px;overflow:scroll}cagov-reopening .form-row>[class*=col-]{padding-right:10px;padding-left:10px}cagov-reopening .reopening-form-group{padding-bottom:1.5rem}cagov-reopening .reopening-form-group label{display:block}@media (max-width:20.5rem){cagov-reopening .reopening-form-group{padding-bottom:3rem}}cagov-reopening .reopening-fields{text-align:center;padding:20px;background-color:#f3f5fc;margin:0 0 1.2%}@media (min-width:48rem){cagov-reopening .reopening-fields{padding:50px}}cagov-reopening .reopening-fields input{font-size:1.2rem}cagov-reopening .reopening-fields button[type=submit]{display:block;margin:10px auto;height:50px;font-size:1.15rem;padding:.5rem 1.3rem;background-color:#003d9d}cagov-reopening .visually-hidden{visibility:hidden}cagov-reopening .awesomplete ul{text-align:left}cagov-reopening .awesomplete ul li:hover mark,cagov-reopening .awesomplete ul li[aria-selected=true] mark{background:transparent}cagov-reopening .awesomplete li.separator{padding-bottom:10px;border-bottom:1px solid #979797;margin-bottom:10px}cagov-reopening .awesomplete mark{background:transparent;font-weight:700;padding:0}cagov-reopening .reopening-field-error{position:absolute;bottom:1rem}@media (min-width:48rem){cagov-reopening .reopening-field-error{bottom:0}}cagov-reopening .reopening-form-error{margin-top:-1rem}cagov-reopening .card-content{margin:0;padding:15px 0 30px;background:#fff}cagov-reopening .card-activity,cagov-reopening .card-county{padding:0 30px 30px}cagov-reopening .card-county{margin:5px 0 0}cagov-reopening .card-activity{text-align:left;background-color:#fff;padding:30px 30px 0}cagov-reopening .card-activity:not(:last-of-type) .card-activity-separator:after{margin:30px 0 0;content:"";width:100%;height:3px;display:block;border-bottom:1px solid}cagov-reopening .card-activity:last-of-type .card-activity-separator:after{border-bottom:none;margin:0}cagov-reopening .pill{display:inline-block;padding:10px 25px;border-radius:30px;font-weight:500;margin:10px 0 20px;color:#000;text-transform:uppercase}cagov-reopening .county-color-1,cagov-reopening .county-color-2,cagov-reopening .county-color-3,cagov-reopening .county-color-4{padding:20px 15px 25px;margin-bottom:20px}cagov-reopening .county-color-1{background-color:#faf1d7;border-bottom:8px solid #e6b735}cagov-reopening .county-color-1 .pill{background-color:#e6b735}cagov-reopening .county-color-2{background-color:#f7e4d9;border-bottom:8px solid #d97641}cagov-reopening .county-color-2 .pill{background-color:#d97641}cagov-reopening .county-color-3{background-color:#f3d8dd;border-bottom:8px solid #c43d53}cagov-reopening .county-color-3 .pill{background-color:#c43d53;color:#fff}cagov-reopening .county-color-4{background-color:#e6d5e1;border-bottom:8px solid #802f67}cagov-reopening .county-color-4 .pill{background-color:#802f67;color:#fff}cagov-reopening .btn-primary{text-transform:uppercase}cagov-reopening form{padding-bottom:2rem}.card-title .card-title{display:none}@media (min-width:48rem){.card-title .card-title{display:block}}.matrix-holder{margin-bottom:30px}.safer-economy-page main div.container-fluid:nth-of-type(1n) h1,.safer-economy-page main div.container-fluid:nth-of-type(1n) p{text-align:center}.safer-economy-page main div.container-fluid:nth-of-type(1n) .row{justify-content:center!important}.safer-economy-page main div.container:nth-of-type(2n) p{font-size:1.25rem}.safer-economy-page h2{text-align:center}button.clear{border:none;background-color:transparent;position:absolute;right:20px;top:50px;color:#1f2574;font-weight:300;transition:all .3s ease}button.clear span.ca-gov-icon-close-line{transition:all .3s ease;position:relative}button.clear:hover span.ca-gov-icon-close-line{transform:scale(1.2);display:inline-block}.tableauPlaceholder{margin:0 auto}figure.table-gridded table{font-size:.95rem!important;line-height:1.4rem}figure.table-gridded table td{padding-bottom:20px;padding-top:20px;padding-right:40px;border-bottom:1px solid #f2f5fc}cagov-vaccinesurvey,cwds-survey{position:relative;display:block;z-index:998}cagov-vaccinesurvey .survey,cwds-survey .survey{width:100%;margin:0 auto;background-color:#fff;padding:0 0 1rem;border-bottom:.5rem solid #ff8000}cagov-vaccinesurvey .survey-content,cwds-survey .survey-content{text-align:center}cagov-vaccinesurvey .survey-content-prompt,cwds-survey .survey-content-prompt{font-size:1.25rem;margin:1.5rem 0 .5rem;font-weight:300}.autocomplete-inline input.form-control-lg{min-width:400px}.toggle-group-container.d3-charts{width:1000px}.toggle-group-container:not(.d3-charts){width:1000px;min-height:520px;margin-bottom:50px;position:relative}.toggle-group-container:not(.d3-charts) .toggle-group-element{position:absolute;top:0;left:0;width:100%}.toggle-group-container:not(.d3-charts).hospitals-group{min-height:550px}.tableauPlaceholder{margin-bottom:30px}.tableauPlaceholder+iframe,.tableauPlaceholder iframe{margin:0 auto}@media (max-width:760px){.toggle-group-container:not(.d3-charts){width:100%;height:1500px}.toggle-group-container:not(.d3-charts).cases-group{height:690px}.autocomplete-inline input.form-control-lg{min-width:auto;width:100%}.form-inline{justify-content:space-around}}.error-text{font-weight:700;margin-top:-30px;color:#c00}#clearCounty{top:12px}#clearCounty:focus{outline:2px solid #1f2574}@media (max-width:767.98px){.hero-wrap .px-10px,.row.justify-content-md-center .px-10px{padding-right:15%!important;padding-left:15%!important}}.filter-buttons--statedash{height:50px;padding-top:10px;display:block;z-index:5;width:94%}.filter-buttons--statedash .small-tab{width:50%}@media (min-width:767.98px){.chart.filter-button-space .chart-title{margin-bottom:50px}}.full-bleed{width:100vw;margin-left:calc(50% - 50vw)}p.emphasized{font-size:1.45rem}.bg-darkblue a,.bg-darkblue a:focus{color:#92c5de;text-decoration:underline}.bg-darkblue a:hover{color:#92c5de;text-decoration:none}.bg-darkblue a:visited{color:#b797d8;text-decoration:underline}@media (max-width:900px){.awesomplete{display:inline-block}.form-inline{align-items:start;margin:0 auto}}.eq-data{color:#ff8000!important;font-weight:700!important}.bd-20{border:7px solid #f2f5fc;border-radius:20px!important}.eq-cases{margin-top:auto}.learn-more-links .faq-twitter{width:100%;order:1}@media (min-width:48rem){.learn-more-links .faq-twitter{order:2}}@media (min-width:48rem){.learn-more-links .faq-twitter-wrap{display:flex;align-items:center}}.learn-more-links .faq{text-align:left}@media (min-width:48rem){.learn-more-links .faq{width:50%;padding:0 2rem 0 0}}@media (min-width:48rem){.learn-more-links .faq .button{margin-left:.75rem}}.learn-more-links .faq cwds-arrow{margin-left:auto}.learn-more-links .faq-item-link{width:100%;display:flex;align-items:center;border-bottom:1px solid #1f2574;padding:1.2rem .75rem;position:relative;transition:background .3s cubic-bezier(.57,.2,.21,.89)}.learn-more-links .faq-item-link:focus{background:#003d9d;box-shadow:0 0 0 2px #ffcf44}.learn-more-links .faq-item-headline{font-family:Roboto,sans-serif;color:#1f2574;position:relative;z-index:100;margin-right:1rem;margin-bottom:0!important;padding-top:0}.learn-more-links .faq-item:hover .faq-item-link{background:#f2f5fc}.learn-more-links .faq article:first-child .faq-item-link{border-top:1px solid #003d9d}.learn-more-links .cwdsarrow{margin-bottom:0!important}.chart-data-label{font-size:.95rem}.chart{position:relative;display:block;margin:auto;width:100%}.chart.d-none{display:none}.chart .svg-holder svg{width:100%}.chart .chart-title{border-bottom:1px solid;padding-bottom:.3rem;margin-bottom:1rem}.chart .chart-title:first-letter{text-transform:capitalize}.chart .special-note{background:#f2f5fc;padding:1rem 1rem 1rem 3.5rem;position:relative;margin:0 auto}.chart .special-note p{font-size:.95rem;margin-bottom:0!important}.chart .special-note p:before{font-family:CaGov!important;content:"\e072";position:absolute;left:15px;top:10px;font-size:2rem;color:#003d9d}.chart .more-than-labels{font-size:.75rem}.chart .change-from-month-labels{font-size:.85rem;text-anchor:unset}.chart .label{font-size:.95rem}.chart .bar-label{font-weight:700;font-size:.95rem;text-anchor:unset}.chart .bars.bars-unknown{font-weight:100;font-size:.7rem}.chart .chart-description{min-height:4rem}.chart .bar-chart-label.label{font-weight:100}.chart .legend-label,.chart .legend text,.chart .tick text,.chart text.y-label{font-size:.85rem}.chart .bars{text-anchor:unset}.chart .bars,.chart .xaxis-label{font-weight:700;font-size:.95rem}@media (max-width:768px){.chart .bar-chart-label.label{font-size:.75rem;font-weight:100}.chart .bar-label tspan{font-size:.75rem}.chart .bar-chart-label.label,.chart .bars,.chart .legend-label,.chart .tick text{font-size:.85rem}}.chart .tooltip-container{position:absolute;z-index:10;visibility:hidden;background:#fff;width:250px}.chart .chart-tooltip{pointer-events:none;padding:1rem 2rem;box-shadow:0 0 5px 2px rgba(0,0,0,.14);border:none;font-size:.75rem;min-width:100px}.chart .chart-overlaybox-container{position:absolute;z-index:10;visibility:hidden;background:#fff;width:250px}.chart .chart-overlaybox{pointer-events:none;padding:10px;box-shadow:-12px 11px 5px -4px rgba(0,0,0,.4);border:1px solid #ccc;min-width:100px}.chart .highlight-data{font-weight:700;padding-right:2px}.arrow-table .grid-layout{display:grid;grid-gap:30px;grid-row-gap:15px;padding:2%;grid-template-columns:1fr 1fr 1fr}@media (max-width:768px){.arrow-table .grid-layout{grid-template-columns:1fr}}.arrow-table .head{background-color:#003d9d;color:#fff;height:60px;line-height:60px;text-align:center;position:relative;font-weight:700;font-size:1.3rem}.arrow-table .cell{padding-top:20px}.arrow-table .arrow-right{right:-30px;border-left:30px solid #003d9d}.arrow-table .arrow-right,.arrow-table .arrow-right2{position:absolute;top:0;width:0;height:0;border-top:30px solid transparent;border-bottom:30px solid transparent}.arrow-table .arrow-right2{left:0;border-left:30px solid #fff}figure.tools table td:first-child,figure.tools table th:first-child{width:20%}figure.tools table td:nth-child(2),figure.tools table th:nth-child(2){width:15%}figure.tools table td:nth-child(3),figure.tools table th:nth-child(3){width:50%}figure.tools table td:nth-child(4),figure.tools table th:nth-child(4){width:15%}html:not([lang=en-US]) footer-section .social{margin:1.5rem auto}@media (min-width:48rem){html:not([lang=en-US]) footer-section .social{margin:1rem 0}}@media (min-width:81.25rem){html:not([lang=en-US]) footer-section .social{margin:1.5rem 0}}html[dir=rtl] .header-search-button{right:unset!important;left:4px!important}[lang=ar] a.list-group-item.list-group-item-action{text-indent:0;padding-right:10px}[lang=ar] label{margin-right:0;margin-left:.5rem}[lang=ar] header cagov-navoverlay .menu-trigger{margin-left:0;margin-right:1em}[lang=ar] header .header-logo-text{padding-left:0;padding-right:.75rem}[lang=ar] header .header-search{margin:.5rem 1rem .5rem .5rem}@media (min-width:48rem){[lang=ar] header .header-search{padding:0 .25rem 0 0;margin:0 auto 0 0}}@media (min-width:64rem){[lang=ar] header .header-search{padding:.25rem .75rem .25rem .25rem;margin:.5rem auto .5rem .5rem}}@media (min-width:81.25rem){[lang=ar] header .header-search{padding:.5rem 1rem .5rem .5rem;margin:.5rem auto .5rem .5rem}}[lang=ar] header .header-search-label{padding:0 0 0 .75rem;border-right:none;border-left:1px solid #1f2574}[lang=ar] header .header-search-field{padding:.75rem .75rem .75rem 0}@media (min-width:48rem){[lang=ar] header .header-search-field{padding:.75rem .75rem .75rem 0}}@media (min-width:64rem){[lang=ar] header .header-search-field{padding:.75rem .35rem .75rem .5rem}}@media (min-width:81.25rem){[lang=ar] header .header-search-field{padding:.75rem .35rem .75rem .5rem}}[lang=ar] hero-stats .hero-alert-icon{margin:0 0 0 1rem}[lang=ar] faq-section .faq-item-headline{margin-right:0;margin-left:1rem}[lang=ar] faq-section .faq cwds-arrow{margin-left:0;margin-right:auto}@media (min-width:48rem){[lang=ar] pagerating-section .feedback-form-grid-col:first-child{padding-right:0;border-right:none;padding-left:2rem;border-left:2px solid hsla(0,0%,100%,.25)}[lang=ar] pagerating-section .feedback-form-grid-col:last-child{padding-left:0;padding-right:2rem}}
    </style>
  

  
      
    

    
    
    
  </head>
  <body class="interior-page">

    
    <header class="header fixed relative-position" role="banner">

  <div class="header-wrap">
    
    <a class="header-logo" href="/zh-hans/">
      <div class="header-logo-grid">
        <div class="header-logo-mark">
          <svg class="logo-mark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 140"><title>全民加州</title><g class="mark-ca"><path class="logo-mark-orange" d="M48.2,83l-13.2,28.6h25.2L48.2,83z M66.7,126.9H28.1l-6,13H0.2l48.7-99.8l44.6,99.8H72.1L66.7,126.9z"/><polygon class="logo-mark-orange" points="117,42.9 117,122.4 146.9,122.4 146.9,139.9 97.1,139.9 97.1,42.9"/><polygon class="logo-mark-orange" points="170.2,42.9 170.2,122.4 200,122.4 200,139.9 150.2,139.9 150.2,42.9"/></g>
          <g class="mark-all"><path class="logo-mark-white" d="M21,8.7c-2-2.2-4.3-3.3-7.1-3.3c-4.6,0-8.4,3.9-8.4,8.7c0,4.8,3.7,8.7,8.4,8.7c2.9,0,5.3-1.2,7.4-3.6l3.4,3.4 c-2.8,3.1-6.6,5.1-10.8,5.1C6.2,27.8,0,21.7,0,14.1C0,6.5,6.2,0.4,13.9,0.4c4.2,0,8.1,2,10.8,5.1L21,8.7z"/><path class="logo-mark-white" d="M37,11.8l-3.6,7.9h6.9L37,11.8z M42,23.9H31.4l-1.6,3.6h-6L37.1,0l12.3,27.5h-5.9L42,23.9z"/><polygon class="logo-mark-white" points="56.1,0.8 56.1,22.7 64.3,22.7 64.3,27.5 50.6,27.5 50.6,0.8"/><rect class="logo-mark-white" x="66" y="0.8" width="5.5" height="26.7"/><polygon class="logo-mark-orange" points="74.6,27.5 74.6,0.8 89.1,0.8 89.1,5.6 80.1,5.6 80.1,11.1 87.6,11.1 87.6,15.9 80.1,15.9 80.1,27.5"/><path class="logo-mark-orange" d="M95.1,14.1c0,4.8,3.7,8.7,8.4,8.7c4.6,0,8.4-3.9,8.4-8.7c0-4.8-3.8-8.7-8.4-8.7C98.8,5.4,95.1,9.3,95.1,14.1 M117.4,14.1c0,7.6-6.2,13.7-13.9,13.7c-7.7,0-13.9-6.1-13.9-13.7c0-7.6,6.2-13.7,13.9-13.7C111.2,0.4,117.4,6.5,117.4,14.1"/><path class="logo-mark-orange" d="M125.3,5.6v6.7h2.9c2.3,0,3.9-1.1,3.9-3.4c0-2.2-1.6-3.3-3.9-3.3H125.3z M125.3,16.8v10.6h-5.5V0.8h8.8 c4.9,0,9,3.1,9,8c0,3.1-1.7,5.7-4.2,7l5,11.6h-6L128,16.8H125.3z"/><polygon class="logo-mark-white" points="159.4,0.8 164.9,0.8 164.9,28.2 145.9,11.6 145.9,27.5 140.4,27.5 140.4,0 159.4,16.6"/><rect x="167.3" y="0.8" class="logo-mark-white" width="5.5" height="26.7"/><path class="logo-mark-white" d="M187.2,11.8l-3.6,7.9h6.9L187.2,11.8z M192.3,23.9h-10.6l-1.6,3.6h-6L187.4,0l12.3,27.5h-5.9L192.3,23.9z"/></g></svg>
        </div>
        <div class="header-logo-text">
          <div class="header-logo-text-url">COVID19.CA.GOV</div>
          <div class="header-logo-text-title">您的行动可拯救生命</div>
        </div>
      </div>
    </a>

    <div class="header-search" role="search">
      <form class="header-search-form" action="/zh-hans/search/">
        <label class="header-search-label" for="header-search-site">搜索</label>
        <input name="q" id="header-search-site" class="header-search-field" type="search" data-placeholder-wide="站内搜索" data-placeholder-mobile="搜索">
        <button class="header-search-button" aria-label="Submit Search">
          <svg class="header-search-button-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title></title><path d="M13.8,8.5c0-3-2.4-5.4-5.4-5.4c-3,0-5.4,2.4-5.4,5.4s2.4,5.4,5.4,5.4C11.4,13.8,13.8,11.4,13.8,8.5z M20,18.5 c0,0.8-0.7,1.5-1.5,1.5c-0.4,0-0.8-0.2-1.1-0.5l-4.1-4.1c-1.4,1-3.1,1.5-4.8,1.5C3.8,16.9,0,13.1,0,8.5S3.8,0,8.5,0
            c4.7,0,8.5,3.8,8.5,8.5c0,1.7-0.5,3.4-1.5,4.8l4.1,4.1C19.8,17.7,20,18.1,20,18.5z"/></svg>
        </button>
      </form>
    </div>

    <div class="dropdown">
      <button
        class="translate dropdown-toggle border-0 rounded-50 ml-3"
        type="button"
        aria-expanded="false"
        aria-haspopup="true"
        data-toggle="dropdown"
        id="dropdown-menu-button"
      >
          <span id="dropdown-text" data-label-wide="选择语言" data-label-mobile="语言"></span>
          <svg aria-hidden="true" class="header-language-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 19"><path d="M0.7,2.2l1.5-1.4C2.7,0.2,3.2,0,3.9,0s1.2,0.2,1.7,0.7L15,10l9.4-9.3c0.5-0.5,1-0.7,1.8-0.7
            c0.7,0,1.3,0.2,1.8,0.7l1.4,1.4C29.8,2.7,30,3.2,30,3.9s-0.2,1.3-0.7,1.8L16.7,18.2c-0.5,0.5-1.1,0.7-1.8,0.7s-1.3-0.2-1.8-0.7
            L0.7,5.7C0.2,5.2,0,4.6,0,3.9S0.2,2.7,0.7,2.2z"></path></svg>
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdown-menu-button">
          
            <a class="dropdown-item" rel="alternate" lang="en" hreflang="en" href="/v3-state-dashboard/">English</a>
          
            <a class="dropdown-item" rel="alternate" lang="es" hreflang="es" href="/es/v3-state-dashboard/">Español</a>
          
            <a class="dropdown-item" rel="alternate" lang="tl" hreflang="tl" href="/tl/v3-state-dashboard/">Tagalog</a>
          
            <a class="dropdown-item" rel="alternate" lang="ar" hreflang="ar" href="/ar/v3-state-dashboard/">العربية</a>
          
            <a class="dropdown-item" rel="alternate" lang="ko" hreflang="ko" href="/ko/v3-state-dashboard/">한국어</a>
          
            <a class="dropdown-item" rel="alternate" lang="vi" hreflang="vi" href="/vi/v3-state-dashboard/">Tiếng Việt</a>
          
            <a class="dropdown-item" rel="alternate" lang="zh-Hant" hreflang="zh-Hant" href="/zh-hant/v3-state-dashboard/">繁體中文</a>
          
          <a class="dropdown-item" href="/zh-hans/translate/">更多…</a>
        </div>
      </div>
      <cagov-navoverlay 
        data-json="/menu--zh-Hans.json"
        data-search="/zh-hans/search/"
        data-label-home="主页"
        data-label-menu="菜单"
        data-label-menu-close="关闭"
        data-label-search="搜索"
        data-label-placeholder="您在查找什么？"></cagov-navoverlay>
  </div>

</header>
<div class="nav-scroll-spy" aria-hidden="true"></div>

    <main id="main">
      
  <div class="container-fluid jumbotron inverse-hyperlink jumbo-img">
    <div class="container">
      <div class="row">
        <div class="col-lg-10 mx-auto">
          <h1>加州COVID-19追踪)</h1>
          
            <p class="small-text">最后更新时间&nbsp;2021年4月29日, 上午10:00</p>
          
        </div>
      </div>
    </div>
  </div><div class="container">
    <div class="row">
      <div class="col-lg-10 mx-auto">
        
<!--
 
-->    <div class="bg-lightblue full-bleed mt-minus-4">
  <div class="container py-2">
    <div class="row pb-4">
      <div class="col-lg-10 mx-auto">
        <h2 class="text-center color-purple">更新于 2021年4月29日</h2>
        <p>截至2021年4月29日，加州共有3,636,235例COVID-19确诊病例，造成60,362人死亡。</p>
      </div>
    </div>

    <div class="row d-flex justify-content-md-center summary-boxes">
      <div class="col-md-3 px-10px">
        <div class="bg-purple bd-rounded-10 px-6px py-2 text-center mt-3 summary-box">
          <div class="h5 text-uppercase color-orange line-height-1-2 mt-1">病例数</div>

          <div id="total-cases-number" class="text-white font-size-1-2em my-2"><strong>3,636,235</strong> <span class="text-300">总共</span>           </div>
          <div id="total-cases-today" class="text-white font-size-1-2em mt-2"><strong>1,457</strong> <span class="text-300">今日</span>           </div>
          <div id="total-cases-increase" class="text-white text-xs line-height-1-5 my-2">              <span class="chart-arrow" arria-hidden="true">               <svg id="arrow-up1" class="d-none" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 29 29" style="enable-background:new 0 0 29 29;" xml:space="preserve">                 <path class="chart-arrow-path" d="M28.11,7.27c0-0.62-0.5-1.13-1.13-1.13h-7.64c-0.62,0-1.13,0.5-1.13,1.13s0.5,1.13,1.13,1.13h5.05l-8.16,8.25
 l-4.89-4.89c-0.44-0.44-1.15-0.44-1.59,0L0.9,20.6c-0.44,0.44-0.44,1.15,0,1.59c0.22,0.22,0.51,0.33,0.8,0.33s0.58-0.11,0.8-0.33
 l8.05-8.05l4.89,4.89c0.21,0.21,0.5,0.33,0.8,0.33c0,0,0,0,0,0c0.3,0,0.59-0.12,0.8-0.33l8.82-8.91v4.68c0,0.62,0.5,1.13,1.13,1.13
 s1.13-0.5,1.13-1.13V7.38c0-0.02,0-0.04,0-0.06C28.11,7.3,28.11,7.28,28.11,7.27z"></path>               </svg>                <!--negative arrow-->               <svg id="arrow-down1" class="" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 29 29" style="enable-background:new 0 0 29 29;" xml:space="preserve">                 <path class="chart-arrow-path" d="M28.11,21.4c0,0.62-0.5,1.13-1.13,1.13h-7.64c-0.62,0-1.13-0.5-1.13-1.13s0.5-1.13,1.13-1.13h5.05l-8.16-8.25
 l-4.89,4.89c-0.44,0.44-1.15,0.44-1.59,0L0.9,8.07c-0.44-0.44-0.44-1.15,0-1.59c0.22-0.22,0.51-0.33,0.8-0.33s0.58,0.11,0.8,0.33
 l8.05,8.05l4.89-4.89c0.21-0.21,0.5-0.33,0.8-0.33c0,0,0,0,0,0c0.3,0,0.59,0.12,0.8,0.33l8.82,8.91v-4.68c0-0.62,0.5-1.13,1.13-1.13
 s1.13,0.5,1.13,1.13v7.42c0,0.02,0,0.04,0,0.06C28.11,21.36,28.11,21.38,28.11,21.4z"></path>               </svg></span> 4.4 <span class="text-300">每100K人中的新增病例数</span>            </div>
        </div>
      </div>
      <div class="col-md-3 px-10px">
        <div class="bg-purple bd-rounded-10 px-6px py-2 text-center mt-3 summary-box">
          <div class="h5 text-uppercase color-orange line-height-1-2 mt-1">死亡数</div>

          <div id="total-deaths-number" class="text-white font-size-1-2em my-2"><strong>60,362</strong> <span class="text-300">总共</span>           </div>
          <div id="total-deaths-today" class="text-white font-size-1-2em mt-2"><strong>89</strong> <span class="text-300">今日</span>           </div>
          <div id="total-deaths-increase" class="text-white text-xs line-height-1-5 my-2">              <span class="chart-arrow" arria-hidden="true">               <svg id="arrow-up2" class="d-none" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 29 29" style="enable-background:new 0 0 29 29;" xml:space="preserve">                 <path class="chart-arrow-path" d="M28.11,7.27c0-0.62-0.5-1.13-1.13-1.13h-7.64c-0.62,0-1.13,0.5-1.13,1.13s0.5,1.13,1.13,1.13h5.05l-8.16,8.25
 l-4.89-4.89c-0.44-0.44-1.15-0.44-1.59,0L0.9,20.6c-0.44,0.44-0.44,1.15,0,1.59c0.22,0.22,0.51,0.33,0.8,0.33s0.58-0.11,0.8-0.33
 l8.05-8.05l4.89,4.89c0.21,0.21,0.5,0.33,0.8,0.33c0,0,0,0,0,0c0.3,0,0.59-0.12,0.8-0.33l8.82-8.91v4.68c0,0.62,0.5,1.13,1.13,1.13
 s1.13-0.5,1.13-1.13V7.38c0-0.02,0-0.04,0-0.06C28.11,7.3,28.11,7.28,28.11,7.27z"></path>               </svg>                <!--negative arrow-->               <svg id="arrow-down2" class="" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 29 29" style="enable-background:new 0 0 29 29;" xml:space="preserve">                 <path class="chart-arrow-path" d="M28.11,21.4c0,0.62-0.5,1.13-1.13,1.13h-7.64c-0.62,0-1.13-0.5-1.13-1.13s0.5-1.13,1.13-1.13h5.05l-8.16-8.25
 l-4.89,4.89c-0.44,0.44-1.15,0.44-1.59,0L0.9,8.07c-0.44-0.44-0.44-1.15,0-1.59c0.22-0.22,0.51-0.33,0.8-0.33s0.58,0.11,0.8,0.33
 l8.05,8.05l4.89-4.89c0.21-0.21,0.5-0.33,0.8-0.33c0,0,0,0,0,0c0.3,0,0.59,0.12,0.8,0.33l8.82,8.91v-4.68c0-0.62,0.5-1.13,1.13-1.13
 s1.13,0.5,1.13,1.13v7.42c0,0.02,0,0.04,0,0.06C28.11,21.36,28.11,21.38,28.11,21.4z"></path>               </svg></span> 0.07 <span class="text-300">每100K人中的新增死亡数</span>            </div>
        </div>
      </div>
      <div class="col-md-3 px-10px">
        <div class="bg-purple bd-rounded-10 px-6px py-2 text-center mt-3 summary-box">
          <div class="h5 text-uppercase color-orange line-height-1-2 mt-1">检测数</div>

          <div id="total-tested-number" class="text-white font-size-1-2em my-2"><strong>59,795,197</strong> <span class="text-300">总共</span>           </div>
          <div id="total-tested-today" class="text-white font-size-1-2em mt-2"><strong>173,688</strong> <span class="text-300">今日</span>           </div>
          <div id="total-tested-increase" class="text-white text-xs line-height-1-5 my-2">              <span class="chart-arrow" arria-hidden="true">               <svg id="arrow-up3" class="d-none" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 29 29" style="enable-background:new 0 0 29 29;" xml:space="preserve">                 <path class="chart-arrow-path" d="M28.11,7.27c0-0.62-0.5-1.13-1.13-1.13h-7.64c-0.62,0-1.13,0.5-1.13,1.13s0.5,1.13,1.13,1.13h5.05l-8.16,8.25
 l-4.89-4.89c-0.44-0.44-1.15-0.44-1.59,0L0.9,20.6c-0.44,0.44-0.44,1.15,0,1.59c0.22,0.22,0.51,0.33,0.8,0.33s0.58-0.11,0.8-0.33
 l8.05-8.05l4.89,4.89c0.21,0.21,0.5,0.33,0.8,0.33c0,0,0,0,0,0c0.3,0,0.59-0.12,0.8-0.33l8.82-8.91v4.68c0,0.62,0.5,1.13,1.13,1.13
 s1.13-0.5,1.13-1.13V7.38c0-0.02,0-0.04,0-0.06C28.11,7.3,28.11,7.28,28.11,7.27z"></path>               </svg>                <!--negative arrow-->               <svg id="arrow-down3" class="" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 29 29" style="enable-background:new 0 0 29 29;" xml:space="preserve">                 <path class="chart-arrow-path" d="M28.11,21.4c0,0.62-0.5,1.13-1.13,1.13h-7.64c-0.62,0-1.13-0.5-1.13-1.13s0.5-1.13,1.13-1.13h5.05l-8.16-8.25
 l-4.89,4.89c-0.44,0.44-1.15,0.44-1.59,0L0.9,8.07c-0.44-0.44-0.44-1.15,0-1.59c0.22-0.22,0.51-0.33,0.8-0.33s0.58,0.11,0.8,0.33
 l8.05,8.05l4.89-4.89c0.21-0.21,0.5-0.33,0.8-0.33c0,0,0,0,0,0c0.3,0,0.59,0.12,0.8,0.33l8.82,8.91v-4.68c0-0.62,0.5-1.13,1.13-1.13
 s1.13,0.5,1.13,1.13v7.42c0,0.02,0,0.04,0,0.06C28.11,21.36,28.11,21.38,28.11,21.4z"></path>               </svg></span> 1.3%<span class="text-300">检测呈阳性率</span>            </div>
        </div>
      </div>
      <div class="col-md-3 px-10px">
        <div class="bg-purple bd-rounded-10 px-6px py-2 text-center mt-3 summary-box">
          <div class="h5 text-uppercase color-orange line-height-1-2 mt-1">施打的疫苗数</div>

          <div id="total-vaccines-number" class="text-white font-size-1-2em my-4"><strong>29,262,215</strong> <span class="text-300">总共</span>           </div>
        </div>
      </div>
    </div>

    <div class="row pb-4 py-5">
      <div class="col-lg-10 mx-auto">
        <p class="small-text">根据2021年4月28日的数据在2021年4月29日更新。</p>

        <p class="small-text">注：患病率为7日平均数据，有7天的滞后期。死亡率为7日平均数据，有21天的滞后期，因为报告有延迟。检测呈阳性率为7日平均数据，无滞后期。定向变化与上一个7日周期做比较。数据由加州公共卫生局 (California Department of Public Health) 提供。</p>
      </div>
    </div>

  </div>   <!--END container--> </div>



<div class="bg-darkblue py-5 full-bleed mb-5">
            <div class="container py-2">
                <div class="row pb-4">
                    <div class="col-lg-10 mx-auto color-white">
                        <h2 class="text-center color-orange" id="vaccination">疫苗接种数据</h2>
                        <p>COVID-19疫苗是结束疫情的最重要的工具之一。本州正在追踪全加州民众的疫苗接种进度。</p>

                        <div class="mt-3 text-center">                             <a href="/vaccines/#California-vaccines-dashboard" class="link-arrow-white">                                 <div class="link-arrow-label">查看疫苗接种数据</div><cagov-arrow></cagov-arrow> </a>                         </div>


                    </div>
                </div>

            </div><!--END container-->         </div>



<h2 class="text-center color-purple">查看全州及各县的数据</h2>    <cagov-county-search></cagov-county-search>    <h3 class="text-center mt-4">每日病例数和死亡数</h3>    <cagov-county-toggle-buttons></cagov-county-toggle-buttons>    <p>加州共有3,636,235例COVID-19确诊病例，造成60,362人死亡。</p>



<div class="row">
    <div class="col-lg-6 col-md-6 col-sm-12 p-rel">       <cagov-chart-dashboard-confirmed-cases class="chart" data-chart-config-filter="episode" data-chart-config-key="cases">         <ul class="d-none">
          <li data-label="chartTitle">确诊病例数</li>
          <li data-label="chartLegend1">确诊病例总数<span class="big-num">{total_confirmed_cases}</span></li>
          <li data-label="chartLegend2Increase">新增病例数<span class="med-num">{new_cases}</span> （增加<span class="med-num">{new_cases_delta_1_day}</span>）</li>
          <li data-label="chartLegend2Decrease">新增病例数（<span class="med-num">{new_cases}</span>减少<span class="med-num">{new_cases_delta_1_day}</span>）</li>
          <li data-label="chartLegend3">每100K人中的病例数<span class="med-num">{cases_per_100k_7_days}</span>（7日平均数）</li>
          <li data-label="filterTabLabel1">事件日期</li>
          <li data-label="filterTabLabel2">日期</li>
          <li data-label="tooltipContent">事件日期： <b>{DATE}</b><br> 每100K人在7日内的平均患病率：<b>{7DAY_AVERAGE}</b><br> 病例数：<b>{CASES}</b>           </li>
          <li data-label="dayAverage">7日平均数</li>
          <li data-label="cases_leftYAxisLegend">每100K人中的新增病例数</li>
          <li data-label="cases_rightYAxisLegend">病例数</li>
          <li data-label="cases_episode_xAxisLegend">事件日期</li>
          <li data-label="cases_reported_xAxisLegend">呈报日期</li>
          <li data-label="pending">待定</li>
          <li data-label="pending_caveat">近期数据尚不完整</li>
        </ul>       </cagov-chart-dashboard-confirmed-cases>                     </div>
    <div class="col-lg-6 col-md-6 col-sm-12 p-rel">       <cagov-chart-dashboard-confirmed-deaths class="chart" data-chart-config-filter="death" data-chart-config-key="deaths">         <ul class="d-none">
          <li data-label="chartTitle">确认死亡数</li>
          <li data-label="chartLegend1">确认死亡总数<span class="big-num">{total_confirmed_deaths}</span></li>
          <li data-label="chartLegend2Increase">新增死亡数<span class="med-num">{new_deaths}</span>（增加<span class="med-num">{new_deaths_delta_1_day}</span>）</li>
          <li data-label="chartLegend2Decrease">新增死亡数<span class="med-num">{new_deaths}</span>（减少<span class="med-num">{new_deaths_delta_1_day}</span>）</li>
          <li data-label="chartLegend3">每100K人中的病例数<span class="med-num">{deaths_per_100k_7_days}</span>（7日平均数）</li>
          <li data-label="filterTabLabel1">死亡日期</li>
          <li data-label="filterTabLabel2">呈报日期</li>
          <li data-label="tooltipContent">死亡日期： <b>{DATE}</b><br> 每100K人在7日内的死亡率： <b>{7DAY_AVERAGE}</b><br> 死亡数：<b>{DEATHS}</b>           </li>
          <li data-label="dayAverage">7日平均数</li>
          <li data-label="deaths_leftYAxisLegend">每100K人中的死亡数</li>
          <li data-label="deaths_rightYAxisLegend">死亡数</li>
          <li data-label="deaths_death_xAxisLegend">死亡日期</li>
          <li data-label="deaths_reported_xAxisLegend">呈报日期</li>
          <li data-label="pending">待定</li>
          <li data-label="pending_caveat">近期数据尚不完整</li>
        </ul>       </cagov-chart-dashboard-confirmed-deaths>                   </div> 
  </div>



<div class="row d-flex justify-content-md-center mt-2 pl-2">
  <p class="small-text">注：相关人数并不代表真实的每日变化，因为这些结果包含来自昨天之前的病例数。发病日期是指预计出现病例的日期。呈报日期是指病例被呈报给加州公共卫生局的日期。病例数包括州立和联邦监狱、美国移民及海关执法机构、美国法警署拘留所及州立医院部门机构中的病例数。这些团体不包括在蓝图等级分配计算中，其显示不同的病例和检测呈阳性速率。负的报告死亡人数表示先前被归因于COVID-19的死亡病例，而后被确定与COVID-19无关。</p>
</div>



<h3 class="text-center mt-4">COVID-19检测</h3>    <cagov-county-toggle-buttons></cagov-county-toggle-buttons>    <p>加州的COVID-19诊断检测结果总数达到了59,795,197，较前一天的总数增加了173,688。过去7天的检测呈阳性率为1.3%。</p>



<div class="row">
    <div class="col-lg-6 col-md-6 col-sm-12 p-rel">       <cagov-chart-dashboard-total-tests class="chart" data-chart-config-filter="testing" data-chart-config-key="tests">         <ul class="d-none">
          <li data-label="chartTitle">检测总数</li>
          <li data-label="chartLegend1">已进行的检测的总数<span class="big-num">{total_tests_performed}</span></li>
          <li data-label="chartLegend2Increase">新呈报的检测数<span class="med-num">{new_tests_reported}</span>（增加<span class="med-num">{new_tests_reported_delta_1_day}</span>）</li>
          <li data-label="chartLegend2Decrease">新呈报的检测数<span class="med-num">{new_tests_reported}</span>（减少<span class="med-num">{new_tests_reported_delta_1_day}</span>）</li>
          <li data-label="filterTabLabel1">检测日期</li>
          <li data-label="filterTabLabel2">呈报日期</li>
          <li data-label="tooltipContent">检测日期： <b>{DATE} </b><br> 每100K人在7日内的平均检测率：<b>{7DAY_AVERAGE} </b><br> 检测总数：<b>{TOTAL_TESTS} </b>           </li>
          <li data-label="dayAverage">7日平均数</li>
          <li data-label="tests_leftYAxisLegend">每100K人中的检测数</li>
          <li data-label="tests_rightYAxisLegend">检测数</li>
          <li data-label="tests_testing_xAxisLegend">检测日期</li>
          <li data-label="tests_reported_xAxisLegend">呈报日期</li>
          <li data-label="pending">待定</li>
          <li data-label="pending_caveat">近期数据尚不完整</li>
        </ul>       </cagov-chart-dashboard-total-tests>                    </div>
    <div class="col-lg-6 col-md-6 col-sm-12 p-rel">       <cagov-chart-dashboard-positivity-rate class="chart filter-button-space" data-chart-config-filter="positivity" data-chart-config-key="positivity">         <ul class="d-none">
          <li data-label="chartTitle">检测结果呈阳性率</li>
          <li data-label="chartLegend1"><span class="big-num">{test_positivity_7_days}</span>检测结果呈阳性 （7日比率）</li>
          <li data-label="chartLegend2Increase">此前7日内增加<span class="med-num">{test_positivity_7_days_delta_7_days}</span></li>
          <li data-label="chartLegend2Decrease">此前7日内减少<span class="med-num">{test_positivity_7_days_delta_7_days}</span></li>
          <li data-label="tooltipContent">检测日期： <b>{DATE} </b><br> 7日内检测结果呈阳性率： <b>{7DAY_POSRATE} </b><br> 检测总数：<b>{TOTAL_TESTS} </b>           </li>
          <li data-label="leftYAxisLegend">检测结果呈阳性率</li>
          <li data-label="rightYAxisLegend">检测数</li>
          <li data-label="xAxisLegend">检测日期</li>
          <li data-label="pending">待定</li>
          <li data-label="dayRate">7日比率</li>
          <li data-label="pending_caveat">近期数据尚不完整</li>
        </ul>       </cagov-chart-dashboard-positivity-rate>                     </div> 
  </div>



<div class="row d-flex justify-content-md-center mt-2 pl-2">
  <p class="small-text">注：检测日期是做检测的日期。呈报日期是指病例被呈报给加州公共卫生局的日期。报告的日期数据不适用于2020年5月5日之前的检测。检测日期数据不包括州外和未知辖区检测，总数可能与报告日期的数量不匹配。检测呈阳性率的计算方法是阳性分子检测的数量除以完成的总分子检测数量。检测呈阳性率包括州立和联邦监狱、美国移民及海关执法机构、美国法警署拘留所及州立医院部门机构中的检测呈阳性率。这些团体不包括在蓝图等级分配计算中，其显示不同的病例和检测呈阳性速率。之前呈报的是14日平均检测呈阳性率。</p>
</div>



<h3 class="text-center">对医院和加护病房 (Intensive Care Unit, ICU) 的影响</h3>    <cagov-county-toggle-buttons></cagov-county-toggle-buttons>    <p>在加州因确诊及疑似感染COVID-19而住院的人数总共达到了2,068，a decrease of 26来自前一天的总数。在加州因确诊及疑似感染COVID-19而进入ICU的人数总共达到了455，a decrease of 23来自前一天的总数。</p>



<div class="row">
    <div class="col-lg-6 col-md-6 col-sm-12 p-rel">       <cagov-chart-dashboard-patients class="chart" data-chart-config-filter="hospitalized" data-chart-config-key="patients">         <ul class="d-none">
          <li data-label="chartTitle">COVID-19住院患者</li>
          <li data-label="chartTitleICU">COVID-19 ICU患者</li>
          <li data-label="chartLegend1"><span class="big-num">{TOTAL}</span> COVID-19住院患者</li>
          <li data-label="chartLegend2Increase">比前一天住院患者总数多<span class="med-num">{CHANGE}</span>（增加{CHANGE_FACTOR}）</li>
          <li data-label="chartLegend2Decrease">比前一天住院患者总数少<span class="med-num">{CHANGE}</span>（减少{CHANGE_FACTOR}）</li>
          <li data-label="chartLegend1ICU"><span class="big-num">{TOTAL}</span> COVID-19 ICU患者</li>
          <li data-label="chartLegend2IncreaseICU">比前一天ICU患者总计多<span class="med-num">{CHANGE}</span> （增加{CHANGE_FACTOR} ）</li>
          <li data-label="chartLegend2DecreaseICU">比前一天ICU患者总计少<span class="med-num">{CHANGE}</span> （减少{CHANGE_FACTOR} ）</li>
          <li data-label="filterTabLabel1">住院患者</li>
          <li data-label="filterTabLabel2">ICU</li>
          <li data-label="xAxisLegend">呈报日期</li>
          <li data-label="dayAverage">14日平均数</li>
          <li data-label="tooltipContent">呈报日期： <b>{DATE} </b><br> 住院患者总计：<b>{TOTAL_HOSPITALIZED} </b><br> 14日内住院患者的平均数：<b>{14DAY_AVERAGE} </b>           </li>
        </ul>       </cagov-chart-dashboard-patients>                     </div>
    <div class="col-lg-6 col-md-6 col-sm-12">       <cagov-chart-dashboard-icu-beds class="chart filter-button-space" data-chart-config-filter="icu-beds" data-chart-config-key="icu-beds">         <ul class="d-none">
          <li data-label="chartTitle">ICU病床</li>
          <li data-label="chartLegend1">空置<span class="big-num">{TOTAL}</span>张ICU病床</li>
          <li data-label="chartLegend2Increase">比前一天ICU空置病床总数多<span class="med-num">{CHANGE}</span>（增加{CHANGE_FACTOR}）</li>
          <li data-label="chartLegend2Decrease">比前一天ICU空置病床总数少<span class="med-num">{CHANGE}</span>（减少{CHANGE_FACTOR}）</li>
          <li data-label="xAxisLegend">呈报日期</li>
          <li data-label="tooltipContent">在<b>{DATE}</b>，总计有<b>{VALUE}</b>张空置的ICU病床。</li>
        </ul>       </cagov-chart-dashboard-icu-beds>                    </div> 
  </div>



<div class="bg-darkblue py-5 full-bleed mb-5">
  <div class="container py-2">
    <div class="row pb-4">
      <div class="col-lg-10 mx-auto color-white">
        <h2 class="text-center color-orange" id="reopening-equitably">更多数据与工具</h2>
        <p>加州已经收集了大量数据，为应对COVID-19提供了信息。我们开发了工具以处理并分析这些数据。这些数据和工具可供公众使用。</p>

        <div class="mt-3 text-center">           <a href="/data-and-tools/" class="link-arrow-white">             <div class="link-arrow-label">查看所有数据和工具</div>             <cagov-arrow></cagov-arrow> </a>         </div>


      </div>
    </div>

  </div>   <!--END container--> </div>



<div class="row d-flex justify-content-md-center">

  <h2 class="text-center color-purple">这些数据推动了确保加州民众的健康和安全的决策</h2>

  <div class="grid-layout-hd bg-lightblue bd-lightblue">
    <div class="grid-main bg-lightblue py-2">
      <h3 class="my-0 text-center">加州的县风险等级</h3>
    </div>
    <div class="grid-single single1">
      <div class="btn-matrix bg-purple-btn">广泛传播</div>
      <p class="text-small mt-2 mb-0">关闭许多非必要的室内业务</p>
    </div>
    <div class="grid-single single2">
      <div class="btn-matrix bg-red-btn">重度</div>
      <p class="text-small mt-2 mb-0">关闭一些非必要的室内业务</p>
    </div>
    <div class="grid-single single3">
      <div class="btn-matrix bg-orange-btn">中度</div>
      <p class="text-small mt-2 mb-0">一些室内业务可在经调整后开放</p>
    </div>
    <div class="grid-single single4">
      <div class="btn-matrix bg-yellow-btn">最低</div>
      <p class="text-small mt-2 mb-0">大部分室内业务可在经调整后开放</p>
    </div>
  </div>

  <h3 class="has-text-align-center pb-0 mb-2 mt-3" id="county-status">当前等级划分情况（截至 2021年4月27日</h3>
  <p class="mt-0">所有数据和等级划分于每周二更新。</p>

    <div class="tableauPlaceholder" id="viz1607448868632" style="position: relative">   <noscript><a href="#"><img alt=" " src="https://public.tableau.com/static/images/CO/COVID-19Planforreducingcovid-19wregionsmap/planforreducingcovid-19/1_rss.png" style="border: none"></a></noscript> <object class="tableauViz" style="display:none;"><param name="host_url" value="https%3A%2F%2Fpublic.tableau.com%2F"> <param name="embed_code_version" value="3"> <param name="site_root" value=""><param name="name" value="COVID-19Planforreducingcovid-19wregionsmap/planforreducingcovid-19"><param name="tabs" value="no"><param name="toolbar" value="yes"><param name="static_image" value="https://public.tableau.com/static/images/CO/COVID-19Planforreducingcovid-19wregionsmap/planforreducingcovid-19/1.png"> <param name="animate_transition" value="yes"><param name="display_static_image" value="yes"><param name="display_spinner" value="yes"><param name="display_overlay" value="yes"><param name="display_count" value="yes"><param name="language" value="en"><param name="filter" value="publish=yes"></object>   </div>   <script type="text/javascript">
  var divElement = document.getElementById('viz1607448868632');
  var vizElement = divElement.getElementsByTagName('object')[0];
  if ( divElement.offsetWidth > 800 ) { vizElement.style.minWidth='700px';vizElement.style.maxWidth='920px';vizElement.style.width='100%';vizElement.style.height='527px';} else if ( divElement.offsetWidth > 500 ) { vizElement.style.minWidth='700px';vizElement.style.maxWidth='920px';vizElement.style.width='100%';vizElement.style.height='527px';} else { vizElement.style.width='100%';vizElement.style.height='627px';}
  var scriptElement = document.createElement('script');
  scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
  vizElement.parentNode.insertBefore(scriptElement, vizElement);
  </script>  </div>



<div class="pl-2 text-small">
  <p class="small-text">所有数据和等级划分的依据为周末的结果2021年4月17日。请参阅<a class="external" href="https://www.cdph.ca.gov/Programs/CID/DCDC/Pages/COVID-19/COVID19CountyMonitoringOverview.aspx">CDPH发布的更安全的经济蓝图架构</a>，了解等级划分及变更情况，以及县历史数据（<strong>加州蓝图数据表</strong>）。请参阅<a class="external" href="https://www.cdph.ca.gov/Programs/CID/DCDC/Pages/COVID-19/Regional-Stay-at-Home-Order-Data-Projections.aspx">CDPH的ICU数据</a>，了解地区ICU床位空置率。</p>
</div>



<div class="text-center mb-4">   <a href="/safer-economy/" class="link-arrow-blue">     <div class="link-arrow-label">查看您所在的县可以开放哪些行业</div>     <cagov-arrow></cagov-arrow> </a> </div>



<div class="bg-lightblue full-bleed mb-0">
  <div class="container pt-4 pb-5">
    <h2 class="text-center color-primary">各群体的感染数</h2>
    <div class="col-lg-12 bg-white px-4 py-4">
      <div class="d-flex flex-column flex-md-row justify-content-center my-3">
        <div class="large-tabs"><button class="large-tab toggle-active js-toggle-group ethnicity">种族和族裔</button> <button class="large-tab js-toggle-group gender">性别</button> <button class="large-tab js-toggle-group age">年龄</button>         </div>
      </div>
      <div class="row">         <!-- newly added -->         <div class="toggle-group-container d3-charts col-sm-12 col-lg-10 px-3 
 mx-auto d3-charts">
          <div id="gender-graph" class="toggle-group-element" style="display:none">
            <div id="genderGroupChartContainer">
              <div class="mx-auto">
                <p>COVID-19确诊病例死亡人数的分布情况，显示了各性别的患病情况有差异，在患病人群中，有很大一部分死亡病例都是男性。</p>
              </div>               <!-- <div class="tableauPlaceholder"></div> -->               <div class="row">
                <div class="col-lg-6 col-md-6 col-sm-12">                   <cagov-chart-dashboard-groups-gender-cases class="chart">                     <ul class="d-none">
                      <li data-label="chartTitle">加州确诊病例数（按性别分类）</li>
                      <li data-label="chartLegend1">占确诊病例数的%</li>
                      <li data-label="chartLegend2">占全州人口的%</li>
                      <li data-label="chartBarCaption">{category}占确诊病例数的{metric-value}及加州总人口的{metric-baseline-value}。</li>
                      <li data-label="footerText">使用来自{MINUS_ONE_DATE}的数据更新{PUBLISHED_DATE}。注：由于四舍五入的关系，百分比加起来可能不等于100%。</li>
                    </ul>                   </cagov-chart-dashboard-groups-gender-cases>                                 </div>
                <div class="col-lg-6 col-md-6 col-sm-12">                   <cagov-chart-dashboard-groups-gender-deaths class="chart">                     <ul class="d-none">
                      <li data-label="chartTitle">加州死亡病例数（按性别分类）</li>
                      <li data-label="chartLegend1">占死亡病例数的%</li>
                      <li data-label="chartLegend2">占全州人口的%</li>
                      <li data-label="chartBarCaption">{category}占死亡病例数的{metric-value}及加州总人口的{metric-baseline-value}。</li>
                    </ul>                   </cagov-chart-dashboard-groups-gender-deaths>                                </div> 
              </div>
              <p class="small-text chart-footer-caption">此处为页脚文本</p>
            </div>
          </div>
          <div id="age-graph" class="toggle-group-element" style="display:none">
            <div id="ageGroupChartContainer">
              <div class="mx-auto">
                <p>COVID-19确诊病例和死亡病例的分布情况，显示了加州各年龄组的患病情况有很大差异。18至49岁人士中的病例数相当多。65岁及以上人士中的死亡数相当多。</p>
              </div>               <!-- <div class="tableauPlaceholder"></div> -->               <div class="row">
                <div class="col-lg-6 col-md-6 col-sm-12">                   <cagov-chart-dashboard-groups-age-cases class="chart">                     <ul class="d-none">
                      <li data-label="chartTitle">加州确诊病例数（按年龄分类）</li>
                      <li data-label="chartLegend1">占确诊病例数的%</li>
                      <li data-label="chartLegend2">占全州人口的%</li>
                      <li data-label="chartBarCaption">{category}年龄段占确诊病例数的{metric-value}及加州总人口的{metric-baseline-value}。</li>
                      <li data-label="footerText">使用来自{MINUS_ONE_DATE}的数据更新{PUBLISHED_DATE}。注：由于四舍五入的关系，百分比加起来可能不等于100%。</li>
                    </ul>                   </cagov-chart-dashboard-groups-age-cases>                                 </div>
                <div class="col-lg-6 col-md-6 col-sm-12">                   <cagov-chart-dashboard-groups-age-deaths class="chart">                     <ul class="d-none">
                      <li data-label="chartTitle">加州死亡病例数（按年龄分类）</li>
                      <li data-label="chartLegend1">占死亡病例数的%</li>
                      <li data-label="chartLegend2">占全州人口的%</li>
                      <li data-label="chartBarCaption">{category}年龄段占死亡病例数的{metric-value}及加州总人口的{metric-baseline-value}。</li>
                    </ul>                   </cagov-chart-dashboard-groups-age-deaths>                                </div> 
              </div>
              <p class="small-text chart-footer-caption">此处为页脚文本</p>
            </div>
          </div>
          <div id="ethnicity-graph" class="toggle-group-element">
            <div id="ethnicityGroupChartContainer">
              <div class="mx-auto">
                <p>COVID-19确诊病例的分布情况，显示了加州所有种族和族裔人口的患病情况有很大差异，本州的拉丁裔和夏威夷原住民/太平洋岛民群体中有相当多的病例数。更多<a class="external" href="https://www.cdph.ca.gov/Programs/CID/DCDC/Pages/COVID-19/Race-Ethnicity.aspx">COVID-19种族和族裔数据</a>可供查阅。</p>
              </div>               <!-- <div class="tableauPlaceholder"></div> -->               <div class="row">
                <div class="col-lg-6 col-md-6 col-sm-12">                   <cagov-chart-dashboard-groups-race-ethnicity-cases class="chart">                     <ul class="d-none">
                      <li data-label="chartTitle">加州确诊病例数（按种族及族裔分类）</li>
                      <li data-label="chartLegend1">占确诊病例数的%</li>
                      <li data-label="chartLegend2">占全州人口的%</li>
                      <li data-label="chartBarCaption">{category}人数占确诊病例数的{metric-value}及加州总人口的{metric-baseline-value}。</li>
                      <li data-label="footerText">使用来自{MINUS_ONE_DATE}的数据更新{PUBLISHED_DATE}。注：由于四舍五入的关系，百分比加起来可能不等于100%。</li>
                    </ul>                   </cagov-chart-dashboard-groups-race-ethnicity-cases>                                 </div>
                <div class="col-lg-6 col-md-6 col-sm-12">                   <cagov-chart-dashboard-groups-race-ethnicity-deaths class="chart">                     <ul class="d-none">
                      <li data-label="chartTitle">加州死亡病例数（按种族及族裔分类）</li>
                      <li data-label="chartLegend1">占死亡病例数的%</li>
                      <li data-label="chartLegend2">占全州人口的%</li>
                      <li data-label="chartBarCaption">{category}人数占死亡病例数的{metric-value}及加州总人口的{metric-baseline-value}。</li>
                    </ul>                   </cagov-chart-dashboard-groups-race-ethnicity-deaths>                                </div> 
              </div>
              <p class="small-text chart-footer-caption">此处为页脚文本</p>
            </div>

          </div>
        </div>
      </div>
    </div>
    <div class="text-center pt-5 p-rel">       <a href="/equity/" class="link-arrow-blue mb-4 mt-3">         <div class="link-arrow-label">查看各群体的更多详细数据</div>         <cagov-arrow></cagov-arrow> </a>     </div>     <!--END col-12-->   </div>   <!--END CONTAINER--> </div>
</div>
    </div>
  </div>
  <!-- end contentBlock -->

    </main>

    <script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-154336791-1', 'auto');
ga('create', 'UA-3419582-2', 'auto', 'tracker2');
ga('create', 'UA-21974567-38', 'auto', 'tracker3');
ga('send', 'pageview');
ga('tracker2.send', 'pageview');
ga('tracker3.send', 'pageview');
</script>
<script async defer src='https://www.google-analytics.com/analytics.js'></script>

<pagerating-section>
	<cagov-pagefeedback 
	data-endpoint-url="https://api.alpha.ca.gov/WasHelpful"
	data-question="您是否找到您寻找的东西？"
	data-yes="是"
	data-no="否"
	data-positive-comment-prompt="太棒了！您今天在找什么？"
	data-comment-prompt="有什么问题？"
	data-thanks-feedback="感谢您提供反馈！"
	data-thanks-comments="太好了！"
	data-submit="提交"
	data-required-field="此栏必填"
	data-character-limit="您已经达到您的字符限制。"
	data-anything-to-add="如果您有需要添加的任何内容，"
	data-positive-survey-url="https://ethn.io/85017"
	data-take-the-survey="填写问卷调查"
	data-any-other-feedback="如果您对于此网站有任何反馈，"
	data-negative-survey-url="https://ethn.io/77745"
	data-take-our-survey="填写我们的问卷调查"
	></cagov-pagefeedback>	
</pagerating-section>

<footer-section>

<footer class="footer-section">
	<div class="footer-section-grid">

		<div class="footer-section-col footer-section-col-nav trigger">
			<nav class="footer-section-nav" role="navigation" aria-label="Footer navigation">
				
					<a class="footer-section-nav-link" href="/zh-hans/stay-home-except-for-essential-needs/">关于COVID-19限制</a>
				
					<a class="footer-section-nav-link" href="/zh-hans/safer-economy/">更安全的经济蓝图</a>
				
					<a class="footer-section-nav-link" href="/zh-hans/vaccines/">疫苗</a>
				
					<a class="footer-section-nav-link" href="/zh-hans/industry-guidance/">行业指引</a>
				
					<a class="footer-section-nav-link" href="/zh-hans/get-local-information/">当地信息和警报</a>
				
			</nav>
		</div>

		<div class="footer-section-col footer-section-col-logo trigger">
			<a class="footer-section-logo" href="/zh-hans/">
				<svg class="logo-mark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 140"><title>California for All</title><g class="mark-ca"><path class="logo-mark-orange" d="M48.2,83l-13.2,28.6h25.2L48.2,83z M66.7,126.9H28.1l-6,13H0.2l48.7-99.8l44.6,99.8H72.1L66.7,126.9z"/><polygon class="logo-mark-orange" points="117,42.9 117,122.4 146.9,122.4 146.9,139.9 97.1,139.9 97.1,42.9"/><polygon class="logo-mark-orange" points="170.2,42.9 170.2,122.4 200,122.4 200,139.9 150.2,139.9 150.2,42.9"/></g><g class="mark-all"><path class="logo-mark-white" d="M21,8.7c-2-2.2-4.3-3.3-7.1-3.3c-4.6,0-8.4,3.9-8.4,8.7c0,4.8,3.7,8.7,8.4,8.7c2.9,0,5.3-1.2,7.4-3.6l3.4,3.4 c-2.8,3.1-6.6,5.1-10.8,5.1C6.2,27.8,0,21.7,0,14.1C0,6.5,6.2,0.4,13.9,0.4c4.2,0,8.1,2,10.8,5.1L21,8.7z"/><path class="logo-mark-white" d="M37,11.8l-3.6,7.9h6.9L37,11.8z M42,23.9H31.4l-1.6,3.6h-6L37.1,0l12.3,27.5h-5.9L42,23.9z"/><polygon class="logo-mark-white" points="56.1,0.8 56.1,22.7 64.3,22.7 64.3,27.5 50.6,27.5 50.6,0.8"/><rect class="logo-mark-white" x="66" y="0.8" width="5.5" height="26.7"/><polygon class="logo-mark-orange" points="74.6,27.5 74.6,0.8 89.1,0.8 89.1,5.6 80.1,5.6 80.1,11.1 87.6,11.1 87.6,15.9 80.1,15.9 80.1,27.5"/><path class="logo-mark-orange" d="M95.1,14.1c0,4.8,3.7,8.7,8.4,8.7c4.6,0,8.4-3.9,8.4-8.7c0-4.8-3.8-8.7-8.4-8.7C98.8,5.4,95.1,9.3,95.1,14.1 M117.4,14.1c0,7.6-6.2,13.7-13.9,13.7c-7.7,0-13.9-6.1-13.9-13.7c0-7.6,6.2-13.7,13.9-13.7C111.2,0.4,117.4,6.5,117.4,14.1"/><path class="logo-mark-orange" d="M125.3,5.6v6.7h2.9c2.3,0,3.9-1.1,3.9-3.4c0-2.2-1.6-3.3-3.9-3.3H125.3z M125.3,16.8v10.6h-5.5V0.8h8.8 c4.9,0,9,3.1,9,8c0,3.1-1.7,5.7-4.2,7l5,11.6h-6L128,16.8H125.3z"/><polygon class="logo-mark-white" points="159.4,0.8 164.9,0.8 164.9,28.2 145.9,11.6 145.9,27.5 140.4,27.5 140.4,0 159.4,16.6"/><rect x="167.3" y="0.8" class="logo-mark-white" width="5.5" height="26.7"/><path class="logo-mark-white" d="M187.2,11.8l-3.6,7.9h6.9L187.2,11.8z M192.3,23.9h-10.6l-1.6,3.6h-6L187.4,0l12.3,27.5h-5.9L192.3,23.9z"/></g></svg>
			</a>
		</div>

		<div class="footer-section-col footer-section-col-hotline trigger">
			<div class="footer-section-hotline">
				<div class="footer-section-hotline-label">COVID-19热线</div>
				<a class="footer-section-hotline-number" href="tel:8334224255">1-833-422-4255</a>
				<div class="footer-section-hotline-hours">周一至周五，上午8点至晚上8点，周六至周日，上午8点至下午5点</div>
			</div>
		</div>

	</div>

	<nav class="social trigger" role="navigation" aria-label="California Department of Public Health on Social Media">
		<a class="social-link" href="https://www.facebook.com/CAPublicHealth/" title="California Department of Public Health on Facebook"><svg class="social-icon" xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512"><title>California Department of Public Health on Facebook</title><path d="M304 96h80V0h-80c-61.757 0-112 50.243-112 112v48h-64v96h64v256h96V256h80l16-96h-96v-48c0-8.673 7.327-16 16-16z"></path></svg></a>
    <a class="social-link" href="https://twitter.com/CAPublicHealth" title="California Department of Public Health on Twitter"><svg class="social-icon" xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512"><title>California Department of Public Health on Twitter</title><path d="M512 113.2c-18.8 8.4-39.1 14-60.3 16.5 21.7-13 38.3-33.6 46.2-58.1-20.3 12-42.8 20.8-66.7 25.5C412 76.7 384.7 64 354.5 64c-58 0-105 47-105 105 0 8.2.9 16.2 2.7 23.9-87.3-4.4-164.7-46.2-216.5-109.8-9 15.5-14.2 33.6-14.2 52.8 0 36.4 18.5 68.6 46.7 87.4-17.2-.5-33.4-5.3-47.6-13.1v1.3c0 50.9 36.2 93.4 84.3 103-8.8 2.4-18.1 3.7-27.7 3.7-6.8 0-13.3-.7-19.8-1.9 13.4 41.7 52.2 72.1 98.1 73-36 28.2-81.2 45-130.5 45-8.5 0-16.8-.5-25.1-1.5C46.5 462.7 101.7 480 161 480c193.2 0 298.9-160.1 298.9-298.9 0-4.6-.1-9.1-.3-13.6 20.5-14.7 38.3-33.2 52.4-54.3z"></path></svg></a>
	</nav>


	<div class="footer-section footer-section-grid footer-section-utility logo-flanked">
		
		<div class="trigger mx-auto">
			<nav class="footer-section-utility-nav" role="navigation" arial-label="Other State of California Resources">
				
				<a class="footer-section-utility-nav-link" href="https://www.ca.gov">CA.gov</a>
				
				<a class="footer-section-utility-nav-link" href="https://www.cdph.ca.gov/Programs/CID/DCDC/Pages/Immunization/ncov2019.aspx">公共卫生局</a>
				
				<a class="footer-section-utility-nav-link" href="https://www.gov.ca.gov/newsroom/">州长编辑部</a>
				
				<a class="footer-section-utility-nav-link" href="https://www.ca.gov/accessibility/">可访问性</a>
				
				<a class="footer-section-utility-nav-link" href="https://www.ca.gov/privacy-policy/">隐私政策</a>
				
				<a class="footer-section-utility-nav-link" href="https://www.surveymonkey.com/r/COVID19CAGOV">反馈</a>
				
				<a class="footer-section-utility-nav-link" href="https://registertovote.ca.gov">登记投票</a>
				
			</nav>
			<span class="footer-section-utility-official">加州政府官方网站</span>
		</div>
		


<div class="mx-auto ca-gov">
	<a href="https://ca.gov" class="logo-cagov">
			<?xml version="1.0" encoding="UTF-8"?>
			<svg enable-background="new 0 0 81.6 60" version="1.1" viewBox="0 0 81.6 60" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
			<title>CA.Gov Logo White</title>
			<path class="st0" d="m49.7 25c0.2-0.7 0.8-2.6 1.7-5.8 0.2-0.8 0.8-2.4 1.7-4.9s1.6-4.5 2.2-6c-1.8 1.2-3.4 2.6-4.8 4.2-5.9 6.3-12.7 14-15.1 18 0.9-0.2 2.8-2.1 8.6-4.2 1.8-0.7 3.7-1.2 5.7-1.3zm-1.1 4c-18.4 0-26.5 29.5-39.3 29.5-2.9 0-5.2-1.3-6.7-3.9-1-1.7-1.6-3.7-1.5-5.7 0-5.4 2.6-12.1 7.6-20.3 4.3-7 8.9-12.6 13.7-16.8 4.1-3.8 7.6-5.6 10.6-5.6 1.5-0.1 3 0.6 3.9 1.8 0.7 1 1.1 2.2 1.1 3.4 0 2.4-0.8 5.2-2.4 8.2-1.4 2.6-3.2 5.1-5.3 7.2-1.4 1.4-2.5 2.1-3.3 2.1-0.6 0-1.1-0.3-1.4-0.8-0.3-0.3-0.5-0.8-0.5-1.3 0-0.9 0.8-1.9 2.3-3 2-1.4 3.7-3.2 5.1-5.2 1.8-2.8 2.8-5.1 2.8-7 0.1-0.6-0.1-1.2-0.5-1.7-0.4-0.4-0.9-0.6-1.5-0.6-1.4 0-3.3 1-5.8 3-3.3 2.7-6.4 5.8-9.1 9.1-3.8 4.5-6.9 9.4-9.4 14.6-2.2 4.9-3.3 9.1-3.3 12.6 0 1.5 0.5 3 1.4 4.2 0.9 1.3 2.4 2 3.9 2 5.9-0.2 13.2-13.6 15.4-16.7 22.5-30.8 24.2-30.9 27.6-34.1 2-1.9 3.5-2.8 4.5-2.8 0.6 0 1.3 0.3 1.7 0.8 0.4 0.4 0.6 1 0.6 1.6-0.2 1.3-0.5 2.5-1 3.7-1.2 3.1-2.3 6.3-3.4 9.8-1 3.1-1.6 5.5-1.9 7.1h0.9 1.8c1.4 0 2.2 0.5 2.2 1.6 0 0.5-0.2 1-0.5 1.4-0.2 0.4-0.6 0.7-1.1 0.8h-1.3c-1.1 0-2.1 0.1-3.2 0.3-0.3 0.8-0.9 7.4-1.9 7.7-3.1 2.6-2.9-6.1-2.8-7z"/>
			<path class="st1" d="m30.4 49.1c0.8 0 1.5 0.3 2.1 0.9 0.6 0.5 0.9 1.3 0.9 2.1 0 1.6-1.3 2.9-2.9 2.9s-2.9-1.3-2.9-2.9c-0.2-1.6 1.1-2.9 2.8-3-0.1 0 0 0 0 0z"/>
			<path class="st1" d="m48.4 41.3-2.1 2c-1.2-1.3-2.8-2.1-4.6-2.1-1.4 0-2.8 0.5-3.8 1.5s-1.6 2.3-1.5 3.7c0 1.4 0.6 2.8 1.6 3.8s2.5 1.6 3.9 1.5c0.9 0 1.8-0.2 2.6-0.6 0.7-0.5 1.3-1.2 1.7-2h-4.5v-2.7h7.7v0.7c0 1.3-0.4 2.7-1.1 3.8-0.6 1.1-1.6 2.1-2.7 2.8-1.2 0.7-2.5 1-3.9 1-1.5 0-3-0.3-4.3-1s-2.3-1.7-3-3-1.1-2.7-1.1-4.2c0-2 0.7-3.9 2-5.3 1.6-1.8 3.9-2.8 6.3-2.7 1.3 0 2.6 0.2 3.7 0.7 1.3 0.5 2.2 1.2 3.1 2.1z"/>
			<path class="st1" d="m58.4 38.4c2.1 0 4.2 0.8 5.6 2.4 1.5 1.5 2.4 3.6 2.3 5.8 0 2.1-0.8 4.2-2.3 5.7-3.1 3.1-8.2 3.1-11.4 0-3.1-3.2-3.1-8.3 0.1-11.4 1.6-1.6 3.6-2.5 5.7-2.5zm0 2.9c-1.3 0-2.6 0.5-3.6 1.5s-1.5 2.4-1.4 3.8c-0.1 1.6 0.6 3.1 1.8 4 0.9 0.8 2.1 1.2 3.3 1.2 1.3 0 2.6-0.5 3.5-1.5 2-2.1 2-5.3 0-7.4-1-1.1-2.3-1.6-3.6-1.6z"/>
			<polygon class="st1" points="65.9 38.8 68.9 38.8 72.7 49.8 76.7 38.8 79.7 38.8 74.1 54.2 71.3 54.2"/>
			</svg>
		</a>	
</div>
	</div>

</footer>

</footer-section>


	
		<script type="module">
			class e extends HTMLElement{connectedCallback(){this.expandTargets=this.querySelectorAll(".list-group-item-action"),this.expandTargets.forEach((e=>{let t=e.querySelector(".details");t.setAttribute("data-collapsed","true"),t.style.height="0px",t.setAttribute("aria-hidden","true"),e.addEventListener("click",this.listen)}))}listen(){let e=this.querySelector(".details"),t=this.querySelector(".step-description");var n,a;"true"===e.getAttribute("data-collapsed")?(a=(n=e).scrollHeight,n.style.height=a+"px",n.setAttribute("data-collapsed","false"),e.setAttribute("data-collapsed","false"),t.setAttribute("aria-expanded","true"),e.setAttribute("aria-hidden","false"),this.classList.add("list-open")):(!function(e){var t=e.scrollHeight;requestAnimationFrame((function(){e.style.height=t+"px",requestAnimationFrame((function(){e.style.height="0px"}))})),e.setAttribute("data-collapsed","true"),e.setAttribute("aria-hidden","true")}(e),this.classList.remove("list-open"),t.setAttribute("aria-expanded","false"))}}window.customElements.define("cwds-step-list",e);class t extends window.HTMLElement{connectedCallback(){this.classList.add("prog-enhanced"),this.expandTarget=this.querySelector(".card-container"),this.expandButton=this.querySelector(".card-header"),this.expandButton.addEventListener("click",this.listen.bind(this)),this.activateButton=this.querySelector(".card-header"),this.eventType=this.dataset.eventType?this.dataset.eventType:"click","true"===this.activateButton.getAttribute("aria-expanded")&&this.triggerAccordionClick()}listen(){this.cardBodyHeight||(this.cardBodyHeight=this.querySelector(".card-body").clientHeight),this.expandTarget.clientHeight>0?this.expandAccordion():this.closeAccordion()}triggerAccordionClick(){const e=new MouseEvent(this.eventType,{view:window,bubbles:!0,cancelable:!0});this.expandButton.dispatchEvent(e)}expandAccordion(){this.expandTarget.style.height="0px",this.expandTarget.setAttribute("aria-hidden","true"),this.querySelector(".card-header").classList.remove("accordion-alpha-open"),this.activateButton.setAttribute("aria-expanded","false");for(var e=document.querySelectorAll("cagov-accordion .card-container a"),t=document.querySelectorAll("cagov-accordion .card-container button"),n=0;n<e.length;n++)e[n].setAttribute("tabindex","-1");for(n=0;n<t.length;n++)t[n].setAttribute("tabindex","-1")}closeAccordion(){this.expandTarget.style.height=this.cardBodyHeight+"px",this.expandTarget.setAttribute("aria-hidden","false"),this.querySelector(".card-header").classList.add("accordion-alpha-open"),this.querySelector(".card-container").classList.remove("collapsed"),this.activateButton.setAttribute("aria-expanded","true");for(var e=document.querySelectorAll("cagov-accordion .card-container a"),t=document.querySelectorAll("cagov-accordion .card-container button"),n=0;n<e.length;n++)e[n].removeAttribute("tabindex");for(n=0;n<t.length;n++)t[n].removeAttribute("tabindex")}}window.customElements.define("cagov-accordion",t);for(var n=document.querySelectorAll("cagov-accordion .card-container a"),a=document.querySelectorAll("cagov-accordion .card-container button"),s=0;s<n.length;s++)n[s].setAttribute("tabindex","-1");for(s=0;s<a.length;s++)a[s].setAttribute("tabindex","-1");class o extends window.HTMLElement{connectedCallback(){let e=this.dataset.question?this.dataset.question:"Did you find what you were looking for?",t=this.dataset.yes?this.dataset.yes:"Yes",n=this.dataset.no?this.dataset.no:"No",a=this.dataset.commentPrompt?this.dataset.commentPrompt:"What was the problem?";this.positiveCommentPrompt=this.dataset.positiveCommentPrompt?this.dataset.positiveCommentPrompt:"Great! What were you looking for today?";let s=this.dataset.thanksFeedback?this.dataset.thanksFeedback:"Thank you for your feedback!",o=this.dataset.thanksComments?this.dataset.thanksComments:"Thank you for your comments!",i=this.dataset.submit?this.dataset.submit:"Submit",r=this.dataset.requiredField?this.dataset.requiredField:"This field is required",c=this.dataset.characterLimit?this.dataset.characterLimit:"You have reached your character limit.",l=this.dataset.anythingToAdd?this.dataset.anythingToAdd:"If you have anything to add,";this.positiveSurveyUrl=this.dataset.positiveSurveyUrl?this.dataset.positiveSurveyUrl:"https://ethn.io/85017";let d=this.dataset.takeTheSurvey?this.dataset.takeTheSurvey:"take the survey",u=this.dataset.anyOtherFeedback?this.dataset.anyOtherFeedback:"If you have any other feedback about this website,",h=this.dataset.negativeSurveyUrl?this.dataset.negativeSurveyUrl:"https://ethn.io/77745",m=this.dataset.takeOurSurvey?this.dataset.takeOurSurvey:"take our survey";this.endpointUrl=this.dataset.endpointUrl;let p=function(e,t,n,a,s,o,i,r,c,l,d,u,h,m,p){return`<section aria-label="Feedback">\n  <div class="feedback-form">\n    <div class="feedback-form-grid">\n\t\t\t\t<div class="feedback-form-grid-col" id="yes-no">\n          <div class="js-feedback-form">\n          <h3 class="feedback-form-label mt-0 mb-3 font-size-1-5em" id="feedback-rating">${e}</h3>\n          <button class="button-lightestblue mr-2 js-feedback-yes" id="feedback-yes">${t}</button>\n          <button class="button-lightestblue ml-3 js-feedback-no" id="feedback-no">${n}</button>\n          </div>\n          <div class="feedback-form-thanks js-feedback-thanks" role="alert"><span class="font-size-1-5em bold mb-3">${o}</span>\n          <br><span class="text-300">${l} <a href="${d}?page=${window.location.toString()}" class="color-secondary color-secondary-hover">${u}.</a></span></div>\n        </div>\n        <div class="col-md-6 mx-auto d-none" id="feedback-form">\n          <div class="feedback-form-add text-center">\n            <label class="feedback-form-label js-feedback-field-label font-size-1-5em" for="add-feedback">${a}</label>\n            <div class="feedback-form-add-grid d-block">\n              <textarea name="add-feedback" class="js-add-feedback feedback-form-textarea" id="add-feedback" rows="1"></textarea>\n              <div class="feedback-form-error feedback-error color-yellow" role="alert">${r}</div>\n              <div class="feedback-form-error feedback-limit-error color-yellow" role="alert">${c}</div>\n            </div>\n            <button class="button-lightestblue mt-4 mx-auto js-feedback-submit" type="submit" id="feedback-submit">${i}</button>\n          </div>\n          <div class="feedback-form-thanks feedback-thanks-add" role="alert">\n            <span class="font-size-1-5em bold">${s}</span>\n            <p class="text-300  mt-3">${h} <a href="${m}?page=${window.location.toString()}" class="color-secondary color-secondary-hover js-feedback-survey-link">${p}.</a></p>\n          </div>\n\t\t\t\t</div>\n\t\t  </div>\n    </div>\n    </section>`}(e,t,n,a,s,o,i,r,c,l,this.positiveSurveyUrl,d,u,h,m);this.innerHTML=p,this.applyListeners()}applyListeners(){this.wasHelpful="",this.querySelector(".js-add-feedback").addEventListener("focus",(e=>{this.querySelector(".js-feedback-submit").style.display="block"}));let e=this.querySelector(".js-add-feedback");e.addEventListener("keyup",(function(t){e.value.length>15?e.setAttribute("rows","3"):e.setAttribute("rows","1")})),e.addEventListener("keydown",(function(t){e.value.length>600?document.querySelector(".feedback-limit-error").style.display="block":document.querySelector(".feedback-limit-error").removeAttribute("style")})),e.addEventListener("blur",(t=>{0!==e.value.length&&(this.querySelector(".js-feedback-submit").style.display="block")})),this.querySelector(".js-feedback-yes").addEventListener("click",(e=>{this.querySelector(".js-feedback-field-label").innerHTML=this.positiveCommentPrompt,this.querySelector(".js-feedback-survey-link").href=`${this.positiveSurveyUrl}?page=${window.location.toString()}`,this.querySelector("#feedback-form").classList.remove("d-none"),this.querySelector("#yes-no").classList.add("d-none"),this.querySelector(".js-feedback-form").style.display="none",this.querySelector(".js-feedback-thanks").style.display="block",this.wasHelpful="yes",this.dispatchEvent(new CustomEvent("ratedPage",{detail:this.wasHelpful}))})),this.querySelector(".js-feedback-no").addEventListener("click",(e=>{this.querySelector("#feedback-form").classList.remove("d-none"),this.querySelector("#yes-no").classList.add("d-none"),this.querySelector(".js-feedback-form").style.display="none",this.querySelector(".js-feedback-thanks").style.display="block",this.wasHelpful="no",this.dispatchEvent(new CustomEvent("ratedPage",{detail:this.wasHelpful}))})),this.querySelector(".js-feedback-submit").addEventListener("click",(t=>{if(e.value.length>600)document.querySelector(".feedback-limit-error").style.display="block";else{this.querySelector(".feedback-form-add").style.display="none",this.querySelector(".feedback-thanks-add").style.display="block",document.querySelector(".feedback-limit-error").removeAttribute("style");let t={};t.url=window.location.href,t.helpful=this.wasHelpful,t.comments=e.value,t.userAgent=navigator.userAgent,fetch(this.endpointUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json())).then((e=>console.log(e)))}}))}}function i(e){let t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n="";for(let a=e;a>0;--a)n+=t[Math.floor(Math.random()*t.length)];return n}window.customElements.define("cagov-pagefeedback",o);class r extends window.HTMLElement{connectedCallback(){let e=function(){if(!localStorage.getItem("vaccineSurveyInteraction1"))return!1;return!0}(),t=this.dataset.pulseSurveyPrompt;if(!e&&function(){if(Math.random()<.1)return!0;return!1}()){t=this.dataset.surveyPrompt,c("surveyDisplayVaccine");let e=function(e){let t=`https://www.surveymonkey.com/r/MMJR7CW?source=covid&src=${i(32)}`;"/"==window.location.pathname&&(t=`https://www.surveymonkey.com/r/YNZBVPZ?source=covid&src=${i(32)}`);let n="Please take 5 minutes to complete our COVID-19 vaccines survey.";return e&&(n=e),`<section aria-label="vaccine survey alert">\n  <div role="alert">\n    <div class="survey">\n      <div class="survey-content">\n        <p class="survey-content-prompt">${n}</p>\n        <a href="${t}" target="_new" class="btn-link pt-2 pb-2 px-4 js-goto-survey"><span class="sr-only">Open survey </span><span aria-hidden="true">OK</span></a> \n        <button class="btn-link pt-2 pb-2 px-4 js-dismiss-survey" aria-label="Close" data-dismiss="alert"><span aria-hidden="true">Dismiss</span></button>\n      </div>\n    </div>\n  </div>\n  </section>`}(t);const a=document.querySelector(".header");a.classList.add("relative-position"),a.classList.remove("fixed-position");const s=document.querySelector(".hero");s&&s.classList.remove("hero-padding-top"),this.innerHTML=e,(n=this).querySelector(".js-goto-survey").addEventListener("click",(function(){c("openSurveyVaccine")})),n.querySelector(".js-dismiss-survey").addEventListener("click",(function(e){e.preventDefault(),c("dismissSurveyVaccine");const t=document.querySelector(".header");t.classList.remove("relative-position"),t.classList.add("fixed-position");const a=document.querySelector(".hero");a&&a.classList.add("hero-padding-top"),n.style.display="none"})),setTimeout((function(){window.scrollTo(0,0)}),100)}var n}}function c(e){localStorage.setItem("vaccineSurveyInteraction1",(new Date).getTime()),l(e)}function l(e){"undefined"!=typeof ga?ga("send","event","click","survey",e):setTimeout((function(){l(e)}),500)}window.customElements.define("cagov-vaccinesurvey",r),function(e){var t=new Image;function n(e){e&&"load"===e.type&&1==t.width||document.body.classList.add("no-webp")}t.onerror=n,t.onload=n,t.src=e}("data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=");class d extends window.HTMLElement{connectedCallback(){const{classPrefix:e,classList:t}=this.dataset;this.innerHTML=`<figure class="cwdsarrow ${e}-cwdsarrow ${t}" aria-hidden="true">\n      <span class="cwdsarrow-circle"></span>\n      <span class="cwdsarrow-arrow-wrapper">\n        <span class="cwdsarrow-arrow">\n          <span class="cwdsarrow-arrow-svg">\n            <svg class="cwdsarrow-arrow-svg-art" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 15"><g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-width="2"><path d="M13.1506849 1.02215525l6.5753425 6.57534247-6.5753425 6.57534248M0 7.59749772h19.7260274"></path></g></svg>\n          </span>\n        </span>\n        <span class="cwdsarrow-arrow">\n          <span class="cwdsarrow-arrow-svg">\n            <svg class="cwdsarrow-arrow-svg-art" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 15"><g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-width="2"><path d="M13.1506849 1.02215525l6.5753425 6.57534247-6.5753425 6.57534248M0 7.59749772h19.7260274"></path></g></svg>\n          </span>\n        </span>\n      </span>\n    </figure>`}}window.customElements.define("cwds-arrow",d);class u extends window.HTMLElement{connectedCallback(){this.dataset,this.innerHTML='<div class="link-arrow-icon" aria-hidden="true"><svg class="link-arrow-icon-svg" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n       viewBox="0 0 60.3 16.1" style="enable-background:new 0 0 60.3 16.1;" xml:space="preserve">\n    <path class="arrow1" d="M51.5,2.3L56.1,7H38.6C38,7,37.5,7.4,37.5,8s0.5,1.1,1.1,1.1h17.5l-4.6,4.6c-0.4,0.4-0.4,1.1,0,1.5\n      s1.1,0.4,1.5,0l6.5-6.5c0,0,0,0,0,0c0.1-0.1,0.2-0.2,0.2-0.3c0.1-0.3,0.1-0.6,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.4L53,0.8\n      c-0.4-0.4-1.1-0.4-1.5,0C51.1,1.2,51.1,1.9,51.5,2.3z"/>\n    <path class="arrow2" d="M13.9,2.3L18.6,7H1.1C0.5,7,0,7.4,0,8s0.5,1.1,1.1,1.1h17.5l-4.6,4.6c-0.4,0.4-0.4,1.1,0,1.5s1.1,0.4,1.5,0\n      l6.5-6.5c0,0,0,0,0,0c0.1-0.1,0.2-0.2,0.2-0.3c0.1-0.3,0.1-0.6,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.4l-6.5-6.5c-0.4-0.4-1.1-0.4-1.5,0\n      S13.5,1.9,13.9,2.3z"/>\n    </svg></div>'}}window.customElements.define("cagov-arrow",u);class h extends window.HTMLElement{connectedCallback(){this.dataset,this.innerHTML='<div class="accordion-icon" aria-hidden="true"><?xml version="1.0" encoding="utf-8"?>\n    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n        viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;" xml:space="preserve">\n    <path class="fill-orange" d="M5.7,12.8h5.5v5.5c0,0.4,0.4,0.8,0.8,0.8s0.8-0.4,0.8-0.8v-5.5h5.5c0.4,0,0.8-0.4,0.8-0.8s-0.4-0.8-0.8-0.8\n      h-5.5V5.7c0-0.4-0.4-0.8-0.8-0.8s-0.8,0.4-0.8,0.8v5.5H5.7c-0.4,0-0.8,0.4-0.8,0.8S5.2,12.8,5.7,12.8z"/>\n    </svg></div>'}}window.customElements.define("cagov-plus",h);class m extends window.HTMLElement{connectedCallback(){this.dataset,this.innerHTML='<div class="accordion-icon" aria-hidden="true"><?xml version="1.0" encoding="utf-8"?>\n    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;" xml:space="preserve">\n    <path class="fill-orange" d="M5.7,12.8h12.7c0.4,0,0.8-0.4,0.8-0.8s-0.4-0.8-0.8-0.8H5.7c-0.4,0-0.8,0.4-0.8,0.8S5.2,12.8,5.7,12.8z"/>\n    </svg></div>'}}window.customElements.define("cagov-minus",m);for(var p=document.querySelectorAll("a[href*='.pdf']"),v=0;v<p.length;v++)p[v].innerHTML+='<span class="pdf-link-icon no-underline-icon" aria-hidden="true">PDF</span><span class="sr-only"> (this is a pdf file)</span>';var f=document.querySelectorAll(".container .row .col-lg-10 a");for(v=0;v<f.length;v++){var b=f[v].href.indexOf("#")>-1,w=f[v].href.indexOf("localhost")>-1,y=f[v].href.indexOf("covid19.ca.gov")>-1,g=f[v].href.indexOf("@")>-1;f[v].host===window.location.host||y||w||b||g||(f[v].innerHTML+='<span class="ca-gov-icon-external-link link-icon" aria-hidden="true"></span>')}class k extends window.HTMLElement{connectedCallback(){this.menuContentFile=this.dataset.json,window.fetch(this.menuContentFile).then((e=>e.json())).then((e=>{this.innerHTML=function(e,t){return`<nav class="expanded-menu" role="navigation" aria-label="Site Navigation" aria-hidden="true" id="main-menu" tabindex="-1">\n\n    <div class="expanded-menu-grid">\n\n      <div class="expanded-menu-search" role="search">\n        <form class="expanded-menu-search-form" action="${t.search}">\n          <label class="expanded-menu-search-label" for="search-site">${t.labelSearch}</label>\n          <input name="q" id="search-site" class="expanded-menu-search-field" type="search" placeholder="${t.labelPlaceholder}">\n          <button class="expanded-menu-search-button" aria-label="Search the Website">\n            <svg class="expanded-menu-search-button-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M13.8,8.5c0-3-2.4-5.4-5.4-5.4c-3,0-5.4,2.4-5.4,5.4s2.4,5.4,5.4,5.4C11.4,13.8,13.8,11.4,13.8,8.5z M20,18.5 c0,0.8-0.7,1.5-1.5,1.5c-0.4,0-0.8-0.2-1.1-0.5l-4.1-4.1c-1.4,1-3.1,1.5-4.8,1.5C3.8,16.9,0,13.1,0,8.5S3.8,0,8.5,0\n              c4.7,0,8.5,3.8,8.5,8.5c0,1.7-0.5,3.4-1.5,4.8l4.1,4.1C19.8,17.7,20,18.1,20,18.5z"/></svg>\n          </button>\n        </form>\n      </div>\n      <div class="expanded-menu-section mobile-only">\n        <strong class="expanded-menu-section-header">\n          <a class="expanded-menu-section-header-link js-event-hm-menu" href="/">${t.labelHome}</a>\n        </strong>\n      </div>\n      ${e.sections.map((e=>`<div class="expanded-menu-col section-${e.title.toLowerCase().replace(/ /g,"-")}">\n          <div class="expanded-menu-section">\n            <strong class="expanded-menu-section-header">\n              <a class="expanded-menu-section-header-link js-expandable-mobile js-event-hm-menu" href="#">${e.title}</a>\n              <span class="expanded-menu-section-header-arrow js-expandable-mobile"><svg class="expanded-menu-section-header-arrow-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M16,5.1c0,0.4-0.1,0.7-0.4,0.9l-6.7,6.7C8.7,13,8.4,13.1,8,13.1c-0.4,0-0.7-0.1-0.9-0.4L0.4,6C0.1,5.8,0,5.5,0,5.1\tc0-0.4,0.1-0.7,0.4-0.9l0.8-0.8C1.4,3.1,1.7,3,2.1,3C2.4,3,2.8,3.1,3,3.4l5,5l5-5C13.2,3.1,13.6,3,13.9,3c0.4,0,0.7,0.1,0.9,0.4\n    l0.8,0.8C15.9,4.4,16,4.7,16,5.1z"></path></svg></span>\n            </strong>\n            <div class="expanded-menu-dropdown">\n              ${e.links.map((e=>`<a class="expanded-menu-dropdown-link js-event-hm-menu" href="${e.url}">${e.name}</a>`)).join(" ")}\n            </div>\n          </div>\n        </div>\n        `)).join(" ")}\n    </div>\n  </nav>\n  <div class="mobile-menu-close"></div>\n\n  <div>\n    <button class="menu-trigger open-menu" aria-label="${t.labelMenu}" aria-haspopup="true" aria-expanded="false" aria-owns="mainMenu" aria-controls="mainMenu">\n      <div class="hamburger">\n        <div class="hamburger-box">\n          <div class="hamburger-inner"></div>\n        </div>\n      </div>\n      <div class="menu-trigger-label menu-label" data-openlabel="${t.labelMenu}" data-closelabel="${t.labelMenuClose}">${t.labelMenu}</div>\n    </button>\n  </div>`}(e,this.dataset),this.querySelector(".open-menu").addEventListener("click",this.toggleMainMenu.bind(this)),window.innerWidth<1024&&this.expansionListeners()}))}toggleMainMenu(){this.querySelector(".hamburger").classList.contains("is-active")?this.closeMainMenu():this.openMainMenu()}openMainMenu(){this.classList.add("display-menu"),this.querySelector(".hamburger").classList.add("is-active"),this.querySelector(".menu-trigger").classList.add("is-fixed");var e=this.querySelector(".menu-trigger-label");e.innerHTML=e.getAttribute("data-closelabel"),this.querySelector("#main-menu").setAttribute("aria-hidden","false"),document.addEventListener("keydown",this.escapeMainMenu.bind(this)),setTimeout(function(){this.classList.add("reveal-items"),this.querySelector("#search-site").focus()}.bind(this),300)}closeMainMenu(){this.classList.remove("display-menu"),this.classList.remove("reveal-items"),this.querySelector(".hamburger").classList.remove("is-active"),this.querySelector(".menu-trigger").classList.remove("is-fixed");var e=this.querySelector(".menu-trigger-label");e.innerHTML=e.getAttribute("data-openlabel"),this.querySelector("#main-menu").setAttribute("aria-hidden","true"),document.removeEventListener("keydown",this.escapeMainMenu.bind(this))}escapeMainMenu(e){27===e.keyCode&&this.closeMainMenu()}expansionListeners(){this.querySelectorAll(".js-expandable-mobile").forEach((e=>{const t=e.closest(".expanded-menu-section");if(t){const n=t.querySelector(".expanded-menu-dropdown");n&&(n.setAttribute("aria-hidden","true"),e.closest(".expanded-menu-col").setAttribute("aria-expanded","false"))}e.addEventListener("click",(function(e){e.preventDefault(),this.closest(".expanded-menu-section").classList.toggle("expanded"),this.closest(".expanded-menu-col").setAttribute("aria-expanded","true");const t=this.closest(".expanded-menu-section").querySelector(".expanded-menu-dropdown");t&&t.setAttribute("aria-hidden","false")}))}))}}if(window.customElements.define("cagov-navoverlay",k),"IntersectionObserver"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype){const e=document.querySelector(".header"),t=document.querySelector(".nav-scroll-spy");new window.IntersectionObserver((t=>{t[0].isIntersecting?e.classList.remove("box-shadow"):e.classList.add("box-shadow")})).observe(t)}if(document.querySelector(".header-search-field").addEventListener("focus",(()=>{document.querySelector(".header-search").classList.add("focused")})),document.querySelector(".header-search-button").addEventListener("focus",(()=>{document.querySelector(".header-search").classList.add("focused")})),document.querySelector(".header-search-label").addEventListener("focus",(()=>{document.querySelector(".header-search").classList.add("focused")})),document.querySelector(".header-search-field").addEventListener("blur",(()=>{document.querySelector(".header-search").classList.remove("focused")})),document.querySelector(".header-search-button").addEventListener("blur",(()=>{document.querySelector(".header-search").classList.remove("focused")})),document.querySelector(".header-search-label").addEventListener("blur",(()=>{document.querySelector(".header-search").classList.remove("focused")})),matchMedia){const e=window.matchMedia("(min-width: 768px)");e.addListener(S),S(e)}function S(e){var t=document.getElementById("header-search-site"),n=document.querySelector("#dropdown-text");e.matches?(t.placeholder=t.dataset.placeholderWide,n.innerText=n.dataset.labelWide):(n.innerText=n.dataset.labelMobile,t.placeholder=t.dataset.placeholderMobile)}let x=document.querySelector(".dark-accordion-bg");if(x){x.nextElementSibling.classList.add("dark-accordion-sibling"),x.firstElementChild.classList.add("dark-accordion-first")}class L extends window.HTMLElement{connectedCallback(){this.selector=this.dataset.selector?this.dataset.selector:"cagov-accordion",this.cancelSelector=this.dataset.cancelSelector?this.dataset.cancelSelector:'button[aria-expanded="true"]',this.eventTargetSelector=this.dataset.eventTargetSelector?this.dataset.eventTargetSelector:"button.card-header.accordion-alpha",this.eventType=this.dataset.eventType?this.dataset.eventType:"click",this.runConditions(),this.reviewPageLinks()}runConditions(){if(0!==document.querySelectorAll(this.selector).length&&""!==window.location.hash){let e=window.location.hash.replace("#","");this.runInteract(e)}}reviewPageLinks(){document.body.addEventListener("click",function(e){let t=null;if("A"===e.target.nodeName?t=e.target.href:e.target.closest("a")&&(t=e.target.closest("a").href),t&&t.indexOf("#")>-1&&0===t.indexOf(window.location.origin+window.location.pathname)){let e=t.split("#")[1];this.runInteract(e)}}.bind(this))}runInteract(e){let t=document.getElementById(e);if(t&&t.closest(this.selector)&&!t.querySelector(this.cancelSelector)){const e=new MouseEvent(this.eventType,{view:window,bubbles:!0,cancelable:!0});t.closest(this.selector).querySelector(this.eventTargetSelector).dispatchEvent(e)}}}window.customElements.define("cagov-anchor-events",L);class q extends window.HTMLElement{static get observedAttributes(){return["data-hide-after","data-label"]}constructor(){super();this.options=Object.assign({},{parentSelector:"#main",onLoadSelector:"body",classes:"button-blue",scrollBottomThreshold:10,scrollAfterHeight:400},{label:this.dataset.label||"Top",hideAfter:Number(this.dataset.hideAfter)||7e3}),this.state={lastScrollTop:0,timer:null}}connectedCallback(){document.querySelector(this.options.onLoadSelector).onload=this.addGoToTopButton(this.options),window.addEventListener("scroll",this.debounce((()=>this.scrollToTopHandler(this.options,this.state)),200),!1),window.onscroll=this.debounce((e=>this.checkScrolledToBottom(e,this.state)),200)}checkScrolledToBottom(e,t){let{timer:n}=t;var a=document.querySelector(".return-top");window.innerHeight+window.scrollY>=document.body.offsetHeight&&(a.classList.add("is-visible"),clearTimeout(n))}debounce(e,t,n){var a;return function(){var s=this,o=arguments,i=function(){a=null,n||e.apply(s,o)},r=n&&!a;clearTimeout(a),a=setTimeout(i,t),r&&e.apply(s,o)}}attributeChangedCallback(e,t,n){"data-hide-after"===e&&(this.options.hideAfter=Number(n)),"data-label"===e&&(this.options.label=n,null!==document.querySelector(".return-top")&&(document.querySelector(".return-top").innerHTML=this.options.label))}scrollToTopHandler(e,t){let n=document.querySelector(this.options.parentSelector),{lastScrollTop:a,timer:s}=t;var o=document.querySelector(".return-top"),i=window.pageYOffset||document.documentElement.scrollTop;i>a?o.classList.remove("is-visible"):n.scrollTop>=e.scrollAfterHeight||document.documentElement.scrollTop>=e.scrollAfterHeight?(null!==s&&clearTimeout(s),o.classList.add("is-visible"),s=setTimeout((function(){o.classList.remove("is-visible")}),e.hideAfter)):o.classList.remove("is-visible"),t.lastScrollTop=i<=0?0:i}addStyle(e){const t=document.createElement("style");t.textContent='\n    .return-top {\n      position: fixed;\n      z-index: 99999;\n      right: 15px;\n      bottom: -50px;\n      opacity: 0;\n      visibility: hidden;\n      text-decoration: none;\n      cursor: pointer;\n      transition:all .5s linear;\n    }\n    \n    .return-top:before {\n      content: "\\e9f6";\n      font-family: "CaGov";\n      padding-right: 5px;\n    }\n    \n    .return-top.is-visible {\n      opacity: 1;\n      visibility: visible;\n      display: inline;\n      bottom:50px;\n    }\n    ',e.appendChild(t)}addGoToTopButton(e){let t=document.querySelector(e.parentSelector);const n=document.createElement("span");n.classList.add("return-top"),n.classList.add(e.classes),n.setAttribute("aria-hidden","true");const a=document.createTextNode(e.label);n.appendChild(a),this.addStyle(n),t.append(n),n.addEventListener("click",(e=>this.goToTopFunction(e)))}goToTopFunction(e){document.querySelector(this.options.onLoadSelector).scrollTop=0,document.documentElement.scrollTop=0}}window.customElements.define("cagov-go-to-top",q);let E={};function A(e,t=null,n=3e3,a="chart-in-view"){const s=null!=t?t:e,o=e,i=document.querySelector(e);if(null==i||null==i)return void console.log("Element not found",e);E[o]={triggered:!1,inView:!1,lh:null};var r,c;window.addEventListener("scroll",(r=()=>{E[o].triggered||(function(e){const t=document.documentElement.clientHeight,n=window.pageYOffset,a=n+t,s=e.getBoundingClientRect(),o=s.bottom-s.top,i=s.top+window.scrollY,r=(i+(i+o))/2;return r>n&&r<a}(i)?E[o].inView||(E[o].inView=!0,E[o].lh=setTimeout((()=>{E[o].triggered=!0;const t=new window.CustomEvent(a,{detail:{label:s,elem:e}});window.dispatchEvent(t)}),n)):E[o].inView&&(clearTimeout(E[o].lh),E[o].inView=!1))},c=1e3,e=>{let t=!1;t||(r(e),t=!0,setTimeout((()=>{t=!1}),c))}))}function T(){function e(t,n,a="click"){"undefined"!=typeof ga?(ga("send","event",a,t,n),ga("tracker2.send","event",a,t,n),ga("tracker3.send","event",a,t,n)):setTimeout((function(){e(t,n,a)}),500)}function t(e,t){"false"===e.getAttribute(t)?e.setAttribute(t,"true"):e.setAttribute(t,"false")}ga("set","transport","beacon"),document.querySelectorAll("cagov-accordion").forEach((t=>{t.addEventListener("click",(function(){this.querySelector(".accordion-title")&&e("accordion",this.querySelector(".accordion-title").textContent.trim())}))})),document.querySelectorAll("a").forEach((t=>{t.href.indexOf(window.location.hostname)>-1||t.href.indexOf("covid19.ca.gov")>-1?t.href.indexOf(".pdf")>-1&&t.addEventListener("click",(function(){e("pdf",this.href.split(window.location.hostname)[1])})):t.addEventListener("click",(function(){e("offsite",this.href)}))})),document.querySelectorAll(".show-all").forEach((e=>{const t=e.classList.contains("d-none");e.addEventListener("click",(()=>{let e=0;document.querySelectorAll("cwds-step-list .list-group-item-action"+(t?".list-open":":not(.list-open)")).forEach((t=>setTimeout((()=>t.click()),50*e++))),document.querySelectorAll(".show-all").forEach((e=>e.classList.toggle("d-none")))}))})),document.querySelectorAll(".navbar-toggler").forEach((function(e){e.addEventListener("click",(function(n){document.querySelector("#"+e.getAttribute("aria-controls")).classList.toggle("show"),t(this,"aria-expanded")}))})),document.querySelectorAll(".dropdown-toggle").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),document.querySelector('[aria-labelledby="'+this.id+'"]').classList.toggle("show"),t(this,"aria-expanded")}))})),document.body.addEventListener("click",(function(e){document.querySelectorAll(".dropdown-menu.show").forEach((t=>{if(t.parentNode!==e.target.parentNode){let e=t.closest(".dropdown");e&&e.querySelector('.dropdown-toggle[aria-expanded="true"]')&&e.querySelector('.dropdown-toggle[aria-expanded="true"]').setAttribute("aria-expanded","false"),t.classList.remove("show")}}))})),document.querySelector("cagov-pagefeedback")&&document.querySelector("cagov-pagefeedback").addEventListener("ratedPage",(e=>{ga("send","event","rating","helpful",e.detail)}));const n=(e,t)=>n=>{let a=!1;a||(e(n),a=!0,setTimeout((()=>{a=!1}),t))},a=[25,50,75,90],s=[],o=t=>()=>{const n=document.documentElement.clientHeight,o=document.documentElement.scrollHeight-n,i=window.pageYOffset,r=Math.floor(i/o*100);a.forEach((n=>{if(-1===s.indexOf(n)&&r>=n){s.push(n);e(`scroll-${n}`,`scroll-${n}-${t}`,"scroll")}}))},i=(t,n,a,s=!0)=>t=>{e(n,a)},r=e=>e.hostname===document.location.hostname?e.href:`external-${e.href}`,c=(e,t={})=>{window.ga("tracker3.send","event",Object.assign({eventCategory:"javascript",eventAction:"error",eventLabel:e&&e.stack||"(not set)",nonInteraction:!0},t))},l=["/","/tl","/es","/ar","/ko","/vi","/zh-hans","/zh-hant"];if(window.ga&&window.ga.create){if(document.querySelectorAll(".header-search-form, .expanded-menu-search-form").forEach((t=>{t.addEventListener("submit",(n=>{e(window.location.pathname,t.querySelector('input[name="q"]').value,"search")}))})),"localhost"!==window.location.hostname&&(()=>{const e=window.__e&&window.__e.q||[],t={eventAction:"uncaught error"};e.forEach((e=>c(e.error,t))),window.addEventListener("error",(e=>c(e.error,t)))})(),d=window.location.pathname,l.some((e=>d.match(new RegExp(`^${e}[/]?$`,"g"))))){window.addEventListener("scroll",n(o("homepage"),1e3));const t=document.querySelector("a.video-modal-open").href;document.querySelectorAll(".video-modal-open").forEach((e=>{e.addEventListener("click",i(e.href,"homepage-video",t,!1))})),document.querySelector("cagov-navoverlay").addEventListener("click",(function(t){t.target.classList.contains("js-event-hm-menu")&&e("homepage-menu",t.target.textContent.trim(),"click")})),document.querySelectorAll(".js-event-hm-wtk").forEach((e=>{e.addEventListener("click",i(e.href,"homepage-want to know",e.href))})),document.querySelectorAll("footer a").forEach((e=>{e.addEventListener("click",i(e.href,"homepage-footer",r(e)))})),document.querySelectorAll(".hero-stats a").forEach((e=>{e.addEventListener("click",i(e.href,"homepage-tracking covid",e.href))})),document.querySelectorAll(".hero-text a").forEach((e=>{e.addEventListener("click",i(e.href,"homepage-hero text",e.href))})),document.querySelectorAll(".hero-alert a").forEach((e=>{e.addEventListener("click",i(e.href,"homepage-alerts section",r(e)))}))}if(window.location.pathname.match(/\/roadmap[/]?$/g)&&(document.querySelectorAll("main a").forEach((e=>{e.addEventListener("click",i(e.href,"roadmap",r(e)))})),document.querySelectorAll("footer a").forEach((e=>{e.addEventListener("click",i(e.href,"roadmap-footer",r(e)))}))),window.location.pathname.match(/\/safer-economy[/]?$/g)&&window.addEventListener("safer-economy-page-submission",(t=>{let n=t.detail.county?t.detail.county:"None";t.detail.countyTier&&(n=t.detail.countyTier);e(n,t.detail.activity?t.detail.activity:"None","activity-status")})),window.location.pathname.match(/\/equity[/]?$/g)){window.addEventListener("scroll",n(o("equity"),1e3)),document.querySelector("cagov-county-search").addEventListener("county-selected",function(t){"tab"==t.detail.how?e("tab-select",t.detail.county,"click"):e("county-select",t.detail.county,"activity-status")}.bind(this),!1),document.addEventListener("setup-sd-tab-tracking",(function(){for(let t of["income","housing","healthcare"]){const n=document.querySelector("button.large-tab."+t);null!=n&&n.addEventListener("click",(n=>e("tab-select",t)))}})),document.querySelectorAll(".small-tab").forEach((t=>{t.addEventListener("click",(function(t){e("tab-select",this.getAttribute("data-key"))}))})),window.addEventListener("chart-in-view",(function(t){e("chart-in-view",t.detail.label,"scroll")})),A("cagov-chart-re-pop","re-pop"),A("cagov-chart-re-100k","re-100k"),A("cagov-chart-d3-lines","health-equity"),A("cagov-chart-equity-data-completeness","data-completeness"),A("cagov-chart-d3-bar","social-bar")}}var d}window.onload=e=>{T()};

		</script>
	

	<script type="module" src="https://d3js.org/d3.v6.min.js"></script><!-- had some trouble importing this, error circular dependencies after npm install so including here -->
	
	
		<script type="module">
			const config = {"chartsDataFile":"https://files.covid19.ca.gov/data/infections-by-group/infections-by-group-california.json","chartsStateDashTablesLoc":"https://files.covid19.ca.gov/data/dashboard/"}

/**
 * Simple, lightweight, usable local autocomplete library for modern browsers
 * Because there weren’t enough autocomplete scripts in the world?
 * Because I’m completely insane and have NIH syndrome? Probably both. :P
 * @author Lea Verou http://leaverou.github.io/awesomplete
 * MIT license
 */


/** Class representing a single Suggesstion. */
class Suggestion {
    constructor(data) {
        let o = { label: 'Unknown data', value: 'Unknown data' };
        if (typeof data === 'string') {
            o = { label: data, value: data };
        } else if (Array.isArray(data)) {
            o = { label: data[0], value: data[1] };
        } else if (typeof data === 'object' && ('label' in data || 'value' in data)) {
            o = data;
        }

        this.label = o.label || o.value;
        this.value = o.value;

        if ('userData' in o) {
            this.userData = o.userData;
        }
    }

    get length() {
        return this.label.length;
    }

    toString() {
        return `${this.label}`;
    }

    valueOf() {
        return this.toString();
    }
}


/** Class representing Awesomplete. */
class Awesomplete {
    constructor(input, o) {
        Awesomplete.all = [];
        const me = this;

        // Keep track of number of instances for unique IDs
        Awesomplete.count = (Awesomplete.count || 0) + 1;
        this.count = Awesomplete.count;

        // Setup
        this.isOpened = false;

        this.input = Awesomplete.query(input);
        this.input.setAttribute('autocomplete', 'off');
        this.input.setAttribute('aria-owns', `awesomplete_list_${this.count}`);
        this.input.setAttribute('role', 'combobox');

        // store constructor options in case we need to distinguish
        // between default and customized behavior later on
        if (o) {
            this.options = o;
        } else {
            this.options = {};
        }

        this.configure({
            minChars: 2,
            maxItems: 10,
            autoFirst: false,
            data: Awesomplete.DATA,
            filter: Awesomplete.FILTER_CONTAINS,
            sort: o.sort === false ? false : Awesomplete.SORT_BYLENGTH,
            container: Awesomplete.CONTAINER,
            item: Awesomplete.ITEM,
            replace: Awesomplete.REPLACE,
            tabSelect: false,
        }, o);

        this.index = -1;

        // Create necessary elements
        this.container = this.container(input);

        this.ul = Awesomplete.create('ul', {
            hidden: 'hidden',
            role: 'listbox',
            id: `awesomplete_list_${this.count}`,
            inside: this.container,
        });

        this.status = Awesomplete.create('span', {
            className: 'visually-hidden',
            role: 'status',
            'aria-live': 'assertive',
            'aria-atomic': true,
            inside: this.container,
            textContent: this.minChars !== 0 ? (`Type ${this.minChars} or more characters for results.`) : 'Begin typing for results.',
        });

        // Bind events
        this.events = {
            input: {
                input: this.evaluate.bind(this),
                blur: this.close.bind(this, { reason: 'blur' }),
                keydown(evt) {
                    const c = evt.keyCode;

                    // If the dropdown `ul` is in view, then act on keydown for the following keys:
                    // Enter / Esc / Up / Down
                    if (me.opened) {
                        if (c === 13 && me.selected) { // Enter
                            evt.preventDefault();
                            evt.stopImmediatePropagation();
                            me.select();
                        } else if (c === 9 && me.selected && me.tabSelect) {
                            me.select();
                        } else if (c === 27) { // Esc
                            me.close({ reason: 'esc' });
                        } else if (c === 38 || c === 40) { // Down/Up arrow
                            evt.preventDefault();
                            me[c === 38 ? 'previous' : 'next']();
                        }
                    }
                },
            },
            form: {
                submit: this.close.bind(this, { reason: 'submit' }),
            },
            ul: {
                // Prevent the default mousedowm, which ensures the input is not blurred.
                // The actual selection will happen on click. This also ensures dragging the
                // cursor away from the list item will cancel the selection
                mousedown(evt) {
                    evt.preventDefault();
                },

                // The click event is fired even if the corresponding mousedown event has called
                // preventDefault
                click(evt) {
                    let li = evt.target;

                    if (li !== this) {
                        while (li && !/li/i.test(li.nodeName)) {
                            li = li.parentNode;
                        }

                        if (li && evt.button === 0) { // Only select on left click
                            evt.preventDefault();
                            me.select(li, evt.target);
                        }
                    }
                },
            },
        };

        Awesomplete.bind(this.input, this.events.input);
        Awesomplete.bind(this.input.form, this.events.form);
        Awesomplete.bind(this.ul, this.events.ul);

        if (this.input.hasAttribute('list')) {
            this.list = `#${this.input.getAttribute('list')}`;
            this.input.removeAttribute('list');
        } else {
            this.list = this.input.getAttribute('data-list') || o.list || [];
        }

        Awesomplete.all.push(this);
    }

    configure(properties, o) {
        const iterFn = (i) => {
            const initial = properties[i];
            const attrValue = this.input.getAttribute(`data-${i.toLowerCase()}`);

            if (typeof initial === 'number') {
                this[i] = parseInt(attrValue, 10);
            } else if (initial === false) { // Boolean options must be false by default anyway
                this[i] = attrValue !== null;
            } else if (initial instanceof Function) {
                this[i] = null;
            } else {
                this[i] = attrValue;
            }

            if (!this[i] && this[i] !== 0) {
                this[i] = (i in o) ? o[i] : initial;
            }
        };
        Object.keys(properties).forEach(iterFn);
    }

    set list(list) {
        if (Array.isArray(list)) {
            this.dataList = list;
        } else if (typeof list === 'string' && list.indexOf(',') > -1) {
            this.dataList = list.split(/\s*,\s*/);
        } else { // Element or CSS selector
            const queriedList = Awesomplete.query(list);

            if (queriedList && queriedList.children) {
                const items = [];
                const iterFn = (el) => {
                    if (!el.disabled) {
                        const text = el.textContent.trim();
                        const value = el.value || text;
                        const label = el.label || text;
                        if (value !== '') {
                            items.push({ label, value });
                        }
                    }
                };
                Array.prototype.slice.apply(queriedList.children).forEach(iterFn);
                this.dataList = items;
            }
        }

        if (document.activeElement === this.input) {
            this.evaluate();
        }
    }

    get list() {
        return this.dataList;
    }

    get selected() {
        return this.index > -1;
    }

    get opened() {
        return this.isOpened;
    }

    close(o) {
        if (!this.opened) {
            return;
        }

        this.ul.setAttribute('hidden', '');
        this.isOpened = false;
        this.index = -1;

        this.status.setAttribute('hidden', '');

        Awesomplete.fire(this.input, 'awesomplete-close', o || {});
    }

    open() {
        this.ul.removeAttribute('hidden');
        this.isOpened = true;

        this.status.removeAttribute('hidden');

        if (this.autoFirst && this.index === -1) {
            this.goto(0);
        }

        Awesomplete.fire(this.input, 'awesomplete-open');
    }

    destroy() {
        // remove events from the input and its form
        Awesomplete.unbind(this.input, this.events.input);
        Awesomplete.unbind(this.input.form, this.events.form);

        // cleanup container if it was created by Awesomplete but leave it alone otherwise
        if (!this.options.container) {
            // move the input out of the awesomplete container and remove the container and
            // its children
            const { parentNode } = this.container;

            parentNode.insertBefore(this.input, this.container);
            parentNode.removeChild(this.container);
        }

        // remove autocomplete and aria-autocomplete attributes
        this.input.removeAttribute('autocomplete');
        this.input.removeAttribute('aria-autocomplete');

        // remove this awesomeplete instance from the global array of instances
        const indexOfAwesomplete = Awesomplete.all.indexOf(this);

        if (indexOfAwesomplete !== -1) {
            Awesomplete.all.splice(indexOfAwesomplete, 1);
        }
    }

    next() {
        const count = this.ul.children.length;
        let index = 0;
        if (this.index < count - 1) {
            index = this.index + 1;
        } else if (count) {
            index = 0;
        } else {
            index = -1;
        }
        this.goto(index);
    }

    previous() {
        const count = this.ul.children.length;
        const pos = this.index - 1;

        this.goto(this.selected && pos !== -1 ? pos : count - 1);
    }

    // Should not be used, highlights specific item without any checks!
    goto(i) {
        const lis = this.ul.children;

        if (this.selected) {
            lis[this.index].setAttribute('aria-selected', 'false');
        }

        this.index = i;

        if (i > -1 && lis.length > 0) {
            lis[i].setAttribute('aria-selected', 'true');

            this.status.textContent = `${lis[i].textContent}, list item ${(i + 1)} of ${lis.length}`;

            this.input.setAttribute('aria-activedescendant', `${this.ul.id}_item_${this.index}`);

            // scroll to highlighted element in case parent's height is fixed
            this.ul.scrollTop = lis[i].offsetTop - this.ul.clientHeight + lis[i].clientHeight;

            const suggestion = this.suggestions[this.index];
            Awesomplete.fire(this.input, 'awesomplete-highlight', {
                selectedIndex: this.index,
                selectedText: `${suggestion}`,
                selectedSuggestion: suggestion,
            });
        }
    }

    select(selected, origin) {
        let selectedItem = selected;
        if (selected) {
            this.index = Awesomplete.siblingIndex(selected);
        } else {
            selectedItem = this.ul.children[this.index];
        }

        if (selectedItem) {
            const selectedIndex = this.index;
            const suggestion = this.suggestions[selectedIndex];
            const allowed = Awesomplete.fire(this.input, 'awesomplete-select', {
                selectedIndex,
                selectedText: `${suggestion}`,
                selectedSuggestion: suggestion,
                origin: origin || selectedItem,
            });

            if (allowed) {
                this.replace(suggestion);
                this.close({ reason: 'select' });
                Awesomplete.fire(this.input, 'awesomplete-selectcomplete', {
                    selectedIndex,
                    selectedText: `${suggestion}`,
                    selectedSuggestion: suggestion,
                });
            }
        }
    }

    evaluate() {
        const me = this;
        const { value } = this.input;

        if (value.length >= this.minChars && this.dataList && this.dataList.length > 0) {
            this.index = -1;
            // Populate list with options that match
            this.ul.innerHTML = '';

            const mapFn = item => new Suggestion(me.data(item, value));
            const filterFn = item => me.filter(item, value);
            this.suggestions = this.dataList
                .map(mapFn)
                .filter(filterFn);

            if (this.sort !== false) {
                this.suggestions = this.suggestions.sort(this.sort);
            }

            this.suggestions = this.suggestions.slice(0, this.maxItems);

            const appendFn = (text, index) => {
                me.ul.appendChild(me.item(text, value, index));
            };
            this.suggestions.forEach(appendFn);

            if (this.ul.children.length === 0) {
                this.status.textContent = 'No results found';

                this.close({ reason: 'nomatches' });
            } else {
                this.open();

                this.status.textContent = `${this.ul.children.length} results found`;
            }
        } else {
            this.close({ reason: 'nomatches' });

            this.status.textContent = 'No results found';
        }
    }


    // Mark: Static methods/properties
    static FILTER_CONTAINS(text, input) {
        return RegExp(Awesomplete.regExpEscape(input.trim()), 'i').test(text);
    }

    static FILTER_STARTSWITH(text, input) {
        return RegExp(`^${Awesomplete.regExpEscape(input.trim())}`, 'i').test(text);
    }

    static SORT_BYLENGTH(a, b) {
        if (a.length !== b.length) {
            return a.length - b.length;
        }

        return a < b ? -1 : 1;
    }

    static CONTAINER(input) {
        return Awesomplete.create('div', {
            className: 'awesomplete',
            around: input,
        });
    }

    static ITEM(text, input, itemId) {
        const html = input.trim() === '' ? text : (`${text}`).replace(RegExp(Awesomplete.regExpEscape(input.trim()), 'gi'), '<mark>$&</mark>');
        return Awesomplete.create('li', {
            innerHTML: html,
            'aria-selected': 'false',
            id: `awesomplete_list_${this.count}_item_${itemId}`,
        });
    }

    static REPLACE(text) {
        this.input.value = text.value || text.label;
    }

    static DATA(item/* , input */) {
        return item;
    }


    // Helpers
    static query(expr, con) {
        return typeof expr === 'string' ? (con || document).querySelector(expr) : expr || null;
    }

    static queryAll(expr, con) {
        return Array.prototype.slice.call((con || document).querySelectorAll(expr));
    }

    static create(tag, o) {
        const element = document.createElement(tag);
        const iterFn = (i) => {
            const val = o[i];

            if (i === 'inside') {
                Awesomplete.query(val).appendChild(element);
            } else if (i === 'around') {
                const ref = Awesomplete.query(val);
                ref.parentNode.insertBefore(element, ref);
                element.appendChild(ref);

                if (ref.getAttribute('autofocus') != null) {
                    ref.focus();
                }
            } else if (i in element) {
                element[i] = val;
            } else {
                element.setAttribute(i, val);
            }
        };
        Object.keys(o).forEach(iterFn);

        return element;
    }

    static bind(element, o) {
        if (element) {
            const iterFn = (cKey) => {
                const callback = o[cKey];
                const eventIterFn = (event) => {
                    element.addEventListener(event, callback);
                };
                cKey.split(/\s+/).forEach(eventIterFn);
            };
            Object.keys(o).forEach(iterFn);
        }
    }

    static unbind(element, o) {
        if (element) {
            const iterFn = (cKey) => {
                const callback = o[cKey];
                const eventIterFn = (event) => {
                    element.removeEventListener(event, callback);
                };
                cKey.split(/\s+/).forEach(eventIterFn);
            };
            Object.keys(o).forEach(iterFn);
        }
    }

    static fire(target, type, properties) {
        const evt = document.createEvent('HTMLEvents');
        const iterFn = (j) => {
            evt[j] = properties[j];
        };
        evt.initEvent(type, true, true);
        if (typeof properties === 'object') {
            Object.keys(properties).forEach(iterFn);
        }

        return target.dispatchEvent(evt);
    }

    static regExpEscape(s) {
        return s.replace(/[-\\^$*+?.()|[\]{}]/g, '\\$&');
    }

    static siblingIndex(el) {
        let i = 0;
        let testEl = el;
        while (testEl) {
            testEl = testEl.previousElementSibling;
            if (testEl) {
                i += 1;
            }
        }

        return i;
    }
}

function template$7(countyLabel, countyPlaceholder) {
  return /*html*/`
    <div class="row d-flex justify-content-md-center">
      <form class="form-inline" id="county-form">
        <div class="form-group mx-sm-3 mb-2 pos-rel autocomplete-inline">
          <label for="location-query" class="sr-only">County</label>
          <div class="awesomplete">
            <input aria-expanded="false" aria-owns="awesomplete_list_1"  aria-controls="awesomplete_list_1"  autocomplete="off" class="form-control form-control-lg" data-list="" data-multiple="" id="location-query" role="combobox" type="text" placeholder="Enter a county">
            <button class="clear d-none" id="clearCounty"><span class="ca-gov-icon-close-line" aria-hidden="true"></span> <span class="underline">Clear</span></button>
            <span class="visually-hidden" role="status" aria-live="assertive" aria-atomic="true">Type 2 or more characters for results.</span>
          </div>
        </div>
      <button type="submit" class="btn btn-lightbg btn-bigger mb-2">Get county data</button>
      </form>
    </div>
    <div class="row d-flex justify-content-md-center">
      <span id="county-query-error" class="error-text d-none">County not found</span>
    </div>`
}

/* temporary fix for charts that don't render well in RTL languages, 
   such as arabic
*/

function rtlOverride(elem, divSelector='.svg-holder', desired_dir='ltr') {
    let contDiv = elem.querySelector(divSelector);
    if (contDiv != null) {
      // temporary override for rtl languages (arabic)
      // console.log("containing div found", contDiv);
      contDiv.setAttribute('dir', desired_dir);
    }
}

class CAGovCountySearch extends window.HTMLElement {

  processCountySearchInput(typedInValue) {
        let foundCounty = '';
        // console.log("Search Input: ",typedInValue);
        if(typedInValue == '') {
          this.state['county'] = 'California';
          this.state.statewide = true;
        }
        // console.log("Searching for ",typedInValue,"in",component.countyList);
        this.countyList.forEach(county => {
          if(county.toLowerCase() == typedInValue.toLowerCase()) {
            foundCounty = county;
          }
        });
        if(foundCounty) {
          this.state['county'] = foundCounty;
          this.state.statewide = false;
          document.querySelector('#location-query').value = foundCounty;
          console.log("emitCounty via search:",foundCounty);
          this.emitCounty();
          document.querySelector('#county-query-error').style.display = 'none';
        } else {
          // generate failed search event...
          // console.log("county not found: ",typedInValue);
          // console.log("emitCounty via typo",typedInValue);
          // this.emitCountyTypo(typedInValue);
          document.querySelector('#county-query-error').style.display = 'block';
        }
  }

  connectedCallback () {
    if(this.dataset.countyLabel) {
      this.dataset.countyLabel;
    }
    this.state = {};
    this.state.statewide = false;

    this.innerHTML = template$7();
    this.addListeners();

    window.fetch('/countystatus.json')
    .then(response => response.json())
    .then(function(data) {
      this.countyStatuses = data;
      let aList = [];
      this.countyStatuses.forEach(c => { aList.push(c.county); });
      this.countyList = aList;
      this.setupAutoComp('#location-query', 'county', aList);
      document.querySelector('#county-form').addEventListener('submit',function(event) {
        event.preventDefault();
        document.querySelector('#county-query-error').style.display = 'none';
        // do I have a full county typed in here?
        let typedInValue = document.querySelector('#location-query').value.trim();
        this.processCountySearchInput(typedInValue);
      }.bind(this));  
    }.bind(this));

    rtlOverride(this, 'div', 'ltr');

  }

  setupAutoComp(fieldSelector, fieldName, aList) {
    let component = this;
    const awesompleteSettings = {
      autoFirst: true,
      filter: function (text, input) {
        return Awesomplete.FILTER_CONTAINS(text, input.match(/[^,]*$/)[0]);
      },
      item: function (text, input) {
        return Awesomplete.ITEM(text, input.match(/[^,]*$/)[0]);
      },
      replace: function (selectedSuggestion) {
        let typedInValue = selectedSuggestion.value;
        component.processCountySearchInput(typedInValue);
      },
      list: aList
    };

    new Awesomplete(fieldSelector, awesompleteSettings);
  }

  emitCounty() {
    // jbum: If we get statewide: true, reset the dialog to as it appears on refresh
    // console.log("Emit County",this.state);
    // Dispatch custom event so we can pick up and track this usage elsewhere.
    const event = new window.CustomEvent('county-selected', {
      detail: {
        county: this.state.county,
        statewide: this.state.statewide,
        reset: this.state.statewide,
        how: 'emitCounty'
      }
    });
    // console.log("Emitting county-select",event.detail);
    this.dispatchEvent(event);    
  }

  /*
  emitCountyTypo(misspelling) {
    // Dispatch custom event so we can pick up and track this usage elsewhere.
   // console.log("Emit County Typo");
   const event = new window.CustomEvent('county-search-typo', {
      detail: {
        county: misspelling,
      }
    });
    this.dispatchEvent(event);    
  }
  */


  addListeners() {
    let countyInput = this.querySelector("#location-query");
    let clearBtn = this.querySelector("#clearCounty");
    countyInput.addEventListener("focus", inputValue);    
    countyInput.addEventListener("input", inputValue);
    countyInput.addEventListener("blur", inputValue);
    
    function inputValue() {
      if (countyInput && countyInput.value) {
        clearBtn.classList.remove('d-none');
      } else {
        clearBtn.classList.add('d-none');
      }
    }

    clearBtn.addEventListener("blur", inputValue);    
    clearBtn.addEventListener("click", function(e) {
      // console.log("Clear Button Clicked");
      e.preventDefault();
      countyInput.value = '';
      this.state['county'] = 'California';
      this.state.statewide = true;
      // console.log("C emitting county",this.state);
      console.log("Emit county via clearbutton");
      this.emitCounty();
      clearBtn.classList.add('d-none');
      document.querySelector('#county-query-error').style.display = 'none';
    }.bind(this));
  }

}
window.customElements.define('cagov-county-search', CAGovCountySearch);

class CAGovCountyButtons extends window.HTMLElement {
  connectedCallback () {
    this.resetText = 'Statewide';
    this.county = '';
    
    let searchElement = document.querySelector('cagov-county-search');
    searchElement.addEventListener('county-selected', function (e) {
      console.log("County-selected event: " , e.detail);
      if (e.detail.reset) {
        this.innerHTML = '';
      }
      else if(e.detail.statewide) {
        this.innerHTML = this.template(true);
      } else {
        this.county = e.detail.county;
        // console.log("Inner HTML: " , this.template(false));
        this.innerHTML = this.template(false);
      }
     }.bind(this), false);

    this.addEventListener('click',function(event) {
      event.preventDefault();
      if(event.target.classList.contains('js-toggle-county')) {
        let clickedCounty = event.target.textContent;
        // console.log("Issuing county-selected for button");

        if(!event.target.classList.contains('active')) {
          let emissionEvent = new window.CustomEvent('county-selected', {
            detail: {
              county: clickedCounty,
              statewide: false,
              reset: false,
              how: 'tab'
            }
          });
          if(event.target.classList.contains('statewide')) {
            emissionEvent = new window.CustomEvent('county-selected', {
              detail: {
                county: 'California',
                statewide: true,
                reset: false,
                how: 'tab'
              }
            });
          }
          // const event2 = new window.CustomEvent('tab-select',{detail:{tab_selected: emissionEvent.detail.county}});
          // window.dispatchEvent(event2);    
          searchElement.dispatchEvent(emissionEvent);
        }
      }
    });

  }




  template(isStatewide) {
    // console.log("Template isStatewide=",isStatewide);
    return /*html*/`<div class="d-flex flex-column flex-md-row justify-content-center my-3">
    <div class="text-center large-tabs">
          <button class="large-tab js-toggle-county county ${!isStatewide ? 'active' : ''}">${this.county}</button>
          <button class="large-tab js-toggle-county statewide ${isStatewide ? 'active' : ''}">${this.resetText}</button>
        </div>
    </div>`
  }
}
window.customElements.define('cagov-county-toggle-buttons', CAGovCountyButtons);

function styleInject(css, ref) {
  if ( ref === void 0 ) ref = {};
  var insertAt = ref.insertAt;

  if (!css || typeof document === 'undefined') { return; }

  var head = document.head || document.getElementsByTagName('head')[0];
  var style = document.createElement('style');
  style.type = 'text/css';

  if (insertAt === 'top') {
    if (head.firstChild) {
      head.insertBefore(style, head.firstChild);
    } else {
      head.appendChild(style);
    }
  } else {
    head.appendChild(style);
  }

  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    style.appendChild(document.createTextNode(css));
  }
}

var css_248z$6 = "cagov-chart-dashboard-groups-race-ethnicity-cases.chart .bar-label .tick text {\n  text-transform: capitalize; }\n\ncagov-chart-dashboard-groups-race-ethnicity-cases.chart .bar-label {\n  font-weight: bold;\n  font-size: 0.75rem; }\n\ncagov-chart-dashboard-groups-race-ethnicity-cases.chart .bar-cat {\n  font-weight: bold;\n  font-size: 0.95rem; }\n\ncagov-chart-dashboard-groups-race-ethnicity-cases.chart .legend-caption {\n  font-weight: 300;\n  font-size: 0.75rem; }\n\ncagov-chart-dashboard-groups-race-ethnicity-cases.chart .chart-title {\n  font-weight: 300;\n  font-size: 1.2rem;\n  margin-bottom: 0px; }\n\n.d-hide {\n  display: none; }\n";
styleInject(css_248z$6);

/**
 * Render bar chart for vaccinations group.
 * 
 * @param {string} translationsObj.chartTitle - Label for the chart
 * @param {string} translationsObj.chartDataLabel - Chart description
 */
function template$6({
  chartTitle = "Confirmed cases by race and ethnicity in California",
  chartDataLabel = null,
}) {
  return /*html*/ `
    <div class="py-2">
      <div class="bg-white pt-2 pb-1">
        <div class="mx-auto">
            <div class="chart-title">${chartTitle}</div>
            <div class="svg-holder"></div>
        </div>
      </div>
    </div>`;
}

function getTranslations(container) {
  let translationsObj = {};
  let translateEls = container.querySelectorAll('[data-label]');
  translateEls.forEach(item => {
    translationsObj[item.dataset.label] = item.innerHTML;
  });
  let translateElArrays = container.querySelectorAll('[data-group]');
  translateElArrays.forEach(group => {
    let groupKey = group.getAttribute('data-group');
    let arrayItems = group.querySelectorAll('[data-item]');
    if (groupKey !== null && arrayItems !== null) {
      let groupItems = {};
      arrayItems.forEach(item => {
        let key = item.getAttribute('data-item');
        groupItems[key] = item.innerHTML;
      });
      translationsObj[groupKey] = groupItems;
    }

  });
  return translationsObj;
}

function getScreenResizeCharts() {
  // Putting this in a special scope for just this component.
  window.charts = {};
  // Get window size, return based on breakpoint settings,
  // Then return mobile, tablet or desktop.
  const getIsHighDensity = () => {
    return (
      (window.matchMedia &&
        (window.matchMedia(
          "only screen and (min-resolution: 124dpi), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 48.8dpcm)"
        ).matches ||
          window.matchMedia(
            "only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (min-device-pixel-ratio: 1.3)"
          ).matches)) ||
      (window.devicePixelRatio && window.devicePixelRatio > 1.3)
    );
  };

  const getIsRetina = () => {
    return (
      ((window.matchMedia &&
        (window.matchMedia(
          "only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx), only screen and (min-resolution: 75.6dpcm)"
        ).matches ||
          window.matchMedia(
            "only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min--moz-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2)"
          ).matches)) ||
        (window.devicePixelRatio && window.devicePixelRatio >= 2)) &&
      /(iPad|iPhone|iPod)/g.test(navigator.userAgent)
    );
  };

  const getOrientation = () => {
    var orientation =
      (screen.orientation || {}).type ||
      screen.mozOrientation ||
      screen.msOrientation;
    if (orientation === "landscape-primary") {
      return 'landscape';
    } else if (orientation === "landscape-secondary") {
      // Upside down
      return 'landscape';
    } else if (
      orientation === "portrait-secondary" ||
      orientation === "portrait-primary"
    ) {
      return 'portrait';
    } else if (orientation === undefined) {
      return null;
    }
    return null;
  };

  const getWindowSize = () => {
    let windowSize = {
      width: window.innerWidth,
      height: window.innerHeight,
    };

    let isRetina = getIsRetina();
    let highDensity = getIsHighDensity();
    getOrientation();

    // console.log('retina', isRetina, 'highDensity', highDensity, 'orientation', orientation);
  
    if (window.charts !== undefined) {
      if (windowSize.width <= 576) {
        window.charts.displayType = "mobile";
        if (highDensity === true || isRetina === true) {
          window.charts.displayType = "retina";
        }
      } else if (windowSize.width > 576 && windowSize.width <= 768) {
        window.charts.displayType = "tablet";
      } else {
        window.charts.displayType = "desktop";
      }
    }
  };

  

  const handleResize = () => {
    getWindowSize();
  };

  window.addEventListener("resize", handleResize);
  handleResize();
}

// Generic Formatters

let intFormatter = new Intl.NumberFormat(
    "us", // forcing US to avoid mixed styles on translated pages
    { style: "decimal", minimumFractionDigits: 0, maximumFractionDigits: 0 }
);
let float1Formatter = new Intl.NumberFormat(
    "us", // forcing US to avoid mixed styles on translated pages
    { style: "decimal", minimumFractionDigits: 1, maximumFractionDigits: 1 }
);
let float2Formatter = new Intl.NumberFormat(
    "us", // forcing US to avoid mixed styles on translated pages
    { style: "decimal", minimumFractionDigits: 2, maximumFractionDigits: 2 }
);
let float3Formatter = new Intl.NumberFormat(
    "us", // forcing US to avoid mixed styles on translated pages
    { style: "decimal", minimumFractionDigits: 3, maximumFractionDigits: 3 }
);

let pct0Formatter = new Intl.NumberFormat(
    "us", // forcing US to avoid mixed styles on translated pages
    { style: "percent", minimumFractionDigits: 0, maximumFractionDigits: 0 }
);
let pct1Formatter = new Intl.NumberFormat(
    "us", // forcing US to avoid mixed styles on translated pages
    { style: "percent", minimumFractionDigits: 1, maximumFractionDigits: 1 }
);
let pct2Formatter = new Intl.NumberFormat(
    "us", // forcing US to avoid mixed styles on translated pages
    { style: "percent", minimumFractionDigits: 2, maximumFractionDigits: 2 }
);
let pct3Formatter = new Intl.NumberFormat(
    "us", // forcing US to avoid mixed styles on translated pages
    { style: "percent", minimumFractionDigits: 3, maximumFractionDigits: 3 }
);


function formatValue(v, {format='number',min_decimals=1})
{
    // console.log("formatValue",v,format);
    if (format == 'integer') {
        return intFormatter.format(v);
    } else if (format == 'percent') {
        if (v == 0) {
            return pct0Formatter.format(v); // show integer for true zeros
        } else if (v < .00005) {
            return pct3Formatter.format(v);
        } else if (v < .0005) {
            return pct2Formatter.format(v);
        } else if (min_decimals == 0) {
            return pct0Formatter.format(v);
        } else {
            return pct1Formatter.format(v);
        }
    } else { // number or float
        if (v == 0) {
            return intFormatter.format(v); // show integer for true zeros
        } else if (v < .005) {
            return float3Formatter.format(v);
        } else if (v < .05) {
            return float2Formatter.format(v);
        } else if (min_decimals == 0) {
            return intFormatter.format(v);
        } else {
            return float1Formatter.format(v);
        }
    }
}

/**
 * Primary chart rendering function
 * @param {object} svg 
 * @param {object} data 
 * @param {number} x 
 * @param {number} y 
 */


function writeLegend(svg, data, x, y, baselineData) {
    // Build legend.
    const legendText = this.getLegendText();
    if (legendText.length == 0) {
      return;
    }
    const legendW = y.bandwidth()*1.2;
    const legendY =  this.dimensions.margin.top/2;
    const legend2X = this.dimensions.width/2;

    let group = svg.append("g");


    group
      .append("rect")
        .attr("fill", "#92C5DE")
        .attr("class", "legend-block")
        .attr("y", legendY)
        .attr("x", 0)
        .attr("width", legendW)
        .attr("height", legendW);

    group
      .append("text")
      .text(legendText[0]) // Legend label 
      .attr("class", "legend-caption")
      .attr("y", legendY+legendW/2.0 + 1)
      .attr("x", legendW*2)
      .attr('dominant-baseline','middle')
      .attr('text-anchor','start');

    // Baseline indicator
    if (baselineData && legendText.length > 1) {
      group
        .append("rect")
        .attr("fill", "#1f2574")
        .attr("y", legendY-y.bandwidth()/2)
        .attr("x", legend2X)
        .attr("width", d => 4)
        .attr("height", y.bandwidth()*2);

      group
        .append("text")
        .text(legendText[1])
        .attr("class", "legend-caption")
        .attr("y", legendY+legendW/2.0)
        .attr("x", legend2X+15)
        .attr('dominant-baseline','middle')
        .attr('text-anchor','start');
    }
}

/**
 * Build data bars
 * @param {object} svg 
 * @param {object} data 
 * @param {number} x 
 * @param {number} y 
 */
function writeBars$1(svg, data, x, y, baselineData, tooltip, rootID='barid') {
    let max_x_domain = x.domain()[1];
    let component = this;

    // console.log("Write bars data=",data);

    let groups = svg.append("g")
      .selectAll("g")
      .data(data)
      .enter()
        .append("g");

    // light bg bar
    groups
        .append("rect")
        .attr("class","bg-bar")
        .attr("fill", "#f2f5fc")
        .attr("y", (d, i) => y(d.CATEGORY))
        .attr("x", d => x(0))
        .attr("width", d => x(max_x_domain))
        .attr("height", y.bandwidth());
    
    // dark bg bar
    groups
        .append("rect")
        .attr("class","fg-bar")
        .attr("fill", "#92C5DE")
        .attr("y", (d, i) => y(d.CATEGORY))
        .attr("x", d => x(0))
        .attr("width", d => x(d.METRIC_VALUE))
        .attr("height", y.bandwidth())
        .attr("id", (d, i) => rootID+'-'+i);

    // transparent hot bar (different if tooltip)
    groups
        .append("rect")
        .attr("class","hot-bar")
        .attr("fill", "#00ff00")
        .attr("fill-opacity",0)
        .attr("y", (d, i) => y(d.CATEGORY))
        .attr("x", d => x(0))
        .attr("width", d => x(max_x_domain))
        .attr("height", y.bandwidth())
        .attr("tabindex", "0")
        .attr("aria-label", (d, i) => `${this.ariaLabel(d, baselineData)}`)
        .on("mouseover focus", function(event, d, i) {
          d3.select(this.parentNode).select('.fg-bar')
          .transition().duration(200)
          .style("fill", "#003D9D");
          if (tooltip) {
              // set appropriate tooltip text, reveal tooltip at correct location
              tooltip.html(component.getTooltip(d,baselineData));
              tooltip.style("left",'20px');
              // console.log("Tool top L, O, y",event.layerY, event.offsetY, event.y);
              // tooltip.style("top",`${event.layerY+60}px`)
              tooltip.style("top",`${event.offsetY+120}px`);
              tooltip.style("visibility", "visible");
          }
        })
        .on("mouseout blur", function(d) {
          d3.select(this.parentNode).select('.fg-bar')
            .transition().duration(200)
            .style("fill", "#92C5DE");
          if (tooltip) {
            d3.select(this).transition();
            tooltip.style("visibility", "hidden");
          }
        });
    


    // Baseline indicator
    if (baselineData) {
    groups
        .append("rect")
        .attr("fill", "#1f2574")
        .attr("y", (d, i) => y(d.CATEGORY)-y.bandwidth()/2)
        .attr("x", (d,i) => x(baselineData[i].METRIC_VALUE)-2)
        .attr("width", d => 4)
        .attr("height", y.bandwidth()*2);
    }

    // Bar Label
    groups
      .append("text")
      .attr("class", "bar-label")
      .attr("y", (d, i) => y(d.CATEGORY) + (y.bandwidth() / 2))
      .attr("x", d => x(max_x_domain)+12)
      // .attr("width", x.bandwidth() / 4)
      .text(d => formatValue(d.METRIC_VALUE,{format:'percent'}))
      .attr('dominant-baseline','middle')
      .attr('text-anchor','start');

    // Bar Category
    groups
      .append("text")
      .attr("class", "bar-cat")
      .attr("y", (d, i) => y(d.CATEGORY)-8) // +this.getYOffset(i)
      .attr("x", d => x(0))
      .text(d => d.CATEGORY)
      // .attr("width", x.bandwidth() / 4)
      // .html(d => {
      // return `<tspan dx="0em" dy="-0.5em">${d.CATEGORY}</tspan>`
      // })
      .attr('text-anchor','start');
}

/**
 * Render categories.
 * @param {*} extrasFunc @TODO what are the inputs?
 */

 function renderChart$1(extrasFunc = null, baselineData = null, tooltip = null, rootID='barid') {
    // Exclude Other & Unknown categories from displaying for this chart.
    let data = this.alldata;
    // this statement produces an array of strings in IE11 and an array of numbers in modern browsers
    let categories = data.map((group) => group.CATEGORY);

    // Dynamically adjust chart height based on available bars
    this.dimensions.height = this.dimensions.margin.top + 60 * categories.length;
    // console.log("New height",this.chartBreakpointValues.height);

    d3.select(this.querySelector("svg"))
      .attr("viewBox", [
      0,
      0,
      this.dimensions.width,
      this.dimensions.height,
    ]);


    // let categories = d3.map(data, function(d){return(d.CATEGORY)}).keys();

    // Filter and sort here...
    // console.log("Categories",categories);
    // Y position of bars.
    this.y = d3
    .scaleBand()
    .domain(categories)
    .range([
        this.dimensions.margin.top,
        this.dimensions.height - (this.dimensions.margin.bottom),
    ])
    .paddingInner(5.0/6.0)
    .paddingOuter(0.5);

    // console.log("this.y",this.y);
  
    // Position for labels.
    // this.yAxis = (g) =>
    //   g
    //     .attr("class", "bar-label")
    //     .attr("transform", "translate(5," + -32 + ")")
    //     .call(d3.axisLeft(this.y).tickSize(0))
    //     .call((g) => g.selectAll(".domain").remove());
       

    // let max_xdomain = d3.max(data, (d) => d3.max(d, (d) => d.METRIC_VALUE));
    this.max_x_domain = 
    this.x = d3
      .scaleLinear()
      .domain([0, 1])  // d3.max(data, d => d.METRIC_VALUE)]).nice()
      .range([this.dimensions.margin.left, this.dimensions.width - (this.dimensions.margin.left+this.dimensions.margin.right)]);

    this.svg.selectAll("g").remove();

    writeBars$1.call(this, this.svg, data, this.x, this.y, baselineData, tooltip, rootID);
    writeLegend.call(this, this.svg, data, this.x, this.y, baselineData);

    if (extrasFunc) {
      extrasFunc.call(this, this.svg, data, this.x, this.y);
    }

        // Write remaining stuff...
    // this.classList.remove('d-none')
  }

// DATE UTILITIES for charts
//
// Use parseSnowflakeDate('YYYY-MM-DD') instead of new Date('YYYY-MM-DD') 
// as the latter assumes GMT, which you probably don't want.
// This function produces a local (Pacific) date.
//
function parseSnowflakeDate(dateStr) {
    const tokens = dateStr.split('-');
    const yyyy = +tokens[0];
    const mm = +tokens[1];
    const dd = +tokens[2];
    return new Date(yyyy,mm-1,dd);
}

// Return local date string in form YYYY-MM-DD adjusted for dayDelta (0 for today -1 for yesterday)
//

function getSnowflakeStyleDateJS(date) {
    // return date.toLocaleString( 'us', { year: "numeric", month: '2-digit', year:'2-digit' });
    let month = '' + (date.getMonth() + 1),
    day = '' + date.getDate(),
    year = date.getFullYear();

    if (month.length < 2) 
        month = '0' + month;
    if (day.length < 2) 
        day = '0' + day;

    return [year, month, day].join('-');
}


function getSnowflakeStyleDate(dayDelta) {
    let date = new Date();
    date.setDate(date.getDate() + dayDelta);
    return getSnowflakeStyleDateJS(date);
}

function reformatJSDate(theDate, // expects javascript date
    fmt={ month: "long", day: 'numeric', year:'numeric' }) 
{
    const readableDate = 
    theDate.toLocaleString( document.documentElement.lang, fmt);
    // console.log(dateStr + " --> " + readableDate);
    return readableDate;
}


// Date converter for use on chart footnotes.
// Converts a string (typically from Snowflake) 
// in the form YYYY-MM-DD
//
// into a readable localized date, such as 
//    December 12, 2020
// or 
//    12 de diciembre de 2020
function reformatReadableDate(dateStr, // expects YYYY-MM-DD
                              fmt={ month: "long", day: 'numeric', year:'numeric' }, dayDelta=0) {

    const theDate = parseSnowflakeDate(dateStr);
    if (dayDelta != 0) {
        theDate.setDate(theDate.getDate() + dayDelta);
    }
    return reformatJSDate(theDate, fmt);
}

/* Substitute strings in text using either  or {var}, case-sensitive
*/

function applySubstitutions(textString, substitutions) {
    for (const key in substitutions) {
        const value = substitutions[key];
        textString = textString.replace(' + key + ', value);
        textString = textString.replace('{' + key + '}', value);
        textString = textString.replace('(' + key + ')', value);
    }
    return textString;
}

// cagov-chart-dashboard-groups-race-ethnicity-cases

class CAGovDashboardGroupsRaceEthnicityCases extends window.HTMLElement {
  connectedCallback() {
    console.log("Loading CAGovDashboardGroupsRaceEthnicityCases");
    this.translationsObj = getTranslations(this);
    // console.log("Translations obj",this.translationsObj);
    this.innerHTML = template$6(this.translationsObj);
    // Settings and initial values
    this.nbr_bars = 8;
    this.bar_vspace = 60;

    this.chartOptions = {
      // Data
      dataUrl: config.chartsDataFile,
      desktop: {
        fontSize: 14,
        height: 60 + this.nbr_bars * this.bar_vspace,
        width: 400,
        margin: {
          top: 60,
          right: 80,
          bottom: 0, // 20 added for divider
          left: 0,
        },
      },
      tablet: {
        fontSize: 14,
        height: 60 + this.nbr_bars * this.bar_vspace,
        width: 350,
        margin: {
          top: 60,
          right: 80,
          bottom: 0, // 20 added for divider
          left: 0,
        },
      },
      mobile: {
        fontSize: 12,
        height: 60 + this.nbr_bars * (this.bar_vspace - 2),
        width: 440,
        margin: {
          top: 60,
          right: 80,
          bottom: 0,
          left: 0,
        },
      },
      retina: {
        fontSize: 12,
        height: 60 + this.nbr_bars * (this.bar_vspace - 2),
        width: 320,
        margin: {
          top: 60,
          right: 80,
          bottom: 0,
          left: 0,
        },
      },
    };

    this.labelTran = {
      'American Indian or Alaska Native':'AI/AN',
      'Asian':'Asian American',
      'Native Hawaiian and other Pacific Islander':'NHPI',
    };

    getScreenResizeCharts();

    this.screenDisplayType = window.charts
      ? window.charts.displayType
      : "desktop";

    this.chartBreakpointValues = this.chartOptions[
      this.screenDisplayType ? this.screenDisplayType : "desktop"
    ];
    this.dimensions = this.chartBreakpointValues;

    const handleChartResize = () => {
      getScreenResizeCharts();
      this.screenDisplayType = window.charts
        ? window.charts.displayType
        : "desktop";
      this.chartBreakpointValues = this.chartOptions[
        this.screenDisplayType ? this.screenDisplayType : "desktop"
      ];
    };

    window.addEventListener("resize", handleChartResize);

    this.svg = d3
      .select(this.querySelector(".svg-holder"))
      .append("svg")
      .attr("viewBox", [
        0,
        0,
        this.chartBreakpointValues.width,
        this.chartBreakpointValues.height,
      ])
      .append("g")
      .attr("transform", "translate(0,0)");

    this.tooltip = d3
      .select("cagov-chart-dashboard-groups-race-ethnicity-cases")
      .append("div")
      .attr("class", "tooltip-container")
      .text("Empty Tooltip");


    // Set default values for data and labels
    this.dataUrl = this.chartOptions.dataUrl;

    this.retrieveData(this.dataUrl);

    rtlOverride(this); // quick fix for arabic
  }

  getTooltip(d,baselineData) {
    let tooltipText = this.translationsObj.chartBarCaption;
    let bd = baselineData.filter(bd => bd.CATEGORY == d.CATEGORY);
    // !! replacements here for category, metric-value, metric-baseline-value
    tooltipText = tooltipText.replace('{category}', `<span class='highlight-data'>${d.CATEGORY}</span>`);
    tooltipText = tooltipText.replace('{metric-value}', `<span class='highlight-data'>${formatValue(d.METRIC_VALUE,{format:'percent'})}</span>`);
    tooltipText = tooltipText.replace('{metric-baseline-value}', `<span class='highlight-data'>${formatValue(bd[0].METRIC_VALUE,{format:'percent'})}</span>`);
    return `<div class="chart-tooltip"><div>${tooltipText}</div></div>`;
  }

  ariaLabel(d, baselineData) {
    let caption = this.translationsObj.chartBarCaption;
    let bd = baselineData.filter(bd => bd.CATEGORY == d.CATEGORY);
    caption = caption.replace('{category}', d.CATEGORY);
    caption = caption.replace('{metric-value}', formatValue(d.METRIC_VALUE,{format:'percent'}));
    caption = caption.replace('{metric-baseline-value}', formatValue(bd[0].METRIC_VALUE,{format:'percent'}));
    // console.log("Aria Label",caption);
    return caption;
  }

  getLegendText() {
    return [
      this.translationsObj.chartLegend1,
      this.translationsObj.chartLegend2,
    ];
  }


  renderExtras(svg, data, x, y) {
    // Not using this separator line that divides groups from unknown information
    // let group = svg.append("g");
    // group
    //   .append("rect")
    //   .attr("fill", "#000000")
    //   .attr("class", "divider")
    //   .attr("y", y(6) + (this.bar_vspace * 7) / 12)
    //   .attr("x", 0)
    //   .attr("width", this.dimensions.width)
    //   .attr("height", 0.75);
  }

  retrieveData(url) {
    window
      .fetch(url)
      .then((response) => response.json())
      .then(
        function (alldata) {
          // console.log("Race/Eth data data", alldata.data);
          this.metadata = alldata.meta;
          this.alldata = alldata.data.by_race_and_ethnicity.cases;
          this.popdata = alldata.data.by_race_and_ethnicity.population;
          this.alldata.forEach(rec => {
            rec.METRIC_VALUE /= 100.0;
            if (rec.CATEGORY in this.labelTran) {
              rec.CATEGORY = this.labelTran[rec.CATEGORY];
            }
          });
          this.popdata.forEach(rec => {
            rec.METRIC_VALUE /= 100.0;
            if (rec.CATEGORY in this.labelTran) {
              rec.CATEGORY = this.labelTran[rec.CATEGORY];
            }
          });
          // splice multi-race and other to the end
          this.alldata.push(this.alldata.splice(4,1)[0]);
          this.popdata.push(this.popdata.splice(4,1)[0]);
          this.alldata.push(this.alldata.splice(5,1)[0]);
          this.popdata.push(this.popdata.splice(5,1)[0]);

          let publishedDateStr = this.metadata['PUBLISHED_DATE'];
          let publishedDate = parseSnowflakeDate(publishedDateStr);
          let collectedDate = parseSnowflakeDate(publishedDateStr);
          collectedDate.setDate(collectedDate.getDate() - 1);

          let footerReplacementDict = {
            'PUBLISHED_DATE' : reformatJSDate(publishedDate),
            'MINUS_ONE_DATE' : reformatJSDate(collectedDate),
          };
          let footerDisplayText = applySubstitutions(this.translationsObj.footerText, footerReplacementDict);
          d3.select(document.querySelector("#ethnicityGroupChartContainer .chart-footer-caption")).text(footerDisplayText);

          renderChart$1.call(this, this.renderExtras, this.popdata, this.tooltip, 'g-re-cases');
          // this.resetTitle({
          //   region: regionName, 
          //   chartTitle: this.translationsObj.chartTitle,
          //   chartTitleCounty: this.translationsObj.chartCounty,
          // });
        }.bind(this)
      );
  }
}

window.customElements.define(
  "cagov-chart-dashboard-groups-race-ethnicity-cases",
  CAGovDashboardGroupsRaceEthnicityCases
);

var css_248z$5 = "cagov-chart-dashboard-groups-race-ethnicity-deaths.chart .bar-label .tick text {\n  text-transform: capitalize; }\n\ncagov-chart-dashboard-groups-race-ethnicity-deaths.chart .bar-label {\n  font-weight: bold;\n  font-size: 0.75rem; }\n\ncagov-chart-dashboard-groups-race-ethnicity-deaths.chart .bar-cat {\n  font-weight: bold;\n  font-size: 0.95rem; }\n\ncagov-chart-dashboard-groups-race-ethnicity-deaths.chart .legend-caption {\n  font-weight: 300;\n  font-size: 0.75rem; }\n\ncagov-chart-dashboard-groups-race-ethnicity-deaths.chart .chart-title {\n  font-weight: 300;\n  font-size: 1.2rem;\n  margin-bottom: 0px; }\n\n.d-hide {\n  display: none; }\n";
styleInject(css_248z$5);

/**
 * Render bar chart for vaccinations group.
 * 
 * @param {string} translationsObj.chartTitle - Label for the chart
 * @param {string} translationsObj.chartDataLabel - Chart description
 */
function template$5({
  chartTitle = "Confirmed deaths by race and ethnicity in California",
  chartDataLabel = null,
}) {
  return /*html*/ `
  <div class="py-2">
    <div class="bg-white pt-2 pb-1">
      <div class="mx-auto">
        <div class="chart-title">${chartTitle}</div>
        <div class="svg-holder"></div>
      </div>
    </div>
  </div>`;
}

// cagov-chart-dashboard-groups-race-ethnicity-deaths

class CAGovDashboardGroupsRaceEthnicityDeaths extends window.HTMLElement {
  connectedCallback() {
    console.log("Loading CAGovDashboardGroupsRaceEthnicityDeaths");
    this.translationsObj = getTranslations(this);
    this.innerHTML = template$5(this.translationsObj);
    // Settings and initial values
    this.nbr_bars = 8;
    this.bar_vspace = 60;

    this.chartOptions = {
      // Data
      dataUrl: config.chartsDataFile,
      desktop: {
        fontSize: 14,
        height: 60 + this.nbr_bars * this.bar_vspace,
        width: 400,
        margin: {
          top: 60,
          right: 80,
          bottom: 0, // 20 added for divider
          left: 0,
        },
      },
      tablet: {
        fontSize: 14,
        height: 60 + this.nbr_bars * this.bar_vspace,
        width: 350,
        margin: {
          top: 60,
          right: 80,
          bottom: 0, // 20 added for divider
          left: 0,
        },
      },
      mobile: {
        fontSize: 12,
        height: 60 + this.nbr_bars * (this.bar_vspace - 2),
        width: 440,
        margin: {
          top: 60,
          right: 80,
          bottom: 0,
          left: 0,
        },
      },
      retina: {
        fontSize: 12,
        height: 60 + this.nbr_bars * (this.bar_vspace - 2),
        width: 320,
        margin: {
          top: 60,
          right: 80,
          bottom: 0,
          left: 0,
        },
      },
    };

    this.labelTran = {
      'American Indian or Alaska Native':'AI/AN',
      'Asian':'Asian American',
      'Native Hawaiian and other Pacific Islander':'NHPI',
    };

    getScreenResizeCharts();

    this.screenDisplayType = window.charts
      ? window.charts.displayType
      : "desktop";

    this.chartBreakpointValues = this.chartOptions[
      this.screenDisplayType ? this.screenDisplayType : "desktop"
    ];
    this.dimensions = this.chartBreakpointValues;

    const handleChartResize = () => {
      getScreenResizeCharts();
      this.screenDisplayType = window.charts
        ? window.charts.displayType
        : "desktop";
      this.chartBreakpointValues = this.chartOptions[
        this.screenDisplayType ? this.screenDisplayType : "desktop"
      ];
    };

    window.addEventListener("resize", handleChartResize);

    this.svg = d3
      .select(this.querySelector(".svg-holder"))
      .append("svg")
      .attr("viewBox", [
        0,
        0,
        this.chartBreakpointValues.width,
        this.chartBreakpointValues.height,
      ])
      .append("g")
      .attr("transform", "translate(0,0)");

    this.tooltip = d3
      .select("cagov-chart-dashboard-groups-race-ethnicity-deaths")
      .append("div")
      .attr("class", "tooltip-container")
      .text("Empty Tooltip");

      // Set default values for data and labels
    this.dataUrl = this.chartOptions.dataUrl;

    this.retrieveData(this.dataUrl);

    rtlOverride(this); // quick fix for arabic
  }

  getTooltip(d,baselineData) {
    let tooltipText = this.translationsObj.chartBarCaption;
    let bd = baselineData.filter(bd => bd.CATEGORY == d.CATEGORY);
    // !! replacements here for category, metric-value, metric-baseline-value
    tooltipText = tooltipText.replace('{category}', `<span class='highlight-data'>${d.CATEGORY}</span>`);
    tooltipText = tooltipText.replace('{metric-value}', `<span class='highlight-data'>${formatValue(d.METRIC_VALUE,{format:'percent'})}</span>`);
    tooltipText = tooltipText.replace('{metric-baseline-value}', `<span class='highlight-data'>${formatValue(bd[0].METRIC_VALUE,{format:'percent'})}</span>`);
    return `<div class="chart-tooltip"><div>${tooltipText}</div></div>`;
  }

  ariaLabel(d, baselineData) {
    let caption = this.translationsObj.chartBarCaption;
    let bd = baselineData.filter(bd => bd.CATEGORY == d.CATEGORY);
    caption = caption.replace('{category}', d.CATEGORY);
    caption = caption.replace('{metric-value}', formatValue(d.METRIC_VALUE,{format:'percent'}));
    caption = caption.replace('{metric-baseline-value}', formatValue(bd[0].METRIC_VALUE,{format:'percent'}));
    // console.log("Aria Label",caption);
    return caption;
  }

  getLegendText() {
    return [
      this.translationsObj.chartLegend1,
      this.translationsObj.chartLegend2,
    ];
  }

  renderExtras(svg, data, x, y) {
    // Not using this separator line that divides groups from unknown information
    // let group = svg.append("g");
    // group
    //   .append("rect")
    //   .attr("fill", "#000000")
    //   .attr("class", "divider")
    //   .attr("y", y(6) + (this.bar_vspace * 7) / 12)
    //   .attr("x", 0)
    //   .attr("width", this.dimensions.width)
    //   .attr("height", 0.75);
  }

  retrieveData(url) {
    window
      .fetch(url)
      .then((response) => response.json())
      .then(
        function (alldata) {
          // console.log("Race/Eth data data", alldata.data);
          this.alldata = alldata.data.by_race_and_ethnicity.deaths;
          this.popdata = alldata.data.by_race_and_ethnicity.population;
          this.alldata.forEach(rec => {
            rec.METRIC_VALUE /= 100.0;
            if (rec.CATEGORY in this.labelTran) {
              rec.CATEGORY = this.labelTran[rec.CATEGORY];
            }
          });
          this.popdata.forEach(rec => {
            rec.METRIC_VALUE /= 100.0;
            if (rec.CATEGORY in this.labelTran) {
              rec.CATEGORY = this.labelTran[rec.CATEGORY];
            }
          });
          this.alldata.push(this.alldata.splice(4,1)[0]);
          this.popdata.push(this.popdata.splice(4,1)[0]);
          this.alldata.push(this.alldata.splice(5,1)[0]);
          this.popdata.push(this.popdata.splice(5,1)[0]);

          // "Unknown"
          // let croppedData = alldata.data.filter(function(a){return a.CATEGORY !== 'Unknown'});
          // this.alldata = croppedData;

          renderChart$1.call(this, this.renderExtras, this.popdata, this.tooltip, 'g-re-deaths');
          // this.resetTitle({
          //   region: regionName, 
          //   chartTitle: this.translationsObj.chartTitle,
          //   chartTitleCounty: this.translationsObj.chartCounty,
          // });
        }.bind(this)
      );
  }
}

window.customElements.define(
  "cagov-chart-dashboard-groups-race-ethnicity-deaths",
  CAGovDashboardGroupsRaceEthnicityDeaths
);

var css_248z$4 = "cagov-chart-dashboard-groups-gender-cases.chart .bar-label .tick text {\n  text-transform: capitalize; }\n\ncagov-chart-dashboard-groups-gender-cases.chart .bar-label {\n  font-weight: bold;\n  font-size: 0.75rem; }\n\ncagov-chart-dashboard-groups-gender-cases.chart .bar-cat {\n  font-weight: bold;\n  font-size: 0.95rem; }\n\ncagov-chart-dashboard-groups-gender-cases.chart .legend-caption {\n  font-weight: 300;\n  font-size: 0.75rem; }\n\ncagov-chart-dashboard-groups-gender-cases.chart .chart-title {\n  font-weight: 300;\n  font-size: 1.2rem;\n  margin-bottom: 0px; }\n\n.d-hide {\n  display: none; }\n";
styleInject(css_248z$4);

/**
 * Render bar chart for vaccinations group.
 * 
 * @param {string} translationsObj.chartTitle - Label for the chart
 * @param {string} translationsObj.chartDataLabel - Chart description
 */
function template$4({
  chartTitle = "Confirmed cases by gender in California",
  chartDataLabel = null,
}) {
  return /*html*/ `
    <div class="py-2">
      <div class="bg-white pt-2 pb-1">
        <div class="mx-auto">
            <div class="chart-title">${chartTitle}</div>
            <div class="svg-holder"></div>
        </div>
      </div>
    </div>`;
}

// cagov-chart-dashboard-groups-gender-cases

class CAGovDashboardGroupsGenderCases extends window.HTMLElement {
  connectedCallback() {
    console.log("Loading CAGovDashboardGroupsGenderCases");
    this.translationsObj = getTranslations(this);
    // console.log("Translations obj",this.translationsObj);
    this.innerHTML = template$4(this.translationsObj);
    // Settings and initial values
    this.nbr_bars = 8;
    this.bar_vspace = 60;

    this.chartOptions = {
      // Data
      dataUrl: config.chartsDataFile,
      desktop: {
        fontSize: 14,
        height: 60 + this.nbr_bars * this.bar_vspace,
        width: 400,
        margin: {
          top: 60,
          right: 80,
          bottom: 0, // 20 added for divider
          left: 0,
        },
      },
      tablet: {
        fontSize: 14,
        height: 60 + this.nbr_bars * this.bar_vspace,
        width: 350,
        margin: {
          top: 60,
          right: 80,
          bottom: 0, // 20 added for divider
          left: 0,
        },
      },
      mobile: {
        fontSize: 12,
        height: 60 + this.nbr_bars * (this.bar_vspace - 2),
        width: 440,
        margin: {
          top: 60,
          right: 80,
          bottom: 0,
          left: 0,
        },
      },
      retina: {
        fontSize: 12,
        height: 60 + this.nbr_bars * (this.bar_vspace - 2),
        width: 320,
        margin: {
          top: 60,
          right: 80,
          bottom: 0,
          left: 0,
        },
      },
    };

    this.labelTran = {
      // 'Unknown':'Unknown/undifferentiated',
    };

    getScreenResizeCharts();

    this.screenDisplayType = window.charts
      ? window.charts.displayType
      : "desktop";

    this.chartBreakpointValues = this.chartOptions[
      this.screenDisplayType ? this.screenDisplayType : "desktop"
    ];
    this.dimensions = this.chartBreakpointValues;

    const handleChartResize = () => {
      getScreenResizeCharts();
      this.screenDisplayType = window.charts
        ? window.charts.displayType
        : "desktop";
      this.chartBreakpointValues = this.chartOptions[
        this.screenDisplayType ? this.screenDisplayType : "desktop"
      ];
    };

    window.addEventListener("resize", handleChartResize);

    this.svg = d3
      .select(this.querySelector(".svg-holder"))
      .append("svg")
      .attr("viewBox", [
        0,
        0,
        this.chartBreakpointValues.width,
        this.chartBreakpointValues.height,
      ])
      .append("g")
      .attr("transform", "translate(0,0)");

      this.tooltip = d3
      .select("cagov-chart-dashboard-groups-gender-cases")
      .append("div")
      .attr("class", "tooltip-container")
      .text("Empty Tooltip");

    // Set default values for data and labels
    this.dataUrl = this.chartOptions.dataUrl;

    this.retrieveData(this.dataUrl);

    rtlOverride(this); // quick fix for arabic
  }

  getTooltip(d,baselineData) {
    let tooltipText = this.translationsObj.chartBarCaption;
    let bd = baselineData.filter(bd => bd.CATEGORY == d.CATEGORY);
    // !! replacements here for category, metric-value, metric-baseline-value
    tooltipText = tooltipText.replace('{category}', `<span class='highlight-data'>${d.CATEGORY}s</span>`);
    tooltipText = tooltipText.replace('{metric-value}', `<span class='highlight-data'>${formatValue(d.METRIC_VALUE,{format:'percent'})}</span>`);
    tooltipText = tooltipText.replace('{metric-baseline-value}', `<span class='highlight-data'>${formatValue(bd[0].METRIC_VALUE,{format:'percent'})}</span>`);
    return `<div class="chart-tooltip"><div>${tooltipText}</div></div>`;
  }

  ariaLabel(d, baselineData) {
    let caption = this.translationsObj.chartBarCaption;
    let bd = baselineData.filter(bd => bd.CATEGORY == d.CATEGORY);
    caption = caption.replace('{category}', d.CATEGORY+'s');
    caption = caption.replace('{metric-value}', formatValue(d.METRIC_VALUE,{format:'percent'}));
    caption = caption.replace('{metric-baseline-value}', formatValue(bd[0].METRIC_VALUE,{format:'percent'}));
    // console.log("Aria Label",caption);
    return caption;
  }

  getLegendText() {
    return [
      this.translationsObj.chartLegend1,
      this.translationsObj.chartLegend2,
    ];
  }

  renderExtras(svg, data, x, y) {
    // Not using this separator line that divides groups from unknown information
    // let group = svg.append("g");
    // group
    //   .append("rect")
    //   .attr("fill", "#000000")
    //   .attr("class", "divider")
    //   .attr("y", y(6) + (this.bar_vspace * 7) / 12)
    //   .attr("x", 0)
    //   .attr("width", this.dimensions.width)
    //   .attr("height", 0.75);
  }

  retrieveData(url) {
    window
      .fetch(url)
      .then((response) => response.json())
      .then(
        function (alldata) {
          // console.log("Race/Eth data data", alldata.data);
          this.metadata = alldata.meta;
          this.alldata = alldata.data.by_gender.cases;
          this.popdata = alldata.data.by_gender.population;
          this.alldata.forEach(rec => {
            rec.METRIC_VALUE /= 100.0;
            if (rec.CATEGORY in this.labelTran) {
              rec.CATEGORY = this.labelTran[rec.CATEGORY];
            }
          });
          this.popdata.forEach(rec => {
            rec.METRIC_VALUE /= 100.0;
            if (rec.CATEGORY in this.labelTran) {
              rec.CATEGORY = this.labelTran[rec.CATEGORY];
            }
          });

          let publishedDateStr = this.metadata['PUBLISHED_DATE'];
          let publishedDate = parseSnowflakeDate(publishedDateStr);
          let collectedDate = parseSnowflakeDate(publishedDateStr);
          collectedDate.setDate(collectedDate.getDate() - 1);

          let footerReplacementDict = {
            'PUBLISHED_DATE' : reformatJSDate(publishedDate),
            'MINUS_ONE_DATE' : reformatJSDate(collectedDate),
          };
          let footerDisplayText = applySubstitutions(this.translationsObj.footerText, footerReplacementDict);
          d3.select(document.querySelector("#genderGroupChartContainer .chart-footer-caption")).text(footerDisplayText);

          // "Unknown"
          // let croppedData = alldata.data.filter(function(a){return a.CATEGORY !== 'Unknown'});
          // this.alldata = croppedData;

          renderChart$1.call(this, this.renderExtras, this.popdata, this.tooltip, 'g-gender-cases');
          // this.resetTitle({
          //   region: regionName, 
          //   chartTitle: this.translationsObj.chartTitle,
          //   chartTitleCounty: this.translationsObj.chartCounty,
          // });
        }.bind(this)
      );
  }
}

window.customElements.define(
  "cagov-chart-dashboard-groups-gender-cases",
  CAGovDashboardGroupsGenderCases
);

var css_248z$3 = "cagov-chart-dashboard-groups-gender-deaths.chart .bar-label .tick text {\n  text-transform: capitalize; }\n\ncagov-chart-dashboard-groups-gender-deaths.chart .bar-label {\n  font-weight: bold;\n  font-size: 0.75rem; }\n\ncagov-chart-dashboard-groups-gender-deaths.chart .bar-cat {\n  font-weight: bold;\n  font-size: 0.95rem; }\n\ncagov-chart-dashboard-groups-gender-deaths.chart .legend-caption {\n  font-weight: 300;\n  font-size: 0.75rem; }\n\ncagov-chart-dashboard-groups-gender-deaths.chart .chart-title {\n  font-weight: 300;\n  font-size: 1.2rem;\n  margin-bottom: 0px; }\n\n.d-hide {\n  display: none; }\n";
styleInject(css_248z$3);

/**
 * Render bar chart for vaccinations group.
 * 
 * @param {string} translationsObj.chartTitle - Label for the chart
 * @param {string} translationsObj.chartDataLabel - Chart description
 */
function template$3({
  chartTitle = "Confirmed deaths by gender in California",
  chartDataLabel = null,
}) {
  return /*html*/ `
  <div class="py-2">
    <div class="bg-white pt-2 pb-1">
      <div class="mx-auto">
        <div class="chart-title">${chartTitle}</div>
        <div class="svg-holder"></div>
      </div>
    </div>
  </div>`;
}

// cagov-chart-dashboard-groups-gender-deaths

class CAGovDashboardGroupsGenderDeaths extends window.HTMLElement {
  connectedCallback() {
    console.log("Loading CAGovDashboardGroupsGenderDeaths");
    this.translationsObj = getTranslations(this);
    this.innerHTML = template$3(this.translationsObj);
    // Settings and initial values
    this.nbr_bars = 8;
    this.bar_vspace = 60;

    this.chartOptions = {
      // Data
      dataUrl: config.chartsDataFile,
      desktop: {
        fontSize: 14,
        height: 60 + this.nbr_bars * this.bar_vspace,
        width: 400,
        margin: {
          top: 60,
          right: 80,
          bottom: 0, // 20 added for divider
          left: 0,
        },
      },
      tablet: {
        fontSize: 14,
        height: 60 + this.nbr_bars * this.bar_vspace,
        width: 350,
        margin: {
          top: 60,
          right: 80,
          bottom: 0, // 20 added for divider
          left: 0,
        },
      },
      mobile: {
        fontSize: 12,
        height: 60 + this.nbr_bars * (this.bar_vspace - 2),
        width: 440,
        margin: {
          top: 60,
          right: 80,
          bottom: 0,
          left: 0,
        },
      },
      retina: {
        fontSize: 12,
        height: 60 + this.nbr_bars * (this.bar_vspace - 2),
        width: 320,
        margin: {
          top: 60,
          right: 80,
          bottom: 0,
          left: 0,
        },
      },
    };

    this.labelTran = {
      // 'Unknown':'Unknown/undifferentiated',
    };

    getScreenResizeCharts();

    this.screenDisplayType = window.charts
      ? window.charts.displayType
      : "desktop";

    this.chartBreakpointValues = this.chartOptions[
      this.screenDisplayType ? this.screenDisplayType : "desktop"
    ];
    this.dimensions = this.chartBreakpointValues;

    const handleChartResize = () => {
      getScreenResizeCharts();
      this.screenDisplayType = window.charts
        ? window.charts.displayType
        : "desktop";
      this.chartBreakpointValues = this.chartOptions[
        this.screenDisplayType ? this.screenDisplayType : "desktop"
      ];
    };

    window.addEventListener("resize", handleChartResize);

    this.svg = d3
      .select(this.querySelector(".svg-holder"))
      .append("svg")
      .attr("viewBox", [
        0,
        0,
        this.chartBreakpointValues.width,
        this.chartBreakpointValues.height,
      ])
      .append("g")
      .attr("transform", "translate(0,0)");

    this.tooltip = d3
      .select("cagov-chart-dashboard-groups-gender-deaths")
      .append("div")
      .attr("class", "tooltip-container")
      .text("Empty Tooltip");

    // Set default values for data and labels
    this.dataUrl = this.chartOptions.dataUrl;

    this.retrieveData(this.dataUrl);

    rtlOverride(this); // quick fix for arabic
  }

  getTooltip(d,baselineData) {
    let tooltipText = this.translationsObj.chartBarCaption;
    let bd = baselineData.filter(bd => bd.CATEGORY == d.CATEGORY);
    // !! replacements here for category, metric-value, metric-baseline-value
    tooltipText = tooltipText.replace('{category}', `<span class='highlight-data'>${d.CATEGORY}s</span>`);
    tooltipText = tooltipText.replace('{metric-value}', `<span class='highlight-data'>${formatValue(d.METRIC_VALUE,{format:'percent'})}</span>`);
    tooltipText = tooltipText.replace('{metric-baseline-value}', `<span class='highlight-data'>${formatValue(bd[0].METRIC_VALUE,{format:'percent'})}</span>`);
    return `<div class="chart-tooltip"><div>${tooltipText}</div></div>`;
  }

  ariaLabel(d, baselineData) {
    let caption = this.translationsObj.chartBarCaption;
    let bd = baselineData.filter(bd => bd.CATEGORY == d.CATEGORY);
    caption = caption.replace('{category}', d.CATEGORY+'s');
    caption = caption.replace('{metric-value}', formatValue(d.METRIC_VALUE,{format:'percent'}));
    caption = caption.replace('{metric-baseline-value}', formatValue(bd[0].METRIC_VALUE,{format:'percent'}));
    // console.log("Aria Label",caption);
    return caption;
  }

  getLegendText() {
    return [
      this.translationsObj.chartLegend1,
      this.translationsObj.chartLegend2,
    ];
  }

  renderExtras(svg, data, x, y) {
    // Not using this separator line that divides groups from unknown information
    // let group = svg.append("g");
    // group
    //   .append("rect")
    //   .attr("fill", "#000000")
    //   .attr("class", "divider")
    //   .attr("y", y(6) + (this.bar_vspace * 7) / 12)
    //   .attr("x", 0)
    //   .attr("width", this.dimensions.width)
    //   .attr("height", 0.75);
  }

  retrieveData(url) {
    window
      .fetch(url)
      .then((response) => response.json())
      .then(
        function (alldata) {
          // console.log("Race/Eth data data", alldata.data);
          this.alldata = alldata.data.by_gender.deaths;
          this.popdata = alldata.data.by_gender.population;
          this.alldata.forEach(rec => {
            rec.METRIC_VALUE /= 100.0;
            if (rec.CATEGORY in this.labelTran) {
              rec.CATEGORY = this.labelTran[rec.CATEGORY];
            }
          });
          this.popdata.forEach(rec => {
            rec.METRIC_VALUE /= 100.0;
            if (rec.CATEGORY in this.labelTran) {
              rec.CATEGORY = this.labelTran[rec.CATEGORY];
            }
          });

          // "Unknown"
          // let croppedData = alldata.data.filter(function(a){return a.CATEGORY !== 'Unknown'});
          // this.alldata = croppedData;

          renderChart$1.call(this, this.renderExtras, this.popdata, this.tooltip, 'g-gender-deaths');
          // this.resetTitle({
          //   region: regionName, 
          //   chartTitle: this.translationsObj.chartTitle,
          //   chartTitleCounty: this.translationsObj.chartCounty,
          // });
        }.bind(this)
      );
  }
}

window.customElements.define(
  "cagov-chart-dashboard-groups-gender-deaths",
  CAGovDashboardGroupsGenderDeaths
);

var css_248z$2 = "cagov-chart-dashboard-groups-age-cases.chart .bar-label .tick text {\n  text-transform: capitalize; }\n\ncagov-chart-dashboard-groups-age-cases.chart .bar-label {\n  font-weight: bold;\n  font-size: 0.75rem; }\n\ncagov-chart-dashboard-groups-age-cases.chart .bar-cat {\n  font-weight: bold;\n  font-size: 0.95rem; }\n\ncagov-chart-dashboard-groups-age-cases.chart .legend-caption {\n  font-weight: 300;\n  font-size: 0.75rem; }\n\ncagov-chart-dashboard-groups-age-cases.chart .chart-title {\n  font-weight: 300;\n  font-size: 1.2rem;\n  margin-bottom: 0px; }\n\n.d-hide {\n  display: none; }\n";
styleInject(css_248z$2);

/**
 * Render bar chart for vaccinations group.
 * 
 * @param {string} translationsObj.chartTitle - Label for the chart
 * @param {string} translationsObj.chartDataLabel - Chart description
 */
function template$2({
  chartTitle = "Confirmed cases by age in California",
  chartDataLabel = null,
}) {
  return /*html*/ `
    <div class="py-2">
      <div class="bg-white pt-2 pb-1">
        <div class="mx-auto">
            <div class="chart-title">${chartTitle}</div>
            <div class="svg-holder"></div>
        </div>
      </div>
    </div>`;
}

// cagov-chart-dashboard-groups-age-cases

class CAGovDashboardGroupsAgeCases extends window.HTMLElement {
  connectedCallback() {
    console.log("Loading CAGovDashboardGroupsAgeCases");
    this.translationsObj = getTranslations(this);
    // console.log("Translations obj",this.translationsObj);
    this.innerHTML = template$2(this.translationsObj);
    // Settings and initial values
    this.nbr_bars = 8;
    this.bar_vspace = 60;

    this.chartOptions = {
      // Data
      dataUrl: config.chartsDataFile,
      desktop: {
        fontSize: 14,
        height: 60 + this.nbr_bars * this.bar_vspace,
        width: 400,
        margin: {
          top: 60,
          right: 80,
          bottom: 0, // 20 added for divider
          left: 0,
        },
      },
      tablet: {
        fontSize: 14,
        height: 60 + this.nbr_bars * this.bar_vspace,
        width: 350,
        margin: {
          top: 60,
          right: 80,
          bottom: 0, // 20 added for divider
          left: 0,
        },
      },
      mobile: {
        fontSize: 12,
        height: 60 + this.nbr_bars * (this.bar_vspace - 2),
        width: 440,
        margin: {
          top: 60,
          right: 80,
          bottom: 0,
          left: 0,
        },
      },
      retina: {
        fontSize: 12,
        height: 60 + this.nbr_bars * (this.bar_vspace - 2),
        width: 320,
        margin: {
          top: 60,
          right: 80,
          bottom: 0,
          left: 0,
        },
      },
    };

    getScreenResizeCharts();

    this.screenDisplayType = window.charts
      ? window.charts.displayType
      : "desktop";

    this.chartBreakpointValues = this.chartOptions[
      this.screenDisplayType ? this.screenDisplayType : "desktop"
    ];
    this.dimensions = this.chartBreakpointValues;

    const handleChartResize = () => {
      getScreenResizeCharts();
      this.screenDisplayType = window.charts
        ? window.charts.displayType
        : "desktop";
      this.chartBreakpointValues = this.chartOptions[
        this.screenDisplayType ? this.screenDisplayType : "desktop"
      ];
    };

    window.addEventListener("resize", handleChartResize);

    this.svg = d3
      .select(this.querySelector(".svg-holder"))
      .append("svg")
      .attr("viewBox", [
        0,
        0,
        this.chartBreakpointValues.width,
        this.chartBreakpointValues.height,
      ])
      .append("g")
      .attr("transform", "translate(0,0)");

    this.tooltip = d3
      .select("cagov-chart-dashboard-groups-age-cases")
      .append("div")
      .attr("class", "tooltip-container")
      .text("Empty Tooltip");

    // Set default values for data and labels
    this.dataUrl = this.chartOptions.dataUrl;

    this.retrieveData(this.dataUrl);

    rtlOverride(this); // quick fix for arabic
  }

  getTooltip(d,baselineData) {
    let tooltipText = this.translationsObj.chartBarCaption;
    let bd = baselineData.filter(bd => bd.CATEGORY == d.CATEGORY);
    // !! replacements here for category, metric-value, metric-baseline-value
    tooltipText = tooltipText.replace('{category}', `<span class='highlight-data'>${d.CATEGORY}</span>`);
    tooltipText = tooltipText.replace('{metric-value}', `<span class='highlight-data'>${formatValue(d.METRIC_VALUE,{format:'percent'})}</span>`);
    tooltipText = tooltipText.replace('{metric-baseline-value}', `<span class='highlight-data'>${formatValue(bd[0].METRIC_VALUE,{format:'percent'})}</span>`);
    return `<div class="chart-tooltip"><div>${tooltipText}</div></div>`;
  }

  ariaLabel(d, baselineData) {
    let caption = this.translationsObj.chartBarCaption;
    let bd = baselineData.filter(bd => bd.CATEGORY == d.CATEGORY);
    caption = caption.replace('{category}', d.CATEGORY);
    caption = caption.replace('{metric-value}', formatValue(d.METRIC_VALUE,{format:'percent'}));
    caption = caption.replace('{metric-baseline-value}', formatValue(bd[0].METRIC_VALUE,{format:'percent'}));
    // console.log("Aria Label",caption);
    return caption;
  }

  getLegendText() {
    return [
      this.translationsObj.chartLegend1,
      this.translationsObj.chartLegend2,
    ];
  }

  renderExtras(svg, data, x, y) {
    // Not using this separator line that divides groups from unknown information
    // let group = svg.append("g");
    // group
    //   .append("rect")
    //   .attr("fill", "#000000")
    //   .attr("class", "divider")
    //   .attr("y", y(6) + (this.bar_vspace * 7) / 12)
    //   .attr("x", 0)
    //   .attr("width", this.dimensions.width)
    //   .attr("height", 0.75);
  }

  retrieveData(url) {
    window
      .fetch(url)
      .then((response) => response.json())
      .then(
        function (alldata) {
          // console.log("Race/Eth data data", alldata.data);
          this.metadata = alldata.meta;
          this.alldata = alldata.data.by_age.cases;
          this.popdata = alldata.data.by_age.population;
          this.alldata.forEach(rec => {
            rec.METRIC_VALUE /= 100.0;
          });
          this.popdata.forEach(rec => {
            rec.METRIC_VALUE /= 100.0;
          });

          let publishedDateStr = this.metadata['PUBLISHED_DATE'];
          let publishedDate = parseSnowflakeDate(publishedDateStr);
          let collectedDate = parseSnowflakeDate(publishedDateStr);
          collectedDate.setDate(collectedDate.getDate() - 1);

          let footerReplacementDict = {
            'PUBLISHED_DATE' : reformatJSDate(publishedDate),
            'MINUS_ONE_DATE' : reformatJSDate(collectedDate),
          };
          let footerDisplayText = applySubstitutions(this.translationsObj.footerText, footerReplacementDict);
          d3.select(document.querySelector("#ageGroupChartContainer .chart-footer-caption")).text(footerDisplayText);

          // "Unknown"
          // let croppedData = alldata.data.filter(function(a){return a.CATEGORY !== 'Unknown'});
          // this.alldata = croppedData;

          renderChart$1.call(this, this.renderExtras, this.popdata, this.tooltip, 'g-age-cases');
          // this.resetTitle({
          //   region: regionName, 
          //   chartTitle: this.translationsObj.chartTitle,
          //   chartTitleCounty: this.translationsObj.chartCounty,
          // });
        }.bind(this)
      );
  }
}

window.customElements.define(
  "cagov-chart-dashboard-groups-age-cases",
  CAGovDashboardGroupsAgeCases
);

var css_248z$1 = "cagov-chart-dashboard-groups-age-deaths.chart .bar-label .tick text {\n  text-transform: capitalize; }\n\ncagov-chart-dashboard-groups-age-deaths.chart .bar-label {\n  font-weight: bold;\n  font-size: 0.75rem; }\n\ncagov-chart-dashboard-groups-age-deaths.chart .bar-cat {\n  font-weight: bold;\n  font-size: 0.95rem; }\n\ncagov-chart-dashboard-groups-age-deaths.chart .legend-caption {\n  font-weight: 300;\n  font-size: 0.75rem; }\n\ncagov-chart-dashboard-groups-age-deaths.chart .chart-title {\n  font-weight: 300;\n  font-size: 1.2rem;\n  margin-bottom: 0px; }\n\n.d-hide {\n  display: none; }\n";
styleInject(css_248z$1);

/**
 * Render bar chart for vaccinations group.
 * 
 * @param {string} translationsObj.chartTitle - Label for the chart
 * @param {string} translationsObj.chartDataLabel - Chart description
 */
function template$1({
  chartTitle = "Confirmed deaths by age in California",
  chartDataLabel = null,
}) {
  return /*html*/ `
  <div class="py-2">
    <div class="bg-white pt-2 pb-1">
      <div class="mx-auto">
        <div class="chart-title">${chartTitle}</div>
        <div class="svg-holder"></div>
      </div>
    </div>
  </div>`;
}

// cagov-chart-dashboard-groups-age-deaths

class CAGovDashboardGroupsAgeDeaths extends window.HTMLElement {
  connectedCallback() {
    console.log("Loading CAGovDashboardGroupsAgeDeaths");
    this.translationsObj = getTranslations(this);
    this.innerHTML = template$1(this.translationsObj);
    // Settings and initial values
    this.nbr_bars = 8;
    this.bar_vspace = 60;

    this.chartOptions = {
      // Data
      dataUrl: config.chartsDataFile,
      desktop: {
        fontSize: 14,
        height: 60 + this.nbr_bars * this.bar_vspace,
        width: 400,
        margin: {
          top: 60,
          right: 80,
          bottom: 0, // 20 added for divider
          left: 0,
        },
      },
      tablet: {
        fontSize: 14,
        height: 60 + this.nbr_bars * this.bar_vspace,
        width: 350,
        margin: {
          top: 60,
          right: 80,
          bottom: 0, // 20 added for divider
          left: 0,
        },
      },
      mobile: {
        fontSize: 12,
        height: 60 + this.nbr_bars * (this.bar_vspace - 2),
        width: 440,
        margin: {
          top: 60,
          right: 80,
          bottom: 0,
          left: 0,
        },
      },
      retina: {
        fontSize: 12,
        height: 60 + this.nbr_bars * (this.bar_vspace - 2),
        width: 320,
        margin: {
          top: 60,
          right: 80,
          bottom: 0,
          left: 0,
        },
      },
    };

    getScreenResizeCharts();

    this.screenDisplayType = window.charts
      ? window.charts.displayType
      : "desktop";

    this.chartBreakpointValues = this.chartOptions[
      this.screenDisplayType ? this.screenDisplayType : "desktop"
    ];
    this.dimensions = this.chartBreakpointValues;

    const handleChartResize = () => {
      getScreenResizeCharts();
      this.screenDisplayType = window.charts
        ? window.charts.displayType
        : "desktop";
      this.chartBreakpointValues = this.chartOptions[
        this.screenDisplayType ? this.screenDisplayType : "desktop"
      ];
    };

    window.addEventListener("resize", handleChartResize);

    this.svg = d3
      .select(this.querySelector(".svg-holder"))
      .append("svg")
      .attr("viewBox", [
        0,
        0,
        this.chartBreakpointValues.width,
        this.chartBreakpointValues.height,
      ])
      .append("g")
      .attr("transform", "translate(0,0)");

    this.tooltip = d3
      .select("cagov-chart-dashboard-groups-age-deaths")
      .append("div")
      .attr("class", "tooltip-container")
      .text("Empty Tooltip");


    // Set default values for data and labels
    this.dataUrl = this.chartOptions.dataUrl;

    this.retrieveData(this.dataUrl);

    rtlOverride(this); // quick fix for arabic
  }

  getTooltip(d,baselineData) {
    let tooltipText = this.translationsObj.chartBarCaption;
    let bd = baselineData.filter(bd => bd.CATEGORY == d.CATEGORY);
    // !! replacements here for category, metric-value, metric-baseline-value
    tooltipText = tooltipText.replace('{category}', `<span class='highlight-data'>${d.CATEGORY}</span>`);
    tooltipText = tooltipText.replace('{metric-value}', `<span class='highlight-data'>${formatValue(d.METRIC_VALUE,{format:'percent'})}</span>`);
    tooltipText = tooltipText.replace('{metric-baseline-value}', `<span class='highlight-data'>${formatValue(bd[0].METRIC_VALUE,{format:'percent'})}</span>`);
    return `<div class="chart-tooltip"><div>${tooltipText}</div></div>`;
  }

  ariaLabel(d, baselineData) {
    let caption = this.translationsObj.chartBarCaption;
    let bd = baselineData.filter(bd => bd.CATEGORY == d.CATEGORY);
    caption = caption.replace('{category}', d.CATEGORY);
    caption = caption.replace('{metric-value}', formatValue(d.METRIC_VALUE,{format:'percent'}));
    caption = caption.replace('{metric-baseline-value}', formatValue(bd[0].METRIC_VALUE,{format:'percent'}));
    // console.log("Aria Label",caption);
    return caption;
  }

  getLegendText() {
    return [
      this.translationsObj.chartLegend1,
      this.translationsObj.chartLegend2,
    ];
  }

  renderExtras(svg, data, x, y) {
    // Not using this separator line that divides groups from unknown information
    // let group = svg.append("g");
    // group
    //   .append("rect")
    //   .attr("fill", "#000000")
    //   .attr("class", "divider")
    //   .attr("y", y(6) + (this.bar_vspace * 7) / 12)
    //   .attr("x", 0)
    //   .attr("width", this.dimensions.width)
    //   .attr("height", 0.75);
  }

  retrieveData(url) {
    window
      .fetch(url)
      .then((response) => response.json())
      .then(
        function (alldata) {
          // console.log("Race/Eth data data", alldata.data);
          this.alldata = alldata.data.by_age.deaths;
          this.popdata = alldata.data.by_age.population;
          this.alldata.forEach(rec => {
            rec.METRIC_VALUE /= 100.0;
          });
          this.popdata.forEach(rec => {
            rec.METRIC_VALUE /= 100.0;
          });

          // "Unknown"
          // let croppedData = alldata.data.filter(function(a){return a.CATEGORY !== 'Unknown'});
          // this.alldata = croppedData;

          renderChart$1.call(this, this.renderExtras, this.popdata, this.tooltip, 'g-age-deaths');
          // this.resetTitle({
          //   region: regionName, 
          //   chartTitle: this.translationsObj.chartTitle,
          //   chartTitleCounty: this.translationsObj.chartCounty,
          // });
        }.bind(this)
      );
  }
}

window.customElements.define(
  "cagov-chart-dashboard-groups-age-deaths",
  CAGovDashboardGroupsAgeDeaths
);

class CAGovChartFilterButtons extends window.HTMLElement {
  connectedCallback () {
    
    this.addEventListener('click',function(event) {
      event.preventDefault();
      let clickedFilterText = event.target.textContent;
      let clickedFilterKey = event.target.dataset.key;
      if (clickedFilterKey != undefined) {
        if(!event.target.classList.contains('active')) {
          let emissionEvent = new window.CustomEvent('filter-selected', {
            detail: {
              filterKey: clickedFilterKey,
              clickedFilterText: clickedFilterText
            }
          });
          this.resetActive();
          event.target.classList.add('active');
          this.dispatchEvent(emissionEvent); // this event fire is last because charts look at active class on filter to get new text
        }
      }
    });

    // listen for county events, hide deaths
    let statewideOnlyButton = this.querySelector("button[data-key='deaths']");
    let searchElement = document.querySelector('cagov-county-search');
    searchElement.addEventListener('county-selected', function (e) {
      if(statewideOnlyButton) {
        if(e.detail.statewide) {
          statewideOnlyButton.style.display = 'block';
        } else {
          statewideOnlyButton.style.display = 'none';
        }
        // we were on the filter we are now hiding, reset to first
        if(statewideOnlyButton.classList.contains('active')) {
          statewideOnlyButton.classList.remove('active');
          this.querySelector('button').classList.add('active'); // make ifrst one active instead
        }
      }
    }.bind(this), false);

  }

  resetActive() {
    let buttons = this.querySelectorAll('.small-tab');
    buttons.forEach(b => {
      if(b.classList.contains('active')) {
        b.classList.remove('active');
      }
    });
  }

}
window.customElements.define('cagov-chart-filter-buttons', CAGovChartFilterButtons);

var css_248z = ".chart .svg-holder g.fg-bars {\n  fill: #deeaf6; }\n\n.chart .svg-holder g.fg-line path {\n  fill: none;\n  stroke: black;\n  stroke-width: 2px; }\n\n.chart .svg-holder g.fg-line.second-line path {\n  opacity: 0.5; }\n\n.chart .svg-holder g.pending-block rect {\n  fill: black;\n  opacity: 0.05; }\n\n.chart .svg-holder g.pending-block text {\n  font-weight: 300;\n  font-size: 0.8rem;\n  fill: black; }\n\n.chart .svg-holder g.pending-block text {\n  text-anchor: end;\n  dominant-baseline: auto; }\n\n.chart .svg-holder g.date-axis line {\n  stroke-width: 0.5px;\n  stroke: black; }\n\n.chart .svg-holder g.date-axis text {\n  font-weight: 300;\n  font-size: 0.75rem;\n  fill: black; }\n\n.chart .svg-holder g.date-axis text {\n  text-anchor: middle;\n  dominant-baseline: hanging; }\n\n.chart .svg-holder g.date-axis text.x-axis-legend {\n  font-weight: 300;\n  text-anchor: end;\n  dominant-baseline: middle; }\n\n.chart .svg-holder g.county-legend rect {\n  fill: black; }\n\n.chart .svg-holder g.county-legend text {\n  font-weight: 300;\n  font-size: 0.75rem;\n  fill: black; }\n\n.chart .svg-holder g.county-legend text {\n  text-anchor: left;\n  dominant-baseline: middle; }\n\n.chart .svg-holder g.state-legend rect {\n  fill: gray; }\n\n.chart .svg-holder g.state-legend text {\n  font-weight: 300;\n  font-size: 0.75rem;\n  fill: black; }\n\n.chart .svg-holder g.state-legend text {\n  text-anchor: left;\n  dominant-baseline: middle; }\n\n.chart .svg-holder g.left-y-axis line {\n  stroke-width: 0.5px;\n  stroke: black;\n  opacity: 0.15; }\n\n.chart .svg-holder g.left-y-axis text {\n  font-weight: 400;\n  font-size: 0.75rem;\n  fill: black; }\n\n.chart .svg-holder g.left-y-axis text {\n  text-anchor: end;\n  dominant-baseline: middle; }\n\n.chart .svg-holder g.left-y-axis text.left-y-axis-legend {\n  font-weight: 700;\n  font-size: 0.95rem;\n  text-anchor: start;\n  dominant-baseline: hanging; }\n\n.chart .svg-holder g.right-y-axis line {\n  stroke-width: 0.5px;\n  stroke: #608cbd; }\n\n.chart .svg-holder g.right-y-axis text {\n  font-weight: 400;\n  font-size: 0.75rem;\n  fill: #1f2574; }\n\n.chart .svg-holder g.right-y-axis text {\n  text-anchor: start;\n  dominant-baseline: middle; }\n\n.chart .svg-holder g.right-y-axis text.right-y-axis-legend {\n  font-weight: 700;\n  font-size: 0.95rem;\n  text-anchor: end;\n  dominant-baseline: hanging; }\n\n.chart .svg-holder text.line-legend text {\n  font-weight: 300;\n  font-size: 1rem;\n  fill: black;\n  text-anchor: middle;\n  dominant-baseline: auto; }\n\n.chart .svg-holder g.tt-marker {\n  fill: black;\n  opacity: 0.5; }\n\n.chart .svg-holder g.line-legend text {\n  font-weight: 400;\n  font-size: 0.8rem;\n  text-anchor: middle;\n  dominant-baseline: auto; }\n\n.chart .svg-holder g.line-legend line {\n  stroke-width: 0.25px;\n  stroke: black; }\n\n.chart .chart-title {\n  font-weight: 300;\n  font-size: 1.2rem;\n  margin-bottom: 0px; }\n\n.chart .chart-header {\n  margin-bottom: 24px;\n  font-weight: 300;\n  font-size: 0.95rem; }\n\n.chart .chart-header .header-line1 {\n  font-weight: 700;\n  font-size: 0.95rem; }\n\n.chart .chart-header .big-num {\n  font-weight: 700;\n  font-size: 1.2rem;\n  color: #1f2574; }\n\n.chart .chart-header .med-num {\n  font-weight: 400;\n  font-size: 1rem;\n  color: #1f2574; }\n\n.chart div.tooltip-container {\n  font-weight: 300;\n  font-size: 0.75rem;\n  line-height: 2;\n  color: black;\n  text-align: center; }\n\n.chart .tooltip-container {\n  position: absolute;\n  z-index: 10;\n  visibility: hidden;\n  background: #fff;\n  width: 280px; }\n\n.chart .tooltip-container {\n  pointer-events: none;\n  /* padding: 10px; */\n  padding: 1rem 2rem;\n  box-shadow: 0px 0px 5px 2px rgba(0, 0, 0, 0.14);\n  /* box-shadow: -12px 11px 5px -4px rgba(0, 0, 0, 0.4); */\n  border: none; }\n\n.chart .pending-caveat {\n  font-style: italic; }\n\n.chart a.dlbutton {\n  border-radius: 3px;\n  background-color: aqua;\n  color: blue;\n  font-weight: 300;\n  font-size: 0.5rem; }\n\n.d-hide {\n  display: none; }\n";
styleInject(css_248z);

/**
 * Generic template for mixed line/bar charts on State Dashboard
 * 
 */
function template(chartOptions, {
  post_chartTitle = "chart title",
  post_chartLegend1 = "Chart Legend 1", // expected
  post_chartLegend2 = "Chart Legend 2", // expected
  post_chartLegend3 = null, // only used if provided
  filterTabLabel1 = 'Tab Label 1',
  filterTabLabel2 = 'Tab Label 2',
}) {
  let tabMarkup = '';
  if ('filterKeys' in chartOptions) {
    let active1 = this.chartConfigFilter == chartOptions.filterKeys[0]? "active" : "";
    let active2 = this.chartConfigFilter == chartOptions.filterKeys[1]? "active" : "";
    tabMarkup = `<cagov-chart-filter-buttons class="filter-buttons--statedash js-re-smalls js-filter-${this.chartConfigKey}">
            <div class="d-flex justify-content-center">
              <button class="small-tab ${active1}" data-key="${chartOptions.filterKeys[0]}">${filterTabLabel1}</button>
              <button class="small-tab ${active2}" data-key="${chartOptions.filterKeys[1]}">${filterTabLabel2}</button>
            </div>
          </cagov-chart-filter-buttons>`;
  }

  return /*html*/ `
    <div class="py-2">
      <div class="bg-white pt-2 pb-1">
        <div class="mx-auto chart-histogram">
            <div class="chart-title">${post_chartTitle}</div>
            ${tabMarkup}
            <div class="chart-header">
            <div class="header-line header-line1">${post_chartLegend1}</div>
            <div class="header-line">${post_chartLegend2}</div>
` +
(post_chartLegend3?
`            <div class="header-line">${post_chartLegend3}</div>
` : '') +
`            </div>
            <div class="svg-holder"></div>
            <!-- <a class="dl-button" role="button">download</a> -->
        </div>
      </div>
    </div>
    `;
}

var cases = {
	episode: {
		chartName: "cagov-chart-dashboard-confirmed-cases",
		latestField: "CONFIRMED_CASES",
		seriesField: "CONFIRMED_CASES_EPISODE_DATE",
		seriesFieldAvg: "AVG_CASE_RATE_PER_100K_7_DAYS",
		dataUrl: "confirmed-cases/california.json",
		dataUrlCounty: "confirmed-cases/<county>.json",
		rootId: "cases-ep",
		filterKeys: [
			"episode",
			"reported"
		]
	},
	reported: {
		chartName: "cagov-chart-dashboard-confirmed-cases",
		latestField: "CONFIRMED_CASES",
		seriesField: "CONFIRMED_CASES_REPORTED_DATE",
		seriesFieldAvg: "AVG_CASE_REPORT_RATE_PER_100K_7_DAYS",
		dataUrl: "confirmed-cases/california.json",
		dataUrlCounty: "confirmed-cases/<county>.json",
		rootId: "cases-rep",
		filterKeys: [
			"episode",
			"reported"
		]
	}
};
var deaths = {
	death: {
		chartName: "cagov-chart-dashboard-confirmed-deaths",
		latestField: "CONFIRMED_DEATHS",
		seriesField: "CONFIRMED_DEATHS_DEATH_DATE",
		seriesFieldAvg: "AVG_DEATH_RATE_PER_100K_7_DAYS",
		dataUrl: "confirmed-deaths/california.json",
		dataUrlCounty: "confirmed-deaths/<county>.json",
		rootId: "death-date",
		filterKeys: [
			"death",
			"reported"
		]
	},
	reported: {
		chartName: "cagov-chart-dashboard-confirmed-deaths",
		latestField: "CONFIRMED_DEATHS",
		seriesField: "CONFIRMED_DEATHS_REPORTED_DATE",
		seriesFieldAvg: "AVG_DEATH_REPORT_RATE_PER_100K_7_DAYS",
		dataUrl: "confirmed-deaths/california.json",
		dataUrlCounty: "confirmed-deaths/<county>.json",
		rootId: "deaths-reported-date",
		filterKeys: [
			"death",
			"reported"
		]
	}
};
var tests = {
	testing: {
		chartName: "cagov-chart-dashboard-total-tests",
		latestField: "TOTAL_TESTS",
		seriesField: "TOTAL_TESTS",
		seriesFieldAvg: "AVG_TEST_RATE_PER_100K_7_DAYS",
		dataUrl: "total-tests/california.json",
		dataUrlCounty: "total-tests/<county>.json",
		rootId: "tests-tests",
		filterKeys: [
			"testing",
			"reported"
		]
	},
	reported: {
		chartName: "cagov-chart-dashboard-total-tests",
		latestField: "TOTAL_TESTS",
		seriesField: "REPORTED_TESTS",
		seriesFieldAvg: "AVG_TEST_REPORT_RATE_PER_100K_7_DAYS",
		dataUrl: "total-tests/california.json",
		dataUrlCounty: "total-tests/<county>.json",
		rootId: "tests-rep",
		filterKeys: [
			"testing",
			"reported"
		]
	}
};
var positivity = {
	positivity: {
		chartName: "cagov-chart-dashboard-positivity-rate",
		latestField: "POSITIVITY_RATE",
		seriesField: "TOTAL_TESTS",
		seriesFieldAvg: "TEST_POSITIVITY_RATE_7_DAYS",
		dataUrl: "positivity-rate/california.json",
		dataUrlCounty: "positivity-rate/<county>.json",
		rootId: "pos-rate"
	}
};
var patients = {
	hospitalized: {
		chartName: "cagov-chart-dashboard-patients",
		latestField: "HOSPITALIZED_PATIENTS",
		seriesField: "HOSPITALIZED_PATIENTS",
		seriesFieldAvg: "HOSPITALIZED_PATIENTS_14_DAY_AVG",
		dataUrl: "patients/california.json",
		dataUrlCounty: "patients/<county>.json",
		rootId: "hosp-p",
		filterKeys: [
			"hospitalized",
			"icu"
		]
	},
	icu: {
		chartName: "cagov-chart-dashboard-patients",
		latestField: "ICU_PATIENTS",
		seriesField: "ICU_PATIENTS",
		seriesFieldAvg: "ICU_PATIENTS_14_DAY_AVG",
		dataUrl: "patients/california.json",
		dataUrlCounty: "patients/<county>.json",
		rootId: "hosp-p",
		filterKeys: [
			"hospitalized",
			"icu"
		]
	}
};
var desktop = {
	fontSize: 14,
	width: 400,
	height: 300,
	margin: {
		left: 50,
		top: 30,
		right: 60,
		bottom: 45
	}
};
var tablet = {
	fontSize: 14,
	width: 400,
	height: 300,
	margin: {
		left: 50,
		top: 30,
		right: 60,
		bottom: 45
	}
};
var mobile = {
	fontSize: 12,
	width: 400,
	height: 300,
	margin: {
		left: 50,
		top: 30,
		right: 60,
		bottom: 45
	}
};
var retina = {
	fontSize: 12,
	width: 400,
	height: 300,
	margin: {
		left: 50,
		top: 30,
		right: 60,
		bottom: 45
	}
};
var chartConfig = {
	cases: cases,
	deaths: deaths,
	tests: tests,
	positivity: positivity,
	patients: patients,
	"icu-beds": {
	"icu-beds": {
		chartName: "cagov-chart-dashboard-icu-beds",
		latestField: "ICU_BEDS",
		seriesField: "ICU_BEDS",
		seriesFieldAvg: "ICU_BEDS",
		dataUrl: "icu-beds/california.json",
		dataUrlCounty: "icu-beds/<county>.json",
		rootId: "icu-beds"
	}
},
	desktop: desktop,
	tablet: tablet,
	mobile: mobile,
	retina: retina
};

// generic histogram chart, as used on top of state dashboard

function writeLine(svg, data, x, y, { root_id='barid', is_second_line=false, crop_floor=true }) {
  y.domain()[1];
  x.domain()[1];

  svg.append("g")
    .attr("class","fg-line "+root_id+(is_second_line?" second-line":""))
    // .attr('style','fill:none; stroke:#555555; stroke-width: 2.0px;'+(is_second_line? 'opacity:0.5;' : ''))
    .append('path')
    .datum(data)
      .attr("d", d3.line()
        .x(function(d,i) { return x(i) })
        .y(function(d) { return y(crop_floor? Math.max(0,d.VALUE) : d.VALUE) })
        );
}

 function writeBars(svg, data, x, y, { root_id='barid', crop_floor=true }) {
   if (!crop_floor) {
     console.log("NOT CROP FLOOR");
   }
   let groups = svg.append("g")
      .attr("class","fg-bars "+root_id)
      // .attr('style','fill:#deeaf6;')
      .selectAll("g")
      .data(data)
      .enter()
        .append("g");
    
    if (crop_floor) { // positive only
      groups
          .append("rect")
          .attr("x", (d,i) => x(i))
          .attr("y", d => y(d.VALUE))
          .attr("width", 2)
          .attr("height", d => Math.max(y(0) - y(d.VALUE),0))
          .attr("id", (d, i) => root_id+'-'+i);
    } else { // positive and negative rects
      groups
          .append("rect")
          .attr("x", (d,i) => x(i))
          .attr("y", d => Math.min(y(0),y(d.VALUE)))
          .attr("width", 2)
          .attr("height", d => Math.abs(y(0) - y(d.VALUE)))
          .attr("id", (d, i) => root_id+'-'+i);
    }
}


function writePendingBlock(svg, data, x, y,
  { pending_date=null,
    pending_legend=null,
    root_id='barid'} ) {
    let xgroup = svg.append("g")
      .attr("class",'pending-block');

    x.domain()[1];
    const min_y_domain = y.domain()[0];
    const max_y_domain = y.domain()[1];
    let nbr_pending = 0;
    for (let i = 0; i < data.length; ++i) {
      nbr_pending += 1;
      if (data[i].DATE == pending_date) {
        break;
      }
    }
    // console.log("PENDING_DATE",pending_date);
    // console.log("Pending",nbr_pending);

    xgroup.append('rect')
      // .attr('style','fill:black;opacity:0.05;')
      .attr("x",x(nbr_pending))
      .attr("y",y(max_y_domain))
      .attr("width",x(0) - x(nbr_pending))
      .attr("height",y(min_y_domain)-y(max_y_domain));
    xgroup.append('text')
      // .attr('style','font-family:sans-serif; fill:black; font-weight:300; font-size: 0.8rem; text-anchor: end; dominant-baseline:auto;')
      .text(pending_legend)
      .attr("x",x(0))
      .attr("y",y(max_y_domain)-4);
}

function writeCountyStateLegend(svg,x,y, {
  county_legend = 'County',
  state_legend = 'State',
})
{
  let y_pos = this.dimensions.height - 6;
  let x_pos = this.dimensions.margin.left;


  let g = svg.append("g")
    .attr("class","county-legend");

  g.append('rect')
    // .attr('style','fill:black;')
    .attr('x',x_pos)
    .attr('y',y_pos)
    .attr('width',24)
    .attr('height',1);

  g.append('text')
    .text(county_legend)
    // .attr('style','font-family:sans-serif; fill:black;font-weight:300; font-size: 0.75rem;text-anchor: left;dominant-baseline:middle;');
    .attr("x",x_pos + 36)
    .attr("y",y_pos);

  g = svg.append("g")
    .attr("class","state-legend");

  g.append('rect')
    // .attr('style','fill:gray;')
    .attr('x',x_pos+85)
    .attr('y',y_pos)
    .attr('width',24)
    .attr('height',1);

  g.append('text')
    .text(state_legend)
    // .attr('style','font-family:sans-serif; fill:black;font-weight:300; font-size: 0.75rem;text-anchor: left;dominant-baseline:middle;');
    .attr("x",x_pos+85 + 36)
    .attr("y",y_pos);
}


function writeDateAxis(svg, data, x, y, 
  { x_axis_legend=null,
    month_modulo=3,
    root_id='barid'} ) {
  const tick_height = 4;
  const tick_upper_gap = 1;
  const tick_lower_gap = 2;
  const axisY = this.dimensions.height - this.dimensions.margin.bottom;

  let xgroup = svg.append("g")
      .attr("class",'date-axis');
      // .attr('style','stroke-width: 0.5px; stroke:black;');

  data.forEach((d,i) => {
    const ymd = d.DATE.split('-');
    const mon_idx = parseInt(ymd[1]);
    if (mon_idx % month_modulo == 0) {
      const day_idx = parseInt(ymd[2]);
      if (day_idx == 1) {
        const date_caption = mon_idx+'/1'; // ?? localize
        let subg = xgroup.append("g")
              .attr('class','x-tick');
        subg.append('line')
        .attr('x1', x(i))
        .attr('y1', axisY+tick_upper_gap)
        .attr('x2', x(i))
        .attr('y2',axisY+tick_upper_gap+tick_height);
        subg.append('text')
         .text(date_caption)
         // .attr('style','font-family:sans-serif; font-weight:300; font-size: 0.75rem; fill:black;text-anchor: middle; dominant-baseline:hanging;')
         .attr("x", x(i))
         .attr("y", axisY+tick_upper_gap+tick_height+tick_lower_gap); // +this.getYOffset(i)
      }
    }
  });
  if (x_axis_legend) {
    xgroup.append('text')
    .attr('class','x-axis-legend')
    .attr('style','font-family:sans-serif; font-weight:300; font-size: 0.75rem; fill:black;text-anchor: end; dominant-baseline:middle;')
    .text(x_axis_legend)
    .attr("x", x(0))
    .attr("y", this.dimensions.height-6); // +this.getYOffset(i)
  }
}

// Formatter Factory
// supported formats: num/number, pct, integer
function getFormatter(max_v,{hint='num',digits=0})
{
  if (hint == 'pct') {
    const digits = max_v < .01? 2 : max_v < .1? 1 : 0;
    const fmtr = new Intl.NumberFormat(
        "us",  { style: "percent", minimumFractionDigits: digits, maximumFractionDigits: digits }    );
        return fmtr.format;
  } else {
    // assume num/number
    if (max_v < 4000) {
      const digits = (hint == 'integer')? 0 : max_v < .1? 2 : max_v < 10? 1 : 0;
      const fmtr = new Intl.NumberFormat( "us", { style: "decimal", minimumFractionDigits: digits, maximumFractionDigits: digits } );
      return fmtr.format;
    } else if (max_v < 1000000) {
      const digits = max_v < 4000? 1 : 0;
      const fmtr = new Intl.NumberFormat( "us", { style: "decimal", minimumFractionDigits: digits, maximumFractionDigits: digits } );
      return function(v) {
        return fmtr.format(v/1000)+"K";
      };
    } else if (max_v < 1000000000) {
      const digits = max_v < 4000000? 1 : 0;
      const fmtr = new Intl.NumberFormat( "us", { style: "decimal", minimumFractionDigits: digits, maximumFractionDigits: digits } );
      return function(v) {
        return fmtr.format(v/1000000)+"M";
      };
      
    } else {
      const digits = max_v < 4000000000? 1 : 0;
      const fmtr = new Intl.NumberFormat( "us", { style: "decimal", minimumFractionDigits: digits, maximumFractionDigits: digits } );
      return function(v) {
        return fmtr.format(v/1000)+"M";
      };
    }
  }
}

function writeLeftYAxis(svg, data, x, y, 
                        { y_axis_legend=null,
                          left_y_fmt='num',
                          root_id='barid' }) {
  const y_div = getAxisDiv(y,{'hint':left_y_fmt});
  let ygroup = svg.append("g")
      .attr("class",'left-y-axis');

  const max_y_domain = y.domain()[1];
  const min_x_domain = x.domain()[0];
  const max_x_domain = x.domain()[1];
  // console.log("Left Axis",max_y_domain, root_id, left_y_fmt);
  const tick_left_gap = 10;
  let myFormatter = getFormatter(max_y_domain, { hint:left_y_fmt });
  for (let yi = 0; yi <= max_y_domain; yi += y_div) {
    let y_caption = myFormatter(yi);
    let subg = ygroup.append("g")
      .attr('class','y-tick');

    subg.append('line')
      .attr('style','stroke-width: 0.5px; stroke:black; opacity:0.15;')
      .attr('x1', x(max_x_domain))
      .attr('y1', y(yi))
      .attr('x2', x(min_x_domain))
      .attr('y2', y(yi));

    subg.append('text')
      .text(y_caption)
      .attr('style','font-family:sans-serif; font-weight:400; font-size: 0.75rem; fill:black;text-anchor: end; dominant-baseline:middle;')
      .attr("x", x(max_x_domain)-tick_left_gap)
      .attr("y", y(yi)); // +this.getYOffset(i)
  }
  if (y_axis_legend) {
    ygroup.append('text')
    .attr('class','left-y-axis-legend')
    .attr('style','font-family:sans-serif; font-weight:700; font-size: 0.95rem; fill:black;text-anchor: start; dominant-baseline:hanging;')
    .text(y_axis_legend)
    .attr("x", 0)
    .attr("y", 0); // +this.getYOffset(i)
  }
}

function writeRightYAxis(svg, data, x, y, 
                        { y_axis_legend=null,
                          right_y_fmt='num',
                          root_id='barid' }) {
  const y_div = getAxisDiv(y,{'hint':right_y_fmt});
  let ygroup = svg.append("g")
      .attr("class",'right-y-axis')
      .attr('style','stroke-width: 0.5px; stroke:#608cbd;');



  const max_y_domain = y.domain()[1];
  const min_x_domain = x.domain()[0];
  const tick_right_gap = 24;

  // console.log("Drawing Right Axis  max_y_domain",max_y_domain,root_id);
  let myFormatter = getFormatter(max_y_domain, { hint:right_y_fmt });

  for (let yi = 0; yi <= max_y_domain; yi += y_div) {
    let y_caption = myFormatter(yi);

    let subg = ygroup.append("g")
      .attr('class','y-tick');

    // subg.append('line')
    //   .attr('x1', x(min_x_domain)+tick_left_gap)
    //   .attr('y1', y(yi))
    //   .attr('x2', x(min_x_domain)+tick_right_gap)
    //   .attr('y2', y(yi));

    subg.append('text')
      .text(y_caption)
      .attr('style','font-family:sans-serif; font-weight:400; font-size: 0.75rem; fill:#1f2574; text-anchor:start; dominant-baseline:middle; ')
      .attr("x", x(min_x_domain)+tick_right_gap)
      .attr("y", y(yi)); // +this.getYOffset(i)
  }
  if (y_axis_legend) {
    ygroup.append('text')
    .attr('class','right-y-axis-legend')
    .text(y_axis_legend)
    .attr('style','font-family:sans-serif; font-weight:700; font-size: 0.95rem; fill:#1f2574; text-anchor:end; dominant-baseline:hanging; ')
    .attr("x", this.dimensions.width)
    .attr("y", 0); // +this.getYOffset(i)
  }
}

/** saved for future reference 
function writeDownloadButton({root_id='untitled'}) {
  const xmlns = "http://www.w3.org/2000/xmlns/";
  const xlinkns = "http://www.w3.org/1999/xlink";
  const svgns = "http://www.w3.org/2000/svg";

  function serialize(svg) {
    svg = svg.cloneNode(true);   
    const fragment = window.location.href + "#";
    const walker = document.createTreeWalker(svg, NodeFilter.SHOW_ELEMENT);
    while (walker.nextNode()) {
      for (const attr of walker.currentNode.attributes) {
        if (attr.value.includes(fragment)) {
          attr.value = attr.value.replace(fragment, "#");
        }
      }
    }
    svg.setAttributeNS(xmlns, "xmlns", svgns);
    svg.setAttributeNS(xmlns, "xmlns:xlink", xlinkns);
    const serializer = new window.XMLSerializer;
    const string = serializer.serializeToString(svg);
    return new Blob([string] , {type: "image/svg+xml"});
  };

  let svgNode = d3.select(this.chartOptions.chartName+" svg").node();
  d3.select(this.chartOptions.chartName + " a.dl-button")
    .attr('download',root_id+".svg")
    .attr('href',URL.createObjectURL(serialize(svgNode)));
}
*/

// Convert 
function getDataIndexByX(data, xScale, yScale, bardata, yLine, linedata, xy)
{
  let x = xy[0];
  let y = xy[1];
  let xdi = xScale.invert(x);
  if (xdi >= 0 && xdi <= xScale.domain()[1] ) {
    let ydi = yScale.invert(y);
    if (ydi >= 0 && ydi <= yScale.domain()[1] ) {
      let idi = Math.round(xdi);
      let yp = yScale(bardata[idi].VALUE);
      if (y >= yp-2) {
        return idi;
      }
      let yp2 = yLine(linedata[idi].VALUE);
      let yd = Math.abs(yp2-y);
      if (yd < 6) {
        return idi;
      }
    }
  }
  return null;
}

function showTooltip(event, dataIndex, xy, dIndex, dRecord, xscale, yscale)
{
  let tooltip = this.tooltip;
  let content = this.getTooltipContent(dataIndex); 
  tooltip.html(content);
  // console.log("X",event.offsetX);
  tooltip.style("left",`${Math.min(this.dimensions.width-280,event.offsetX)}px`);
  // console.log("Tool top L, O, y",event.layerY, event.offsetY, event.y);
  // tooltip.style("top",`${event.layerY+60}px`)
  tooltip.style("top",`${(event.offsetY+220)}px`);
  // d3.select(this).transition();
  tooltip.style("visibility", "visible");
  // console.log("TOOLTIP",content,this.tooltip);

  this.svg.selectAll('g.tt-marker').remove();
  this.svg
    .append('g')
    .attr('class','tt-marker')
    .append('rect')
    .attr("x",xscale(dIndex)-1)
    .attr("y",yscale(dRecord.VALUE))
    .attr("width",3)
    .attr("height",Math.max(0,yscale(0)-yscale(dRecord.VALUE)));
}

function hideTooltip()
{
  this.tooltip;
  // d3.select(this).transition().duration(200);
  this.tooltip.style("visibility", "hidden");
  this.svg.selectAll('g.tt-marker').remove();
}

/**
 * This function produces a tick-division (similar to d3.scale.ticks()[1]) which optimizes for about 5 grid lines 
 * (as opposed to D3's 10) with pretty divisions.
 * @param {*} ascale 
 * @returns 
 */
function getAxisDiv(ascale,{hint='num'}) {
  // return ascale.ticks()[1];
  const max_y = ascale.domain()[1];
  const log_y = Math.log10(max_y);
  const floor_log_y = Math.floor(log_y);
  const best_10 = Math.pow(10, floor_log_y);
  const log_diff = (log_y - floor_log_y);
  if (log_diff < 0.176)     var optimal_div = 5; // 150/100
  else if (log_diff < 0.477) var optimal_div = 2; // 300/100
  else if (log_diff < 0.778) var optimal_div = 1; // 600/100
  else                       var optimal_div = 0.5;
  // const optimal_divs = [5,2,1,1/2][bucket];
  let result = best_10/optimal_div;
  if (hint == 'integer' && result < 1) {
    result = 1;
  }
  return result;
}

function drawLineLegend(svg, line_legend, line_data, xline, yline) {
  if (line_legend != null) {
    let lsi = Math.floor(line_data.length*2/3);
    let lsample = line_data[lsi];
    let x1 = this.dimensions.width/3;
    let y1 = this.dimensions.height/4;
    let x2 = xline(lsi);
    let y2 = yline(lsample.VALUE);
    let margin = 6;
    // shorten line on each end by margin
    let ang = Math.atan2(y2-y1,x2-x1);
    x1 += Math.cos(ang)*margin;
    y1 += Math.sin(ang)*margin;
    x2 += Math.cos(ang+Math.PI)*margin;
    y2 += Math.sin(ang+Math.PI)*margin;
    let g = this.svg.append('g')
      .attr('class','line-legend');
    g.append('text')
      .text(line_legend)
      .attr("x",this.dimensions.width/3)
      .attr("y",this.dimensions.height/4);
    g.append('line')
      .attr('x1',x1)
      .attr('y1',y1)
      .attr('x2',x2)
      .attr('y2',y2);
  }
}

/**
 * Render categories.
 * @param {*} extrasFunc @TODO what are the inputs?
 */

 function renderChart({
    tooltip_func = null,
    extras_func = null,
    time_series_bars = null,
    time_series_line = null,
    time_series_state_line = null,
    line_date_offset = 0,
    left_y_fmt = 'num',
    right_y_fmt = 'num',
    left_y_axis_legend = null,
    right_y_axis_legend = null,
    line_legend = null,
    x_axis_legend = null,
    crop_floor = true,
    pending_date = null,
    pending_legend = null,
    month_modulo = 3,
    root_id = "barid" } )  {

    console.log("renderChart",root_id);
    // d3.select(this.querySelector("svg g"))
    //   .attr('style','font-family:sans-serif;font-size:16px;');

    this.svg = d3
      .select(this.querySelector(".svg-holder"))
      .append("svg");

    // this.svg.selectAll("g").remove();
    this.svg
      .attr("viewBox", [
        0,
        0,
        this.chartBreakpointValues.width,
        this.chartBreakpointValues.height,
      ])
      .append("g")
      .attr("transform", "translate(0,0)");

    this.tooltip = d3
      .select(this.chartOptions.chartName)
      .append("div")
      .attr("class", "tooltip-container")
      .text("Empty Tooltip");

    if (time_series_bars) {
      this.xbars = d3
      .scaleLinear()
      .domain([0,time_series_bars.length-1])
      .range([
          // reversed because data presents as reverse-chrono
          this.dimensions.width - this.dimensions.margin.right, 
          this.dimensions.margin.left]);
      let min_y_domain = crop_floor? 0 : d3.min(time_series_bars, d=> d.VALUE);
      if (min_y_domain > 0)
        min_y_domain = 0;
      let max_y_domain = d3.max(time_series_bars, d=> d.VALUE);
      if (max_y_domain == 0) {
        max_y_domain = 1;
      }

      // console.log("bar range", root_id, min_y_domain, max_y_domain);
      this.ybars = d3
        .scaleLinear()
        .domain([min_y_domain, max_y_domain]).nice()  // d3.max(data, d => d.METRIC_VALUE)]).nice()
        .range([this.dimensions.height - this.dimensions.margin.bottom, this.dimensions.margin.top]);
   
    }
    if (time_series_line) {
      // console.log("time_series_line",time_series_line,root_id);
      const LINE_OFFSET_X = line_date_offset;
      this.xline = d3
      .scaleLinear()
      .domain([LINE_OFFSET_X+0,LINE_OFFSET_X+time_series_line.length-1])
      .range([
          // reversed because data presents as reverse-chrono
          this.dimensions.width - this.dimensions.margin.right, 
          this.dimensions.margin.left]);
      // console.log("time_series_line 2",time_series_line,root_id);
      let min_y_domain = crop_floor? 0 : d3.min(time_series_line, d=> d.VALUE);
      if (min_y_domain > 0)
        min_y_domain = 0;
      let max_y_domain = d3.max(time_series_line, d=> d.VALUE);
      if (max_y_domain == 0) {
        max_y_domain = 1;
      }
      // console.log("line range", root_id, min_y_domain, max_y_domain);
      if (time_series_state_line) {
        max_y_domain = Math.max(max_y_domain, d3.max(time_series_state_line, d=> d.VALUE));
      }
      // console.log("max_y_domain", max_y_domain);
      this.yline = d3
        .scaleLinear()
        .domain([min_y_domain, max_y_domain]).nice()  // d3.max(data, d => d.METRIC_VALUE)]).nice()
        .range([this.dimensions.height - this.dimensions.margin.bottom, this.dimensions.margin.top]);

    }


    // let max_xdomain = d3.max(data, (d) => d3.max(d, (d) => d.METRIC_VALUE));

    if (time_series_bars) {
      writeBars.call(this, this.svg, time_series_bars, this.xbars, this.ybars, 
        { root_id:root_id, crop_floot:crop_floor});
      // bar legend on left
    }
    if (time_series_line) {
      writeLine.call(this, this.svg, time_series_line, this.xline, this.yline, 
        { line_legend:line_legend, root_id:root_id, crop_floot:crop_floor});
      if (line_legend != null) {
          drawLineLegend.call(this, this.svg, line_legend, time_series_line, this.xline, this.yline);
      }
    }
    if (time_series_state_line) {
      writeLine.call(this, this.svg, time_series_state_line, this.xline, this.yline, 
        { root_id:'state-'+root_id, is_second_line:true, crop_floot:crop_floor});
      writeCountyStateLegend.call(this, this.svg, this.xline, this.yline, {});
    }

    if (pending_date && pending_legend) {
      writePendingBlock.call(this, this.svg, time_series_bars, this.xbars, this.ybars, 
            { root_id:root_id, pending_date:pending_date, pending_legend:pending_legend});
    }

    if (time_series_bars) {
      writeDateAxis.call(this, this.svg, time_series_bars, this.xbars, this.ybars,
          {x_axis_legend:x_axis_legend, month_modulo: month_modulo, root_id:root_id} );
    } else if (time_series_line) {
      writeDateAxis.call(this, this.svg, time_series_line, this.xline, this.yline,
        {x_axis_legend:x_axis_legend, month_modulo: month_modulo, root_id:root_id} );
    }
    // Write Y Axis, favoring line on left, bars on right
    if (time_series_line) {
      writeLeftYAxis.call(this, this.svg, time_series_line, this.xline, this.yline,
         {y_axis_legend: left_y_axis_legend, left_y_fmt:left_y_fmt, root_id:root_id});
      if (time_series_bars) {
        if (right_y_axis_legend) {
          writeRightYAxis.call(this, this.svg, time_series_bars, this.xbars, this.ybars, 
              { y_axis_legend: right_y_axis_legend, right_y_fmt:right_y_fmt, root_id:root_id});
        }
      }
    } else if (time_series_bars) {
      writeLeftYAxis.call(this, this.svg, time_series_bars, this.xbars, this.ybars, 
          { y_axis_legend: left_y_axis_legend, left_y_fmt:left_y_fmt, root_id:root_id});
    }

    // writeLegend.call(this, this.svg, data, this.xbars, this.y, baselineData);

    if (extras_func) {
      extras_func.call(this, this.svg);
    }

    // writeDownloadButton.call(this,{root_id:root_id});

    this.svg
    .on("mousemove focus", (event) => {
      let xy = d3.pointer(event);
      let dIndex = getDataIndexByX(time_series_bars, this.xbars, this.ybars, time_series_bars, this.yline, time_series_line, xy);
      if (dIndex != null) {
        showTooltip.call(this, event, dIndex, xy, dIndex, time_series_bars[dIndex], this.xbars, this.ybars);
      } else {
        hideTooltip.call(this);
      }
    })
    .on("mouseleave touchend blur", (event) => {
      hideTooltip.call(this);
    });


  }

class CAGovDashboardConfirmedCases extends window.HTMLElement {
  connectedCallback() {
    console.log("Loading CAGovDashboardConfirmedCases");
    this.translationsObj = getTranslations(this);
    this.chartConfigFilter = this.dataset.chartConfigFilter;
    this.chartConfigKey = this.dataset.chartConfigKey;

    this.chartOptions = chartConfig[this.chartConfigKey][this.chartConfigFilter];
    this.stateData = null;

    getScreenResizeCharts();

    this.screenDisplayType = window.charts
      ? window.charts.displayType
      : "desktop";

    this.chartBreakpointValues = chartConfig[
      this.screenDisplayType ? this.screenDisplayType : "desktop"
    ];
    this.dimensions = this.chartBreakpointValues;

    const handleChartResize = () => {
      getScreenResizeCharts();
      this.screenDisplayType = window.charts
        ? window.charts.displayType
        : "desktop";
      this.chartBreakpointValues = chartConfig[
        this.screenDisplayType ? this.screenDisplayType : "desktop"
      ];
    };

    window.addEventListener("resize", handleChartResize);

    // Set default values for data and labels
    this.dataUrl = config.chartsStateDashTablesLoc + this.chartOptions.dataUrl;

    this.retrieveData(this.dataUrl, 'California');

    rtlOverride(this); // quick fix for arabic

    this.listenForLocations();
  }

  ariaLabel(d, baselineData) {
    let caption = ''; // !!!
    return caption;
  }

  getLegendText() {
    return [];
    //   this.translationsObj.chartLegend1,
    //   this.translationsObj.chartLegend2,
    // ];
  }

  renderExtras(svg) {
    if (this.regionName == 'California') ;
  }

  getTooltipContent(di) {
    const barSeries = this.chartdata.time_series[this.chartOptions.seriesField].VALUES;
    const lineSeries = this.chartdata.time_series[this.chartOptions.seriesFieldAvg].VALUES;
    // console.log("getTooltipContent",di,lineSeries);
    const repDict = {
      DATE:   reformatReadableDate(lineSeries[di].DATE),
      '7DAY_AVERAGE':formatValue(lineSeries[di].VALUE,{format:'number',min_decimals:1}),
      CASES:formatValue(barSeries[di].VALUE,{format:'integer'}),
    };
    let caption = applySubstitutions(this.translationsObj.tooltipContent, repDict);
    let datumDate = parseSnowflakeDate(lineSeries[di].DATE);
    let pendingDate = parseSnowflakeDate(this.chartdata.latest[this.chartOptions.latestField].EPISODE_UNCERTAINTY_PERIOD);
    if (+datumDate >= +pendingDate) {
      caption += `<br><span class="pending-caveat">${this.translationsObj.pending_caveat}</span>`;
    }
    return caption;
  }

  renderComponent(regionName) {
    console.log("Render component cases");
    let addStateLine = false;
    if (regionName == 'California') {
      this.statedata = this.chartdata;
    } else if (this.statedata) {
      addStateLine = true;
    }
    let latestRec = this.chartdata.latest[this.chartOptions.latestField];
    const repDict = {
      total_confirmed_cases:formatValue(latestRec.total_confirmed_cases,{format:'integer'}),
      new_cases:formatValue(latestRec.new_cases,{format:'integer'}),
      new_cases_delta_1_day:formatValue(Math.abs(latestRec.new_cases_delta_1_day),{format:'percent'}),
      cases_per_100k_7_days:formatValue(latestRec.cases_per_100k_7_days,{format:'number',min_decimals:1}),
      REGION:regionName,
    };
    if (!('chartTitleState' in this.translationsObj)) {
      this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitle, repDict) + " " + regionName;
    } 
    else if (regionName == 'California') {
      this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitleState, repDict);
    } else {
      this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitleCounty, repDict);
    }
    // this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitle, repDict);
    this.translationsObj.post_chartLegend1 = applySubstitutions(this.translationsObj.chartLegend1, repDict);
    this.translationsObj.post_chartLegend2 = applySubstitutions(latestRec.new_cases_delta_1_day >= 0? this.translationsObj.chartLegend2Increase : this.translationsObj.chartLegend2Decrease, repDict);
    this.translationsObj.post_chartLegend3 = applySubstitutions(this.translationsObj.chartLegend3, repDict);
    this.translationsObj.currentLocation = regionName;

    this.innerHTML = template.call(this, this.chartOptions, this.translationsObj);

    this.setupTabFilters();

    let renderOptions = {'tooltip_func':this.tooltip,
                        'extras_func':this.renderExtras,
                        'time_series_bars':this.chartdata.time_series[this.chartOptions.seriesField].VALUES,
                        'time_series_line':this.chartdata.time_series[this.chartOptions.seriesFieldAvg].VALUES,
                        'root_id':this.chartOptions.rootId,
                        'left_y_axis_legend':this.translationsObj[this.chartConfigKey+'_leftYAxisLegend'],
                        'right_y_axis_legend':this.translationsObj[this.chartConfigKey+'_rightYAxisLegend'],
                        'right_y_fmt':'integer',
                        'x_axis_legend':this.translationsObj[this.chartConfigKey+'_'+this.chartConfigFilter+'_xAxisLegend'],
                        'line_legend':this.regionName == 'California'? this.translationsObj.dayAverage : null,
                        };
    if (this.chartConfigFilter != 'reported') {
      renderOptions.pending_date = this.chartdata.latest[this.chartOptions.latestField].EPISODE_UNCERTAINTY_PERIOD;
      renderOptions.pending_legend = this.translationsObj.pending;
    }
    if (addStateLine) {
      renderOptions.time_series_state_line = this.statedata.time_series[this.chartOptions.seriesFieldAvg].VALUES;
    }
    renderChart.call(this, renderOptions);
  }

  retrieveData(url, regionName) {
    window
      .fetch(url)
      .then((response) => response.json())
      .then(
        function (alldata) {
          // console.log("Race/Eth data data", alldata.data);
          this.regionName = regionName;
          this.metadata = alldata.meta;
          this.chartdata = alldata.data;

          this.renderComponent(regionName);

        }.bind(this)
      );
  }

  chartFilterSelectHandler(e) {
    console.log("cases chartfilter");
    this.chartConfigFilter = e.detail.filterKey;
    if (this.chartConfigFilter != 'reported') {
      this.chartConfigFilter = 'episode';
      document.querySelector('cagov-chart-filter-buttons.js-filter-cases .small-tab[data-key="episode"]').classList.add('active');
      document.querySelector('cagov-chart-filter-buttons.js-filter-cases .small-tab[data-key="reported"]').classList.remove('active');
    } else {
      document.querySelector('cagov-chart-filter-buttons.js-filter-cases .small-tab[data-key="episode"]').classList.remove('active');
      document.querySelector('cagov-chart-filter-buttons.js-filter-cases .small-tab[data-key="reported"]').classList.add('active');
    }

    this.chartOptions = chartConfig[this.chartConfigKey][this.chartConfigFilter];
    // if I am in a county have to do county url replacement
    this.renderComponent(this.regionName);
  }

  tabFilterHandler(e) {
    this.chartFilterSelectHandler(e);
    const event = new window.CustomEvent('cases-chart-filter-select',{detail:{filterKey: this.chartConfigFilter}});
    window.dispatchEvent(event);    
  }

  setupTabFilters() {
    let myFilter = document.querySelector("cagov-chart-filter-buttons.js-filter-cases");
    myFilter.addEventListener(
      "filter-selected",
      this.tabFilterHandler.bind(this),
      false
    );
  }

  listenForLocations() {
    let searchElement = document.querySelector("cagov-county-search");
    searchElement.addEventListener(
      "county-selected",
      function (e) {
        this.county = e.detail.county;
        let searchURL = config.chartsStateDashTablesLoc + this.chartOptions.dataUrlCounty.replace(
          "<county>",
          this.county.toLowerCase().replace(/ /g, "_")
        );
        this.retrieveData(searchURL, e.detail.county);
      }.bind(this),
      false
    );

    window.addEventListener('deaths-chart-filter-select', this.chartFilterSelectHandler.bind(this), false);
  }

  /*
  still need some args passed to renderChart
  */

}

window.customElements.define(
  "cagov-chart-dashboard-confirmed-cases",
  CAGovDashboardConfirmedCases
);

// cagov-chart-dashboard-confirmed-deaths
class CAGovDashboardConfirmedDeaths extends window.HTMLElement {
  connectedCallback() {
    console.log("Loading CAGovDashboardConfirmedDeaths");
    this.translationsObj = getTranslations(this);
    this.chartConfigFilter = this.dataset.chartConfigFilter;
    this.chartConfigKey = this.dataset.chartConfigKey;
    // console.log("!!?",this.chartConfigFilter, this.chartConfigKey);
    // Settings and initial values
    this.chartOptions = chartConfig[this.chartConfigKey][this.chartConfigFilter];

    getScreenResizeCharts();

    this.screenDisplayType = window.charts
      ? window.charts.displayType
      : "desktop";

    this.chartBreakpointValues = chartConfig[
      this.screenDisplayType ? this.screenDisplayType : "desktop"
    ];
    this.dimensions = this.chartBreakpointValues;

    const handleChartResize = () => {
      getScreenResizeCharts();
      this.screenDisplayType = window.charts
        ? window.charts.displayType
        : "desktop";
      this.chartBreakpointValues = chartConfig[
        this.screenDisplayType ? this.screenDisplayType : "desktop"
      ];
    };

    window.addEventListener("resize", handleChartResize);

    // Set default values for data and labels
    this.dataUrl = config.chartsStateDashTablesLoc + this.chartOptions.dataUrl;

    this.retrieveData(this.dataUrl, 'California');

    rtlOverride(this); // quick fix for arabic

    this.listenForLocations();
  }

  ariaLabel(d, baselineData) {
    let caption = ''; // !!!
    return caption;
  }

  getLegendText() {
    return [];
    //   this.translationsObj.chartLegend1,
    //   this.translationsObj.chartLegend2,
    // ];
  }

  renderExtras(svg, data, x, y) {
  }

  getTooltipContent(di) {
    const barSeries = this.chartdata.time_series[this.chartOptions.seriesField].VALUES;
    const lineSeries = this.chartdata.time_series[this.chartOptions.seriesFieldAvg].VALUES;
    // console.log("getTooltipContent",di,lineSeries);
    const repDict = {
      DATE:   reformatReadableDate(lineSeries[di].DATE),
      '7DAY_AVERAGE':formatValue(lineSeries[di].VALUE,{format:'number',min_decimals:1}),
      DEATHS:formatValue(barSeries[di].VALUE,{format:'integer'}),
    };
    let caption = applySubstitutions(this.translationsObj.tooltipContent, repDict);
    let datumDate = parseSnowflakeDate(lineSeries[di].DATE);
    let pendingDate = parseSnowflakeDate(this.chartdata.latest[this.chartOptions.latestField].DEATH_UNCERTAINTY_PERIOD);
    if (+datumDate >= +pendingDate) {
      caption += `<br><span class="pending-caveat">${this.translationsObj.pending_caveat}</span>`;
    }
    return caption;
  }

  renderComponent(regionName) {
    console.log("Render component deaths",this);
    let addStateLine = false;
    if (regionName == 'California') {
      this.statedata = this.chartdata;
    } else if (this.statedata) {
      addStateLine = true;
    }

    let latestRec = this.chartdata.latest[this.chartOptions.latestField];
    // console.log("Deaths Increase",Math.abs(latestRec.new_deaths_delta_1_day),latestRec.new_deaths_delta_1_day);
    const repDict = {
      total_confirmed_deaths:formatValue(latestRec.total_confirmed_deaths,{format:'integer'}),
      new_deaths:formatValue(latestRec.new_deaths,{format:'integer'}),
      new_deaths_delta_1_day:formatValue(Math.abs(latestRec.new_deaths_delta_1_day),{format:'percent'}),
      deaths_per_100k_7_days:formatValue(latestRec.deaths_per_100k_7_days,{format:'number',min_decimals:1}),
      REGION:regionName,
    };
    if (!('chartTitleState' in this.translationsObj)) {
      this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitle, repDict) + " " + regionName;
    } 
    else if (regionName == 'California') {
      this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitleState, repDict);
    } else {
      this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitleCounty, repDict);
    }
    this.translationsObj.post_chartLegend1 = applySubstitutions(this.translationsObj.chartLegend1, repDict);
    this.translationsObj.post_chartLegend2 = applySubstitutions(latestRec.new_deaths_delta_1_day >= 0? this.translationsObj.chartLegend2Increase : this.translationsObj.chartLegend2Decrease, repDict);
    this.translationsObj.post_chartLegend3 = applySubstitutions(this.translationsObj.chartLegend3, repDict);
    this.translationsObj.currentLocation = regionName;

    // console.log("Translations obj",this.translationsObj);
    this.innerHTML = template.call(this,this.chartOptions, this.translationsObj);

    this.setupTabFilters();

    let renderOptions = {'tooltip_func':this.tooltip,
                        'extras_func':this.renderExtras,
                        'time_series_bars':this.chartdata.time_series[this.chartOptions.seriesField].VALUES,
                        'time_series_line':this.chartdata.time_series[this.chartOptions.seriesFieldAvg].VALUES,
                        'root_id':this.chartOptions.rootId,
                        'left_y_axis_legend':this.translationsObj[this.chartConfigKey+'_leftYAxisLegend'],
                        'right_y_axis_legend':this.translationsObj[this.chartConfigKey+'_rightYAxisLegend'],
                        'right_y_fmt':'integer',
                        'x_axis_legend':this.translationsObj[this.chartConfigKey+'_'+this.chartConfigFilter+'_xAxisLegend'],
                        'line_legend':this.regionName == 'California'? this.translationsObj.dayAverage : null,
                        };
    if (this.chartConfigFilter != 'reported') {
      renderOptions.pending_date = this.chartdata.latest[this.chartOptions.latestField].DEATH_UNCERTAINTY_PERIOD;
      renderOptions.pending_legend = this.translationsObj.pending;
    }
    if (addStateLine) {
      renderOptions.time_series_state_line = this.statedata.time_series[this.chartOptions.seriesFieldAvg].VALUES;
    }

    renderChart.call(this, renderOptions);
  }

  retrieveData(url, regionName) {
    window
      .fetch(url)
      .then((response) => response.json())
      .then(
        function (alldata) {
          // console.log("Race/Eth data data", alldata.data);
          this.regionName = regionName;
          this.metadata = alldata.meta;
          this.chartdata = alldata.data;
          this.renderComponent(regionName);
        }.bind(this)
      );
  }

  chartFilterSelectHandler(e) {
    console.log("deaths chartfilter");
    this.chartConfigFilter = e.detail.filterKey;
    if (this.chartConfigFilter != 'reported') {
      this.chartConfigFilter = 'death';
      document.querySelector('cagov-chart-filter-buttons.js-filter-deaths .small-tab[data-key="death"]').classList.add('active');
      document.querySelector('cagov-chart-filter-buttons.js-filter-deaths .small-tab[data-key="reported"]').classList.remove('active');
    } else {
      document.querySelector('cagov-chart-filter-buttons.js-filter-deaths .small-tab[data-key="death"]').classList.remove('active');
      document.querySelector('cagov-chart-filter-buttons.js-filter-deaths .small-tab[data-key="reported"]').classList.add('active');
    }
    this.chartOptions = chartConfig[this.chartConfigKey][this.chartConfigFilter];
    this.renderComponent(this.regionName);
  }

  tabFilterHandler(e) {
    this.chartFilterSelectHandler(e);
    const event = new window.CustomEvent('deaths-chart-filter-select',{detail:{filterKey: this.chartConfigFilter}});
    window.dispatchEvent(event);    
  }

  setupTabFilters() {

    let myFilter = document.querySelector("cagov-chart-filter-buttons.js-filter-deaths");
    myFilter.addEventListener(
      "filter-selected",
      this.tabFilterHandler.bind(this),
      false
    );
  }

  listenForLocations() {
    let searchElement = document.querySelector("cagov-county-search");
    searchElement.addEventListener(
      "county-selected",
      function (e) {
        this.county = e.detail.county;
        let searchURL = config.chartsStateDashTablesLoc + this.chartOptions.dataUrlCounty.replace(
          "<county>",
          this.county.toLowerCase().replace(/ /g, "_")
        );
        this.retrieveData(searchURL, e.detail.county);
      }.bind(this),
      false
    );
    window.addEventListener('cases-chart-filter-select', this.chartFilterSelectHandler.bind(this), false);
  }
}

window.customElements.define(
  "cagov-chart-dashboard-confirmed-deaths",
  CAGovDashboardConfirmedDeaths
);

// cagov-chart-dashboard-total-tests
class CAGovDashboardTotalTests extends window.HTMLElement {
  connectedCallback() {
    console.log("Loading CAGovDashboardTotalTests");
    this.translationsObj = getTranslations(this);
    this.chartConfigFilter = this.dataset.chartConfigFilter;
    this.chartConfigKey = this.dataset.chartConfigKey;

    this.chartOptions = chartConfig[this.chartConfigKey][this.chartConfigFilter];

    getScreenResizeCharts();

    this.screenDisplayType = window.charts
      ? window.charts.displayType
      : "desktop";

    this.chartBreakpointValues = chartConfig[
      this.screenDisplayType ? this.screenDisplayType : "desktop"
    ];
    this.dimensions = this.chartBreakpointValues;

    const handleChartResize = () => {
      getScreenResizeCharts();
      this.screenDisplayType = window.charts
        ? window.charts.displayType
        : "desktop";
      this.chartBreakpointValues = chartConfig[
        this.screenDisplayType ? this.screenDisplayType : "desktop"
      ];
    };

    window.addEventListener("resize", handleChartResize);

    // Set default values for data and labels
    this.dataUrl = config.chartsStateDashTablesLoc + this.chartOptions.dataUrl;

    this.retrieveData(this.dataUrl, 'California');

    rtlOverride(this); // quick fix for arabic

    this.listenForLocations();
  }

  ariaLabel(d, baselineData) {
    let caption = ''; // !!!
    return caption;
  }

  getLegendText() {
    return [];
    //   this.translationsObj.chartLegend1,
    //   this.translationsObj.chartLegend2,
    // ];
  }

  renderExtras(svg, data, x, y) {
  }

  getTooltipContent(di) {
    const barSeries = this.chartdata.time_series[this.chartOptions.seriesField].VALUES;
    const lineSeries = this.chartdata.time_series[this.chartOptions.seriesFieldAvg].VALUES;
    const repDict = {
      DATE:   reformatReadableDate(lineSeries[di].DATE),
      '7DAY_AVERAGE':formatValue(lineSeries[di].VALUE,{format:'number',min_decimals:1}),
      TOTAL_TESTS:formatValue(barSeries[di].VALUE,{format:'integer'}),
    };
    let caption = applySubstitutions(this.translationsObj.tooltipContent, repDict);
    let datumDate = parseSnowflakeDate(lineSeries[di].DATE);
    let pendingDate = parseSnowflakeDate(this.chartdata.latest[this.chartOptions.latestField].TESTING_UNCERTAINTY_PERIOD);
    if (+datumDate >= +pendingDate) {
      caption += `<br><span class="pending-caveat">${this.translationsObj.pending_caveat}</span>`;
    }
    return caption;
  }

  renderComponent(regionName) {

    let addStateLine = false;
    if (regionName == 'California') {
      this.statedata = this.chartdata;
    } else if (this.statedata) {
      addStateLine = true;
    }

    let latestRec = this.chartdata.latest[this.chartOptions.latestField];

    const repDict = {
      total_tests_performed:formatValue(latestRec.total_tests_performed,{format:'integer'}),
      new_tests_reported:formatValue(Math.abs(latestRec.new_tests_reported),{format:'integer'}),
      new_tests_reported_delta_1_day:formatValue(Math.abs(latestRec.new_tests_reported_delta_1_day),{format:'percent'}),
      REGION:regionName,
    };

    if (!('chartTitleState' in this.translationsObj)) {
      this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitle, repDict) + " " + regionName;
    } 
    else if (regionName == 'California') {
      this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitleState, repDict);
    } else {
      this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitleCounty, repDict);
    }
    // this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitle, repDict);
    this.translationsObj.post_chartLegend1 = applySubstitutions(this.translationsObj.chartLegend1, repDict);
    this.translationsObj.post_chartLegend2 = applySubstitutions(latestRec.new_tests_reported_delta_1_day >= 0? this.translationsObj.chartLegend2Increase : this.translationsObj.chartLegend2Decrease, repDict);
    this.translationsObj.currentLocation = regionName;

    this.innerHTML = template.call(this, this.chartOptions, this.translationsObj);
    this.setupTabFilters();

    let renderOptions = {'tooltip_func':this.tooltip,
                          'extras_func':this.renderExtras,
                          'time_series_bars':this.chartdata.time_series[this.chartOptions.seriesField].VALUES,
                          'time_series_line':this.chartdata.time_series[this.chartOptions.seriesFieldAvg].VALUES,
                          'root_id':this.chartOptions.rootId,
                          'left_y_axis_legend':this.translationsObj[this.chartConfigKey+'_leftYAxisLegend'],
                          'right_y_axis_legend':this.translationsObj[this.chartConfigKey+'_rightYAxisLegend'],
                          'right_y_fmt':'integer',
                          'x_axis_legend':this.translationsObj[this.chartConfigKey+'_'+this.chartConfigFilter+'_xAxisLegend'],
                          'line_legend':this.regionName == 'California'? this.translationsObj.dayAverage : null,
                        };
    if (this.chartConfigFilter != 'reported') {
      renderOptions.pending_date = this.chartdata.latest[this.chartOptions.latestField].TESTING_UNCERTAINTY_PERIOD;
      renderOptions.pending_legend = this.translationsObj.pending;
    }
    if (addStateLine) {
      renderOptions.time_series_state_line = this.statedata.time_series[this.chartOptions.seriesFieldAvg].VALUES;
    }
      
    renderChart.call(this, renderOptions);
  }

  retrieveData(url, regionName) {
    window
      .fetch(url)
      .then((response) => response.json())
      .then(
        function (alldata) {
          // console.log("Race/Eth data data", alldata.data);
          this.regionName = regionName;
          this.metadata = alldata.meta;
          this.chartdata = alldata.data;
          this.renderComponent(regionName);

        }.bind(this)
      );
  }

  setupTabFilters() {
    let myFilter = document.querySelector("cagov-chart-filter-buttons.js-filter-tests");
    if(myFilter) {
      myFilter.addEventListener(
        "filter-selected",
        function (e) {
          this.chartConfigFilter = e.detail.filterKey;
          this.chartOptions = chartConfig[this.chartConfigKey][this.chartConfigFilter];
          // if I am in a county have to do county url replacement
          config.chartsStateDashTablesLoc + this.chartOptions.dataUrl;
          if(this.county && this.county !== 'California') {
            config.chartsStateDashTablesLoc + this.chartOptions.dataUrlCounty.replace(
              "<county>",
              this.county.toLowerCase().replace(/ /g, "_")
            );
          }
          this.renderComponent(this.regionName);
          // this.retrieveData(searchURL, this.regionName);
        }.bind(this),
        false
      );
    }    
  }

  listenForLocations() {
    let searchElement = document.querySelector("cagov-county-search");
    searchElement.addEventListener(
      "county-selected",
      function (e) {
        this.county = e.detail.county;
        let searchURL = config.chartsStateDashTablesLoc + this.chartOptions.dataUrlCounty.replace(
          "<county>",
          this.county.toLowerCase().replace(/ /g, "_")
        );
        this.retrieveData(searchURL, e.detail.county);
      }.bind(this),
      false
    );
  }
}

window.customElements.define(
  "cagov-chart-dashboard-total-tests",
  CAGovDashboardTotalTests
);

// cagov-chart-dashboard-positivity-rate
class CAGovDashboardPositivityRate extends window.HTMLElement {
  connectedCallback() {
    console.log("Loading CAGovDashboardPositivityRate");
    this.translationsObj = getTranslations(this);
    this.chartConfigFilter = this.dataset.chartConfigFilter;
    this.chartConfigKey = this.dataset.chartConfigKey;
    this.chartOptions = chartConfig[this.chartConfigKey][this.chartConfigFilter];
    this.stateData = null;

    // Settings and initial values
    // this.chartOptions = {
    //   chartName: 'cagov-chart-dashboard-positivity-rate',
    //   // Data
    //   dataUrl:
    //     config.chartsStateDashTablesLoc + "positivity-rate/california.json", // Overwritten by county.
    //   dataUrlCounty:
    //     config.chartsStateDashTablesLoc + "positivity-rate/<county>.json",

    //   desktop: {
    //     fontSize: 14,
    //     width: 400,     height: 300,
    //     margin: {   left: 50,   top: 30,  right: 60,  bottom: 45 },
    //   },
    //   tablet: {
    //     fontSize: 14,
    //     width: 400,     height: 300,
    //     margin: {   left: 50,   top: 30,  right: 60,  bottom: 45 },
    //   },
    //   mobile: {
    //     fontSize: 12,
    //     width: 400,     height: 300,
    //     margin: {   left: 50,   top: 30,  right: 60,  bottom: 45 },
    //   },
    //   retina: {
    //     fontSize: 12,
    //     width: 400,     height: 300,
    //     margin: {   left: 50,   top: 30,  right: 60,  bottom: 45 },
    //   },
    // };

    getScreenResizeCharts();

    this.screenDisplayType = window.charts
      ? window.charts.displayType
      : "desktop";

    this.chartBreakpointValues = chartConfig[
      this.screenDisplayType ? this.screenDisplayType : "desktop"
    ];
    this.dimensions = this.chartBreakpointValues;

    const handleChartResize = () => {
      getScreenResizeCharts();
      this.screenDisplayType = window.charts
        ? window.charts.displayType
        : "desktop";
      this.chartBreakpointValues = chartConfig[
        this.screenDisplayType ? this.screenDisplayType : "desktop"
      ];
    };

    window.addEventListener("resize", handleChartResize);


    // Set default values for data and labels
    this.dataUrl = config.chartsStateDashTablesLoc + this.chartOptions.dataUrl;

    this.retrieveData(this.dataUrl, 'California');

    rtlOverride(this); // quick fix for arabic

    this.listenForLocations();
  }

  ariaLabel(d, baselineData) {
    let caption = ''; // !!!
    return caption;
  }

  getLegendText() {
    return [];
    //   this.translationsObj.chartLegend1,
    //   this.translationsObj.chartLegend2,
    // ];
  }

  renderExtras(svg, data, x, y) {
  }

  getTooltipContent(di) {    
    const barSeries = this.chartdata.time_series[this.chartOptions.seriesField].VALUES;
    const lineSeries = this.chartdata.time_series[this.chartOptions.seriesFieldAvg].VALUES;
    // console.log("getTooltipContent",di,lineSeries);
    const repDict = {
      DATE:   reformatReadableDate(lineSeries[di].DATE),
      '7DAY_POSRATE':formatValue(lineSeries[di].VALUE,{format:'percent'}),
      TOTAL_TESTS:formatValue(barSeries[di].VALUE,{format:'integer'}),
    };
    let caption = applySubstitutions(this.translationsObj.tooltipContent, repDict);
    let datumDate = parseSnowflakeDate(lineSeries[di].DATE);
    let pendingDate = parseSnowflakeDate(this.chartdata.latest[this.chartOptions.latestField].TESTING_UNCERTAINTY_PERIOD);
    if (+datumDate >= +pendingDate) {
      caption += `<br><span class="pending-caveat">${this.translationsObj.pending_caveat}</span>`;
    }
    return caption;
  }

  renderComponent(regionName) {
    let addStateLine = false;
    if (regionName == 'California') {
      this.statedata = this.chartdata;
    } else if (this.statedata) {
      addStateLine = true;
    }

    let latestRec = this.chartdata.latest[this.chartOptions.latestField];
    const repDict = {
      test_positivity_7_days:formatValue(latestRec.test_positivity_7_days,{format:'percent'}),
      test_positivity_7_days_delta_7_days:formatValue(Math.abs(latestRec.test_positivity_7_days_delta_7_days),{format:'percent'}),
      REGION:regionName,
    };
    
    if (!('chartTitleState' in this.translationsObj)) {
      this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitle, repDict) + " " + regionName;
    } 
    else if (regionName == 'California') {
      this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitleState, repDict);
    } else {
      this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitleCounty, repDict);
    }
    // this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitle, repDict);
    this.translationsObj.post_chartLegend1 = applySubstitutions(this.translationsObj.chartLegend1, repDict);
    this.translationsObj.post_chartLegend2 = applySubstitutions(latestRec.test_positivity_7_days_delta_7_days >= 0? this.translationsObj.chartLegend2Increase : this.translationsObj.chartLegend2Decrease, repDict);
    this.translationsObj.currentLocation = regionName;

    this.innerHTML = template.call(this, this.chartOptions, this.translationsObj);
      
    let renderOptions = {'tooltip_func':this.tooltip,
                          'extras_func':this.renderExtras,
                          'time_series_bars':this.chartdata.time_series[this.chartOptions.seriesField].VALUES,
                          'time_series_line':this.chartdata.time_series[this.chartOptions.seriesFieldAvg].VALUES,
                          'left_y_fmt':'pct',
                          'root_id':'pos-rate',
                          'left_y_axis_legend':this.translationsObj.leftYAxisLegend,
                          'right_y_axis_legend':this.translationsObj.rightYAxisLegend,
                          'right_y_fmt':'integer',
                          'x_axis_legend':this.translationsObj.xAxisLegend,
                          'line_legend':this.regionName == 'California'? this.translationsObj.dayRate : null,
                          'pending_date':this.chartdata.latest[this.chartOptions.latestField].TESTING_UNCERTAINTY_PERIOD,
                          'pending_legend':this.translationsObj.pending,
                        };
      if (addStateLine) {
        renderOptions.time_series_state_line = this.statedata.time_series[this.chartOptions.seriesFieldAvg].VALUES;
      }
      renderChart.call(this, renderOptions);
  }

  retrieveData(url, regionName) {
    window
      .fetch(url)
      .then((response) => response.json())
      .then(
        function (alldata) {
          // console.log("Race/Eth data data", alldata.data);
          this.regionName = regionName;
          this.metadata = alldata.meta;
          this.chartdata = alldata.data;
          this.renderComponent(regionName);
        }.bind(this)
      );
  }

  listenForLocations() {
    let searchElement = document.querySelector("cagov-county-search");
    searchElement.addEventListener(
      "county-selected",
      function (e) {
        this.county = e.detail.county;
        let searchURL = config.chartsStateDashTablesLoc + this.chartOptions.dataUrlCounty.replace(
          "<county>",
          this.county.toLowerCase().replace(/ /g, "_")
        );
        this.retrieveData(searchURL, e.detail.county);
      }.bind(this),
      false
    );
  }
}

window.customElements.define(
  "cagov-chart-dashboard-positivity-rate",
  CAGovDashboardPositivityRate
);

// cagov-chart-dashboard-patients
class CAGovDashboardPatients extends window.HTMLElement {
  connectedCallback() {
    console.log("Loading CAGovDashboardPatients");
    this.translationsObj = getTranslations(this);
    this.chartConfigFilter = this.dataset.chartConfigFilter;
    this.chartConfigKey = this.dataset.chartConfigKey;

    // Settings and initial values
    this.chartOptions = chartConfig[this.chartConfigKey][this.chartConfigFilter];

    getScreenResizeCharts();

    this.screenDisplayType = window.charts
      ? window.charts.displayType
      : "desktop";
    // console.log("this.screenDisplayType",this.screenDisplayType);

    this.chartBreakpointValues = chartConfig[
      this.screenDisplayType ? this.screenDisplayType : "desktop"
    ];
    this.chartBreakpointValues = JSON.parse(JSON.stringify(this.chartBreakpointValues));
    this.dimensions = this.chartBreakpointValues;
    this.dimensions.margin.right = 20;

    const handleChartResize = () => {
      getScreenResizeCharts();
      this.screenDisplayType = window.charts
        ? window.charts.displayType
        : "desktop";
      this.chartBreakpointValues = chartConfig[
        this.screenDisplayType ? this.screenDisplayType : "desktop"
      ];
    };

    window.addEventListener("resize", handleChartResize);

    // Set default values for data and labels
    this.dataUrl = config.chartsStateDashTablesLoc + this.chartOptions.dataUrl;

    this.retrieveData(this.dataUrl, 'California');

    rtlOverride(this); // quick fix for arabic

    this.listenForLocations();
  }

  ariaLabel(d, baselineData) {
    let caption = ''; // !!!
    return caption;
  }

  getLegendText() {
    return [];
    //   this.translationsObj.chartLegend1,
    //   this.translationsObj.chartLegend2,
    // ];
  }

  renderExtras(svg, data, x, y) {
  }

  getTooltipContent(di) {
    const barSeries = this.chartdata.time_series[this.chartOptions.seriesField].VALUES;
    const lineSeries = this.chartdata.time_series[this.chartOptions.seriesFieldAvg].VALUES;
    // console.log("getTooltipContent",di,lineSeries);
    const repDict = {
      DATE:   reformatReadableDate(barSeries[di].DATE),
      '14DAY_AVERAGE':formatValue(lineSeries[di].VALUE,{format:'number',min_decimals:1}),
      TOTAL_HOSPITALIZED:formatValue(barSeries[di].VALUE,{format:'integer'}),
    };
    return applySubstitutions(this.translationsObj.tooltipContent, repDict);
  }

  renderComponent(regionName) {
    console.log("Setting up patients replacements",this.chartConfigFilter,this.chartConfigKey,regionName);

    var latestRec = this.chartdata.latest[this.chartOptions.latestField];

    const repDict = {
      TOTAL:formatValue(latestRec.TOTAL,{format:'integer'}),
      CHANGE:formatValue(Math.abs(latestRec.CHANGE),{format:'integer'}),
      CHANGE_FACTOR:formatValue(Math.abs(latestRec.CHANGE_FACTOR),{format:'percent'}),
      REGION:regionName,
    };

    if (this.chartConfigFilter == 'icu') {
      if (!('chartTitleStateICU' in this.translationsObj)) {
        this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitleICU, repDict) + " " + regionName;
      } 
      else if (regionName == 'California') {
        this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitleStateICU, repDict);
      } else {
        this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitleCountyICU, repDict);
      }
      // this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitleICU, repDict);
      this.translationsObj.post_chartLegend1 = applySubstitutions(this.translationsObj.chartLegend1ICU, repDict);
      this.translationsObj.post_chartLegend2 = applySubstitutions(latestRec.CHANGE_FACTOR >= 0? this.translationsObj.chartLegend2IncreaseICU : this.translationsObj.chartLegend2DecreaseICU, repDict);
      this.translationsObj.currentLocation = regionName;
    } else {
      if (!('chartTitleState' in this.translationsObj)) {
        this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitle, repDict) + " " + regionName;
      } 
      else if (regionName == 'California') {
        this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitleState, repDict);
      } else {
        this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitleCounty, repDict);
      }
      // this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitle, repDict);
      this.translationsObj.post_chartLegend1 = applySubstitutions(this.translationsObj.chartLegend1, repDict);
      this.translationsObj.post_chartLegend2 = applySubstitutions(latestRec.CHANGE_FACTOR >= 0? this.translationsObj.chartLegend2Increase : this.translationsObj.chartLegend2Decrease, repDict);
      this.translationsObj.currentLocation = regionName;
    }
    
    this.innerHTML = template.call(this, this.chartOptions, this.translationsObj);
    this.setupTabFilters();

    let renderOptions = {'tooltip_func':this.tooltip,
                      'extras_func':this.renderExtras,
                      'time_series_bars':this.chartdata.time_series[this.chartOptions.seriesField].VALUES,
                      'time_series_line':this.chartdata.time_series[this.chartOptions.seriesFieldAvg].VALUES,
                      'root_id':this.chartOptions.rootId,
                      'x_axis_legend':this.translationsObj.xAxisLegend,
                      'line_legend':this.translationsObj.dayAverage,
                      'month_modulo':2,
                    };
    renderChart.call(this, renderOptions);
  }

  retrieveData(url, regionName) {
    if (regionName == 'Alpine') {
      let alldata = {
        "meta": {
          "PUBLISHED_DATE": getSnowflakeStyleDate(0),
          "coverage": regionName,
        },
        "data": {
          "latest": {
            "HOSPITALIZED_PATIENTS": {
              "TOTAL": 0,
              "CHANGE": 0,
              "CHANGE_FACTOR": 0,
              "POPULATION": 13354
            },
            "ICU_PATIENTS": {
              "TOTAL": 0,
              "CHANGE": 0,
              "CHANGE_FACTOR": 0,
              "POPULATION": 13354
            }
          },
          "time_series": {
            "HOSPITALIZED_PATIENTS": {
              "DATE_RANGE": {
                "MINIMUM": "2020-03-30",
                "MAXIMUM": getSnowflakeStyleDate(-1)
              },
             "VALUES": []
            },
            "ICU_PATIENTS": {
              "DATE_RANGE": {
                "MINIMUM": "2020-03-30",
                "MAXIMUM": getSnowflakeStyleDate(-1)
              },
             "VALUES": []
            },
            "HOSPITALIZED_PATIENTS_14_DAY_AVG": {
              "DATE_RANGE": {
                "MINIMUM": "2020-03-30",
                "MAXIMUM": getSnowflakeStyleDate(-1)
              },
             "VALUES": []
            },
            "ICU_PATIENTS_14_DAY_AVG": {
              "DATE_RANGE": {
                "MINIMUM": "2020-03-30",
                "MAXIMUM": getSnowflakeStyleDate(-1)
              },
             "VALUES": []
            },
          }
        }
      };

      let sdate = parseSnowflakeDate(alldata.data.time_series.HOSPITALIZED_PATIENTS.DATE_RANGE.MINIMUM);
      let today = new Date();
      while (+sdate < +today) {
        alldata.data.time_series.HOSPITALIZED_PATIENTS.VALUES.push({DATE:getSnowflakeStyleDateJS(sdate),VALUE:0});
        alldata.data.time_series.ICU_PATIENTS.VALUES.push({DATE:getSnowflakeStyleDateJS(sdate),VALUE:0});
        alldata.data.time_series.HOSPITALIZED_PATIENTS_14_DAY_AVG.VALUES.push({DATE:getSnowflakeStyleDateJS(sdate),VALUE:0});
        alldata.data.time_series.ICU_PATIENTS_14_DAY_AVG.VALUES.push({DATE:getSnowflakeStyleDateJS(sdate),VALUE:0});
        sdate.setDate(sdate.getDate() + 1);
      }

      this.metadata = alldata.meta;
      this.chartdata = alldata.data;
      this.regionName = regionName;
      this.renderComponent(regionName);
    } else {
      window
        .fetch(url)
        .then((response) => response.json() )
        .then(
          function (alldata) {
            // console.log("Race/Eth data data", alldata.data);
            this.metadata = alldata.meta;
            this.chartdata = alldata.data;
            this.regionName = regionName;
            this.renderComponent(regionName);
          }.bind(this)
        );
    }
  }

  setupTabFilters() {
    let myFilter = document.querySelector("cagov-chart-filter-buttons.js-filter-patients");
    myFilter.addEventListener(
      "filter-selected",
      function (e) {
        this.chartConfigFilter = e.detail.filterKey;
        this.chartOptions = chartConfig[this.chartConfigKey][this.chartConfigFilter];
        // if I am in a county have to do county url replacement
        config.chartsStateDashTablesLoc + this.chartOptions.dataUrl;
        if(this.county && this.county !== 'California') {
          config.chartsStateDashTablesLoc + this.chartOptions.dataUrlCounty.replace(
            "<county>",
            this.county.toLowerCase().replace(/ /g, "_")
          );
        }
        this.renderComponent(this.regionName);
        // this.retrieveData(searchURL, this.regionName);
      }.bind(this),
      false
    );
  }

  listenForLocations() {
    let searchElement = document.querySelector("cagov-county-search");
    searchElement.addEventListener(
      "county-selected",
      function (e) {
        this.county = e.detail.county;
        let searchURL = config.chartsStateDashTablesLoc + this.chartOptions.dataUrlCounty.replace(
          "<county>",
          this.county.toLowerCase().replace(/ /g, "_")
        );
        this.retrieveData(searchURL, e.detail.county);
      }.bind(this),
      false
    );
  }
}

window.customElements.define(
  "cagov-chart-dashboard-patients",
  CAGovDashboardPatients
);

// cagov-chart-dashboard-icu-beds
class CAGovDashboardICUBeds extends window.HTMLElement {
  connectedCallback() {
    console.log("Loading CAGovDashboardICUBeds");
    this.translationsObj = getTranslations(this);
    this.chartConfigFilter = this.dataset.chartConfigFilter;
    this.chartConfigKey = this.dataset.chartConfigKey;

    // Settings and initial values
    this.chartOptions = chartConfig[this.chartConfigKey][this.chartConfigFilter];

    getScreenResizeCharts();

    this.screenDisplayType = window.charts
      ? window.charts.displayType
      : "desktop";
    // console.log("this.screenDisplayType",this.screenDisplayType);

    this.chartBreakpointValues = chartConfig[
      this.screenDisplayType ? this.screenDisplayType : "desktop"
    ];
    this.chartBreakpointValues = JSON.parse(JSON.stringify(this.chartBreakpointValues));
    this.dimensions = this.chartBreakpointValues;
    this.dimensions.margin.right = 20;

    const handleChartResize = () => {
      getScreenResizeCharts();
      this.screenDisplayType = window.charts
        ? window.charts.displayType
        : "desktop";
      this.chartBreakpointValues = chartConfig[
        this.screenDisplayType ? this.screenDisplayType : "desktop"
      ];
    };

    window.addEventListener("resize", handleChartResize);

    // Set default values for data and labels
    this.dataUrl = config.chartsStateDashTablesLoc + this.chartOptions.dataUrl;

    this.retrieveData(this.dataUrl, 'California');

    rtlOverride(this); // quick fix for arabic

    this.listenForLocations();
  }

  ariaLabel(d, baselineData) {
    let caption = ''; // !!!
    return caption;
  }

  getLegendText() {
    return [];
    //   this.translationsObj.chartLegend1,
    //   this.translationsObj.chartLegend2,
    // ];
  }

  renderExtras(svg, data, x, y) {
  }

  getTooltipContent(di) {
    const barSeries = this.chartdata.time_series[this.chartOptions.seriesField].VALUES;
    this.chartdata.time_series[this.chartOptions.seriesFieldAvg].VALUES;
    // console.log("getTooltipContent",di,lineSeries);
    const repDict = {
      DATE:   reformatReadableDate(barSeries[di].DATE),
      VALUE:formatValue(barSeries[di].VALUE,{format:'integer'}),
    };
    return applySubstitutions(this.translationsObj.tooltipContent, repDict);
  }

  renderComponent(regionName) {

    var latestRec = this.chartdata.latest[this.chartOptions.latestField];

    const repDict = {
      TOTAL:formatValue(latestRec.TOTAL,{format:'integer'}),
      CHANGE:formatValue(Math.abs(latestRec.CHANGE),{format:'integer'}),
      CHANGE_FACTOR:formatValue(Math.abs(latestRec.CHANGE_FACTOR),{format:'percent'}),
      REGION:regionName,
    };
    if (!('chartTitleState' in this.translationsObj)) {
      this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitle, repDict) + " " + regionName;
    }
    else if (regionName == 'California') {
      this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitleState, repDict);
    } else {
      this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitleCounty, repDict);
    }
    // this.translationsObj.post_chartTitle = applySubstitutions(this.translationsObj.chartTitle, repDict);
    this.translationsObj.post_chartLegend1 = applySubstitutions(this.translationsObj.chartLegend1, repDict);
    this.translationsObj.post_chartLegend2 = applySubstitutions(latestRec.CHANGE_FACTOR >= 0? this.translationsObj.chartLegend2Increase : this.translationsObj.chartLegend2Decrease, repDict);
    this.translationsObj.currentLocation = regionName;

    this.innerHTML = template.call(this, this.chartOptions, this.translationsObj);

    let renderOptions = { 'tooltip_func':this.tooltip,
                      'extras_func':this.renderExtras,
                      'time_series_bars':this.chartdata.time_series[this.chartOptions.seriesField].VALUES,
                      'time_series_line':this.chartdata.time_series[this.chartOptions.seriesFieldAvg].VALUES,
                      'root_id':this.chartOptions.rootId,
                      'x_axis_legend':this.translationsObj.xAxisLegend,
                      'month_modulo':2,
                    };
    renderChart.call(this, renderOptions);
    
  }

  retrieveData(url, regionName) {
    if (regionName == 'Alpine') {
      let alldata = {
        "meta": {
          "PUBLISHED_DATE": getSnowflakeStyleDate(0),
          "coverage": regionName,
        },
        "data": {
          "latest": {
            "ICU_BEDS": {
              "TOTAL": 0,
              "CHANGE": 0,
              "CHANGE_FACTOR": 0,
              "POPULATION": 13354
            },
          },
          "time_series": {
            "ICU_BEDS": {
              "DATE_RANGE": {
                "MINIMUM": "2020-03-30",
                "MAXIMUM": getSnowflakeStyleDate(-1)
              },
             "VALUES": []
            },
          }
        }
      };

      let sdate = parseSnowflakeDate(alldata.data.time_series.ICU_BEDS.DATE_RANGE.MINIMUM);
      let today = new Date();
      while (+sdate < +today) {
        alldata.data.time_series.ICU_BEDS.VALUES.push({DATE:getSnowflakeStyleDateJS(sdate),VALUE:0});
        sdate.setDate(sdate.getDate() + 1);
      }

      this.metadata = alldata.meta;
      this.chartdata = alldata.data;
      this.regionName = regionName;
      this.renderComponent(regionName);
    } else {
      window
        .fetch(url)
        .then((response) => response.json() )
        .then(
          function (alldata) {
            this.metadata = alldata.meta;
            this.chartdata = alldata.data;
            this.renderComponent(regionName);
          }.bind(this)
        );
    }
    }

  listenForLocations() {
    let searchElement = document.querySelector("cagov-county-search");
    searchElement.addEventListener(
      "county-selected",
      function (e) {
        this.county = e.detail.county;
        let searchURL = config.chartsStateDashTablesLoc + this.chartOptions.dataUrlCounty.replace(
          "<county>",
          this.county.toLowerCase().replace(/ /g, "_")
        );
        this.retrieveData(searchURL, e.detail.county);
      }.bind(this),
      false
    );
  }
}

window.customElements.define(
  "cagov-chart-dashboard-icu-beds",
  CAGovDashboardICUBeds
);

document.getElementById("location-query");
document.getElementById("clearCounty");

// Map responsivness
var divElement = document.querySelector('.col-lg-10');
if ( divElement.offsetWidth > 920 ) ; 
  else if ( (divElement.offsetWidth > 910) && (divElement.offsetWidth < 920)) ; 
  else if ( (divElement.offsetWidth > 800) && (divElement.offsetWidth < 910) ) ; 
  else if ( (divElement.offsetWidth > 700) && (divElement.offsetWidth < 879) ) ; 
  else if ( (divElement.offsetWidth > 600) && (divElement.offsetWidth < 700) ) ; 
  else if ( (divElement.offsetWidth > 500) && (divElement.offsetWidth < 600) ) ; 
  else ;

function resetGroupToggles() {
  console.log("Reset Group Toggles");
  groupTogglers.forEach(toggle => {
    toggle.classList.remove('toggle-active');
  });
  document.getElementById('gender-graph').style.display = 'none';
  document.getElementById('ethnicity-graph').style.display = 'none';
  document.getElementById('age-graph').style.display = 'none';
}

let groupTogglers = document.querySelectorAll('.js-toggle-group');
groupTogglers.forEach(toggle => {
  toggle.addEventListener('click',function(event) {
    event.preventDefault();
    resetGroupToggles();
    if(this.classList.contains('gender')) {
      document.getElementById('gender-graph').style.display = 'block';
      this.classList.add('toggle-active');
    }
    if(this.classList.contains('age')) {
      document.getElementById('age-graph').style.display = 'block'; 
      this.classList.add('toggle-active');
    }
    if(this.classList.contains('ethnicity')) {
      document.getElementById('ethnicity-graph').style.display = 'block';      
    }
    this.classList.add('toggle-active');
  });
});

		</script>
	

<script nomodule src="https://d3js.org/d3.v5.min.js"></script><!-- lot of transpilation issues, using older d3 for ie -->
<script nomodule src="/js/es5.js"></script>
<cagov-anchor-events />
 <!-- Do not display go-to-top on homepage. -->
	<cagov-go-to-top data-hide-after="7000" data-label="Top"></cagov-go-to-top>

<script type="text/javascript">	
  {	
    function googleTranslateElementInit() {	
      new google.translate.TranslateElement({	
          pageLanguage: 'zh-Hans',
          layout: google.translate.TranslateElement.InlineLayout.VERTICAL	
         },	
        'google_translate_element'	
      );	
    }	
    function addGoogleTranslateCode() {	
      const storagekey = 'google_translate_page_used';if (sessionStorage.getItem(storagekey)) {	
        const JS= document.createElement('script');	
        JS.type='text/javascript';	
        JS.defer='defer';	
        JS.src='//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit';	
        document.body.appendChild(JS);	
      }	
    }	
    addGoogleTranslateCode();	
  }({});	
  </script>

    
    
  </body>
</html>
